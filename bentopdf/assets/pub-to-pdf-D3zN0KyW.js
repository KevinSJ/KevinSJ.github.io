const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-DMkQATzN.js","assets/main-Dqs2Ohqn.js","assets/style-CNx3HTbi.js","assets/style-B6mkOetO.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as $,i as k}from"./style-CNx3HTbi.js";import"./version-D4ympJL5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-ODFatrFN.js";import{s as n,a as u,b as f,d as x,h as E,_ as D,f as N}from"./main-Dqs2Ohqn.js";import{g as P}from"./libreoffice-loader-CCIf03AR.js";import"./mobileMenu-BoMunYmR.js";const T=[".pub"],L="PUB";document.addEventListener("DOMContentLoaded",()=>{n.files=[];const c=document.getElementById("file-input"),r=document.getElementById("drop-zone"),v=document.getElementById("convert-options"),d=document.getElementById("file-display-area"),m=document.getElementById("file-controls"),h=document.getElementById("add-more-btn"),y=document.getElementById("clear-files-btn"),b=document.getElementById("back-to-tools"),B=document.getElementById("process-btn");b&&b.addEventListener("click",()=>{window.location.href="/bentopdf/"});const p=async()=>{if(v)if(n.files.length>0){if(d){d.innerHTML="";for(let e=0;e<n.files.length;e++){const t=n.files[e],s=document.createElement("div");s.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const i=document.createElement("div");i.className="flex flex-col overflow-hidden";const o=document.createElement("div");o.className="truncate font-medium text-gray-200 text-sm mb-1",o.textContent=t.name;const a=document.createElement("div");a.className="text-xs text-gray-400",a.textContent=N(t.size),i.append(o,a);const l=document.createElement("button");l.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",l.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',l.onclick=()=>{n.files=n.files.filter((C,I)=>I!==e),p()},s.append(i,l),d.appendChild(s)}$({icons:k})}m&&m.classList.remove("hidden"),v.classList.remove("hidden")}else d&&(d.innerHTML=""),m&&m.classList.add("hidden"),v.classList.add("hidden")},g=()=>{n.files=[],p()},_=async()=>{if(n.files.length===0){u("No Files",`Please select at least one ${L} file.`);return}try{const e=P();if(f("Loading engine..."),await e.initialize(t=>{f(t.message,t.percent)}),n.files.length===1){const t=n.files[0];f(`Converting ${t.name}...`);const s=await e.convertToPdf(t),i=t.name.replace(/\.[^/.]+$/,"");x(s,`${i}.pdf`),E(),u("Conversion Complete",`Successfully converted ${t.name} to PDF.`,"success",()=>g())}else{f("Converting multiple files...");const t=(await D(async()=>{const{default:o}=await import("./jszip.min-DMkQATzN.js").then(a=>a.j);return{default:o}},__vite__mapDeps([0,1,2,3,4]))).default,s=new t;for(let o=0;o<n.files.length;o++){const a=n.files[o];f(`Converting ${o+1}/${n.files.length}: ${a.name}...`);const l=await e.convertToPdf(a),C=a.name.replace(/\.[^/.]+$/,"");s.file(`${C}.pdf`,l)}const i=await s.generateAsync({type:"blob"});x(i,`${L.toLowerCase()}-to-pdf.zip`),E(),u("Conversion Complete",`Successfully converted ${n.files.length} files to PDF.`,"success",()=>g())}}catch(e){E();const t=e instanceof Error?e.message:"Unknown error";console.error(`[${L}ToPDF] Error:`,e),u("Error",`An error occurred during conversion. Error: ${t}`)}},w=e=>{if(e&&e.length>0){const t=Array.from(e).filter(s=>{const i="."+s.name.split(".").pop()?.toLowerCase();return T.includes(i)});t.length>0&&(n.files=[...n.files,...t],p())}};c&&r&&(c.addEventListener("change",e=>w(e.target.files)),r.addEventListener("dragover",e=>{e.preventDefault(),r.classList.add("bg-gray-700")}),r.addEventListener("dragleave",e=>{e.preventDefault(),r.classList.remove("bg-gray-700")}),r.addEventListener("drop",e=>{e.preventDefault(),r.classList.remove("bg-gray-700"),w(e.dataTransfer?.files??null)}),c.addEventListener("click",()=>{c.value=""})),h&&h.addEventListener("click",()=>c.click()),y&&y.addEventListener("click",g),B&&B.addEventListener("click",_),p()});
