import{c as L,i as h}from"./style-D1FQfXNQ.js";import"./version-Dw8ZKLCV.js";import"./simple-mode-footer-D78rH_WB.js";import{a as g,f as B,b as E,m as I,n as F,d as b,h as w}from"./main-Da82M_MD.js";import"./mobileMenu-BoMunYmR.js";let i=[],u="upload";const D=/[\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u08A0-\u08FF\uFB1D-\uFB4F\uFB50-\uFDFF\uFE70-\uFEFF]/;function k(e){return D.test(e)}const p=()=>{const e=document.getElementById("file-display-area"),t=document.getElementById("file-controls"),c=document.getElementById("drop-zone");!e||!t||!c||(e.innerHTML="",i.length>0&&u==="upload"?(c.classList.add("hidden"),t.classList.remove("hidden"),i.forEach((r,d)=>{const a=document.createElement("div");a.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const o=document.createElement("span");o.className="truncate font-medium text-gray-200",o.textContent=r.name;const n=document.createElement("span");n.className="text-gray-400 text-xs ml-2",n.textContent=`(${B(r.size)})`;const l=document.createElement("button");l.className="ml-4 text-red-400 hover:text-red-300",l.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',l.onclick=()=>{i=i.filter((f,m)=>m!==d),p()},a.append(o,n,l),e.appendChild(a)}),L({icons:h})):(c.classList.remove("hidden"),t.classList.add("hidden")))},P=()=>{i=[];const e=document.getElementById("file-input"),t=document.getElementById("text-input");e&&(e.value=""),t&&(t.value=""),p()};async function T(){const e=parseInt(document.getElementById("font-size").value)||12,t=document.getElementById("page-size").value,c=document.getElementById("font-family")?.value||"helv",r=document.getElementById("text-color")?.value||"#000000";if(u==="upload"&&i.length===0){g("No Files","Please select at least one text file.");return}if(u==="text"&&!document.getElementById("text-input").value.trim()){g("No Text","Please enter some text to convert.");return}E("Loading engine...");try{const d=new I(F("pymupdf"));await d.load();let a="";if(u==="upload")for(const n of i){const l=await n.text();a+=l+`

`}else a=document.getElementById("text-input").value;E("Creating PDF...");const o=await d.textToPdf(a,{fontSize:e,pageSize:t,fontName:c,textColor:r,margins:72});b(o,"text_to_pdf.pdf"),g("Success","Text converted to PDF successfully!","success",()=>{P()})}catch(d){console.error("[TxtToPDF] Error:",d),g("Error",`Failed to convert text to PDF. ${d.message||""}`)}finally{w()}}function C(e){const t=e.value;k(t)?(e.style.direction="rtl",e.style.textAlign="right"):(e.style.direction="ltr",e.style.textAlign="left")}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),c=document.getElementById("add-more-btn"),r=document.getElementById("clear-files-btn"),d=document.getElementById("process-btn"),a=document.getElementById("back-to-tools"),o=document.getElementById("txt-mode-upload-btn"),n=document.getElementById("txt-mode-text-btn"),l=document.getElementById("txt-upload-panel"),f=document.getElementById("txt-text-panel"),m=document.getElementById("text-input");a&&a.addEventListener("click",()=>{window.location.href="/"}),o&&n&&l&&f&&(o.addEventListener("click",()=>{u="upload",o.classList.remove("bg-gray-700","text-gray-300"),o.classList.add("bg-indigo-600","text-white"),n.classList.remove("bg-indigo-600","text-white"),n.classList.add("bg-gray-700","text-gray-300"),l.classList.remove("hidden"),f.classList.add("hidden")}),n.addEventListener("click",()=>{u="text",n.classList.remove("bg-gray-700","text-gray-300"),n.classList.add("bg-indigo-600","text-white"),o.classList.remove("bg-indigo-600","text-white"),o.classList.add("bg-gray-700","text-gray-300"),f.classList.remove("hidden"),l.classList.add("hidden")})),m&&m.addEventListener("input",()=>{C(m)});const x=s=>{if(!s||s.length===0)return;const y=Array.from(s).filter(v=>v.name.toLowerCase().endsWith(".txt")||v.type==="text/plain");y.length<s.length&&g("Invalid Files","Some files were skipped. Only text files are allowed."),y.length>0&&(i=[...i,...y],p())};e&&t&&(e.addEventListener("change",s=>{x(s.target.files)}),t.addEventListener("dragover",s=>{s.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",s=>{s.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",s=>{s.preventDefault(),t.classList.remove("bg-gray-700"),x(s.dataTransfer?.files??null)}),e.addEventListener("click",()=>{e.value=""})),c&&e&&c.addEventListener("click",()=>{e.click()}),r&&r.addEventListener("click",()=>{i=[],p()}),d&&d.addEventListener("click",T),L({icons:h})});
