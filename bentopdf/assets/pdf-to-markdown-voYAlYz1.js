const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-DMkQATzN.js","assets/main-Dqs2Ohqn.js","assets/style-CNx3HTbi.js","assets/style-B6mkOetO.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as $,i as F}from"./style-CNx3HTbi.js";import"./version-D4ympJL5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-ODFatrFN.js";import{n as P,o as M,s as n,a as u,b as f,d as I,h as w,_ as A,f as L,r as N,e as z}from"./main-Dqs2Ohqn.js";import"./mobileMenu-BoMunYmR.js";const b=new P(M("pymupdf"));document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("file-input"),i=document.getElementById("drop-zone"),c=document.getElementById("process-btn"),p=document.getElementById("file-display-area"),g=document.getElementById("convert-options"),v=document.getElementById("file-controls"),B=document.getElementById("add-more-btn"),k=document.getElementById("clear-files-btn"),x=document.getElementById("back-to-tools"),D=document.getElementById("include-images");x&&x.addEventListener("click",()=>{window.location.href="/bentopdf/"});const y=async()=>{if(!(!p||!g||!c||!v))if(n.files.length>0){p.innerHTML="";for(let e=0;e<n.files.length;e++){const t=n.files[e],a=document.createElement("div");a.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const l=document.createElement("div");l.className="flex flex-col overflow-hidden";const s=document.createElement("div");s.className="truncate font-medium text-gray-200 text-sm mb-1",s.textContent=t.name;const o=document.createElement("div");o.className="text-xs text-gray-400",o.textContent=`${L(t.size)} • Loading pages...`,l.append(s,o);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=()=>{n.files=n.files.filter((m,E)=>E!==e),y()},a.append(l,d),p.appendChild(a);try{const m=await N(t),E=await z({data:m}).promise;o.textContent=`${L(t.size)} • ${E.numPages} pages`}catch{o.textContent=`${L(t.size)} • Could not load page count`}}$({icons:F}),v.classList.remove("hidden"),g.classList.remove("hidden"),c.disabled=!1}else p.innerHTML="",v.classList.add("hidden"),g.classList.add("hidden"),c.disabled=!0},h=()=>{n.files=[],n.pdfDoc=null,y()},_=async()=>{try{if(n.files.length===0){u("No Files","Please select at least one PDF file.");return}f("Loading PDF converter..."),await b.load();const e=D?.checked??!1;if(n.files.length===1){const t=n.files[0];f(`Converting ${t.name}...`);const a=await b.pdfToMarkdown(t,{includeImages:e}),l=t.name.replace(/\.pdf$/i,"")+".md",s=new Blob([a],{type:"text/markdown"});I(s,l),w(),u("Conversion Complete",`Successfully converted ${t.name} to Markdown.`,"success",()=>h())}else{f("Converting multiple PDFs...");const t=(await A(async()=>{const{default:s}=await import("./jszip.min-DMkQATzN.js").then(o=>o.j);return{default:s}},__vite__mapDeps([0,1,2,3,4]))).default,a=new t;for(let s=0;s<n.files.length;s++){const o=n.files[s];f(`Converting ${s+1}/${n.files.length}: ${o.name}...`);const d=await b.pdfToMarkdown(o,{includeImages:e}),m=o.name.replace(/\.pdf$/i,"");a.file(`${m}.md`,d)}f("Creating ZIP archive...");const l=await a.generateAsync({type:"blob"});I(l,"markdown-files.zip"),w(),u("Conversion Complete",`Successfully converted ${n.files.length} PDF(s) to Markdown.`,"success",()=>h())}}catch(e){w(),u("Error",`An error occurred during conversion. Error: ${e.message}`)}},C=e=>{if(e&&e.length>0){const t=Array.from(e).filter(a=>a.type==="application/pdf"||a.name.toLowerCase().endsWith(".pdf"));n.files=[...n.files,...t],y()}};r&&i&&(r.addEventListener("change",e=>{C(e.target.files)}),i.addEventListener("dragover",e=>{e.preventDefault(),i.classList.add("bg-gray-700")}),i.addEventListener("dragleave",e=>{e.preventDefault(),i.classList.remove("bg-gray-700")}),i.addEventListener("drop",e=>{e.preventDefault(),i.classList.remove("bg-gray-700");const t=e.dataTransfer?.files;t&&t.length>0&&C(t)}),r.addEventListener("click",()=>{r.value=""})),B&&B.addEventListener("click",()=>{r.click()}),k&&k.addEventListener("click",()=>{h()}),c&&c.addEventListener("click",_)});
