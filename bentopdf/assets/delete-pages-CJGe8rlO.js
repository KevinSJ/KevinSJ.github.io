import{c as f,i as u}from"./style-CYUbkObH.js";import"./version-BHeJdyYx.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-Q5E4PlzL.js";import{G as D,a as d,b as v,r as L,P as h,e as x,h as r,f as P,q as b,d as I}from"./main-DWubsKaN.js";import"./mobileMenu-BoMunYmR.js";D.workerSrc=new URL("/bentopdf/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();const a={file:null,pdfDoc:null,pdfJsDoc:null,totalPages:0,pagesToDelete:new Set};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();function y(){f({icons:u});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),n=document.getElementById("process-btn"),l=document.getElementById("pages-to-delete");t&&t.addEventListener("change",B),e&&(e.addEventListener("dragover",s=>{s.preventDefault(),e.classList.add("bg-gray-700")}),e.addEventListener("dragleave",()=>{e.classList.remove("bg-gray-700")}),e.addEventListener("drop",s=>{s.preventDefault(),e.classList.remove("bg-gray-700");const o=s.dataTransfer?.files;o&&o.length>0&&E(o[0])}),t?.addEventListener("click",()=>{t&&(t.value="")})),n&&n.addEventListener("click",O),l&&l.addEventListener("input",k),document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/bentopdf/"})}function B(t){const e=t.target;e.files&&e.files.length>0&&E(e.files[0])}async function E(t){if(t.type!=="application/pdf"&&!t.name.toLowerCase().endsWith(".pdf")){d("Invalid File","Please select a PDF file.");return}v("Loading PDF..."),a.file=t;try{const e=await L(t);a.pdfDoc=await h.load(e,{ignoreEncryption:!0,throwOnInvalidObject:!1}),a.pdfJsDoc=await x({data:e.slice(0)}).promise,a.totalPages=a.pdfDoc.getPageCount(),a.pagesToDelete=new Set,T(),S(),await F(),r()}catch(e){console.error("Error loading PDF:",e),r(),d("Error","Failed to load PDF file.")}}function T(){const t=document.getElementById("file-display-area");if(!t||!a.file)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const n=document.createElement("div");n.className="flex flex-col flex-1 min-w-0";const l=document.createElement("div");l.className="truncate font-medium text-gray-200 text-sm mb-1",l.textContent=a.file.name;const s=document.createElement("div");s.className="text-xs text-gray-400",s.textContent=`${P(a.file.size)} â€¢ ${a.totalPages} pages`,n.append(l,s);const o=document.createElement("button");o.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",o.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',o.onclick=()=>w(),e.append(n,o),t.appendChild(e),f({icons:u})}function S(){const t=document.getElementById("delete-options"),e=document.getElementById("total-pages");t&&t.classList.remove("hidden"),e&&(e.textContent=a.totalPages.toString())}async function F(){const t=document.getElementById("delete-pages-preview");if(t){t.innerHTML="";for(let e=1;e<=a.totalPages;e++){const n=await a.pdfJsDoc.getPage(e),l=n.getViewport({scale:.3}),s=document.createElement("canvas");s.width=l.width,s.height=l.height;const o=s.getContext("2d");await n.render({canvasContext:o,viewport:l}).promise;const i=document.createElement("div");i.className="relative cursor-pointer group",i.dataset.page=e.toString();const c=document.createElement("div");c.className="w-full h-28 bg-gray-900 rounded-lg flex items-center justify-center overflow-hidden border-2 border-gray-600";const p=document.createElement("img");p.src=s.toDataURL(),p.className="max-w-full max-h-full object-contain";const g=document.createElement("span");g.className="absolute top-1 left-1 bg-gray-800 text-white text-xs px-1.5 py-0.5 rounded",g.textContent=`${e}`;const m=document.createElement("div");m.className="absolute inset-0 bg-red-500/50 hidden items-center justify-center rounded-lg",m.innerHTML='<i data-lucide="x" class="w-8 h-8 text-white"></i>',c.appendChild(p),i.append(c,g,m),t.appendChild(i),i.addEventListener("click",()=>C(e,i))}f({icons:u})}}function C(t,e){const n=e.querySelector(".bg-red-500\\/50");a.pagesToDelete.has(t)?(a.pagesToDelete.delete(t),n?.classList.add("hidden"),n?.classList.remove("flex")):(a.pagesToDelete.add(t),n?.classList.remove("hidden"),n?.classList.add("flex")),N()}function N(){const t=document.getElementById("pages-to-delete");if(t){const e=Array.from(a.pagesToDelete).sort((n,l)=>n-l);t.value=e.join(", ")}}function k(){const t=document.getElementById("pages-to-delete");if(!t)return;a.pagesToDelete=new Set(b(t.value,a.totalPages).map(n=>n+1));const e=document.getElementById("delete-pages-preview");e&&e.querySelectorAll("[data-page]").forEach(n=>{const l=parseInt(n.dataset.page||"0",10),s=n.querySelector(".bg-red-500\\/50");a.pagesToDelete.has(l)?(s?.classList.remove("hidden"),s?.classList.add("flex")):(s?.classList.add("hidden"),s?.classList.remove("flex"))})}async function O(){if(a.pagesToDelete.size===0){d("No Pages","Please select pages to delete.");return}if(a.pagesToDelete.size>=a.totalPages){d("Error","Cannot delete all pages.");return}v("Deleting pages...");try{const t=[];for(let o=0;o<a.totalPages;o++)a.pagesToDelete.has(o+1)||t.push(o);const e=await h.create();(await e.copyPages(a.pdfDoc,t)).forEach(o=>e.addPage(o));const l=await e.save(),s=a.file?.name.replace(".pdf","")||"document";I(new Blob([l],{type:"application/pdf"}),`${s}_pages_removed.pdf`),r(),d("Success",`Deleted ${a.pagesToDelete.size} page(s) successfully!`,"success",()=>w())}catch(t){console.error("Error deleting pages:",t),r(),d("Error","Failed to delete pages.")}}function w(){a.file=null,a.pdfDoc=null,a.pdfJsDoc=null,a.totalPages=0,a.pagesToDelete=new Set,document.getElementById("delete-options")?.classList.add("hidden");const t=document.getElementById("file-display-area");t&&(t.innerHTML="");const e=document.getElementById("pages-to-delete");e&&(e.value="");const n=document.getElementById("delete-pages-preview");n&&(n.innerHTML="")}
