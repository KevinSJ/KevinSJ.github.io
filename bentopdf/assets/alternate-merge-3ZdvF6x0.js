import{c as B,i as D}from"./style-D1FQfXNQ.js";import"./version-Dw8ZKLCV.js";import"./simple-mode-footer-D78rH_WB.js";import{a as c,b as x,h as l,d as b,c as F,f as k,j as I}from"./main-Da82M_MD.js";import"./mobileMenu-BoMunYmR.js";const a={files:[],pdfBytes:new Map,pdfDocs:new Map},g=new Worker("/workers/alternate-merge.worker.js");function y(){a.files=[],a.pdfBytes.clear(),a.pdfDocs.clear();const t=document.getElementById("file-display-area");t&&(t.innerHTML="");const n=document.getElementById("file-list");n&&(n.innerHTML="");const r=document.getElementById("tool-options");r&&r.classList.add("hidden");const s=document.getElementById("file-input");s&&(s.value="")}async function P(){const t=document.getElementById("file-display-area"),n=document.getElementById("tool-options"),r=document.getElementById("file-list");if(!(!t||!r))if(t.innerHTML="",a.files.length>0){const s=document.createElement("div");s.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const e=document.createElement("span");e.className="text-gray-200",e.textContent=`${a.files.length} PDF files selected`;const o=document.createElement("button");o.className="text-red-400 hover:text-red-300",o.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',o.onclick=function(){y()},s.append(e,o),t.appendChild(s),B({icons:D}),x("Loading PDF files..."),r.innerHTML="";try{for(const i of a.files){const h=await i.arrayBuffer();a.pdfBytes.set(i.name,h);const w=h.slice(0),E=await F({data:w}).promise;a.pdfDocs.set(i.name,E);const L=E.numPages,d=document.createElement("li");d.className="bg-gray-700 p-3 rounded-lg border border-gray-600 flex items-center justify-between",d.dataset.fileName=i.name;const f=document.createElement("div");f.className="flex items-center gap-2 truncate flex-1";const m=document.createElement("span");m.className="truncate font-medium text-white",m.textContent=i.name;const u=document.createElement("span");u.className="text-sm text-gray-400 flex-shrink-0",u.textContent=`${k(i.size)} â€¢ ${L} pages`,f.append(m,u);const p=document.createElement("div");p.className="drag-handle cursor-move text-gray-400 hover:text-white p-1 rounded ml-2",p.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="5" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="9" cy="12" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="19" r="1"/></svg>',d.append(f,p),r.appendChild(d)}I.create(r,{handle:".drag-handle",animation:150}),l(),n&&a.files.length>=2&&n.classList.remove("hidden")}catch(i){console.error("Error loading PDFs:",i),l(),c("Error","Failed to load one or more PDF files."),y()}}else n&&n.classList.add("hidden")}async function M(){if(a.pdfBytes.size<2){c("Not Enough Files","Please upload at least two PDF files to alternate and mix.");return}x("Alternating and mixing pages...");try{const t=document.getElementById("file-list");if(!t)throw new Error("File list not found");const n=Array.from(t.children).map(function(e){return e.dataset.fileName}).filter(Boolean),r=[];for(const e of n){const o=a.pdfBytes.get(e);o&&r.push({name:e,data:o})}if(r.length<2){c("Error","At least two valid PDFs are required."),l();return}const s={command:"interleave",files:r};g.postMessage(s,r.map(function(e){return e.data})),g.onmessage=function(e){if(l(),e.data.status==="success"){const o=new Blob([e.data.pdfBytes],{type:"application/pdf"});b(o,"alternated-mixed.pdf"),c("Success","PDFs have been mixed successfully!","success",function(){y()})}else console.error("Worker interleave error:",e.data.message),c("Error",e.data.message||"Failed to interleave PDFs.")},g.onerror=function(e){l(),console.error("Worker error:",e),c("Error","An unexpected error occurred in the merge worker.")}}catch(t){console.error("Alternate Merge error:",t),c("Error","An error occurred while mixing the PDFs."),l()}}function v(t){if(t&&t.length>0){const n=Array.from(t).filter(function(r){return r.type==="application/pdf"||r.name.toLowerCase().endsWith(".pdf")});n.length>0&&(a.files=n,P())}}document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("file-input"),n=document.getElementById("drop-zone"),r=document.getElementById("process-btn"),s=document.getElementById("back-to-tools");s&&s.addEventListener("click",function(){window.location.href="/"}),t&&n&&(t.addEventListener("change",function(e){v(e.target.files)}),n.addEventListener("dragover",function(e){e.preventDefault(),n.classList.add("bg-gray-700")}),n.addEventListener("dragleave",function(e){e.preventDefault(),n.classList.remove("bg-gray-700")}),n.addEventListener("drop",function(e){e.preventDefault(),n.classList.remove("bg-gray-700");const o=e.dataTransfer?.files;o&&o.length>0&&v(o)}),t.addEventListener("click",function(){t.value=""})),r&&r.addEventListener("click",M)});
