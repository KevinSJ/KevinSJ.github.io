const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-DMkQATzN.js","assets/main-Dqs2Ohqn.js","assets/style-CNx3HTbi.js","assets/style-B6mkOetO.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as A,i as P}from"./style-CNx3HTbi.js";import"./version-D4ympJL5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-ODFatrFN.js";import{s as n,a as g,h as v,b as p,E as _,d as F,_ as k,f as B,r as T,e as z}from"./main-Dqs2Ohqn.js";import"./mobileMenu-BoMunYmR.js";document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("file-input"),l=document.getElementById("drop-zone"),f=document.getElementById("process-btn"),u=document.getElementById("file-display-area"),y=document.getElementById("options-container"),h=document.getElementById("file-controls"),w=document.getElementById("add-more-btn"),D=document.getElementById("clear-files-btn"),x=document.getElementById("back-to-tools"),E=document.getElementById("pdfa-level");x&&x.addEventListener("click",()=>{window.location.href="/bentopdf/"});const L=async()=>{if(!(!u||!y||!f||!h))if(n.files.length>0){u.innerHTML="";for(let e=0;e<n.files.length;e++){const t=n.files[e],o=document.createElement("div");o.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex flex-col overflow-hidden";const s=document.createElement("div");s.className="truncate font-medium text-gray-200 text-sm mb-1",s.textContent=t.name;const i=document.createElement("div");i.className="text-xs text-gray-400",i.textContent=`${B(t.size)} • Loading pages...`,a.append(s,i);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=()=>{n.files=n.files.filter((d,m)=>m!==e),L()},o.append(a,r),u.appendChild(o);try{const d=await T(t),m=await z({data:d}).promise;i.textContent=`${B(t.size)} • ${m.numPages} pages`}catch(d){console.error("Error loading PDF:",d),i.textContent=`${B(t.size)} • Could not load page count`}}A({icons:P}),h.classList.remove("hidden"),y.classList.remove("hidden"),f.disabled=!1}else u.innerHTML="",h.classList.add("hidden"),y.classList.add("hidden"),f.disabled=!0},b=()=>{n.files=[],n.pdfDoc=null,E&&(E.value="PDF/A-2b"),L()},I=async()=>{const e=E.value;try{if(n.files.length===0){g("No Files","Please select at least one PDF file."),v();return}if(n.files.length===1){const t=n.files[0];p("Initializing Ghostscript...");const o=await _(t,e,s=>p(s)),a=t.name.replace(/\.pdf$/i,"")+"_pdfa.pdf";F(o,a),v(),g("Conversion Complete",`Successfully converted ${t.name} to ${e}.`,"success",()=>b())}else{p("Converting multiple PDFs to PDF/A...");const t=(await k(async()=>{const{default:s}=await import("./jszip.min-DMkQATzN.js").then(i=>i.j);return{default:s}},__vite__mapDeps([0,1,2,3,4]))).default,o=new t;for(let s=0;s<n.files.length;s++){const i=n.files[s];p(`Converting ${s+1}/${n.files.length}: ${i.name}...`);const r=await _(i,e,$=>p($)),d=i.name.replace(/\.pdf$/i,""),m=await r.arrayBuffer();o.file(`${d}_pdfa.pdf`,m)}const a=await o.generateAsync({type:"blob"});F(a,"pdfa-converted.zip"),v(),g("Conversion Complete",`Successfully converted ${n.files.length} PDF(s) to ${e}.`,"success",()=>b())}}catch(t){v(),g("Error",`An error occurred during conversion. Error: ${t.message}`)}},C=e=>{e&&e.length>0&&(n.files=[...n.files,...Array.from(e)],L())};c&&l&&(c.addEventListener("change",e=>{C(e.target.files)}),l.addEventListener("dragover",e=>{e.preventDefault(),l.classList.add("bg-gray-700")}),l.addEventListener("dragleave",e=>{e.preventDefault(),l.classList.remove("bg-gray-700")}),l.addEventListener("drop",e=>{e.preventDefault(),l.classList.remove("bg-gray-700");const t=e.dataTransfer?.files;if(t&&t.length>0){const o=Array.from(t).filter(a=>a.type==="application/pdf"||a.name.toLowerCase().endsWith(".pdf"));if(o.length>0){const a=new DataTransfer;o.forEach(s=>a.items.add(s)),C(a.files)}}}),c.addEventListener("click",()=>{c.value=""})),w&&w.addEventListener("click",()=>{c.click()}),D&&D.addEventListener("click",()=>{b()}),f&&f.addEventListener("click",I)});
