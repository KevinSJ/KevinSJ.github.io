import{c as E,i as v}from"./style-CNx3HTbi.js";import"./version-D4ympJL5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-ODFatrFN.js";import{a as f,F as m,d as u,f as h}from"./main-Dqs2Ohqn.js";import{J as L}from"./jszip.min-DMkQATzN.js";import"./mobileMenu-BoMunYmR.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";const a={files:[]};function g(){a.files=[];const e=document.getElementById("file-display-area");e&&(e.innerHTML="");const t=document.getElementById("tool-options");t&&t.classList.add("hidden");const n=document.getElementById("file-controls");n&&n.classList.add("hidden");const s=document.getElementById("file-input");s&&(s.value="")}async function y(){const e=document.getElementById("file-display-area"),t=document.getElementById("tool-options"),n=document.getElementById("file-controls");e&&(e.innerHTML="",a.files.length>0?(a.files.forEach((s,i)=>{const l=document.createElement("div");l.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const o=document.createElement("div");o.className="flex flex-col overflow-hidden";const c=document.createElement("div");c.className="truncate font-medium text-gray-200 text-sm mb-1",c.textContent=s.name;const d=document.createElement("div");d.className="text-xs text-gray-400",d.textContent=h(s.size),o.append(c,d);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=function(){a.files.splice(i,1),y()},l.append(o,r),e.appendChild(l)}),E({icons:v}),t&&t.classList.remove("hidden"),n&&n.classList.remove("hidden")):(t&&t.classList.add("hidden"),n&&n.classList.add("hidden")))}function p(e){if(e&&e.length>0){const t=Array.from(e).filter(n=>n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf"));t.length>0&&(a.files.push(...t),y())}}async function B(){if(a.files.length===0){f("No Files","Please select at least one PDF file.");return}const e=document.getElementById("loader-modal"),t=document.getElementById("loader-text");try{if(a.files.length===1){e&&e.classList.remove("hidden"),t&&(t.textContent="Converting fonts to outlines...");const n=a.files[0],s=await m(n,l=>{t&&(t.textContent=l)}),i=n.name.replace(/\.pdf$/i,"");u(s,`${i}_outlined.pdf`),e&&e.classList.add("hidden")}else{e&&e.classList.remove("hidden"),t&&(t.textContent="Processing multiple PDFs...");const n=new L;let s=0;for(let i=0;i<a.files.length;i++){const l=a.files[i];t&&(t.textContent=`Processing ${i+1}/${a.files.length}: ${l.name}...`);try{const c=await(await m(l,()=>{})).arrayBuffer(),d=l.name.replace(/\.pdf$/i,"");n.file(`${d}_outlined.pdf`,c),s++}catch(o){console.error(`Error processing ${l.name}:`,o)}}if(s>0){const i=await n.generateAsync({type:"blob"});u(i,"outlined_pdfs.zip"),f("Success",`Processed ${s} PDFs.`,"success",()=>{g()})}else f("Error","No PDFs could be processed.");e&&e.classList.add("hidden")}}catch(n){console.error(n),e&&e.classList.add("hidden");const s=n instanceof Error?n.message:"An unexpected error occurred.";f("Error",s)}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),n=document.getElementById("process-btn"),s=document.getElementById("add-more-btn"),i=document.getElementById("clear-files-btn"),l=document.getElementById("back-to-tools");l&&l.addEventListener("click",function(){window.location.href="/bentopdf/"}),e&&t&&(e.addEventListener("change",function(o){p(o.target.files)}),t.addEventListener("dragover",function(o){o.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",function(o){o.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",function(o){o.preventDefault(),t.classList.remove("bg-gray-700"),p(o.dataTransfer?.files)}),e.addEventListener("click",function(){e.value=""})),n&&n.addEventListener("click",B),s&&s.addEventListener("click",function(){e.value="",e.click()}),i&&i.addEventListener("click",function(){g()})});
