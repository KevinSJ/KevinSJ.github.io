import{p as st}from"./main-Da82M_MD.js";import{e as hn,N as G,_ as v,H as ut,u as Dn,c as Yt,d as Jt,b as L,E as bn,f as fn,x as pn,M as Se,S as oe,k as He,v as An,h as be,L as qt,D as Qt,O as En,j as bt,U as Mn,W as Zt,p as yn,P as Ke,A as Gn,z as Sn,C as mt,g as Xe,w as Ye,i as en,K as Cn,J as tn,a as nn,m as ge,y as se,R as rn,B as Tn}from"./embedpdf-Cwerrlkj.js";import"./style-D1FQfXNQ.js";var ft,xn=(ft=import.meta.url,async function(H={}){var r,n,o,e=H,u=new Promise(((t,a)=>{n=t,o=a}));["_EPDF_GetMetaKeyCount","_EPDF_GetMetaKeyName","_EPDF_GetMetaTrapped","_EPDF_GetPageRotationByIndex","_EPDF_HasMetaText","_EPDF_PNG_EncodeRGBA","_EPDF_RenderAnnotBitmap","_EPDF_SetMetaText","_EPDF_SetMetaTrapped","_EPDFAction_CreateGoTo","_EPDFAction_CreateGoToNamed","_EPDFAction_CreateLaunch","_EPDFAction_CreateRemoteGoToByName","_EPDFAction_CreateRemoteGoToDest","_EPDFAction_CreateURI","_EPDFAnnot_ClearColor","_EPDFAnnot_GenerateAppearance","_EPDFAnnot_GenerateAppearanceWithBlend","_EPDFAnnot_GetBlendMode","_EPDFAnnot_GetBorderDashPattern","_EPDFAnnot_GetBorderDashPatternCount","_EPDFAnnot_GetBorderEffect","_EPDFAnnot_GetBorderStyle","_EPDFAnnot_GetColor","_EPDFAnnot_GetDefaultAppearance","_EPDFAnnot_GetIcon","_EPDFAnnot_GetIntent","_EPDFAnnot_GetLineEndings","_EPDFAnnot_GetOpacity","_EPDFAnnot_GetRectangleDifferences","_EPDFAnnot_GetRichContent","_EPDFAnnot_GetTextAlignment","_EPDFAnnot_GetVerticalAlignment","_EPDFAnnot_SetBorderDashPattern","_EPDFAnnot_SetBorderStyle","_EPDFAnnot_SetColor","_EPDFAnnot_SetDefaultAppearance","_EPDFAnnot_SetIcon","_EPDFAnnot_SetIntent","_EPDFAnnot_SetLine","_EPDFAnnot_SetLineEndings","_EPDFAnnot_SetLinkedAnnot","_EPDFAnnot_SetOpacity","_EPDFAnnot_SetTextAlignment","_EPDFAnnot_SetVerticalAlignment","_EPDFAnnot_SetVertices","_EPDFAnnot_UpdateAppearanceToRect","_EPDFAttachment_GetDescription","_EPDFAttachment_GetIntegerValue","_EPDFAttachment_SetDescription","_EPDFAttachment_SetSubtype","_EPDFBookmark_AppendChild","_EPDFBookmark_Clear","_EPDFBookmark_ClearTarget","_EPDFBookmark_Create","_EPDFBookmark_Delete","_EPDFBookmark_InsertAfter","_EPDFBookmark_SetAction","_EPDFBookmark_SetDest","_EPDFBookmark_SetTitle","_EPDFCatalog_GetLanguage","_EPDFDest_CreateRemoteView","_EPDFDest_CreateRemoteXYZ","_EPDFDest_CreateView","_EPDFDest_CreateXYZ","_EPDFNamedDest_Remove","_EPDFNamedDest_SetDest","_EPDFPage_CreateAnnot","_EPDFPage_GetAnnotByName","_EPDFPage_GetAnnotCountRaw","_EPDFPage_GetAnnotRaw","_EPDFPage_RemoveAnnotByName","_EPDFPage_RemoveAnnotRaw","_EPDFText_RedactInQuads","_EPDFText_RedactInRect","_FORM_CanRedo","_FORM_CanUndo","_FORM_DoDocumentAAction","_FORM_DoDocumentJSAction","_FORM_DoDocumentOpenAction","_FORM_DoPageAAction","_FORM_ForceToKillFocus","_FORM_GetFocusedAnnot","_FORM_GetFocusedText","_FORM_GetSelectedText","_FORM_IsIndexSelected","_FORM_OnAfterLoadPage","_FORM_OnBeforeClosePage","_FORM_OnChar","_FORM_OnFocus","_FORM_OnKeyDown","_FORM_OnKeyUp","_FORM_OnLButtonDoubleClick","_FORM_OnLButtonDown","_FORM_OnLButtonUp","_FORM_OnMouseMove","_FORM_OnMouseWheel","_FORM_OnRButtonDown","_FORM_OnRButtonUp","_FORM_Redo","_FORM_ReplaceAndKeepSelection","_FORM_ReplaceSelection","_FORM_SelectAllText","_FORM_SetFocusedAnnot","_FORM_SetIndexSelected","_FORM_Undo","_FPDF_AddInstalledFont","_FPDF_CloseDocument","_FPDF_ClosePage","_FPDF_CloseXObject","_FPDF_CopyViewerPreferences","_FPDF_CountNamedDests","_FPDF_CreateClipPath","_FPDF_CreateNewDocument","_FPDF_DestroyClipPath","_FPDF_DestroyLibrary","_FPDF_DeviceToPage","_FPDF_DocumentHasValidCrossReferenceTable","_FPDF_FFLDraw","_FPDF_FreeDefaultSystemFontInfo","_FPDF_GetDefaultSystemFontInfo","_FPDF_GetDefaultTTFMap","_FPDF_GetDefaultTTFMapCount","_FPDF_GetDefaultTTFMapEntry","_FPDF_GetDocPermissions","_FPDF_GetDocUserPermissions","_FPDF_GetFileIdentifier","_FPDF_GetFileVersion","_FPDF_GetFormType","_FPDF_GetLastError","_FPDF_GetMetaText","_FPDF_GetNamedDest","_FPDF_GetNamedDestByName","_FPDF_GetPageAAction","_FPDF_GetPageBoundingBox","_FPDF_GetPageCount","_FPDF_GetPageHeight","_FPDF_GetPageHeightF","_FPDF_GetPageLabel","_FPDF_GetPageSizeByIndex","_FPDF_GetPageSizeByIndexF","_FPDF_GetPageWidth","_FPDF_GetPageWidthF","_FPDF_GetSecurityHandlerRevision","_FPDF_GetSignatureCount","_FPDF_GetSignatureObject","_FPDF_GetTrailerEnds","_FPDF_GetXFAPacketContent","_FPDF_GetXFAPacketCount","_FPDF_GetXFAPacketName","_FPDF_ImportNPagesToOne","_FPDF_ImportPages","_FPDF_ImportPagesByIndex","_FPDF_InitLibrary","_FPDF_InitLibraryWithConfig","_FPDF_LoadCustomDocument","_FPDF_LoadDocument","_FPDF_LoadMemDocument","_FPDF_LoadMemDocument64","_FPDF_LoadPage","_FPDF_LoadXFA","_FPDF_MovePages","_FPDF_NewFormObjectFromXObject","_FPDF_NewXObjectFromPage","_FPDF_PageToDevice","_FPDF_RemoveFormFieldHighlight","_FPDF_RenderPage_Close","_FPDF_RenderPage_Continue","_FPDF_RenderPageBitmap","_FPDF_RenderPageBitmap_Start","_FPDF_RenderPageBitmapWithColorScheme_Start","_FPDF_RenderPageBitmapWithMatrix","_FPDF_SaveAsCopy","_FPDF_SaveWithVersion","_FPDF_SetFormFieldHighlightAlpha","_FPDF_SetFormFieldHighlightColor","_FPDF_SetSandBoxPolicy","_FPDF_SetSystemFontInfo","_FPDF_StructElement_Attr_CountChildren","_FPDF_StructElement_Attr_GetBlobValue","_FPDF_StructElement_Attr_GetBooleanValue","_FPDF_StructElement_Attr_GetChildAtIndex","_FPDF_StructElement_Attr_GetCount","_FPDF_StructElement_Attr_GetName","_FPDF_StructElement_Attr_GetNumberValue","_FPDF_StructElement_Attr_GetStringValue","_FPDF_StructElement_Attr_GetType","_FPDF_StructElement_Attr_GetValue","_FPDF_StructElement_CountChildren","_FPDF_StructElement_GetActualText","_FPDF_StructElement_GetAltText","_FPDF_StructElement_GetAttributeAtIndex","_FPDF_StructElement_GetAttributeCount","_FPDF_StructElement_GetChildAtIndex","_FPDF_StructElement_GetChildMarkedContentID","_FPDF_StructElement_GetID","_FPDF_StructElement_GetLang","_FPDF_StructElement_GetMarkedContentID","_FPDF_StructElement_GetMarkedContentIdAtIndex","_FPDF_StructElement_GetMarkedContentIdCount","_FPDF_StructElement_GetObjType","_FPDF_StructElement_GetParent","_FPDF_StructElement_GetStringAttribute","_FPDF_StructElement_GetTitle","_FPDF_StructElement_GetType","_FPDF_StructTree_Close","_FPDF_StructTree_CountChildren","_FPDF_StructTree_GetChildAtIndex","_FPDF_StructTree_GetForPage","_FPDF_VIEWERREF_GetDuplex","_FPDF_VIEWERREF_GetName","_FPDF_VIEWERREF_GetNumCopies","_FPDF_VIEWERREF_GetPrintPageRange","_FPDF_VIEWERREF_GetPrintPageRangeCount","_FPDF_VIEWERREF_GetPrintPageRangeElement","_FPDF_VIEWERREF_GetPrintScaling","_FPDFAction_GetDest","_FPDFAction_GetFilePath","_FPDFAction_GetType","_FPDFAction_GetURIPath","_FPDFAnnot_AddFileAttachment","_FPDFAnnot_AddInkStroke","_FPDFAnnot_AppendAttachmentPoints","_FPDFAnnot_AppendObject","_FPDFAnnot_CountAttachmentPoints","_FPDFAnnot_GetAP","_FPDFAnnot_GetAttachmentPoints","_FPDFAnnot_GetBorder","_FPDFAnnot_GetColor","_FPDFAnnot_GetFileAttachment","_FPDFAnnot_GetFlags","_FPDFAnnot_GetFocusableSubtypes","_FPDFAnnot_GetFocusableSubtypesCount","_FPDFAnnot_GetFontColor","_FPDFAnnot_GetFontSize","_FPDFAnnot_GetFormAdditionalActionJavaScript","_FPDFAnnot_GetFormControlCount","_FPDFAnnot_GetFormControlIndex","_FPDFAnnot_GetFormFieldAlternateName","_FPDFAnnot_GetFormFieldAtPoint","_FPDFAnnot_GetFormFieldExportValue","_FPDFAnnot_GetFormFieldFlags","_FPDFAnnot_GetFormFieldName","_FPDFAnnot_GetFormFieldType","_FPDFAnnot_GetFormFieldValue","_FPDFAnnot_GetInkListCount","_FPDFAnnot_GetInkListPath","_FPDFAnnot_GetLine","_FPDFAnnot_GetLink","_FPDFAnnot_GetLinkedAnnot","_FPDFAnnot_GetNumberValue","_FPDFAnnot_GetObject","_FPDFAnnot_GetObjectCount","_FPDFAnnot_GetOptionCount","_FPDFAnnot_GetOptionLabel","_FPDFAnnot_GetRect","_FPDFAnnot_GetStringValue","_FPDFAnnot_GetSubtype","_FPDFAnnot_GetValueType","_FPDFAnnot_GetVertices","_FPDFAnnot_HasAttachmentPoints","_FPDFAnnot_HasKey","_FPDFAnnot_IsChecked","_FPDFAnnot_IsObjectSupportedSubtype","_FPDFAnnot_IsOptionSelected","_FPDFAnnot_IsSupportedSubtype","_FPDFAnnot_RemoveInkList","_FPDFAnnot_RemoveObject","_FPDFAnnot_SetAP","_FPDFAnnot_SetAttachmentPoints","_FPDFAnnot_SetBorder","_FPDFAnnot_SetColor","_FPDFAnnot_SetFlags","_FPDFAnnot_SetFocusableSubtypes","_FPDFAnnot_SetFontColor","_FPDFAnnot_SetFormFieldFlags","_FPDFAnnot_SetRect","_FPDFAnnot_SetStringValue","_FPDFAnnot_SetURI","_FPDFAnnot_UpdateObject","_FPDFAttachment_GetFile","_FPDFAttachment_GetName","_FPDFAttachment_GetStringValue","_FPDFAttachment_GetSubtype","_FPDFAttachment_GetValueType","_FPDFAttachment_HasKey","_FPDFAttachment_SetFile","_FPDFAttachment_SetStringValue","_FPDFAvail_Create","_FPDFAvail_Destroy","_FPDFAvail_GetDocument","_FPDFAvail_GetFirstPageNum","_FPDFAvail_IsDocAvail","_FPDFAvail_IsFormAvail","_FPDFAvail_IsLinearized","_FPDFAvail_IsPageAvail","_FPDFBitmap_Create","_FPDFBitmap_CreateEx","_FPDFBitmap_Destroy","_FPDFBitmap_FillRect","_FPDFBitmap_GetBuffer","_FPDFBitmap_GetFormat","_FPDFBitmap_GetHeight","_FPDFBitmap_GetStride","_FPDFBitmap_GetWidth","_FPDFBookmark_Find","_FPDFBookmark_GetAction","_FPDFBookmark_GetCount","_FPDFBookmark_GetDest","_FPDFBookmark_GetFirstChild","_FPDFBookmark_GetNextSibling","_FPDFBookmark_GetTitle","_FPDFCatalog_IsTagged","_FPDFCatalog_SetLanguage","_FPDFClipPath_CountPaths","_FPDFClipPath_CountPathSegments","_FPDFClipPath_GetPathSegment","_FPDFDest_GetDestPageIndex","_FPDFDest_GetLocationInPage","_FPDFDest_GetView","_FPDFDoc_AddAttachment","_FPDFDoc_CloseJavaScriptAction","_FPDFDoc_DeleteAttachment","_FPDFDOC_ExitFormFillEnvironment","_FPDFDoc_GetAttachment","_FPDFDoc_GetAttachmentCount","_FPDFDoc_GetJavaScriptAction","_FPDFDoc_GetJavaScriptActionCount","_FPDFDoc_GetPageMode","_FPDFDOC_InitFormFillEnvironment","_FPDFFont_Close","_FPDFFont_GetAscent","_FPDFFont_GetBaseFontName","_FPDFFont_GetDescent","_FPDFFont_GetFamilyName","_FPDFFont_GetFlags","_FPDFFont_GetFontData","_FPDFFont_GetGlyphPath","_FPDFFont_GetGlyphWidth","_FPDFFont_GetIsEmbedded","_FPDFFont_GetItalicAngle","_FPDFFont_GetWeight","_FPDFFormObj_CountObjects","_FPDFFormObj_GetObject","_FPDFFormObj_RemoveObject","_FPDFGlyphPath_CountGlyphSegments","_FPDFGlyphPath_GetGlyphPathSegment","_FPDFImageObj_GetBitmap","_FPDFImageObj_GetIccProfileDataDecoded","_FPDFImageObj_GetImageDataDecoded","_FPDFImageObj_GetImageDataRaw","_FPDFImageObj_GetImageFilter","_FPDFImageObj_GetImageFilterCount","_FPDFImageObj_GetImageMetadata","_FPDFImageObj_GetImagePixelSize","_FPDFImageObj_GetRenderedBitmap","_FPDFImageObj_LoadJpegFile","_FPDFImageObj_LoadJpegFileInline","_FPDFImageObj_SetBitmap","_FPDFImageObj_SetMatrix","_FPDFJavaScriptAction_GetName","_FPDFJavaScriptAction_GetScript","_FPDFLink_CloseWebLinks","_FPDFLink_CountQuadPoints","_FPDFLink_CountRects","_FPDFLink_CountWebLinks","_FPDFLink_Enumerate","_FPDFLink_GetAction","_FPDFLink_GetAnnot","_FPDFLink_GetAnnotRect","_FPDFLink_GetDest","_FPDFLink_GetLinkAtPoint","_FPDFLink_GetLinkZOrderAtPoint","_FPDFLink_GetQuadPoints","_FPDFLink_GetRect","_FPDFLink_GetTextRange","_FPDFLink_GetURL","_FPDFLink_LoadWebLinks","_FPDFPage_CloseAnnot","_FPDFPage_CountObjects","_FPDFPage_CreateAnnot","_FPDFPage_Delete","_FPDFPage_Flatten","_FPDFPage_FormFieldZOrderAtPoint","_FPDFPage_GenerateContent","_FPDFPage_GetAnnot","_FPDFPage_GetAnnotCount","_FPDFPage_GetAnnotIndex","_FPDFPage_GetArtBox","_FPDFPage_GetBleedBox","_FPDFPage_GetCropBox","_FPDFPage_GetDecodedThumbnailData","_FPDFPage_GetMediaBox","_FPDFPage_GetObject","_FPDFPage_GetRawThumbnailData","_FPDFPage_GetRotation","_FPDFPage_GetThumbnailAsBitmap","_FPDFPage_GetTrimBox","_FPDFPage_HasFormFieldAtPoint","_FPDFPage_HasTransparency","_FPDFPage_InsertClipPath","_FPDFPage_InsertObject","_FPDFPage_InsertObjectAtIndex","_FPDFPage_New","_FPDFPage_RemoveAnnot","_FPDFPage_RemoveObject","_FPDFPage_SetArtBox","_FPDFPage_SetBleedBox","_FPDFPage_SetCropBox","_FPDFPage_SetMediaBox","_FPDFPage_SetRotation","_FPDFPage_SetTrimBox","_FPDFPage_TransformAnnots","_FPDFPage_TransFormWithClip","_FPDFPageObj_AddMark","_FPDFPageObj_CountMarks","_FPDFPageObj_CreateNewPath","_FPDFPageObj_CreateNewRect","_FPDFPageObj_CreateTextObj","_FPDFPageObj_Destroy","_FPDFPageObj_GetBounds","_FPDFPageObj_GetClipPath","_FPDFPageObj_GetDashArray","_FPDFPageObj_GetDashCount","_FPDFPageObj_GetDashPhase","_FPDFPageObj_GetFillColor","_FPDFPageObj_GetIsActive","_FPDFPageObj_GetLineCap","_FPDFPageObj_GetLineJoin","_FPDFPageObj_GetMark","_FPDFPageObj_GetMarkedContentID","_FPDFPageObj_GetMatrix","_FPDFPageObj_GetRotatedBounds","_FPDFPageObj_GetStrokeColor","_FPDFPageObj_GetStrokeWidth","_FPDFPageObj_GetType","_FPDFPageObj_HasTransparency","_FPDFPageObj_NewImageObj","_FPDFPageObj_NewTextObj","_FPDFPageObj_RemoveMark","_FPDFPageObj_SetBlendMode","_FPDFPageObj_SetDashArray","_FPDFPageObj_SetDashPhase","_FPDFPageObj_SetFillColor","_FPDFPageObj_SetIsActive","_FPDFPageObj_SetLineCap","_FPDFPageObj_SetLineJoin","_FPDFPageObj_SetMatrix","_FPDFPageObj_SetStrokeColor","_FPDFPageObj_SetStrokeWidth","_FPDFPageObj_Transform","_FPDFPageObj_TransformClipPath","_FPDFPageObj_TransformF","_FPDFPageObjMark_CountParams","_FPDFPageObjMark_GetName","_FPDFPageObjMark_GetParamBlobValue","_FPDFPageObjMark_GetParamIntValue","_FPDFPageObjMark_GetParamKey","_FPDFPageObjMark_GetParamStringValue","_FPDFPageObjMark_GetParamValueType","_FPDFPageObjMark_RemoveParam","_FPDFPageObjMark_SetBlobParam","_FPDFPageObjMark_SetIntParam","_FPDFPageObjMark_SetStringParam","_FPDFPath_BezierTo","_FPDFPath_Close","_FPDFPath_CountSegments","_FPDFPath_GetDrawMode","_FPDFPath_GetPathSegment","_FPDFPath_LineTo","_FPDFPath_MoveTo","_FPDFPath_SetDrawMode","_FPDFPathSegment_GetClose","_FPDFPathSegment_GetPoint","_FPDFPathSegment_GetType","_FPDFSignatureObj_GetByteRange","_FPDFSignatureObj_GetContents","_FPDFSignatureObj_GetDocMDPPermission","_FPDFSignatureObj_GetReason","_FPDFSignatureObj_GetSubFilter","_FPDFSignatureObj_GetTime","_FPDFText_ClosePage","_FPDFText_CountChars","_FPDFText_CountRects","_FPDFText_FindClose","_FPDFText_FindNext","_FPDFText_FindPrev","_FPDFText_FindStart","_FPDFText_GetBoundedText","_FPDFText_GetCharAngle","_FPDFText_GetCharBox","_FPDFText_GetCharIndexAtPos","_FPDFText_GetCharIndexFromTextIndex","_FPDFText_GetCharOrigin","_FPDFText_GetFillColor","_FPDFText_GetFontInfo","_FPDFText_GetFontSize","_FPDFText_GetFontWeight","_FPDFText_GetLooseCharBox","_FPDFText_GetMatrix","_FPDFText_GetRect","_FPDFText_GetSchCount","_FPDFText_GetSchResultIndex","_FPDFText_GetStrokeColor","_FPDFText_GetText","_FPDFText_GetTextIndexFromCharIndex","_FPDFText_GetTextObject","_FPDFText_GetUnicode","_FPDFText_HasUnicodeMapError","_FPDFText_IsGenerated","_FPDFText_IsHyphen","_FPDFText_LoadCidType2Font","_FPDFText_LoadFont","_FPDFText_LoadPage","_FPDFText_LoadStandardFont","_FPDFText_SetCharcodes","_FPDFText_SetText","_FPDFTextObj_GetFont","_FPDFTextObj_GetFontSize","_FPDFTextObj_GetRenderedBitmap","_FPDFTextObj_GetText","_FPDFTextObj_GetTextRenderMode","_FPDFTextObj_SetTextRenderMode","_PDFiumExt_CloseFileWriter","_PDFiumExt_CloseFormFillInfo","_PDFiumExt_ExitFormFillEnvironment","_PDFiumExt_GetFileWriterData","_PDFiumExt_GetFileWriterSize","_PDFiumExt_Init","_PDFiumExt_InitFormFillEnvironment","_PDFiumExt_OpenFileWriter","_PDFiumExt_OpenFormFillInfo","_PDFiumExt_SaveAsCopy","_malloc","_free","_memory","___indirect_function_table","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(u,t)||Object.defineProperty(u,t,{get:()=>K("You are getting "+t+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>K("You are setting "+t+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})}));var m=typeof window=="object",d=typeof importScripts=="function";typeof st=="object"&&typeof st.versions=="object"&&typeof st.versions.node=="string"&&st.type;var _,c,b=!m&&!d,p=Object.assign({},e),M="./this.program",E="";if(b){if(typeof window=="object"||typeof importScripts=="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");c=t=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));let a=read(t,"binary");return T(typeof a=="object"),a},_=t=>new Promise(((a,s)=>{setTimeout((()=>a(c(t))))})),globalThis.clearTimeout??=t=>{},globalThis.setTimeout??=t=>typeof t=="function"?t():K(),typeof print<"u"&&(globalThis.console??={},console.log=print,console.warn=console.error=globalThis.printErr??print)}else{if(!m&&!d)throw new Error("environment detection error");if(d?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),ft&&(E=ft),E=E.startsWith("blob:")?"":E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1),typeof window!="object"&&typeof importScripts!="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");d&&(c=t=>{var a=new XMLHttpRequest;return a.open("GET",t,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)}),_=t=>(T(!Me(t),"readAsync does not work with file:// URLs"),fetch(t,{credentials:"same-origin"}).then((a=>a.ok?a.arrayBuffer():Promise.reject(new Error(a.status+" : "+a.url)))))}var y,C=e.print||console.log.bind(console),x=e.printErr||console.error.bind(console);Object.assign(e,p),p=null,y="fetchSettings",Object.getOwnPropertyDescriptor(e,y)&&K(`\`Module.${y}\` was supplied but \`${y}\` not included in INCOMING_MODULE_JS_API`),e.arguments&&e.arguments,Ie("arguments","arguments_"),e.thisProgram&&(M=e.thisProgram),Ie("thisProgram","thisProgram"),T(e.memoryInitializerPrefixURL===void 0,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),T(e.pthreadMainPrefixURL===void 0,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),T(e.cdInitializerPrefixURL===void 0,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),T(e.filePackagePrefixURL===void 0,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),T(e.read===void 0,"Module.read option was removed"),T(e.readAsync===void 0,"Module.readAsync option was removed (modify readAsync in JS)"),T(e.readBinary===void 0,"Module.readBinary option was removed (modify readBinary in JS)"),T(e.setWindowTitle===void 0,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),T(e.TOTAL_MEMORY===void 0,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Ie("asm","wasmExports"),Ie("readAsync","readAsync"),Ie("readBinary","readBinary"),Ie("setWindowTitle","setWindowTitle");var R,N=e.wasmBinary;Ie("wasmBinary","wasmBinary"),typeof WebAssembly!="object"&&x("no native wasm support detected");var U,$,X,ee,O,z,ie,ae,ne=!1;function T(t,a){t||K("Assertion failed"+(a?": "+a:""))}function we(){var t=R.buffer;e.HEAP8=U=new Int8Array(t),e.HEAP16=X=new Int16Array(t),e.HEAPU8=$=new Uint8Array(t),e.HEAPU16=ee=new Uint16Array(t),e.HEAP32=O=new Int32Array(t),e.HEAPU32=z=new Uint32Array(t),e.HEAPF32=ie=new Float32Array(t),e.HEAPF64=ae=new Float64Array(t)}function fe(){if(!ne){var t=Dt();t==0&&(t+=4);var a=z[t>>2],s=z[t+4>>2];a==34821223&&s==2310721022||K(`Stack overflow! Stack cookie has been overwritten at ${Je(t)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Je(s)} ${Je(a)}`),z[0]!=1668509029&&K("Runtime error: The application has corrupted its heap memory area (address zero)!")}}T(!e.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),T(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),T(!e.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),T(!e.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var We=[],Ft=[],ke=[],pe=!1;function tt(t){We.unshift(t)}function nt(t){ke.unshift(t)}T(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),T(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),T(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),T(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var _e=0,Pe=null,Ce=null,Ae={};function Re(t){for(var a=t;;){if(!Ae[t])return t;t=a+Math.random()}}function Te(t){_e++,e.monitorRunDependencies?.(_e),t?(T(!Ae[t]),Ae[t]=1,Pe===null&&typeof setInterval<"u"&&(Pe=setInterval((()=>{if(ne)return clearInterval(Pe),void(Pe=null);var a=!1;for(var s in Ae)a||(a=!0,x("still waiting on run dependencies:")),x(`dependency: ${s}`);a&&x("(end of list)")}),1e4))):x("warning: run dependency added without ID")}function Fe(t){if(_e--,e.monitorRunDependencies?.(_e),t?(T(Ae[t]),delete Ae[t]):x("warning: run dependency removed without ID"),_e==0&&(Pe!==null&&(clearInterval(Pe),Pe=null),Ce)){var a=Ce;Ce=null,a()}}function K(t){e.onAbort?.(t),x(t="Aborted("+t+")"),ne=!0;var a=new WebAssembly.RuntimeError(t);throw o(a),a}var xe,V,Z,Ee=t=>t.startsWith("data:application/octet-stream;base64,"),Me=t=>t.startsWith("file://");function i(t,a){return(...s)=>{T(pe,`native function \`${t}\` called before runtime initialization`);var l=le[t];return T(l,`exported native function \`${t}\` not found`),T(s.length<=a,`native function \`${t}\` called with ${s.length} args but expects ${a}`),l(...s)}}function an(){if(e.locateFile){var t="pdfium.wasm";return Ee(t)?t:(a=t,e.locateFile?e.locateFile(a,E):E+a)}var a;return b?"pdfium.wasm":new URL("/assets/pdfium-B8f0vBaD.wasm",import.meta.url).href}function Gt(t){if(t==xe&&N)return new Uint8Array(N);if(c)return c(t);throw"both async and sync fetching of the wasm failed"}function St(t,a,s){return(function(l){return N?Promise.resolve().then((()=>Gt(l))):_(l).then((P=>new Uint8Array(P)),(()=>Gt(l)))})(t).then((l=>WebAssembly.instantiate(l,a))).then(s,(l=>{x(`failed to asynchronously prepare wasm: ${l}`),Me(xe)&&x(`warning: Loading from a file URI (${xe}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),K(l)}))}if((()=>{var t=new Int16Array(1),a=new Int8Array(t.buffer);if(t[0]=25459,a[0]!==115||a[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),e.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function Ie(t,a,s=!0){Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{configurable:!0,get(){K(`\`Module.${t}\` has been replaced by \`${a}\``+(s?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function Ct(t){return t==="FS_createPath"||t==="FS_createDataFile"||t==="FS_createPreloadedFile"||t==="FS_unlink"||t==="addRunDependency"||t==="FS_createLazyFile"||t==="FS_createDevice"||t==="removeRunDependency"}function Tt(t,a){typeof globalThis>"u"||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get(){a()}})}function xt(t,a){Tt(t,(()=>{je(`\`${t}\` is not longer defined by emscripten. ${a}`)}))}function vt(t){Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{configurable:!0,get(){var a=`'${t}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;Ct(t)&&(a+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),K(a)}})}xt("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),xt("asm","Please use wasmExports instead");var lt=t=>{t.forEach((a=>a(e)))};e.noExitRuntime;var Je=t=>(T(typeof t=="number"),"0x"+(t>>>=0).toString(16).padStart(8,"0")),he=t=>$t(t),De=()=>Kt(),je=t=>{je.shown||={},je.shown[t]||(je.shown[t]=1,x(t))},Ot=typeof TextDecoder<"u"?new TextDecoder:void 0,ze=(t,a=0,s=NaN)=>{for(var l=a+s,P=a;t[P]&&!(P>=l);)++P;if(P-a>16&&t.buffer&&Ot)return Ot.decode(t.subarray(a,P));for(var D="";a<P;){var f=t[a++];if(128&f){var A=63&t[a++];if((224&f)!=192){var S=63&t[a++];if((240&f)==224?f=(15&f)<<12|A<<6|S:((248&f)!=240&&je("Invalid UTF-8 leading byte "+Je(f)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),f=(7&f)<<18|A<<12|S<<6|63&t[a++]),f<65536)D+=String.fromCharCode(f);else{var I=f-65536;D+=String.fromCharCode(55296|I>>10,56320|1023&I)}}else D+=String.fromCharCode((31&f)<<6|A)}else D+=String.fromCharCode(f)}return D},Be=(t,a)=>(T(typeof t=="number",`UTF8ToString expects a number (got ${typeof t})`),t?ze($,t,a):"");function rt(){T(Y.varargs!=null);var t=O[+Y.varargs>>2];return Y.varargs+=4,t}var $e=rt,q={isAbs:t=>t.charAt(0)==="/",splitPath:t=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1),normalizeArray:(t,a)=>{for(var s=0,l=t.length-1;l>=0;l--){var P=t[l];P==="."?t.splice(l,1):P===".."?(t.splice(l,1),s++):s&&(t.splice(l,1),s--)}if(a)for(;s;s--)t.unshift("..");return t},normalize:t=>{var a=q.isAbs(t),s=t.substr(-1)==="/";return(t=q.normalizeArray(t.split("/").filter((l=>!!l)),!a).join("/"))||a||(t="."),t&&s&&(t+="/"),(a?"/":"")+t},dirname:t=>{var a=q.splitPath(t),s=a[0],l=a[1];return s||l?(l&&(l=l.substr(0,l.length-1)),s+l):"."},basename:t=>{if(t==="/")return"/";var a=(t=(t=q.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return a===-1?t:t.substr(a+1)},join:(...t)=>q.normalize(t.join("/")),join2:(t,a)=>q.normalize(t+"/"+a)},wt=t=>(wt=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return a=>crypto.getRandomValues(a);K("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")})())(t),ye={resolve:(...t)=>{for(var a="",s=!1,l=t.length-1;l>=-1&&!s;l--){var P=l>=0?t[l]:F.cwd();if(typeof P!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!P)return"";a=P+"/"+a,s=q.isAbs(P)}return(s?"/":"")+(a=q.normalizeArray(a.split("/").filter((D=>!!D)),!s).join("/"))||"."},relative:(t,a)=>{function s(I){for(var j=0;j<I.length&&I[j]==="";j++);for(var w=I.length-1;w>=0&&I[w]==="";w--);return j>w?[]:I.slice(j,w-j+1)}t=ye.resolve(t).substr(1),a=ye.resolve(a).substr(1);for(var l=s(t.split("/")),P=s(a.split("/")),D=Math.min(l.length,P.length),f=D,A=0;A<D;A++)if(l[A]!==P[A]){f=A;break}var S=[];for(A=f;A<l.length;A++)S.push("..");return(S=S.concat(P.slice(f))).join("/")}},dt=[],qe=t=>{for(var a=0,s=0;s<t.length;++s){var l=t.charCodeAt(s);l<=127?a++:l<=2047?a+=2:l>=55296&&l<=57343?(a+=4,++s):a+=3}return a},_t=(t,a,s,l)=>{if(T(typeof t=="string",`stringToUTF8Array expects a string (got ${typeof t})`),!(l>0))return 0;for(var P=s,D=s+l-1,f=0;f<t.length;++f){var A=t.charCodeAt(f);if(A>=55296&&A<=57343&&(A=65536+((1023&A)<<10)|1023&t.charCodeAt(++f)),A<=127){if(s>=D)break;a[s++]=A}else if(A<=2047){if(s+1>=D)break;a[s++]=192|A>>6,a[s++]=128|63&A}else if(A<=65535){if(s+2>=D)break;a[s++]=224|A>>12,a[s++]=128|A>>6&63,a[s++]=128|63&A}else{if(s+3>=D)break;A>1114111&&je("Invalid Unicode code point "+Je(A)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),a[s++]=240|A>>18,a[s++]=128|A>>12&63,a[s++]=128|A>>6&63,a[s++]=128|63&A}}return a[s]=0,s-P};function kt(t,a,s){var l=qe(t)+1,P=new Array(l),D=_t(t,P,0,P.length);return P.length=D,P}var ve,Le,Ne={ttys:[],init(){},shutdown(){},register(t,a){Ne.ttys[t]={input:[],output:[],ops:a},F.registerDevice(t,Ne.stream_ops)},stream_ops:{open(t){var a=Ne.ttys[t.node.rdev];if(!a)throw new F.ErrnoError(43);t.tty=a,t.seekable=!1},close(t){t.tty.ops.fsync(t.tty)},fsync(t){t.tty.ops.fsync(t.tty)},read(t,a,s,l,P){if(!t.tty||!t.tty.ops.get_char)throw new F.ErrnoError(60);for(var D=0,f=0;f<l;f++){var A;try{A=t.tty.ops.get_char(t.tty)}catch{throw new F.ErrnoError(29)}if(A===void 0&&D===0)throw new F.ErrnoError(6);if(A==null)break;D++,a[s+f]=A}return D&&(t.node.timestamp=Date.now()),D},write(t,a,s,l,P){if(!t.tty||!t.tty.ops.put_char)throw new F.ErrnoError(60);try{for(var D=0;D<l;D++)t.tty.ops.put_char(t.tty,a[s+D])}catch{throw new F.ErrnoError(29)}return l&&(t.node.timestamp=Date.now()),D}},default_tty_ops:{get_char:t=>(()=>{if(!dt.length){var a=null;if(typeof window<"u"&&typeof window.prompt=="function"?(a=window.prompt("Input: "))!==null&&(a+=`
`):typeof readline=="function"&&(a=readline())&&(a+=`
`),!a)return null;dt=kt(a)}return dt.shift()})(),put_char(t,a){a===null||a===10?(C(ze(t.output)),t.output=[]):a!=0&&t.output.push(a)},fsync(t){t.output&&t.output.length>0&&(C(ze(t.output)),t.output=[])},ioctl_tcgets:t=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(t,a,s)=>0,ioctl_tiocgwinsz:t=>[24,80]},default_tty1_ops:{put_char(t,a){a===null||a===10?(x(ze(t.output)),t.output=[]):a!=0&&t.output.push(a)},fsync(t){t.output&&t.output.length>0&&(x(ze(t.output)),t.output=[])}}},Rt=(t,a)=>(T(a,"alignment argument is required"),Math.ceil(t/a)*a),It=t=>{t=Rt(t,65536);var a=Pn(65536,t);return a&&((s,l)=>{$.fill(0,s,s+l)})(a,t),a},W={ops_table:null,mount:t=>W.createNode(null,"/",16895,0),createNode(t,a,s,l){if(F.isBlkdev(s)||F.isFIFO(s))throw new F.ErrnoError(63);W.ops_table||={dir:{node:{getattr:W.node_ops.getattr,setattr:W.node_ops.setattr,lookup:W.node_ops.lookup,mknod:W.node_ops.mknod,rename:W.node_ops.rename,unlink:W.node_ops.unlink,rmdir:W.node_ops.rmdir,readdir:W.node_ops.readdir,symlink:W.node_ops.symlink},stream:{llseek:W.stream_ops.llseek}},file:{node:{getattr:W.node_ops.getattr,setattr:W.node_ops.setattr},stream:{llseek:W.stream_ops.llseek,read:W.stream_ops.read,write:W.stream_ops.write,allocate:W.stream_ops.allocate,mmap:W.stream_ops.mmap,msync:W.stream_ops.msync}},link:{node:{getattr:W.node_ops.getattr,setattr:W.node_ops.setattr,readlink:W.node_ops.readlink},stream:{}},chrdev:{node:{getattr:W.node_ops.getattr,setattr:W.node_ops.setattr},stream:F.chrdev_stream_ops}};var P=F.createNode(t,a,s,l);return F.isDir(P.mode)?(P.node_ops=W.ops_table.dir.node,P.stream_ops=W.ops_table.dir.stream,P.contents={}):F.isFile(P.mode)?(P.node_ops=W.ops_table.file.node,P.stream_ops=W.ops_table.file.stream,P.usedBytes=0,P.contents=null):F.isLink(P.mode)?(P.node_ops=W.ops_table.link.node,P.stream_ops=W.ops_table.link.stream):F.isChrdev(P.mode)&&(P.node_ops=W.ops_table.chrdev.node,P.stream_ops=W.ops_table.chrdev.stream),P.timestamp=Date.now(),t&&(t.contents[a]=P,t.timestamp=P.timestamp),P},getFileDataAsTypedArray:t=>t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0),expandFileStorage(t,a){var s=t.contents?t.contents.length:0;if(!(s>=a)){a=Math.max(a,s*(s<1048576?2:1.125)>>>0),s!=0&&(a=Math.max(a,256));var l=t.contents;t.contents=new Uint8Array(a),t.usedBytes>0&&t.contents.set(l.subarray(0,t.usedBytes),0)}},resizeFileStorage(t,a){if(t.usedBytes!=a)if(a==0)t.contents=null,t.usedBytes=0;else{var s=t.contents;t.contents=new Uint8Array(a),s&&t.contents.set(s.subarray(0,Math.min(a,t.usedBytes))),t.usedBytes=a}},node_ops:{getattr(t){var a={};return a.dev=F.isChrdev(t.mode)?t.id:1,a.ino=t.id,a.mode=t.mode,a.nlink=1,a.uid=0,a.gid=0,a.rdev=t.rdev,F.isDir(t.mode)?a.size=4096:F.isFile(t.mode)?a.size=t.usedBytes:F.isLink(t.mode)?a.size=t.link.length:a.size=0,a.atime=new Date(t.timestamp),a.mtime=new Date(t.timestamp),a.ctime=new Date(t.timestamp),a.blksize=4096,a.blocks=Math.ceil(a.size/a.blksize),a},setattr(t,a){a.mode!==void 0&&(t.mode=a.mode),a.timestamp!==void 0&&(t.timestamp=a.timestamp),a.size!==void 0&&W.resizeFileStorage(t,a.size)},lookup(t,a){throw F.genericErrors[44]},mknod:(t,a,s,l)=>W.createNode(t,a,s,l),rename(t,a,s){if(F.isDir(t.mode)){var l;try{l=F.lookupNode(a,s)}catch{}if(l)for(var P in l.contents)throw new F.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=s,a.contents[s]=t,a.timestamp=t.parent.timestamp},unlink(t,a){delete t.contents[a],t.timestamp=Date.now()},rmdir(t,a){var s=F.lookupNode(t,a);for(var l in s.contents)throw new F.ErrnoError(55);delete t.contents[a],t.timestamp=Date.now()},readdir(t){var a=[".",".."];for(var s of Object.keys(t.contents))a.push(s);return a},symlink(t,a,s){var l=W.createNode(t,a,41471,0);return l.link=s,l},readlink(t){if(!F.isLink(t.mode))throw new F.ErrnoError(28);return t.link}},stream_ops:{read(t,a,s,l,P){var D=t.node.contents;if(P>=t.node.usedBytes)return 0;var f=Math.min(t.node.usedBytes-P,l);if(T(f>=0),f>8&&D.subarray)a.set(D.subarray(P,P+f),s);else for(var A=0;A<f;A++)a[s+A]=D[P+A];return f},write(t,a,s,l,P,D){if(T(!(a instanceof ArrayBuffer)),a.buffer===U.buffer&&(D=!1),!l)return 0;var f=t.node;if(f.timestamp=Date.now(),a.subarray&&(!f.contents||f.contents.subarray)){if(D)return T(P===0,"canOwn must imply no weird position inside the file"),f.contents=a.subarray(s,s+l),f.usedBytes=l,l;if(f.usedBytes===0&&P===0)return f.contents=a.slice(s,s+l),f.usedBytes=l,l;if(P+l<=f.usedBytes)return f.contents.set(a.subarray(s,s+l),P),l}if(W.expandFileStorage(f,P+l),f.contents.subarray&&a.subarray)f.contents.set(a.subarray(s,s+l),P);else for(var A=0;A<l;A++)f.contents[P+A]=a[s+A];return f.usedBytes=Math.max(f.usedBytes,P+l),l},llseek(t,a,s){var l=a;if(s===1?l+=t.position:s===2&&F.isFile(t.node.mode)&&(l+=t.node.usedBytes),l<0)throw new F.ErrnoError(28);return l},allocate(t,a,s){W.expandFileStorage(t.node,a+s),t.node.usedBytes=Math.max(t.node.usedBytes,a+s)},mmap(t,a,s,l,P){if(!F.isFile(t.node.mode))throw new F.ErrnoError(43);var D,f,A=t.node.contents;if(2&P||!A||A.buffer!==U.buffer){if(f=!0,!(D=It(a)))throw new F.ErrnoError(48);A&&((s>0||s+a<A.length)&&(A=A.subarray?A.subarray(s,s+a):Array.prototype.slice.call(A,s,s+a)),U.set(A,D))}else f=!1,D=A.byteOffset;return{ptr:D,allocated:f}},msync:(t,a,s,l,P)=>(W.stream_ops.write(t,a,0,l,s,!1),0)}},sn=e.preloadPlugins||[],Pt=(t,a)=>{var s=0;return t&&(s|=365),a&&(s|=146),s},jt={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},F={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class extends Error{constructor(t){for(var a in super(pe?(s=>Be(cn(s)))(t):""),this.name="ErrnoError",this.errno=t,jt)if(jt[a]===t){this.code=a;break}}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(t){this.node=t}get isRead(){return(2097155&this.flags)!=1}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(t){this.shared.flags=t}get position(){return this.shared.position}set position(t){this.shared.position=t}},FSNode:class{constructor(t,a,s,l){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=F.nextInode++,this.name=a,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=l,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(t){t?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(t){t?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return F.isDir(this.mode)}get isDevice(){return F.isChrdev(this.mode)}},lookupPath(t,a={}){if(!(t=ye.resolve(t)))return{path:"",node:null};if((a=Object.assign({follow_mount:!0,recurse_count:0},a)).recurse_count>8)throw new F.ErrnoError(32);for(var s=t.split("/").filter((I=>!!I)),l=F.root,P="/",D=0;D<s.length;D++){var f=D===s.length-1;if(f&&a.parent)break;if(l=F.lookupNode(l,s[D]),P=q.join2(P,s[D]),F.isMountpoint(l)&&(!f||f&&a.follow_mount)&&(l=l.mounted.root),!f||a.follow)for(var A=0;F.isLink(l.mode);){var S=F.readlink(P);if(P=ye.resolve(q.dirname(P),S),l=F.lookupPath(P,{recurse_count:a.recurse_count+1}).node,A++>40)throw new F.ErrnoError(32)}}return{path:P,node:l}},getPath(t){for(var a;;){if(F.isRoot(t)){var s=t.mount.mountpoint;return a?s[s.length-1]!=="/"?`${s}/${a}`:s+a:s}a=a?`${t.name}/${a}`:t.name,t=t.parent}},hashName(t,a){for(var s=0,l=0;l<a.length;l++)s=(s<<5)-s+a.charCodeAt(l)|0;return(t+s>>>0)%F.nameTable.length},hashAddNode(t){var a=F.hashName(t.parent.id,t.name);t.name_next=F.nameTable[a],F.nameTable[a]=t},hashRemoveNode(t){var a=F.hashName(t.parent.id,t.name);if(F.nameTable[a]===t)F.nameTable[a]=t.name_next;else for(var s=F.nameTable[a];s;){if(s.name_next===t){s.name_next=t.name_next;break}s=s.name_next}},lookupNode(t,a){var s=F.mayLookup(t);if(s)throw new F.ErrnoError(s);for(var l=F.hashName(t.id,a),P=F.nameTable[l];P;P=P.name_next){var D=P.name;if(P.parent.id===t.id&&D===a)return P}return F.lookup(t,a)},createNode(t,a,s,l){T(typeof t=="object");var P=new F.FSNode(t,a,s,l);return F.hashAddNode(P),P},destroyNode(t){F.hashRemoveNode(t)},isRoot:t=>t===t.parent,isMountpoint:t=>!!t.mounted,isFile:t=>(61440&t)==32768,isDir:t=>(61440&t)==16384,isLink:t=>(61440&t)==40960,isChrdev:t=>(61440&t)==8192,isBlkdev:t=>(61440&t)==24576,isFIFO:t=>(61440&t)==4096,isSocket:t=>!(49152&~t),flagsToPermissionString(t){var a=["r","w","rw"][3&t];return 512&t&&(a+="w"),a},nodePermissions:(t,a)=>F.ignorePermissions||(!a.includes("r")||292&t.mode)&&(!a.includes("w")||146&t.mode)&&(!a.includes("x")||73&t.mode)?0:2,mayLookup(t){if(!F.isDir(t.mode))return 54;var a=F.nodePermissions(t,"x");return a||(t.node_ops.lookup?0:2)},mayCreate(t,a){try{return F.lookupNode(t,a),20}catch{}return F.nodePermissions(t,"wx")},mayDelete(t,a,s){var l;try{l=F.lookupNode(t,a)}catch(D){return D.errno}var P=F.nodePermissions(t,"wx");if(P)return P;if(s){if(!F.isDir(l.mode))return 54;if(F.isRoot(l)||F.getPath(l)===F.cwd())return 10}else if(F.isDir(l.mode))return 31;return 0},mayOpen:(t,a)=>t?F.isLink(t.mode)?32:F.isDir(t.mode)&&(F.flagsToPermissionString(a)!=="r"||512&a)?31:F.nodePermissions(t,F.flagsToPermissionString(a)):44,MAX_OPEN_FDS:4096,nextfd(){for(var t=0;t<=F.MAX_OPEN_FDS;t++)if(!F.streams[t])return t;throw new F.ErrnoError(33)},getStreamChecked(t){var a=F.getStream(t);if(!a)throw new F.ErrnoError(8);return a},getStream:t=>F.streams[t],createStream:(t,a=-1)=>(T(a>=-1),t=Object.assign(new F.FSStream,t),a==-1&&(a=F.nextfd()),t.fd=a,F.streams[a]=t,t),closeStream(t){F.streams[t]=null},dupStream(t,a=-1){var s=F.createStream(t,a);return s.stream_ops?.dup?.(s),s},chrdev_stream_ops:{open(t){var a=F.getDevice(t.node.rdev);t.stream_ops=a.stream_ops,t.stream_ops.open?.(t)},llseek(){throw new F.ErrnoError(70)}},major:t=>t>>8,minor:t=>255&t,makedev:(t,a)=>t<<8|a,registerDevice(t,a){F.devices[t]={stream_ops:a}},getDevice:t=>F.devices[t],getMounts(t){for(var a=[],s=[t];s.length;){var l=s.pop();a.push(l),s.push(...l.mounts)}return a},syncfs(t,a){typeof t=="function"&&(a=t,t=!1),F.syncFSRequests++,F.syncFSRequests>1&&x(`warning: ${F.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var s=F.getMounts(F.root.mount),l=0;function P(f){return T(F.syncFSRequests>0),F.syncFSRequests--,a(f)}function D(f){if(f)return D.errored?void 0:(D.errored=!0,P(f));++l>=s.length&&P(null)}s.forEach((f=>{if(!f.type.syncfs)return D(null);f.type.syncfs(f,t,D)}))},mount(t,a,s){if(typeof t=="string")throw t;var l,P=s==="/",D=!s;if(P&&F.root)throw new F.ErrnoError(10);if(!P&&!D){var f=F.lookupPath(s,{follow_mount:!1});if(s=f.path,l=f.node,F.isMountpoint(l))throw new F.ErrnoError(10);if(!F.isDir(l.mode))throw new F.ErrnoError(54)}var A={type:t,opts:a,mountpoint:s,mounts:[]},S=t.mount(A);return S.mount=A,A.root=S,P?F.root=S:l&&(l.mounted=A,l.mount&&l.mount.mounts.push(A)),S},unmount(t){var a=F.lookupPath(t,{follow_mount:!1});if(!F.isMountpoint(a.node))throw new F.ErrnoError(28);var s=a.node,l=s.mounted,P=F.getMounts(l);Object.keys(F.nameTable).forEach((f=>{for(var A=F.nameTable[f];A;){var S=A.name_next;P.includes(A.mount)&&F.destroyNode(A),A=S}})),s.mounted=null;var D=s.mount.mounts.indexOf(l);T(D!==-1),s.mount.mounts.splice(D,1)},lookup:(t,a)=>t.node_ops.lookup(t,a),mknod(t,a,s){var l=F.lookupPath(t,{parent:!0}).node,P=q.basename(t);if(!P||P==="."||P==="..")throw new F.ErrnoError(28);var D=F.mayCreate(l,P);if(D)throw new F.ErrnoError(D);if(!l.node_ops.mknod)throw new F.ErrnoError(63);return l.node_ops.mknod(l,P,a,s)},create:(t,a)=>(a=a!==void 0?a:438,a&=4095,a|=32768,F.mknod(t,a,0)),mkdir:(t,a)=>(a=a!==void 0?a:511,a&=1023,a|=16384,F.mknod(t,a,0)),mkdirTree(t,a){for(var s=t.split("/"),l="",P=0;P<s.length;++P)if(s[P]){l+="/"+s[P];try{F.mkdir(l,a)}catch(D){if(D.errno!=20)throw D}}},mkdev:(t,a,s)=>(s===void 0&&(s=a,a=438),a|=8192,F.mknod(t,a,s)),symlink(t,a){if(!ye.resolve(t))throw new F.ErrnoError(44);var s=F.lookupPath(a,{parent:!0}).node;if(!s)throw new F.ErrnoError(44);var l=q.basename(a),P=F.mayCreate(s,l);if(P)throw new F.ErrnoError(P);if(!s.node_ops.symlink)throw new F.ErrnoError(63);return s.node_ops.symlink(s,l,t)},rename(t,a){var s,l,P=q.dirname(t),D=q.dirname(a),f=q.basename(t),A=q.basename(a);if(s=F.lookupPath(t,{parent:!0}).node,l=F.lookupPath(a,{parent:!0}).node,!s||!l)throw new F.ErrnoError(44);if(s.mount!==l.mount)throw new F.ErrnoError(75);var S,I=F.lookupNode(s,f),j=ye.relative(t,D);if(j.charAt(0)!==".")throw new F.ErrnoError(28);if((j=ye.relative(a,P)).charAt(0)!==".")throw new F.ErrnoError(55);try{S=F.lookupNode(l,A)}catch{}if(I!==S){var w=F.isDir(I.mode),k=F.mayDelete(s,f,w);if(k)throw new F.ErrnoError(k);if(k=S?F.mayDelete(l,A,w):F.mayCreate(l,A))throw new F.ErrnoError(k);if(!s.node_ops.rename)throw new F.ErrnoError(63);if(F.isMountpoint(I)||S&&F.isMountpoint(S))throw new F.ErrnoError(10);if(l!==s&&(k=F.nodePermissions(s,"w")))throw new F.ErrnoError(k);F.hashRemoveNode(I);try{s.node_ops.rename(I,l,A),I.parent=l}catch(B){throw B}finally{F.hashAddNode(I)}}},rmdir(t){var a=F.lookupPath(t,{parent:!0}).node,s=q.basename(t),l=F.lookupNode(a,s),P=F.mayDelete(a,s,!0);if(P)throw new F.ErrnoError(P);if(!a.node_ops.rmdir)throw new F.ErrnoError(63);if(F.isMountpoint(l))throw new F.ErrnoError(10);a.node_ops.rmdir(a,s),F.destroyNode(l)},readdir(t){var a=F.lookupPath(t,{follow:!0}).node;if(!a.node_ops.readdir)throw new F.ErrnoError(54);return a.node_ops.readdir(a)},unlink(t){var a=F.lookupPath(t,{parent:!0}).node;if(!a)throw new F.ErrnoError(44);var s=q.basename(t),l=F.lookupNode(a,s),P=F.mayDelete(a,s,!1);if(P)throw new F.ErrnoError(P);if(!a.node_ops.unlink)throw new F.ErrnoError(63);if(F.isMountpoint(l))throw new F.ErrnoError(10);a.node_ops.unlink(a,s),F.destroyNode(l)},readlink(t){var a=F.lookupPath(t).node;if(!a)throw new F.ErrnoError(44);if(!a.node_ops.readlink)throw new F.ErrnoError(28);return ye.resolve(F.getPath(a.parent),a.node_ops.readlink(a))},stat(t,a){var s=F.lookupPath(t,{follow:!a}).node;if(!s)throw new F.ErrnoError(44);if(!s.node_ops.getattr)throw new F.ErrnoError(63);return s.node_ops.getattr(s)},lstat:t=>F.stat(t,!0),chmod(t,a,s){var l;if(!(l=typeof t=="string"?F.lookupPath(t,{follow:!s}).node:t).node_ops.setattr)throw new F.ErrnoError(63);l.node_ops.setattr(l,{mode:4095&a|-4096&l.mode,timestamp:Date.now()})},lchmod(t,a){F.chmod(t,a,!0)},fchmod(t,a){var s=F.getStreamChecked(t);F.chmod(s.node,a)},chown(t,a,s,l){var P;if(!(P=typeof t=="string"?F.lookupPath(t,{follow:!l}).node:t).node_ops.setattr)throw new F.ErrnoError(63);P.node_ops.setattr(P,{timestamp:Date.now()})},lchown(t,a,s){F.chown(t,a,s,!0)},fchown(t,a,s){var l=F.getStreamChecked(t);F.chown(l.node,a,s)},truncate(t,a){if(a<0)throw new F.ErrnoError(28);var s;if(!(s=typeof t=="string"?F.lookupPath(t,{follow:!0}).node:t).node_ops.setattr)throw new F.ErrnoError(63);if(F.isDir(s.mode))throw new F.ErrnoError(31);if(!F.isFile(s.mode))throw new F.ErrnoError(28);var l=F.nodePermissions(s,"w");if(l)throw new F.ErrnoError(l);s.node_ops.setattr(s,{size:a,timestamp:Date.now()})},ftruncate(t,a){var s=F.getStreamChecked(t);if(!(2097155&s.flags))throw new F.ErrnoError(28);F.truncate(s.node,a)},utime(t,a,s){var l=F.lookupPath(t,{follow:!0}).node;l.node_ops.setattr(l,{timestamp:Math.max(a,s)})},open(t,a,s){if(t==="")throw new F.ErrnoError(44);var l;if(s=64&(a=typeof a=="string"?(A=>{var S={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[A];if(S===void 0)throw new Error(`Unknown file open mode: ${A}`);return S})(a):a)?4095&(s=s===void 0?438:s)|32768:0,typeof t=="object")l=t;else{t=q.normalize(t);try{l=F.lookupPath(t,{follow:!(131072&a)}).node}catch{}}var P=!1;if(64&a)if(l){if(128&a)throw new F.ErrnoError(20)}else l=F.mknod(t,s,0),P=!0;if(!l)throw new F.ErrnoError(44);if(F.isChrdev(l.mode)&&(a&=-513),65536&a&&!F.isDir(l.mode))throw new F.ErrnoError(54);if(!P){var D=F.mayOpen(l,a);if(D)throw new F.ErrnoError(D)}512&a&&!P&&F.truncate(l,0),a&=-131713;var f=F.createStream({node:l,path:F.getPath(l),flags:a,seekable:!0,position:0,stream_ops:l.stream_ops,ungotten:[],error:!1});return f.stream_ops.open&&f.stream_ops.open(f),!e.logReadFiles||1&a||t in F.readFiles||(F.readFiles[t]=1),f},close(t){if(F.isClosed(t))throw new F.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(a){throw a}finally{F.closeStream(t.fd)}t.fd=null},isClosed:t=>t.fd===null,llseek(t,a,s){if(F.isClosed(t))throw new F.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new F.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new F.ErrnoError(28);return t.position=t.stream_ops.llseek(t,a,s),t.ungotten=[],t.position},read(t,a,s,l,P){if(T(s>=0),l<0||P<0)throw new F.ErrnoError(28);if(F.isClosed(t))throw new F.ErrnoError(8);if((2097155&t.flags)==1)throw new F.ErrnoError(8);if(F.isDir(t.node.mode))throw new F.ErrnoError(31);if(!t.stream_ops.read)throw new F.ErrnoError(28);var D=P!==void 0;if(D){if(!t.seekable)throw new F.ErrnoError(70)}else P=t.position;var f=t.stream_ops.read(t,a,s,l,P);return D||(t.position+=f),f},write(t,a,s,l,P,D){if(T(s>=0),l<0||P<0)throw new F.ErrnoError(28);if(F.isClosed(t))throw new F.ErrnoError(8);if(!(2097155&t.flags))throw new F.ErrnoError(8);if(F.isDir(t.node.mode))throw new F.ErrnoError(31);if(!t.stream_ops.write)throw new F.ErrnoError(28);t.seekable&&1024&t.flags&&F.llseek(t,0,2);var f=P!==void 0;if(f){if(!t.seekable)throw new F.ErrnoError(70)}else P=t.position;var A=t.stream_ops.write(t,a,s,l,P,D);return f||(t.position+=A),A},allocate(t,a,s){if(F.isClosed(t))throw new F.ErrnoError(8);if(a<0||s<=0)throw new F.ErrnoError(28);if(!(2097155&t.flags))throw new F.ErrnoError(8);if(!F.isFile(t.node.mode)&&!F.isDir(t.node.mode))throw new F.ErrnoError(43);if(!t.stream_ops.allocate)throw new F.ErrnoError(138);t.stream_ops.allocate(t,a,s)},mmap(t,a,s,l,P){if(2&l&&!(2&P)&&(2097155&t.flags)!=2)throw new F.ErrnoError(2);if((2097155&t.flags)==1)throw new F.ErrnoError(2);if(!t.stream_ops.mmap)throw new F.ErrnoError(43);if(!a)throw new F.ErrnoError(28);return t.stream_ops.mmap(t,a,s,l,P)},msync:(t,a,s,l,P)=>(T(s>=0),t.stream_ops.msync?t.stream_ops.msync(t,a,s,l,P):0),ioctl(t,a,s){if(!t.stream_ops.ioctl)throw new F.ErrnoError(59);return t.stream_ops.ioctl(t,a,s)},readFile(t,a={}){if(a.flags=a.flags||0,a.encoding=a.encoding||"binary",a.encoding!=="utf8"&&a.encoding!=="binary")throw new Error(`Invalid encoding type "${a.encoding}"`);var s,l=F.open(t,a.flags),P=F.stat(t).size,D=new Uint8Array(P);return F.read(l,D,0,P,0),a.encoding==="utf8"?s=ze(D):a.encoding==="binary"&&(s=D),F.close(l),s},writeFile(t,a,s={}){s.flags=s.flags||577;var l=F.open(t,s.flags,s.mode);if(typeof a=="string"){var P=new Uint8Array(qe(a)+1),D=_t(a,P,0,P.length);F.write(l,P,0,D,void 0,s.canOwn)}else{if(!ArrayBuffer.isView(a))throw new Error("Unsupported data type");F.write(l,a,0,a.byteLength,void 0,s.canOwn)}F.close(l)},cwd:()=>F.currentPath,chdir(t){var a=F.lookupPath(t,{follow:!0});if(a.node===null)throw new F.ErrnoError(44);if(!F.isDir(a.node.mode))throw new F.ErrnoError(54);var s=F.nodePermissions(a.node,"x");if(s)throw new F.ErrnoError(s);F.currentPath=a.path},createDefaultDirectories(){F.mkdir("/tmp"),F.mkdir("/home"),F.mkdir("/home/web_user")},createDefaultDevices(){F.mkdir("/dev"),F.registerDevice(F.makedev(1,3),{read:()=>0,write:(l,P,D,f,A)=>f}),F.mkdev("/dev/null",F.makedev(1,3)),Ne.register(F.makedev(5,0),Ne.default_tty_ops),Ne.register(F.makedev(6,0),Ne.default_tty1_ops),F.mkdev("/dev/tty",F.makedev(5,0)),F.mkdev("/dev/tty1",F.makedev(6,0));var t=new Uint8Array(1024),a=0,s=()=>(a===0&&(a=wt(t).byteLength),t[--a]);F.createDevice("/dev","random",s),F.createDevice("/dev","urandom",s),F.mkdir("/dev/shm"),F.mkdir("/dev/shm/tmp")},createSpecialDirectories(){F.mkdir("/proc");var t=F.mkdir("/proc/self");F.mkdir("/proc/self/fd"),F.mount({mount(){var a=F.createNode(t,"fd",16895,73);return a.node_ops={lookup(s,l){var P=+l,D=F.getStreamChecked(P),f={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>D.path}};return f.parent=f,f}},a}},{},"/proc/self/fd")},createStandardStreams(t,a,s){t?F.createDevice("/dev","stdin",t):F.symlink("/dev/tty","/dev/stdin"),a?F.createDevice("/dev","stdout",null,a):F.symlink("/dev/tty","/dev/stdout"),s?F.createDevice("/dev","stderr",null,s):F.symlink("/dev/tty1","/dev/stderr");var l=F.open("/dev/stdin",0),P=F.open("/dev/stdout",1),D=F.open("/dev/stderr",1);T(l.fd===0,`invalid handle for stdin (${l.fd})`),T(P.fd===1,`invalid handle for stdout (${P.fd})`),T(D.fd===2,`invalid handle for stderr (${D.fd})`)},staticInit(){[44].forEach((t=>{F.genericErrors[t]=new F.ErrnoError(t),F.genericErrors[t].stack="<generic error, no stack>"})),F.nameTable=new Array(4096),F.mount(W,{},"/"),F.createDefaultDirectories(),F.createDefaultDevices(),F.createSpecialDirectories(),F.filesystems={MEMFS:W}},init(t,a,s){T(!F.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),F.initialized=!0,t??=e.stdin,a??=e.stdout,s??=e.stderr,F.createStandardStreams(t,a,s)},quit(){F.initialized=!1,_n(0);for(var t=0;t<F.streams.length;t++){var a=F.streams[t];a&&F.close(a)}},findObject(t,a){var s=F.analyzePath(t,a);return s.exists?s.object:null},analyzePath(t,a){try{t=(l=F.lookupPath(t,{follow:!a})).path}catch{}var s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var l=F.lookupPath(t,{parent:!0});s.parentExists=!0,s.parentPath=l.path,s.parentObject=l.node,s.name=q.basename(t),l=F.lookupPath(t,{follow:!a}),s.exists=!0,s.path=l.path,s.object=l.node,s.name=l.node.name,s.isRoot=l.path==="/"}catch(P){s.error=P.errno}return s},createPath(t,a,s,l){t=typeof t=="string"?t:F.getPath(t);for(var P=a.split("/").reverse();P.length;){var D=P.pop();if(D){var f=q.join2(t,D);try{F.mkdir(f)}catch{}t=f}}return f},createFile(t,a,s,l,P){var D=q.join2(typeof t=="string"?t:F.getPath(t),a),f=Pt(l,P);return F.create(D,f)},createDataFile(t,a,s,l,P,D){var f=a;t&&(t=typeof t=="string"?t:F.getPath(t),f=a?q.join2(t,a):t);var A=Pt(l,P),S=F.create(f,A);if(s){if(typeof s=="string"){for(var I=new Array(s.length),j=0,w=s.length;j<w;++j)I[j]=s.charCodeAt(j);s=I}F.chmod(S,146|A);var k=F.open(S,577);F.write(k,s,0,s.length,0,D),F.close(k),F.chmod(S,A)}},createDevice(t,a,s,l){var P=q.join2(typeof t=="string"?t:F.getPath(t),a),D=Pt(!!s,!!l);F.createDevice.major??=64;var f=F.makedev(F.createDevice.major++,0);return F.registerDevice(f,{open(A){A.seekable=!1},close(A){l?.buffer?.length&&l(10)},read(A,S,I,j,w){for(var k=0,B=0;B<j;B++){var Q;try{Q=s()}catch{throw new F.ErrnoError(29)}if(Q===void 0&&k===0)throw new F.ErrnoError(6);if(Q==null)break;k++,S[I+B]=Q}return k&&(A.node.timestamp=Date.now()),k},write(A,S,I,j,w){for(var k=0;k<j;k++)try{l(S[I+k])}catch{throw new F.ErrnoError(29)}return j&&(A.node.timestamp=Date.now()),k}}),F.mkdev(P,D,f)},forceLoadFile(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{t.contents=c(t.url),t.usedBytes=t.contents.length}catch{throw new F.ErrnoError(29)}},createLazyFile(t,a,s,l,P){class D{constructor(){this.lengthKnown=!1,this.chunks=[]}get(w){if(!(w>this.length-1||w<0)){var k=w%this.chunkSize,B=w/this.chunkSize|0;return this.getter(B)[k]}}setDataGetter(w){this.getter=w}cacheLength(){var w=new XMLHttpRequest;if(w.open("HEAD",s,!1),w.send(null),!(w.status>=200&&w.status<300||w.status===304))throw new Error("Couldn't load "+s+". Status: "+w.status);var k,B=Number(w.getResponseHeader("Content-length")),Q=(k=w.getResponseHeader("Accept-Ranges"))&&k==="bytes",J=(k=w.getResponseHeader("Content-Encoding"))&&k==="gzip",re=1048576;Q||(re=B);var te=this;te.setDataGetter((me=>{var Ue=me*re,Oe=(me+1)*re-1;if(Oe=Math.min(Oe,B-1),te.chunks[me]===void 0&&(te.chunks[me]=((et,it)=>{if(et>it)throw new Error("invalid range ("+et+", "+it+") or no bytes requested!");if(it>B-1)throw new Error("only "+B+" bytes available! programmer error!");var de=new XMLHttpRequest;if(de.open("GET",s,!1),B!==re&&de.setRequestHeader("Range","bytes="+et+"-"+it),de.responseType="arraybuffer",de.overrideMimeType&&de.overrideMimeType("text/plain; charset=x-user-defined"),de.send(null),!(de.status>=200&&de.status<300||de.status===304))throw new Error("Couldn't load "+s+". Status: "+de.status);return de.response!==void 0?new Uint8Array(de.response||[]):kt(de.responseText||"")})(Ue,Oe)),te.chunks[me]===void 0)throw new Error("doXHR failed!");return te.chunks[me]})),!J&&B||(re=B=1,B=this.getter(0).length,re=B,C("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=B,this._chunkSize=re,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!d)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var f={isDevice:!1,contents:new D}}else f={isDevice:!1,url:s};var A=F.createFile(t,a,f,l,P);f.contents?A.contents=f.contents:f.url&&(A.contents=null,A.url=f.url),Object.defineProperties(A,{usedBytes:{get:function(){return this.contents.length}}});var S={};function I(j,w,k,B,Q){var J=j.node.contents;if(Q>=J.length)return 0;var re=Math.min(J.length-Q,B);if(T(re>=0),J.slice)for(var te=0;te<re;te++)w[k+te]=J[Q+te];else for(te=0;te<re;te++)w[k+te]=J.get(Q+te);return re}return Object.keys(A.stream_ops).forEach((j=>{var w=A.stream_ops[j];S[j]=(...k)=>(F.forceLoadFile(A),w(...k))})),S.read=(j,w,k,B,Q)=>(F.forceLoadFile(A),I(j,w,k,B,Q)),S.mmap=(j,w,k,B,Q)=>{F.forceLoadFile(A);var J=It(w);if(!J)throw new F.ErrnoError(48);return I(j,U,J,w,k),{ptr:J,allocated:!0}},A.stream_ops=S,A},absolutePath(){K("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){K("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){K("FS.createLink has been removed; use FS.symlink instead")},joinPath(){K("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){K("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){K("FS.standardizePath has been removed; use PATH.normalize instead")}},Y={DEFAULT_POLLMASK:5,calculateAt(t,a,s){if(q.isAbs(a))return a;var l;if(l=t===-100?F.cwd():Y.getStreamFromFD(t).path,a.length==0){if(!s)throw new F.ErrnoError(44);return l}return q.join2(l,a)},doStat(t,a,s){var l=t(a);O[s>>2]=l.dev,O[s+4>>2]=l.mode,z[s+8>>2]=l.nlink,O[s+12>>2]=l.uid,O[s+16>>2]=l.gid,O[s+20>>2]=l.rdev,Z=[l.size>>>0,(V=l.size,+Math.abs(V)>=1?V>0?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],O[s+24>>2]=Z[0],O[s+28>>2]=Z[1],O[s+32>>2]=4096,O[s+36>>2]=l.blocks;var P=l.atime.getTime(),D=l.mtime.getTime(),f=l.ctime.getTime();return Z=[Math.floor(P/1e3)>>>0,(V=Math.floor(P/1e3),+Math.abs(V)>=1?V>0?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],O[s+40>>2]=Z[0],O[s+44>>2]=Z[1],z[s+48>>2]=P%1e3*1e3*1e3,Z=[Math.floor(D/1e3)>>>0,(V=Math.floor(D/1e3),+Math.abs(V)>=1?V>0?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],O[s+56>>2]=Z[0],O[s+60>>2]=Z[1],z[s+64>>2]=D%1e3*1e3*1e3,Z=[Math.floor(f/1e3)>>>0,(V=Math.floor(f/1e3),+Math.abs(V)>=1?V>0?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],O[s+72>>2]=Z[0],O[s+76>>2]=Z[1],z[s+80>>2]=f%1e3*1e3*1e3,Z=[l.ino>>>0,(V=l.ino,+Math.abs(V)>=1?V>0?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],O[s+88>>2]=Z[0],O[s+92>>2]=Z[1],0},doMsync(t,a,s,l,P){if(!F.isFile(a.node.mode))throw new F.ErrnoError(43);if(2&l)return 0;var D=$.slice(t,t+s);F.msync(a,D,P,s,l)},getStreamFromFD:t=>F.getStreamChecked(t),varargs:void 0,getStr:t=>Be(t)},ot=(t,a)=>(T(t==t>>>0||t==(0|t)),T(a===(0|a)),a+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*a:NaN),Ve=(t,a,s)=>(T(typeof s=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),_t(t,$,a,s)),un=[0,31,60,91,121,152,182,213,244,274,305,335],mn=[0,31,59,90,120,151,181,212,243,273,304,334],Fn=t=>{var a=R.buffer,s=(t-a.byteLength+65535)/65536|0;try{return R.grow(s),we(),1}catch(l){x(`growMemory: Attempted to grow heap from ${a.byteLength} bytes to ${t} bytes, but got error: ${l}`)}},ct={},Qe=()=>{if(!Qe.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:M||"./this.program"};for(var a in ct)ct[a]===void 0?delete t[a]:t[a]=ct[a];var s=[];for(var a in t)s.push(`${a}=${t[a]}`);Qe.strings=s}return Qe.strings},Ze=[],ce=t=>{var a=Ze[t];return a||(t>=Ze.length&&(Ze.length=t+1),Ze[t]=a=ve.get(t)),T(ve.get(t)==a,"JavaScript-side Wasm function table mirror is out of date!"),a},Bt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Lt=(t,a)=>{T(t<16384),t<128?a.push(t):a.push(t%128|128,t>>7)},ln=(t,a)=>{if(T(!a.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled"),typeof WebAssembly.Function=="function")return new WebAssembly.Function((D=>{T(!D.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled");for(var f={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},A={parameters:[],results:D[0]=="v"?[]:[f[D[0]]]},S=1;S<D.length;++S)T(D[S]in f,"invalid signature char: "+D[S]),A.parameters.push(f[D[S]]);return A})(a),t);var s=[1];((D,f)=>{var A=D.slice(0,1),S=D.slice(1),I={i:127,p:127,j:126,f:125,d:124,e:111};f.push(96),Lt(S.length,f);for(var j=0;j<S.length;++j)T(S[j]in I,"invalid signature char: "+S[j]),f.push(I[S[j]]);A=="v"?f.push(0):f.push(1,I[A])})(a,s);var l=[0,97,115,109,1,0,0,0,1];Lt(s.length,l),l.push(...s),l.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var P=new WebAssembly.Module(new Uint8Array(l));return new WebAssembly.Instance(P,{e:{f:t}}).exports.f},dn=t=>(Le||(Le=new WeakMap,((a,s)=>{if(Le)for(var l=a;l<a+s;l++){var P=ce(l);P&&Le.set(P,l)}})(0,ve.length)),Le.get(t)||0),gt=[],ht=(t,a)=>{ve.set(t,a),Ze[t]=ve.get(t)},Nt=t=>Ht(t),Vt=(t,a,s,l,P)=>{var D={string:k=>{var B=0;return k!=null&&k!==0&&(B=(Q=>{var J=qe(Q)+1,re=Nt(J);return Ve(Q,re,J),re})(k)),B},array:k=>{var B,Q,J=Nt(k.length);return Q=J,T((B=k).length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),U.set(B,Q),J}},f=(k=>{var B=e["_"+k];return T(B,"Cannot call unknown function "+k+", make sure it is exported"),B})(t),A=[],S=0;if(T(a!=="array",'Return type should not be "array".'),l)for(var I=0;I<l.length;I++){var j=D[s[I]];j?(S===0&&(S=De()),A[I]=j(l[I])):A[I]=l[I]}var w=f(...A);return w=(function(k){return S!==0&&he(S),(function(B){return a==="string"?Be(B):a==="boolean"?!!B:B})(k)})(w)};F.createPreloadedFile=(t,a,s,l,P,D,f,A,S,I)=>{var j=a?ye.resolve(q.join2(t,a)):t,w=Re(`cp ${j}`);function k(B){function Q(J){I?.(),A||((re,te,me,Ue,Oe,et)=>{F.createDataFile(re,te,me,Ue,Oe,et)})(t,a,J,l,P,S),D?.(),Fe(w)}((J,re,te,me)=>{typeof Browser<"u"&&Browser.init();var Ue=!1;return sn.forEach((Oe=>{Ue||Oe.canHandle(re)&&(Oe.handle(J,re,te,me),Ue=!0)})),Ue})(B,j,Q,(()=>{f?.(),Fe(w)}))||Q(B)}Te(w),typeof s=="string"?((B,Q,J,re)=>{var te=Re(`al ${B}`);_(B).then((me=>{T(me,`Loading data file "${B}" failed (no arrayBuffer).`),Q(new Uint8Array(me)),te&&Fe(te)}),(me=>{if(!J)throw`Loading data file "${B}" failed.`;J()})),te&&Te(te)})(s,k,f):k(s)},F.staticInit();var Ut={__assert_fail:(t,a,s,l)=>{K(`Assertion failed: ${Be(t)}, at: `+[a?Be(a):"unknown filename",s,l?Be(l):"unknown function"])},__syscall_fcntl64:function(t,a,s){Y.varargs=s;try{var l=Y.getStreamFromFD(t);switch(a){case 0:if((P=rt())<0)return-28;for(;F.streams[P];)P++;return F.dupStream(l,P).fd;case 1:case 2:case 13:case 14:return 0;case 3:return l.flags;case 4:var P=rt();return l.flags|=P,0;case 12:return P=$e(),X[P+0>>1]=2,0}return-28}catch(D){if(F===void 0||D.name!=="ErrnoError")throw D;return-D.errno}},__syscall_fstat64:function(t,a){try{var s=Y.getStreamFromFD(t);return Y.doStat(F.stat,s.path,a)}catch(l){if(F===void 0||l.name!=="ErrnoError")throw l;return-l.errno}},__syscall_ftruncate64:function(t,a,s){var l=ot(a,s);try{return isNaN(l)?61:(F.ftruncate(t,l),0)}catch(P){if(F===void 0||P.name!=="ErrnoError")throw P;return-P.errno}},__syscall_getdents64:function(t,a,s){try{var l=Y.getStreamFromFD(t);l.getdents||=F.readdir(l.path);for(var P=280,D=0,f=F.llseek(l,0,1),A=Math.floor(f/P);A<l.getdents.length&&D+P<=s;){var S,I,j=l.getdents[A];if(j===".")S=l.node.id,I=4;else if(j==="..")S=F.lookupPath(l.path,{parent:!0}).node.id,I=4;else{var w=F.lookupNode(l.node,j);S=w.id,I=F.isChrdev(w.mode)?2:F.isDir(w.mode)?4:F.isLink(w.mode)?10:8}T(S),Z=[S>>>0,(V=S,+Math.abs(V)>=1?V>0?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],O[a+D>>2]=Z[0],O[a+D+4>>2]=Z[1],Z=[(A+1)*P>>>0,(V=(A+1)*P,+Math.abs(V)>=1?V>0?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],O[a+D+8>>2]=Z[0],O[a+D+12>>2]=Z[1],X[a+D+16>>1]=280,U[a+D+18]=I,Ve(j,a+D+19,256),D+=P,A+=1}return F.llseek(l,A*P,0),D}catch(k){if(F===void 0||k.name!=="ErrnoError")throw k;return-k.errno}},__syscall_ioctl:function(t,a,s){Y.varargs=s;try{var l=Y.getStreamFromFD(t);switch(a){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return l.tty?0:-59;case 21505:if(!l.tty)return-59;if(l.tty.ops.ioctl_tcgets){var P=l.tty.ops.ioctl_tcgets(l),D=$e();O[D>>2]=P.c_iflag||0,O[D+4>>2]=P.c_oflag||0,O[D+8>>2]=P.c_cflag||0,O[D+12>>2]=P.c_lflag||0;for(var f=0;f<32;f++)U[D+f+17]=P.c_cc[f]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!l.tty)return-59;if(l.tty.ops.ioctl_tcsets){D=$e();var A=O[D>>2],S=O[D+4>>2],I=O[D+8>>2],j=O[D+12>>2],w=[];for(f=0;f<32;f++)w.push(U[D+f+17]);return l.tty.ops.ioctl_tcsets(l.tty,a,{c_iflag:A,c_oflag:S,c_cflag:I,c_lflag:j,c_cc:w})}return 0;case 21519:return l.tty?(D=$e(),O[D>>2]=0,0):-59;case 21520:return l.tty?-28:-59;case 21531:return D=$e(),F.ioctl(l,a,D);case 21523:if(!l.tty)return-59;if(l.tty.ops.ioctl_tiocgwinsz){var k=l.tty.ops.ioctl_tiocgwinsz(l.tty);D=$e(),X[D>>1]=k[0],X[D+2>>1]=k[1]}return 0;default:return-28}}catch(B){if(F===void 0||B.name!=="ErrnoError")throw B;return-B.errno}},__syscall_lstat64:function(t,a){try{return t=Y.getStr(t),Y.doStat(F.lstat,t,a)}catch(s){if(F===void 0||s.name!=="ErrnoError")throw s;return-s.errno}},__syscall_newfstatat:function(t,a,s,l){try{a=Y.getStr(a);var P=256&l,D=4096&l;return T(!(l&=-6401),`unknown flags in __syscall_newfstatat: ${l}`),a=Y.calculateAt(t,a,D),Y.doStat(P?F.lstat:F.stat,a,s)}catch(f){if(F===void 0||f.name!=="ErrnoError")throw f;return-f.errno}},__syscall_openat:function(t,a,s,l){Y.varargs=l;try{a=Y.getStr(a),a=Y.calculateAt(t,a);var P=l?rt():0;return F.open(a,s,P).fd}catch(D){if(F===void 0||D.name!=="ErrnoError")throw D;return-D.errno}},__syscall_rmdir:function(t){try{return t=Y.getStr(t),F.rmdir(t),0}catch(a){if(F===void 0||a.name!=="ErrnoError")throw a;return-a.errno}},__syscall_stat64:function(t,a){try{return t=Y.getStr(t),Y.doStat(F.stat,t,a)}catch(s){if(F===void 0||s.name!=="ErrnoError")throw s;return-s.errno}},__syscall_unlinkat:function(t,a,s){try{return a=Y.getStr(a),a=Y.calculateAt(t,a),s===0?F.unlink(a):s===512?F.rmdir(a):K("Invalid flags passed to unlinkat"),0}catch(l){if(F===void 0||l.name!=="ErrnoError")throw l;return-l.errno}},_abort_js:()=>{K("native code called abort()")},_emscripten_memcpy_js:(t,a,s)=>$.copyWithin(t,a,a+s),_emscripten_throw_longjmp:()=>{throw 1/0},_gmtime_js:function(t,a,s){var l=ot(t,a),P=new Date(1e3*l);O[s>>2]=P.getUTCSeconds(),O[s+4>>2]=P.getUTCMinutes(),O[s+8>>2]=P.getUTCHours(),O[s+12>>2]=P.getUTCDate(),O[s+16>>2]=P.getUTCMonth(),O[s+20>>2]=P.getUTCFullYear()-1900,O[s+24>>2]=P.getUTCDay();var D=Date.UTC(P.getUTCFullYear(),0,1,0,0,0,0),f=(P.getTime()-D)/864e5|0;O[s+28>>2]=f},_localtime_js:function(t,a,s){var l=ot(t,a),P=new Date(1e3*l);O[s>>2]=P.getSeconds(),O[s+4>>2]=P.getMinutes(),O[s+8>>2]=P.getHours(),O[s+12>>2]=P.getDate(),O[s+16>>2]=P.getMonth(),O[s+20>>2]=P.getFullYear()-1900,O[s+24>>2]=P.getDay();var D=0|(j=>{var w;return((w=j.getFullYear())%4!=0||w%100==0&&w%400!=0?mn:un)[j.getMonth()]+j.getDate()-1})(P);O[s+28>>2]=D,O[s+36>>2]=-60*P.getTimezoneOffset();var f=new Date(P.getFullYear(),0,1),A=new Date(P.getFullYear(),6,1).getTimezoneOffset(),S=f.getTimezoneOffset(),I=0|(A!=S&&P.getTimezoneOffset()==Math.min(S,A));O[s+32>>2]=I},_tzset_js:(t,a,s,l)=>{var P=new Date().getFullYear(),D=new Date(P,0,1),f=new Date(P,6,1),A=D.getTimezoneOffset(),S=f.getTimezoneOffset(),I=Math.max(A,S);z[t>>2]=60*I,O[a>>2]=+(A!=S);var j=B=>{var Q=B>=0?"-":"+",J=Math.abs(B);return`UTC${Q}${String(Math.floor(J/60)).padStart(2,"0")}${String(J%60).padStart(2,"0")}`},w=j(A),k=j(S);T(w),T(k),T(qe(w)<=16,`timezone name truncated to fit in TZNAME_MAX (${w})`),T(qe(k)<=16,`timezone name truncated to fit in TZNAME_MAX (${k})`),S<A?(Ve(w,s,17),Ve(k,l,17)):(Ve(w,l,17),Ve(k,s,17))},emscripten_date_now:()=>Date.now(),emscripten_resize_heap:t=>{var a=$.length;T((t>>>=0)>a);var s=2147483648;if(t>s)return x(`Cannot enlarge memory, requested ${t} bytes, but the limit is 2147483648 bytes!`),!1;for(var l=1;l<=4;l*=2){var P=a*(1+.2/l);P=Math.min(P,t+100663296);var D=Math.min(s,Rt(Math.max(t,P),65536));if(Fn(D))return!0}return x(`Failed to grow the heap from ${a} bytes to ${D} bytes, not enough memory!`),!1},environ_get:(t,a)=>{var s=0;return Qe().forEach(((l,P)=>{var D=a+s;z[t+4*P>>2]=D,((f,A)=>{for(var S=0;S<f.length;++S)T(f.charCodeAt(S)===(255&f.charCodeAt(S))),U[A++]=f.charCodeAt(S);U[A]=0})(l,D),s+=l.length+1})),0},environ_sizes_get:(t,a)=>{var s=Qe();z[t>>2]=s.length;var l=0;return s.forEach((P=>l+=P.length+1)),z[a>>2]=l,0},fd_close:function(t){try{var a=Y.getStreamFromFD(t);return F.close(a),0}catch(s){if(F===void 0||s.name!=="ErrnoError")throw s;return s.errno}},fd_read:function(t,a,s,l){try{var P=((D,f,A,S)=>{for(var I=0,j=0;j<A;j++){var w=z[f>>2],k=z[f+4>>2];f+=8;var B=F.read(D,U,w,k,S);if(B<0)return-1;if(I+=B,B<k)break;S!==void 0&&(S+=B)}return I})(Y.getStreamFromFD(t),a,s);return z[l>>2]=P,0}catch(D){if(F===void 0||D.name!=="ErrnoError")throw D;return D.errno}},fd_seek:function(t,a,s,l,P){var D=ot(a,s);try{if(isNaN(D))return 61;var f=Y.getStreamFromFD(t);return F.llseek(f,D,l),Z=[f.position>>>0,(V=f.position,+Math.abs(V)>=1?V>0?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],O[P>>2]=Z[0],O[P+4>>2]=Z[1],f.getdents&&D===0&&l===0&&(f.getdents=null),0}catch(A){if(F===void 0||A.name!=="ErrnoError")throw A;return A.errno}},fd_sync:function(t){try{var a=Y.getStreamFromFD(t);return a.stream_ops?.fsync?a.stream_ops.fsync(a):0}catch(s){if(F===void 0||s.name!=="ErrnoError")throw s;return s.errno}},fd_write:function(t,a,s,l){try{var P=((D,f,A,S)=>{for(var I=0,j=0;j<A;j++){var w=z[f>>2],k=z[f+4>>2];f+=8;var B=F.write(D,U,w,k,S);if(B<0)return-1;if(I+=B,B<k)break;S!==void 0&&(S+=B)}return I})(Y.getStreamFromFD(t),a,s);return z[l>>2]=P,0}catch(D){if(F===void 0||D.name!=="ErrnoError")throw D;return D.errno}},invoke_ii:function(t,a){var s=De();try{return ce(t)(a)}catch(l){if(he(s),l!==l+0)throw l;Ge(1,0)}},invoke_iii:function(t,a,s){var l=De();try{return ce(t)(a,s)}catch(P){if(he(l),P!==P+0)throw P;Ge(1,0)}},invoke_iiii:function(t,a,s,l){var P=De();try{return ce(t)(a,s,l)}catch(D){if(he(P),D!==D+0)throw D;Ge(1,0)}},invoke_iiiii:function(t,a,s,l,P){var D=De();try{return ce(t)(a,s,l,P)}catch(f){if(he(D),f!==f+0)throw f;Ge(1,0)}},invoke_v:function(t){var a=De();try{ce(t)()}catch(s){if(he(a),s!==s+0)throw s;Ge(1,0)}},invoke_vii:function(t,a,s){var l=De();try{ce(t)(a,s)}catch(P){if(he(l),P!==P+0)throw P;Ge(1,0)}},invoke_viii:function(t,a,s,l){var P=De();try{ce(t)(a,s,l)}catch(D){if(he(P),D!==D+0)throw D;Ge(1,0)}},invoke_viiii:function(t,a,s,l,P){var D=De();try{ce(t)(a,s,l,P)}catch(f){if(he(D),f!==f+0)throw f;Ge(1,0)}},invoke_viiiiiiiii:function(t,a,s,l,P,D,f,A,S,I){var j=De();try{ce(t)(a,s,l,P,D,f,A,S,I)}catch(w){if(he(j),w!==w+0)throw w;Ge(1,0)}}},le=(function(){var t={env:Ut,wasi_snapshot_preview1:Ut};function a(A,S){var I;return le=A.exports,e.wasmExports=le,T(R=le.memory,"memory not found in wasm exports"),we(),T(ve=le.__indirect_function_table,"table not found in wasm exports"),I=le.__wasm_call_ctors,Ft.unshift(I),Fe("wasm-instantiate"),le}Te("wasm-instantiate");var s,l,P,D,f=e;if(e.instantiateWasm)try{return e.instantiateWasm(t,a)}catch(A){x(`Module.instantiateWasm callback failed with error: ${A}`),o(A)}return xe??=an(),(s=N,l=xe,P=t,D=function(A){T(e===f,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),f=null,a(A.instance)},s||typeof WebAssembly.instantiateStreaming!="function"||Ee(l)||typeof fetch!="function"?St(l,P,D):fetch(l,{credentials:"same-origin"}).then((A=>WebAssembly.instantiateStreaming(A,P).then(D,(function(S){return x(`wasm streaming compile failed: ${S}`),x("falling back to ArrayBuffer instantiation"),St(l,P,D)}))))).catch(o),{}})();e._PDFiumExt_Init=i("PDFiumExt_Init",0),e._FPDF_InitLibraryWithConfig=i("FPDF_InitLibraryWithConfig",1),e._PDFiumExt_OpenFileWriter=i("PDFiumExt_OpenFileWriter",0),e._PDFiumExt_GetFileWriterSize=i("PDFiumExt_GetFileWriterSize",1),e._PDFiumExt_GetFileWriterData=i("PDFiumExt_GetFileWriterData",3),e._PDFiumExt_CloseFileWriter=i("PDFiumExt_CloseFileWriter",1),e._PDFiumExt_SaveAsCopy=i("PDFiumExt_SaveAsCopy",2),e._FPDF_SaveAsCopy=i("FPDF_SaveAsCopy",3),e._PDFiumExt_OpenFormFillInfo=i("PDFiumExt_OpenFormFillInfo",0),e._PDFiumExt_CloseFormFillInfo=i("PDFiumExt_CloseFormFillInfo",1),e._PDFiumExt_InitFormFillEnvironment=i("PDFiumExt_InitFormFillEnvironment",2),e._FPDFDOC_InitFormFillEnvironment=i("FPDFDOC_InitFormFillEnvironment",2),e._PDFiumExt_ExitFormFillEnvironment=i("PDFiumExt_ExitFormFillEnvironment",1),e._FPDFDOC_ExitFormFillEnvironment=i("FPDFDOC_ExitFormFillEnvironment",1),e._EPDFNamedDest_SetDest=i("EPDFNamedDest_SetDest",3),e._EPDFNamedDest_Remove=i("EPDFNamedDest_Remove",2),e._EPDFDest_CreateView=i("EPDFDest_CreateView",4),e._EPDFDest_CreateXYZ=i("EPDFDest_CreateXYZ",7),e._EPDFDest_CreateRemoteView=i("EPDFDest_CreateRemoteView",5),e._EPDFDest_CreateRemoteXYZ=i("EPDFDest_CreateRemoteXYZ",8),e._EPDFAction_CreateGoTo=i("EPDFAction_CreateGoTo",2),e._EPDFAction_CreateGoToNamed=i("EPDFAction_CreateGoToNamed",2),e._EPDFAction_CreateLaunch=i("EPDFAction_CreateLaunch",2),e._EPDFAction_CreateRemoteGoToByName=i("EPDFAction_CreateRemoteGoToByName",3),e._EPDFAction_CreateRemoteGoToDest=i("EPDFAction_CreateRemoteGoToDest",3),e._EPDFAction_CreateURI=i("EPDFAction_CreateURI",2),e._EPDFBookmark_Create=i("EPDFBookmark_Create",2),e._EPDFBookmark_Delete=i("EPDFBookmark_Delete",2),e._EPDFBookmark_AppendChild=i("EPDFBookmark_AppendChild",3),e._EPDFBookmark_InsertAfter=i("EPDFBookmark_InsertAfter",4),e._EPDFBookmark_Clear=i("EPDFBookmark_Clear",1),e._EPDFBookmark_SetTitle=i("EPDFBookmark_SetTitle",2),e._EPDFBookmark_SetDest=i("EPDFBookmark_SetDest",3),e._EPDFBookmark_SetAction=i("EPDFBookmark_SetAction",3),e._EPDFBookmark_ClearTarget=i("EPDFBookmark_ClearTarget",1),e._EPDF_PNG_EncodeRGBA=i("EPDF_PNG_EncodeRGBA",6),e._FPDFAnnot_IsSupportedSubtype=i("FPDFAnnot_IsSupportedSubtype",1),e._FPDFPage_CreateAnnot=i("FPDFPage_CreateAnnot",2),e._FPDFPage_GetAnnotCount=i("FPDFPage_GetAnnotCount",1),e._FPDFPage_GetAnnot=i("FPDFPage_GetAnnot",2),e._FPDFPage_GetAnnotIndex=i("FPDFPage_GetAnnotIndex",2),e._FPDFPage_CloseAnnot=i("FPDFPage_CloseAnnot",1),e._FPDFPage_RemoveAnnot=i("FPDFPage_RemoveAnnot",2),e._FPDFAnnot_GetSubtype=i("FPDFAnnot_GetSubtype",1),e._FPDFAnnot_IsObjectSupportedSubtype=i("FPDFAnnot_IsObjectSupportedSubtype",1),e._FPDFAnnot_UpdateObject=i("FPDFAnnot_UpdateObject",2),e._FPDFAnnot_AddInkStroke=i("FPDFAnnot_AddInkStroke",3),e._FPDFAnnot_RemoveInkList=i("FPDFAnnot_RemoveInkList",1),e._FPDFAnnot_AppendObject=i("FPDFAnnot_AppendObject",2),e._FPDFAnnot_GetObjectCount=i("FPDFAnnot_GetObjectCount",1),e._FPDFAnnot_GetObject=i("FPDFAnnot_GetObject",2),e._FPDFAnnot_RemoveObject=i("FPDFAnnot_RemoveObject",2),e._FPDFAnnot_SetColor=i("FPDFAnnot_SetColor",6),e._FPDFAnnot_GetColor=i("FPDFAnnot_GetColor",6),e._FPDFAnnot_HasAttachmentPoints=i("FPDFAnnot_HasAttachmentPoints",1),e._FPDFAnnot_SetAttachmentPoints=i("FPDFAnnot_SetAttachmentPoints",3),e._FPDFAnnot_AppendAttachmentPoints=i("FPDFAnnot_AppendAttachmentPoints",2),e._FPDFAnnot_CountAttachmentPoints=i("FPDFAnnot_CountAttachmentPoints",1),e._FPDFAnnot_GetAttachmentPoints=i("FPDFAnnot_GetAttachmentPoints",3),e._FPDFAnnot_SetRect=i("FPDFAnnot_SetRect",2),e._FPDFAnnot_GetRect=i("FPDFAnnot_GetRect",2),e._FPDFAnnot_GetVertices=i("FPDFAnnot_GetVertices",3),e._FPDFAnnot_GetInkListCount=i("FPDFAnnot_GetInkListCount",1),e._FPDFAnnot_GetInkListPath=i("FPDFAnnot_GetInkListPath",4),e._FPDFAnnot_GetLine=i("FPDFAnnot_GetLine",3),e._FPDFAnnot_SetBorder=i("FPDFAnnot_SetBorder",4),e._FPDFAnnot_GetBorder=i("FPDFAnnot_GetBorder",4),e._FPDFAnnot_HasKey=i("FPDFAnnot_HasKey",2),e._FPDFAnnot_GetValueType=i("FPDFAnnot_GetValueType",2),e._FPDFAnnot_SetStringValue=i("FPDFAnnot_SetStringValue",3),e._FPDFAnnot_GetStringValue=i("FPDFAnnot_GetStringValue",4),e._FPDFAnnot_GetNumberValue=i("FPDFAnnot_GetNumberValue",3),e._FPDFAnnot_SetAP=i("FPDFAnnot_SetAP",3),e._FPDFAnnot_GetAP=i("FPDFAnnot_GetAP",4),e._FPDFAnnot_GetLinkedAnnot=i("FPDFAnnot_GetLinkedAnnot",2),e._FPDFAnnot_GetFlags=i("FPDFAnnot_GetFlags",1),e._FPDFAnnot_SetFlags=i("FPDFAnnot_SetFlags",2),e._FPDFAnnot_GetFormFieldFlags=i("FPDFAnnot_GetFormFieldFlags",2),e._FPDFAnnot_SetFormFieldFlags=i("FPDFAnnot_SetFormFieldFlags",3),e._FPDFAnnot_GetFormFieldAtPoint=i("FPDFAnnot_GetFormFieldAtPoint",3),e._FPDFAnnot_GetFormFieldName=i("FPDFAnnot_GetFormFieldName",4),e._FPDFAnnot_GetFormFieldType=i("FPDFAnnot_GetFormFieldType",2),e._FPDFAnnot_GetFormAdditionalActionJavaScript=i("FPDFAnnot_GetFormAdditionalActionJavaScript",5),e._FPDFAnnot_GetFormFieldAlternateName=i("FPDFAnnot_GetFormFieldAlternateName",4),e._FPDFAnnot_GetFormFieldValue=i("FPDFAnnot_GetFormFieldValue",4),e._FPDFAnnot_GetOptionCount=i("FPDFAnnot_GetOptionCount",2),e._FPDFAnnot_GetOptionLabel=i("FPDFAnnot_GetOptionLabel",5),e._FPDFAnnot_IsOptionSelected=i("FPDFAnnot_IsOptionSelected",3),e._FPDFAnnot_GetFontSize=i("FPDFAnnot_GetFontSize",3),e._FPDFAnnot_SetFontColor=i("FPDFAnnot_SetFontColor",5),e._FPDFAnnot_GetFontColor=i("FPDFAnnot_GetFontColor",5),e._FPDFAnnot_IsChecked=i("FPDFAnnot_IsChecked",2),e._FPDFAnnot_SetFocusableSubtypes=i("FPDFAnnot_SetFocusableSubtypes",3),e._FPDFAnnot_GetFocusableSubtypesCount=i("FPDFAnnot_GetFocusableSubtypesCount",1),e._FPDFAnnot_GetFocusableSubtypes=i("FPDFAnnot_GetFocusableSubtypes",3),e._FPDFAnnot_GetLink=i("FPDFAnnot_GetLink",1),e._FPDFAnnot_GetFormControlCount=i("FPDFAnnot_GetFormControlCount",2),e._FPDFAnnot_GetFormControlIndex=i("FPDFAnnot_GetFormControlIndex",2),e._FPDFAnnot_GetFormFieldExportValue=i("FPDFAnnot_GetFormFieldExportValue",4),e._FPDFAnnot_SetURI=i("FPDFAnnot_SetURI",2),e._FPDFAnnot_GetFileAttachment=i("FPDFAnnot_GetFileAttachment",1),e._FPDFAnnot_AddFileAttachment=i("FPDFAnnot_AddFileAttachment",2),e._EPDFAnnot_SetColor=i("EPDFAnnot_SetColor",5),e._EPDFAnnot_GetColor=i("EPDFAnnot_GetColor",5),e._EPDFAnnot_ClearColor=i("EPDFAnnot_ClearColor",2),e._EPDFAnnot_SetOpacity=i("EPDFAnnot_SetOpacity",2),e._EPDFAnnot_GetOpacity=i("EPDFAnnot_GetOpacity",2),e._EPDFAnnot_GetBorderEffect=i("EPDFAnnot_GetBorderEffect",2),e._EPDFAnnot_GetRectangleDifferences=i("EPDFAnnot_GetRectangleDifferences",5),e._EPDFAnnot_GetBorderDashPatternCount=i("EPDFAnnot_GetBorderDashPatternCount",1),e._EPDFAnnot_GetBorderDashPattern=i("EPDFAnnot_GetBorderDashPattern",3),e._EPDFAnnot_SetBorderDashPattern=i("EPDFAnnot_SetBorderDashPattern",3),e._EPDFAnnot_GetBorderStyle=i("EPDFAnnot_GetBorderStyle",2),e._EPDFAnnot_SetBorderStyle=i("EPDFAnnot_SetBorderStyle",3),e._EPDFAnnot_GenerateAppearance=i("EPDFAnnot_GenerateAppearance",1),e._EPDFAnnot_GenerateAppearanceWithBlend=i("EPDFAnnot_GenerateAppearanceWithBlend",2),e._EPDFAnnot_GetBlendMode=i("EPDFAnnot_GetBlendMode",1),e._EPDFAnnot_SetIntent=i("EPDFAnnot_SetIntent",2),e._EPDFAnnot_GetIntent=i("EPDFAnnot_GetIntent",3),e._EPDFAnnot_GetRichContent=i("EPDFAnnot_GetRichContent",3),e._EPDFAnnot_SetLineEndings=i("EPDFAnnot_SetLineEndings",3),e._EPDFAnnot_GetLineEndings=i("EPDFAnnot_GetLineEndings",3),e._EPDFAnnot_SetVertices=i("EPDFAnnot_SetVertices",3),e._EPDFAnnot_SetLine=i("EPDFAnnot_SetLine",3),e._EPDFAnnot_SetDefaultAppearance=i("EPDFAnnot_SetDefaultAppearance",6),e._EPDFAnnot_GetDefaultAppearance=i("EPDFAnnot_GetDefaultAppearance",6),e._EPDFAnnot_SetTextAlignment=i("EPDFAnnot_SetTextAlignment",2),e._EPDFAnnot_GetTextAlignment=i("EPDFAnnot_GetTextAlignment",1),e._EPDFAnnot_SetVerticalAlignment=i("EPDFAnnot_SetVerticalAlignment",2),e._EPDFAnnot_GetVerticalAlignment=i("EPDFAnnot_GetVerticalAlignment",1),e._EPDFPage_GetAnnotByName=i("EPDFPage_GetAnnotByName",2),e._EPDFPage_RemoveAnnotByName=i("EPDFPage_RemoveAnnotByName",2),e._EPDFAnnot_SetLinkedAnnot=i("EPDFAnnot_SetLinkedAnnot",3),e._EPDFPage_GetAnnotCountRaw=i("EPDFPage_GetAnnotCountRaw",2),e._EPDFPage_GetAnnotRaw=i("EPDFPage_GetAnnotRaw",3),e._EPDFPage_RemoveAnnotRaw=i("EPDFPage_RemoveAnnotRaw",3),e._EPDFAnnot_SetIcon=i("EPDFAnnot_SetIcon",2),e._EPDFAnnot_GetIcon=i("EPDFAnnot_GetIcon",1),e._EPDFAnnot_UpdateAppearanceToRect=i("EPDFAnnot_UpdateAppearanceToRect",2),e._EPDFPage_CreateAnnot=i("EPDFPage_CreateAnnot",2),e._FPDFDoc_GetAttachmentCount=i("FPDFDoc_GetAttachmentCount",1),e._FPDFDoc_AddAttachment=i("FPDFDoc_AddAttachment",2),e._FPDFDoc_GetAttachment=i("FPDFDoc_GetAttachment",2),e._FPDFDoc_DeleteAttachment=i("FPDFDoc_DeleteAttachment",2),e._FPDFAttachment_GetName=i("FPDFAttachment_GetName",3),e._FPDFAttachment_HasKey=i("FPDFAttachment_HasKey",2),e._FPDFAttachment_GetValueType=i("FPDFAttachment_GetValueType",2),e._FPDFAttachment_SetStringValue=i("FPDFAttachment_SetStringValue",3),e._FPDFAttachment_GetStringValue=i("FPDFAttachment_GetStringValue",4),e._FPDFAttachment_SetFile=i("FPDFAttachment_SetFile",4),e._FPDFAttachment_GetFile=i("FPDFAttachment_GetFile",4),e._FPDFAttachment_GetSubtype=i("FPDFAttachment_GetSubtype",3),e._EPDFAttachment_SetSubtype=i("EPDFAttachment_SetSubtype",2),e._EPDFAttachment_SetDescription=i("EPDFAttachment_SetDescription",2),e._EPDFAttachment_GetDescription=i("EPDFAttachment_GetDescription",3),e._EPDFAttachment_GetIntegerValue=i("EPDFAttachment_GetIntegerValue",3),e._FPDFCatalog_IsTagged=i("FPDFCatalog_IsTagged",1),e._FPDFCatalog_SetLanguage=i("FPDFCatalog_SetLanguage",2),e._EPDFCatalog_GetLanguage=i("EPDFCatalog_GetLanguage",3),e._FPDFAvail_Create=i("FPDFAvail_Create",2),e._FPDFAvail_Destroy=i("FPDFAvail_Destroy",1),e._FPDFAvail_IsDocAvail=i("FPDFAvail_IsDocAvail",2),e._FPDFAvail_GetDocument=i("FPDFAvail_GetDocument",2),e._FPDFAvail_GetFirstPageNum=i("FPDFAvail_GetFirstPageNum",1),e._FPDFAvail_IsPageAvail=i("FPDFAvail_IsPageAvail",3),e._FPDFAvail_IsFormAvail=i("FPDFAvail_IsFormAvail",2),e._FPDFAvail_IsLinearized=i("FPDFAvail_IsLinearized",1),e._FPDFBookmark_GetFirstChild=i("FPDFBookmark_GetFirstChild",2),e._FPDFBookmark_GetNextSibling=i("FPDFBookmark_GetNextSibling",2),e._FPDFBookmark_GetTitle=i("FPDFBookmark_GetTitle",3),e._FPDFBookmark_GetCount=i("FPDFBookmark_GetCount",1),e._FPDFBookmark_Find=i("FPDFBookmark_Find",2),e._FPDFBookmark_GetDest=i("FPDFBookmark_GetDest",2),e._FPDFBookmark_GetAction=i("FPDFBookmark_GetAction",1),e._FPDFAction_GetType=i("FPDFAction_GetType",1),e._FPDFAction_GetDest=i("FPDFAction_GetDest",2),e._FPDFAction_GetFilePath=i("FPDFAction_GetFilePath",3),e._FPDFAction_GetURIPath=i("FPDFAction_GetURIPath",4),e._FPDFDest_GetDestPageIndex=i("FPDFDest_GetDestPageIndex",2),e._FPDFDest_GetView=i("FPDFDest_GetView",3),e._FPDFDest_GetLocationInPage=i("FPDFDest_GetLocationInPage",7),e._FPDFLink_GetLinkAtPoint=i("FPDFLink_GetLinkAtPoint",3),e._FPDFLink_GetLinkZOrderAtPoint=i("FPDFLink_GetLinkZOrderAtPoint",3),e._FPDFLink_GetDest=i("FPDFLink_GetDest",2),e._FPDFLink_GetAction=i("FPDFLink_GetAction",1),e._FPDFLink_Enumerate=i("FPDFLink_Enumerate",3),e._FPDFLink_GetAnnot=i("FPDFLink_GetAnnot",2),e._FPDFLink_GetAnnotRect=i("FPDFLink_GetAnnotRect",2),e._FPDFLink_CountQuadPoints=i("FPDFLink_CountQuadPoints",1),e._FPDFLink_GetQuadPoints=i("FPDFLink_GetQuadPoints",3),e._FPDF_GetPageAAction=i("FPDF_GetPageAAction",2),e._FPDF_GetFileIdentifier=i("FPDF_GetFileIdentifier",4),e._FPDF_GetMetaText=i("FPDF_GetMetaText",4),e._FPDF_GetPageLabel=i("FPDF_GetPageLabel",4),e._EPDF_SetMetaText=i("EPDF_SetMetaText",3),e._EPDF_HasMetaText=i("EPDF_HasMetaText",2),e._EPDF_GetMetaTrapped=i("EPDF_GetMetaTrapped",1),e._EPDF_SetMetaTrapped=i("EPDF_SetMetaTrapped",2),e._EPDF_GetMetaKeyCount=i("EPDF_GetMetaKeyCount",2),e._EPDF_GetMetaKeyName=i("EPDF_GetMetaKeyName",5),e._FPDFPageObj_NewImageObj=i("FPDFPageObj_NewImageObj",1),e._FPDFImageObj_LoadJpegFile=i("FPDFImageObj_LoadJpegFile",4),e._FPDFImageObj_LoadJpegFileInline=i("FPDFImageObj_LoadJpegFileInline",4),e._FPDFImageObj_SetMatrix=i("FPDFImageObj_SetMatrix",7),e._FPDFImageObj_SetBitmap=i("FPDFImageObj_SetBitmap",4),e._FPDFImageObj_GetBitmap=i("FPDFImageObj_GetBitmap",1),e._FPDFImageObj_GetRenderedBitmap=i("FPDFImageObj_GetRenderedBitmap",3),e._FPDFImageObj_GetImageDataDecoded=i("FPDFImageObj_GetImageDataDecoded",3),e._FPDFImageObj_GetImageDataRaw=i("FPDFImageObj_GetImageDataRaw",3),e._FPDFImageObj_GetImageFilterCount=i("FPDFImageObj_GetImageFilterCount",1),e._FPDFImageObj_GetImageFilter=i("FPDFImageObj_GetImageFilter",4),e._FPDFImageObj_GetImageMetadata=i("FPDFImageObj_GetImageMetadata",3),e._FPDFImageObj_GetImagePixelSize=i("FPDFImageObj_GetImagePixelSize",3),e._FPDFImageObj_GetIccProfileDataDecoded=i("FPDFImageObj_GetIccProfileDataDecoded",5),e._FPDF_CreateNewDocument=i("FPDF_CreateNewDocument",0),e._FPDFPage_Delete=i("FPDFPage_Delete",2),e._FPDF_MovePages=i("FPDF_MovePages",4),e._FPDFPage_New=i("FPDFPage_New",4),e._FPDFPage_GetRotation=i("FPDFPage_GetRotation",1),e._FPDFPage_InsertObject=i("FPDFPage_InsertObject",2),e._FPDFPage_InsertObjectAtIndex=i("FPDFPage_InsertObjectAtIndex",3),e._FPDFPage_RemoveObject=i("FPDFPage_RemoveObject",2),e._FPDFPage_CountObjects=i("FPDFPage_CountObjects",1),e._FPDFPage_GetObject=i("FPDFPage_GetObject",2),e._FPDFPage_HasTransparency=i("FPDFPage_HasTransparency",1),e._FPDFPageObj_Destroy=i("FPDFPageObj_Destroy",1),e._FPDFPageObj_GetMarkedContentID=i("FPDFPageObj_GetMarkedContentID",1),e._FPDFPageObj_CountMarks=i("FPDFPageObj_CountMarks",1),e._FPDFPageObj_GetMark=i("FPDFPageObj_GetMark",2),e._FPDFPageObj_AddMark=i("FPDFPageObj_AddMark",2),e._FPDFPageObj_RemoveMark=i("FPDFPageObj_RemoveMark",2),e._FPDFPageObjMark_GetName=i("FPDFPageObjMark_GetName",4),e._FPDFPageObjMark_CountParams=i("FPDFPageObjMark_CountParams",1),e._FPDFPageObjMark_GetParamKey=i("FPDFPageObjMark_GetParamKey",5),e._FPDFPageObjMark_GetParamValueType=i("FPDFPageObjMark_GetParamValueType",2),e._FPDFPageObjMark_GetParamIntValue=i("FPDFPageObjMark_GetParamIntValue",3),e._FPDFPageObjMark_GetParamStringValue=i("FPDFPageObjMark_GetParamStringValue",5),e._FPDFPageObjMark_GetParamBlobValue=i("FPDFPageObjMark_GetParamBlobValue",5),e._FPDFPageObj_HasTransparency=i("FPDFPageObj_HasTransparency",1),e._FPDFPageObjMark_SetIntParam=i("FPDFPageObjMark_SetIntParam",5),e._FPDFPageObjMark_SetStringParam=i("FPDFPageObjMark_SetStringParam",5),e._FPDFPageObjMark_SetBlobParam=i("FPDFPageObjMark_SetBlobParam",6),e._FPDFPageObjMark_RemoveParam=i("FPDFPageObjMark_RemoveParam",3),e._FPDFPageObj_GetType=i("FPDFPageObj_GetType",1),e._FPDFPageObj_GetIsActive=i("FPDFPageObj_GetIsActive",2),e._FPDFPageObj_SetIsActive=i("FPDFPageObj_SetIsActive",2),e._FPDFPage_GenerateContent=i("FPDFPage_GenerateContent",1),e._FPDFPageObj_Transform=i("FPDFPageObj_Transform",7),e._FPDFPageObj_TransformF=i("FPDFPageObj_TransformF",2),e._FPDFPageObj_GetMatrix=i("FPDFPageObj_GetMatrix",2),e._FPDFPageObj_SetMatrix=i("FPDFPageObj_SetMatrix",2),e._FPDFPageObj_SetBlendMode=i("FPDFPageObj_SetBlendMode",2),e._FPDFPage_TransformAnnots=i("FPDFPage_TransformAnnots",7),e._FPDFPage_SetRotation=i("FPDFPage_SetRotation",2),e._FPDFPageObj_SetFillColor=i("FPDFPageObj_SetFillColor",5),e._FPDFPageObj_GetFillColor=i("FPDFPageObj_GetFillColor",5),e._FPDFPageObj_GetBounds=i("FPDFPageObj_GetBounds",5),e._FPDFPageObj_GetRotatedBounds=i("FPDFPageObj_GetRotatedBounds",2),e._FPDFPageObj_SetStrokeColor=i("FPDFPageObj_SetStrokeColor",5),e._FPDFPageObj_GetStrokeColor=i("FPDFPageObj_GetStrokeColor",5),e._FPDFPageObj_SetStrokeWidth=i("FPDFPageObj_SetStrokeWidth",2),e._FPDFPageObj_GetStrokeWidth=i("FPDFPageObj_GetStrokeWidth",2),e._FPDFPageObj_GetLineJoin=i("FPDFPageObj_GetLineJoin",1),e._FPDFPageObj_SetLineJoin=i("FPDFPageObj_SetLineJoin",2),e._FPDFPageObj_GetLineCap=i("FPDFPageObj_GetLineCap",1),e._FPDFPageObj_SetLineCap=i("FPDFPageObj_SetLineCap",2),e._FPDFPageObj_GetDashPhase=i("FPDFPageObj_GetDashPhase",2),e._FPDFPageObj_SetDashPhase=i("FPDFPageObj_SetDashPhase",2),e._FPDFPageObj_GetDashCount=i("FPDFPageObj_GetDashCount",1),e._FPDFPageObj_GetDashArray=i("FPDFPageObj_GetDashArray",3),e._FPDFPageObj_SetDashArray=i("FPDFPageObj_SetDashArray",4),e._FPDFFormObj_CountObjects=i("FPDFFormObj_CountObjects",1),e._FPDFFormObj_GetObject=i("FPDFFormObj_GetObject",2),e._FPDFFormObj_RemoveObject=i("FPDFFormObj_RemoveObject",2),e._FPDFPageObj_CreateNewPath=i("FPDFPageObj_CreateNewPath",2),e._FPDFPageObj_CreateNewRect=i("FPDFPageObj_CreateNewRect",4),e._FPDFPath_CountSegments=i("FPDFPath_CountSegments",1),e._FPDFPath_GetPathSegment=i("FPDFPath_GetPathSegment",2),e._FPDFPath_MoveTo=i("FPDFPath_MoveTo",3),e._FPDFPath_LineTo=i("FPDFPath_LineTo",3),e._FPDFPath_BezierTo=i("FPDFPath_BezierTo",7),e._FPDFPath_Close=i("FPDFPath_Close",1),e._FPDFPath_SetDrawMode=i("FPDFPath_SetDrawMode",3),e._FPDFPath_GetDrawMode=i("FPDFPath_GetDrawMode",3),e._FPDFPathSegment_GetPoint=i("FPDFPathSegment_GetPoint",3),e._FPDFPathSegment_GetType=i("FPDFPathSegment_GetType",1),e._FPDFPathSegment_GetClose=i("FPDFPathSegment_GetClose",1),e._FPDFPageObj_NewTextObj=i("FPDFPageObj_NewTextObj",3),e._FPDFText_SetText=i("FPDFText_SetText",2),e._FPDFText_SetCharcodes=i("FPDFText_SetCharcodes",3),e._FPDFText_LoadFont=i("FPDFText_LoadFont",5),e._FPDFText_LoadStandardFont=i("FPDFText_LoadStandardFont",2),e._FPDFText_LoadCidType2Font=i("FPDFText_LoadCidType2Font",6),e._FPDFTextObj_GetFontSize=i("FPDFTextObj_GetFontSize",2),e._FPDFTextObj_GetText=i("FPDFTextObj_GetText",4),e._FPDFTextObj_GetRenderedBitmap=i("FPDFTextObj_GetRenderedBitmap",4),e._FPDFFont_Close=i("FPDFFont_Close",1),e._FPDFPageObj_CreateTextObj=i("FPDFPageObj_CreateTextObj",3),e._FPDFTextObj_GetTextRenderMode=i("FPDFTextObj_GetTextRenderMode",1),e._FPDFTextObj_SetTextRenderMode=i("FPDFTextObj_SetTextRenderMode",2),e._FPDFTextObj_GetFont=i("FPDFTextObj_GetFont",1),e._FPDFFont_GetBaseFontName=i("FPDFFont_GetBaseFontName",3),e._FPDFFont_GetFamilyName=i("FPDFFont_GetFamilyName",3),e._FPDFFont_GetFontData=i("FPDFFont_GetFontData",4),e._FPDFFont_GetIsEmbedded=i("FPDFFont_GetIsEmbedded",1),e._FPDFFont_GetFlags=i("FPDFFont_GetFlags",1),e._FPDFFont_GetWeight=i("FPDFFont_GetWeight",1),e._FPDFFont_GetItalicAngle=i("FPDFFont_GetItalicAngle",2),e._FPDFFont_GetAscent=i("FPDFFont_GetAscent",3),e._FPDFFont_GetDescent=i("FPDFFont_GetDescent",3),e._FPDFFont_GetGlyphWidth=i("FPDFFont_GetGlyphWidth",4),e._FPDFFont_GetGlyphPath=i("FPDFFont_GetGlyphPath",3),e._FPDFGlyphPath_CountGlyphSegments=i("FPDFGlyphPath_CountGlyphSegments",1),e._FPDFGlyphPath_GetGlyphPathSegment=i("FPDFGlyphPath_GetGlyphPathSegment",2),e._EPDFText_RedactInRect=i("EPDFText_RedactInRect",4),e._EPDFText_RedactInQuads=i("EPDFText_RedactInQuads",5),e._FPDFDoc_GetPageMode=i("FPDFDoc_GetPageMode",1),e._FPDFPage_Flatten=i("FPDFPage_Flatten",2),e._FPDFPage_HasFormFieldAtPoint=i("FPDFPage_HasFormFieldAtPoint",4),e._FPDFPage_FormFieldZOrderAtPoint=i("FPDFPage_FormFieldZOrderAtPoint",4),e._malloc=i("malloc",1),e._free=i("free",1),e._FORM_OnMouseMove=i("FORM_OnMouseMove",5),e._FORM_OnMouseWheel=i("FORM_OnMouseWheel",6),e._FORM_OnFocus=i("FORM_OnFocus",5),e._FORM_OnLButtonDown=i("FORM_OnLButtonDown",5),e._FORM_OnLButtonUp=i("FORM_OnLButtonUp",5),e._FORM_OnLButtonDoubleClick=i("FORM_OnLButtonDoubleClick",5),e._FORM_OnRButtonDown=i("FORM_OnRButtonDown",5),e._FORM_OnRButtonUp=i("FORM_OnRButtonUp",5),e._FORM_OnKeyDown=i("FORM_OnKeyDown",4),e._FORM_OnKeyUp=i("FORM_OnKeyUp",4),e._FORM_OnChar=i("FORM_OnChar",4),e._FORM_GetFocusedText=i("FORM_GetFocusedText",4),e._FORM_GetSelectedText=i("FORM_GetSelectedText",4),e._FORM_ReplaceAndKeepSelection=i("FORM_ReplaceAndKeepSelection",3),e._FORM_ReplaceSelection=i("FORM_ReplaceSelection",3),e._FORM_SelectAllText=i("FORM_SelectAllText",2),e._FORM_CanUndo=i("FORM_CanUndo",2),e._FORM_CanRedo=i("FORM_CanRedo",2),e._FORM_Undo=i("FORM_Undo",2),e._FORM_Redo=i("FORM_Redo",2),e._FORM_ForceToKillFocus=i("FORM_ForceToKillFocus",1),e._FORM_GetFocusedAnnot=i("FORM_GetFocusedAnnot",3),e._FORM_SetFocusedAnnot=i("FORM_SetFocusedAnnot",2),e._FPDF_FFLDraw=i("FPDF_FFLDraw",9),e._FPDF_SetFormFieldHighlightColor=i("FPDF_SetFormFieldHighlightColor",3),e._FPDF_SetFormFieldHighlightAlpha=i("FPDF_SetFormFieldHighlightAlpha",2),e._FPDF_RemoveFormFieldHighlight=i("FPDF_RemoveFormFieldHighlight",1),e._FORM_OnAfterLoadPage=i("FORM_OnAfterLoadPage",2),e._FORM_OnBeforeClosePage=i("FORM_OnBeforeClosePage",2),e._FORM_DoDocumentJSAction=i("FORM_DoDocumentJSAction",1),e._FORM_DoDocumentOpenAction=i("FORM_DoDocumentOpenAction",1),e._FORM_DoDocumentAAction=i("FORM_DoDocumentAAction",2),e._FORM_DoPageAAction=i("FORM_DoPageAAction",3),e._FORM_SetIndexSelected=i("FORM_SetIndexSelected",4),e._FORM_IsIndexSelected=i("FORM_IsIndexSelected",3),e._FPDFDoc_GetJavaScriptActionCount=i("FPDFDoc_GetJavaScriptActionCount",1),e._FPDFDoc_GetJavaScriptAction=i("FPDFDoc_GetJavaScriptAction",2),e._FPDFDoc_CloseJavaScriptAction=i("FPDFDoc_CloseJavaScriptAction",1),e._FPDFJavaScriptAction_GetName=i("FPDFJavaScriptAction_GetName",3),e._FPDFJavaScriptAction_GetScript=i("FPDFJavaScriptAction_GetScript",3),e._FPDF_ImportPagesByIndex=i("FPDF_ImportPagesByIndex",5),e._FPDF_ImportPages=i("FPDF_ImportPages",4),e._FPDF_ImportNPagesToOne=i("FPDF_ImportNPagesToOne",5),e._FPDF_NewXObjectFromPage=i("FPDF_NewXObjectFromPage",3),e._FPDF_CloseXObject=i("FPDF_CloseXObject",1),e._FPDF_NewFormObjectFromXObject=i("FPDF_NewFormObjectFromXObject",1),e._FPDF_CopyViewerPreferences=i("FPDF_CopyViewerPreferences",2),e._FPDF_RenderPageBitmapWithColorScheme_Start=i("FPDF_RenderPageBitmapWithColorScheme_Start",10),e._FPDF_RenderPageBitmap_Start=i("FPDF_RenderPageBitmap_Start",9),e._FPDF_RenderPage_Continue=i("FPDF_RenderPage_Continue",2),e._FPDF_RenderPage_Close=i("FPDF_RenderPage_Close",1),e._FPDF_SaveWithVersion=i("FPDF_SaveWithVersion",4),e._FPDFText_GetCharIndexFromTextIndex=i("FPDFText_GetCharIndexFromTextIndex",2),e._FPDFText_GetTextIndexFromCharIndex=i("FPDFText_GetTextIndexFromCharIndex",2),e._FPDF_GetSignatureCount=i("FPDF_GetSignatureCount",1),e._FPDF_GetSignatureObject=i("FPDF_GetSignatureObject",2),e._FPDFSignatureObj_GetContents=i("FPDFSignatureObj_GetContents",3),e._FPDFSignatureObj_GetByteRange=i("FPDFSignatureObj_GetByteRange",3),e._FPDFSignatureObj_GetSubFilter=i("FPDFSignatureObj_GetSubFilter",3),e._FPDFSignatureObj_GetReason=i("FPDFSignatureObj_GetReason",3),e._FPDFSignatureObj_GetTime=i("FPDFSignatureObj_GetTime",3),e._FPDFSignatureObj_GetDocMDPPermission=i("FPDFSignatureObj_GetDocMDPPermission",1),e._FPDF_StructTree_GetForPage=i("FPDF_StructTree_GetForPage",1),e._FPDF_StructTree_Close=i("FPDF_StructTree_Close",1),e._FPDF_StructTree_CountChildren=i("FPDF_StructTree_CountChildren",1),e._FPDF_StructTree_GetChildAtIndex=i("FPDF_StructTree_GetChildAtIndex",2),e._FPDF_StructElement_GetAltText=i("FPDF_StructElement_GetAltText",3),e._FPDF_StructElement_GetActualText=i("FPDF_StructElement_GetActualText",3),e._FPDF_StructElement_GetID=i("FPDF_StructElement_GetID",3),e._FPDF_StructElement_GetLang=i("FPDF_StructElement_GetLang",3),e._FPDF_StructElement_GetAttributeCount=i("FPDF_StructElement_GetAttributeCount",1),e._FPDF_StructElement_GetAttributeAtIndex=i("FPDF_StructElement_GetAttributeAtIndex",2),e._FPDF_StructElement_GetStringAttribute=i("FPDF_StructElement_GetStringAttribute",4),e._FPDF_StructElement_GetMarkedContentID=i("FPDF_StructElement_GetMarkedContentID",1),e._FPDF_StructElement_GetType=i("FPDF_StructElement_GetType",3),e._FPDF_StructElement_GetObjType=i("FPDF_StructElement_GetObjType",3),e._FPDF_StructElement_GetTitle=i("FPDF_StructElement_GetTitle",3),e._FPDF_StructElement_CountChildren=i("FPDF_StructElement_CountChildren",1),e._FPDF_StructElement_GetChildAtIndex=i("FPDF_StructElement_GetChildAtIndex",2),e._FPDF_StructElement_GetChildMarkedContentID=i("FPDF_StructElement_GetChildMarkedContentID",2),e._FPDF_StructElement_GetParent=i("FPDF_StructElement_GetParent",1),e._FPDF_StructElement_Attr_GetCount=i("FPDF_StructElement_Attr_GetCount",1),e._FPDF_StructElement_Attr_GetName=i("FPDF_StructElement_Attr_GetName",5),e._FPDF_StructElement_Attr_GetValue=i("FPDF_StructElement_Attr_GetValue",2),e._FPDF_StructElement_Attr_GetType=i("FPDF_StructElement_Attr_GetType",1),e._FPDF_StructElement_Attr_GetBooleanValue=i("FPDF_StructElement_Attr_GetBooleanValue",2),e._FPDF_StructElement_Attr_GetNumberValue=i("FPDF_StructElement_Attr_GetNumberValue",2),e._FPDF_StructElement_Attr_GetStringValue=i("FPDF_StructElement_Attr_GetStringValue",4),e._FPDF_StructElement_Attr_GetBlobValue=i("FPDF_StructElement_Attr_GetBlobValue",4),e._FPDF_StructElement_Attr_CountChildren=i("FPDF_StructElement_Attr_CountChildren",1),e._FPDF_StructElement_Attr_GetChildAtIndex=i("FPDF_StructElement_Attr_GetChildAtIndex",2),e._FPDF_StructElement_GetMarkedContentIdCount=i("FPDF_StructElement_GetMarkedContentIdCount",1),e._FPDF_StructElement_GetMarkedContentIdAtIndex=i("FPDF_StructElement_GetMarkedContentIdAtIndex",2),e._FPDF_AddInstalledFont=i("FPDF_AddInstalledFont",3),e._FPDF_SetSystemFontInfo=i("FPDF_SetSystemFontInfo",1),e._FPDF_GetDefaultTTFMap=i("FPDF_GetDefaultTTFMap",0),e._FPDF_GetDefaultTTFMapCount=i("FPDF_GetDefaultTTFMapCount",0),e._FPDF_GetDefaultTTFMapEntry=i("FPDF_GetDefaultTTFMapEntry",1),e._FPDF_GetDefaultSystemFontInfo=i("FPDF_GetDefaultSystemFontInfo",0),e._FPDF_FreeDefaultSystemFontInfo=i("FPDF_FreeDefaultSystemFontInfo",1),e._FPDFText_LoadPage=i("FPDFText_LoadPage",1),e._FPDFText_ClosePage=i("FPDFText_ClosePage",1),e._FPDFText_CountChars=i("FPDFText_CountChars",1),e._FPDFText_GetUnicode=i("FPDFText_GetUnicode",2),e._FPDFText_GetTextObject=i("FPDFText_GetTextObject",2),e._FPDFText_IsGenerated=i("FPDFText_IsGenerated",2),e._FPDFText_IsHyphen=i("FPDFText_IsHyphen",2),e._FPDFText_HasUnicodeMapError=i("FPDFText_HasUnicodeMapError",2),e._FPDFText_GetFontSize=i("FPDFText_GetFontSize",2),e._FPDFText_GetFontInfo=i("FPDFText_GetFontInfo",5),e._FPDFText_GetFontWeight=i("FPDFText_GetFontWeight",2),e._FPDFText_GetFillColor=i("FPDFText_GetFillColor",6),e._FPDFText_GetStrokeColor=i("FPDFText_GetStrokeColor",6),e._FPDFText_GetCharAngle=i("FPDFText_GetCharAngle",2),e._FPDFText_GetCharBox=i("FPDFText_GetCharBox",6),e._FPDFText_GetLooseCharBox=i("FPDFText_GetLooseCharBox",3),e._FPDFText_GetMatrix=i("FPDFText_GetMatrix",3),e._FPDFText_GetCharOrigin=i("FPDFText_GetCharOrigin",4),e._FPDFText_GetCharIndexAtPos=i("FPDFText_GetCharIndexAtPos",5),e._FPDFText_GetText=i("FPDFText_GetText",4),e._FPDFText_CountRects=i("FPDFText_CountRects",3),e._FPDFText_GetRect=i("FPDFText_GetRect",6),e._FPDFText_GetBoundedText=i("FPDFText_GetBoundedText",7),e._FPDFText_FindStart=i("FPDFText_FindStart",4),e._FPDFText_FindNext=i("FPDFText_FindNext",1),e._FPDFText_FindPrev=i("FPDFText_FindPrev",1),e._FPDFText_GetSchResultIndex=i("FPDFText_GetSchResultIndex",1),e._FPDFText_GetSchCount=i("FPDFText_GetSchCount",1),e._FPDFText_FindClose=i("FPDFText_FindClose",1),e._FPDFLink_LoadWebLinks=i("FPDFLink_LoadWebLinks",1),e._FPDFLink_CountWebLinks=i("FPDFLink_CountWebLinks",1),e._FPDFLink_GetURL=i("FPDFLink_GetURL",4),e._FPDFLink_CountRects=i("FPDFLink_CountRects",2),e._FPDFLink_GetRect=i("FPDFLink_GetRect",7),e._FPDFLink_GetTextRange=i("FPDFLink_GetTextRange",4),e._FPDFLink_CloseWebLinks=i("FPDFLink_CloseWebLinks",1),e._FPDFPage_GetDecodedThumbnailData=i("FPDFPage_GetDecodedThumbnailData",3),e._FPDFPage_GetRawThumbnailData=i("FPDFPage_GetRawThumbnailData",3),e._FPDFPage_GetThumbnailAsBitmap=i("FPDFPage_GetThumbnailAsBitmap",1),e._FPDFPage_SetMediaBox=i("FPDFPage_SetMediaBox",5),e._FPDFPage_SetCropBox=i("FPDFPage_SetCropBox",5),e._FPDFPage_SetBleedBox=i("FPDFPage_SetBleedBox",5),e._FPDFPage_SetTrimBox=i("FPDFPage_SetTrimBox",5),e._FPDFPage_SetArtBox=i("FPDFPage_SetArtBox",5),e._FPDFPage_GetMediaBox=i("FPDFPage_GetMediaBox",5),e._FPDFPage_GetCropBox=i("FPDFPage_GetCropBox",5),e._FPDFPage_GetBleedBox=i("FPDFPage_GetBleedBox",5),e._FPDFPage_GetTrimBox=i("FPDFPage_GetTrimBox",5),e._FPDFPage_GetArtBox=i("FPDFPage_GetArtBox",5),e._FPDFPage_TransFormWithClip=i("FPDFPage_TransFormWithClip",3),e._FPDFPageObj_TransformClipPath=i("FPDFPageObj_TransformClipPath",7),e._FPDFPageObj_GetClipPath=i("FPDFPageObj_GetClipPath",1),e._FPDFClipPath_CountPaths=i("FPDFClipPath_CountPaths",1),e._FPDFClipPath_CountPathSegments=i("FPDFClipPath_CountPathSegments",2),e._FPDFClipPath_GetPathSegment=i("FPDFClipPath_GetPathSegment",3),e._FPDF_CreateClipPath=i("FPDF_CreateClipPath",4),e._FPDF_DestroyClipPath=i("FPDF_DestroyClipPath",1),e._FPDFPage_InsertClipPath=i("FPDFPage_InsertClipPath",2),e._FPDF_InitLibrary=i("FPDF_InitLibrary",0),e._FPDF_DestroyLibrary=i("FPDF_DestroyLibrary",0),e._FPDF_SetSandBoxPolicy=i("FPDF_SetSandBoxPolicy",2),e._FPDF_LoadDocument=i("FPDF_LoadDocument",2),e._FPDF_GetFormType=i("FPDF_GetFormType",1),e._FPDF_LoadXFA=i("FPDF_LoadXFA",1),e._FPDF_LoadMemDocument=i("FPDF_LoadMemDocument",3),e._FPDF_LoadMemDocument64=i("FPDF_LoadMemDocument64",3),e._FPDF_LoadCustomDocument=i("FPDF_LoadCustomDocument",2),e._FPDF_GetFileVersion=i("FPDF_GetFileVersion",2),e._FPDF_DocumentHasValidCrossReferenceTable=i("FPDF_DocumentHasValidCrossReferenceTable",1),e._FPDF_GetDocPermissions=i("FPDF_GetDocPermissions",1),e._FPDF_GetDocUserPermissions=i("FPDF_GetDocUserPermissions",1),e._FPDF_GetSecurityHandlerRevision=i("FPDF_GetSecurityHandlerRevision",1),e._FPDF_GetPageCount=i("FPDF_GetPageCount",1),e._FPDF_LoadPage=i("FPDF_LoadPage",2),e._FPDF_GetPageWidthF=i("FPDF_GetPageWidthF",1),e._FPDF_GetPageWidth=i("FPDF_GetPageWidth",1),e._FPDF_GetPageHeightF=i("FPDF_GetPageHeightF",1),e._FPDF_GetPageHeight=i("FPDF_GetPageHeight",1),e._FPDF_GetPageBoundingBox=i("FPDF_GetPageBoundingBox",2),e._FPDF_RenderPageBitmap=i("FPDF_RenderPageBitmap",8),e._FPDF_RenderPageBitmapWithMatrix=i("FPDF_RenderPageBitmapWithMatrix",5),e._EPDF_RenderAnnotBitmap=i("EPDF_RenderAnnotBitmap",6),e._FPDF_ClosePage=i("FPDF_ClosePage",1),e._FPDF_CloseDocument=i("FPDF_CloseDocument",1),e._FPDF_GetLastError=i("FPDF_GetLastError",0),e._FPDF_DeviceToPage=i("FPDF_DeviceToPage",10),e._FPDF_PageToDevice=i("FPDF_PageToDevice",10),e._FPDFBitmap_Create=i("FPDFBitmap_Create",3),e._FPDFBitmap_CreateEx=i("FPDFBitmap_CreateEx",5),e._FPDFBitmap_GetFormat=i("FPDFBitmap_GetFormat",1),e._FPDFBitmap_FillRect=i("FPDFBitmap_FillRect",6),e._FPDFBitmap_GetBuffer=i("FPDFBitmap_GetBuffer",1),e._FPDFBitmap_GetWidth=i("FPDFBitmap_GetWidth",1),e._FPDFBitmap_GetHeight=i("FPDFBitmap_GetHeight",1),e._FPDFBitmap_GetStride=i("FPDFBitmap_GetStride",1),e._FPDFBitmap_Destroy=i("FPDFBitmap_Destroy",1),e._FPDF_GetPageSizeByIndexF=i("FPDF_GetPageSizeByIndexF",3),e._EPDF_GetPageRotationByIndex=i("EPDF_GetPageRotationByIndex",2),e._FPDF_GetPageSizeByIndex=i("FPDF_GetPageSizeByIndex",4),e._FPDF_VIEWERREF_GetPrintScaling=i("FPDF_VIEWERREF_GetPrintScaling",1),e._FPDF_VIEWERREF_GetNumCopies=i("FPDF_VIEWERREF_GetNumCopies",1),e._FPDF_VIEWERREF_GetPrintPageRange=i("FPDF_VIEWERREF_GetPrintPageRange",1),e._FPDF_VIEWERREF_GetPrintPageRangeCount=i("FPDF_VIEWERREF_GetPrintPageRangeCount",1),e._FPDF_VIEWERREF_GetPrintPageRangeElement=i("FPDF_VIEWERREF_GetPrintPageRangeElement",2),e._FPDF_VIEWERREF_GetDuplex=i("FPDF_VIEWERREF_GetDuplex",1),e._FPDF_VIEWERREF_GetName=i("FPDF_VIEWERREF_GetName",4),e._FPDF_CountNamedDests=i("FPDF_CountNamedDests",1),e._FPDF_GetNamedDestByName=i("FPDF_GetNamedDestByName",2),e._FPDF_GetNamedDest=i("FPDF_GetNamedDest",4),e._FPDF_GetXFAPacketCount=i("FPDF_GetXFAPacketCount",1),e._FPDF_GetXFAPacketName=i("FPDF_GetXFAPacketName",4),e._FPDF_GetXFAPacketContent=i("FPDF_GetXFAPacketContent",5),e._FPDF_GetTrailerEnds=i("FPDF_GetTrailerEnds",3);var at,Wt,_n=i("fflush",1),Pn=i("emscripten_builtin_memalign",2),cn=i("strerror",1),Ge=i("setThrew",2),zt=()=>(zt=le.emscripten_stack_init)(),Dt=()=>(Dt=le.emscripten_stack_get_end)(),$t=t=>($t=le._emscripten_stack_restore)(t),Ht=t=>(Ht=le._emscripten_stack_alloc)(t),Kt=()=>(Kt=le.emscripten_stack_get_current)();function gn(){var t;zt(),T(!(3&(t=Dt()))),t==0&&(t+=4),z[t>>2]=34821223,z[t+4>>2]=2310721022,z[0]=1668509029}function Xt(){var t;function a(){at||(at=1,e.calledRun=1,ne||(T(!pe),pe=!0,fe(),e.noFSInit||F.initialized||F.init(),F.ignorePermissions=!1,lt(Ft),n(e),e.onRuntimeInitialized?.(),T(!e._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),(function(){fe();var s=e.postRun;s&&(typeof s=="function"&&(s=[s]),s.forEach(nt)),lt(ke)})()))}_e>0||(gn(),!Wt&&(Wt=1,(t=e.preRun)&&(typeof t=="function"&&(t=[t]),t.forEach(tt)),lt(We),_e>0)||(e.setStatus?(e.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>e.setStatus("")),1),a()}),1)):a(),fe()))}if(e.dynCall_ji=i("dynCall_ji",2),e.dynCall_jij=i("dynCall_jij",4),e.dynCall_iiij=i("dynCall_iiij",5),e.dynCall_iij=i("dynCall_iij",4),e.dynCall_j=i("dynCall_j",1),e.dynCall_jji=i("dynCall_jji",4),e.dynCall_iji=i("dynCall_iji",4),e.dynCall_viijii=i("dynCall_viijii",7),e.dynCall_iiji=i("dynCall_iiji",5),e.dynCall_jiji=i("dynCall_jiji",5),e.dynCall_iiiiij=i("dynCall_iiiiij",7),e.dynCall_iiiiijj=i("dynCall_iiiiijj",9),e.dynCall_iiiiiijj=i("dynCall_iiiiiijj",10),e.dynCall_viji=i("dynCall_viji",5),e.wasmExports=le,e.ccall=Vt,e.cwrap=(t,a,s,l)=>(...P)=>Vt(t,a,s,P),e.addFunction=(t,a)=>{T(t!==void 0);var s=dn(t);if(s)return s;var l=(()=>{if(gt.length)return gt.pop();try{ve.grow(1)}catch(D){throw D instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":D}return ve.length-1})();try{ht(l,t)}catch(D){if(!(D instanceof TypeError))throw D;T(a!==void 0,"Missing signature argument to addFunction: "+t);var P=ln(t,a);ht(l,P)}return Le.set(t,l),l},e.removeFunction=t=>{Le.delete(ce(t)),ht(t,null),gt.push(t)},e.setValue=function(t,a,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":case"i8":U[t]=a;break;case"i16":X[t>>1]=a;break;case"i32":O[t>>2]=a;break;case"i64":K("to do setValue(i64) use WASM_BIGINT");case"float":ie[t>>2]=a;break;case"double":ae[t>>3]=a;break;case"*":z[t>>2]=a;break;default:K(`invalid type for setValue: ${s}`)}},e.getValue=function(t,a="i8"){switch(a.endsWith("*")&&(a="*"),a){case"i1":case"i8":return U[t];case"i16":return X[t>>1];case"i32":return O[t>>2];case"i64":K("to do getValue(i64) use WASM_BIGINT");case"float":return ie[t>>2];case"double":return ae[t>>3];case"*":return z[t>>2];default:K(`invalid type for getValue: ${a}`)}},e.UTF8ToString=Be,e.stringToUTF8=Ve,e.UTF16ToString=(t,a)=>{T(t%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var s=t,l=s>>1,P=l+a/2;!(l>=P)&&ee[l];)++l;if((s=l<<1)-t>32&&Bt)return Bt.decode($.subarray(t,s));for(var D="",f=0;!(f>=a/2);++f){var A=X[t+2*f>>1];if(A==0)break;D+=String.fromCharCode(A)}return D},e.stringToUTF16=(t,a,s)=>{if(T(a%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),T(typeof s=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),s??=2147483647,s<2)return 0;for(var l=a,P=(s-=2)<2*t.length?s/2:t.length,D=0;D<P;++D){var f=t.charCodeAt(D);X[a>>1]=f,a+=2}return X[a>>1]=0,a-l},["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","getTempRet0","setTempRet0","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","safeSetTimeout","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","safeRequestAnimationFrame","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_unlink","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"].forEach((function(t){Tt(t,(()=>{var a=`\`${t}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,s=t;s.startsWith("_")||(s="$"+t),a+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${s}')`,Ct(t)&&(a+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),je(a)})),vt(t)})),["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","stackSave","stackRestore","stackAlloc","ptrToString","zeroMemory","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","initRandomFill","randomFill","timers","warnOnce","readEmAsmArgsArray","jstoi_s","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","getCFunc","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","getFunctionAddress","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","stringToUTF8Array","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","doReadv","doWritev","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","isLeapYear","ydayFromDate","SYSCALLS","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createDataFile","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"].forEach(vt),Ce=function t(){at||Xt(),at||(Ce=t)},e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();Xt(),r=u;for(const t of Object.keys(e))t in H||Object.defineProperty(H,t,{configurable:!0,get(){K(`Access to module property ('${t}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return r});const pt={EPDF_GetMetaKeyCount:[["number","boolean"],"number"],EPDF_GetMetaKeyName:[["number","number","boolean","number","number"],"number"],EPDF_GetMetaTrapped:[["number"],"number"],EPDF_GetPageRotationByIndex:[["number","number"],"number"],EPDF_HasMetaText:[["number","string"],"boolean"],EPDF_PNG_EncodeRGBA:[["number","number","number","number","number","number"],"number"],EPDF_RenderAnnotBitmap:[["number","number","number","number","number","number"],"boolean"],EPDF_SetMetaText:[["number","string","number"],"boolean"],EPDF_SetMetaTrapped:[["number","number"],"boolean"],EPDFAction_CreateGoTo:[["number","number"],"number"],EPDFAction_CreateGoToNamed:[["number","string"],"number"],EPDFAction_CreateLaunch:[["number","number"],"number"],EPDFAction_CreateRemoteGoToByName:[["number","number","number"],"number"],EPDFAction_CreateRemoteGoToDest:[["number","number","number"],"number"],EPDFAction_CreateURI:[["number","string"],"number"],EPDFAnnot_ClearColor:[["number","number"],"boolean"],EPDFAnnot_GenerateAppearance:[["number"],"boolean"],EPDFAnnot_GenerateAppearanceWithBlend:[["number","number"],"boolean"],EPDFAnnot_GetBlendMode:[["number"],"number"],EPDFAnnot_GetBorderDashPattern:[["number","number","number"],"boolean"],EPDFAnnot_GetBorderDashPatternCount:[["number"],"number"],EPDFAnnot_GetBorderEffect:[["number","number"],"boolean"],EPDFAnnot_GetBorderStyle:[["number","number"],"number"],EPDFAnnot_GetColor:[["number","number","number","number","number"],"boolean"],EPDFAnnot_GetDefaultAppearance:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_GetIcon:[["number"],"number"],EPDFAnnot_GetIntent:[["number","number","number"],"number"],EPDFAnnot_GetLineEndings:[["number","number","number"],"boolean"],EPDFAnnot_GetOpacity:[["number","number"],"boolean"],EPDFAnnot_GetRectangleDifferences:[["number","number","number","number","number"],"boolean"],EPDFAnnot_GetRichContent:[["number","number","number"],"number"],EPDFAnnot_GetTextAlignment:[["number"],"number"],EPDFAnnot_GetVerticalAlignment:[["number"],"number"],EPDFAnnot_SetBorderDashPattern:[["number","number","number"],"boolean"],EPDFAnnot_SetBorderStyle:[["number","number","number"],"boolean"],EPDFAnnot_SetColor:[["number","number","number","number","number"],"boolean"],EPDFAnnot_SetDefaultAppearance:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_SetIcon:[["number","number"],"boolean"],EPDFAnnot_SetIntent:[["number","string"],"boolean"],EPDFAnnot_SetLine:[["number","number","number"],"boolean"],EPDFAnnot_SetLineEndings:[["number","number","number"],"boolean"],EPDFAnnot_SetLinkedAnnot:[["number","string","number"],"boolean"],EPDFAnnot_SetOpacity:[["number","number"],"boolean"],EPDFAnnot_SetTextAlignment:[["number","number"],"boolean"],EPDFAnnot_SetVerticalAlignment:[["number","number"],"boolean"],EPDFAnnot_SetVertices:[["number","number","number"],"boolean"],EPDFAnnot_UpdateAppearanceToRect:[["number","number"],"boolean"],EPDFAttachment_GetDescription:[["number","number","number"],"number"],EPDFAttachment_GetIntegerValue:[["number","string","number"],"boolean"],EPDFAttachment_SetDescription:[["number","number"],"boolean"],EPDFAttachment_SetSubtype:[["number","string"],"boolean"],EPDFBookmark_AppendChild:[["number","number","number"],"number"],EPDFBookmark_Clear:[["number"],"boolean"],EPDFBookmark_ClearTarget:[["number"],"boolean"],EPDFBookmark_Create:[["number","number"],"number"],EPDFBookmark_Delete:[["number","number"],"boolean"],EPDFBookmark_InsertAfter:[["number","number","number","number"],"number"],EPDFBookmark_SetAction:[["number","number","number"],"boolean"],EPDFBookmark_SetDest:[["number","number","number"],"boolean"],EPDFBookmark_SetTitle:[["number","number"],"boolean"],EPDFCatalog_GetLanguage:[["number","number","number"],"number"],EPDFDest_CreateRemoteView:[["number","number","number","number","number"],"number"],EPDFDest_CreateRemoteXYZ:[["number","number","boolean","number","boolean","number","boolean","number"],"number"],EPDFDest_CreateView:[["number","number","number","number"],"number"],EPDFDest_CreateXYZ:[["number","boolean","number","boolean","number","boolean","number"],"number"],EPDFNamedDest_Remove:[["number","string"],"boolean"],EPDFNamedDest_SetDest:[["number","string","number"],"boolean"],EPDFPage_CreateAnnot:[["number","number"],"number"],EPDFPage_GetAnnotByName:[["number","number"],"number"],EPDFPage_GetAnnotCountRaw:[["number","number"],"number"],EPDFPage_GetAnnotRaw:[["number","number","number"],"number"],EPDFPage_RemoveAnnotByName:[["number","number"],"boolean"],EPDFPage_RemoveAnnotRaw:[["number","number","number"],"boolean"],EPDFText_RedactInQuads:[["number","number","number","boolean","boolean"],"boolean"],EPDFText_RedactInRect:[["number","number","boolean","boolean"],"boolean"],FORM_CanRedo:[["number","number"],"boolean"],FORM_CanUndo:[["number","number"],"boolean"],FORM_DoDocumentAAction:[["number","number"],null],FORM_DoDocumentJSAction:[["number"],null],FORM_DoDocumentOpenAction:[["number"],null],FORM_DoPageAAction:[["number","number","number"],null],FORM_ForceToKillFocus:[["number"],"boolean"],FORM_GetFocusedAnnot:[["number","number","number"],"boolean"],FORM_GetFocusedText:[["number","number","number","number"],"number"],FORM_GetSelectedText:[["number","number","number","number"],"number"],FORM_IsIndexSelected:[["number","number","number"],"boolean"],FORM_OnAfterLoadPage:[["number","number"],null],FORM_OnBeforeClosePage:[["number","number"],null],FORM_OnChar:[["number","number","number","number"],"boolean"],FORM_OnFocus:[["number","number","number","number","number"],"boolean"],FORM_OnKeyDown:[["number","number","number","number"],"boolean"],FORM_OnKeyUp:[["number","number","number","number"],"boolean"],FORM_OnLButtonDoubleClick:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonUp:[["number","number","number","number","number"],"boolean"],FORM_OnMouseMove:[["number","number","number","number","number"],"boolean"],FORM_OnMouseWheel:[["number","number","number","number","number","number"],"boolean"],FORM_OnRButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnRButtonUp:[["number","number","number","number","number"],"boolean"],FORM_Redo:[["number","number"],"boolean"],FORM_ReplaceAndKeepSelection:[["number","number","number"],null],FORM_ReplaceSelection:[["number","number","number"],null],FORM_SelectAllText:[["number","number"],"boolean"],FORM_SetFocusedAnnot:[["number","number"],"boolean"],FORM_SetIndexSelected:[["number","number","number","boolean"],"boolean"],FORM_Undo:[["number","number"],"boolean"],FPDF_AddInstalledFont:[["number","number","number"],null],FPDF_CloseDocument:[["number"],null],FPDF_ClosePage:[["number"],null],FPDF_CloseXObject:[["number"],null],FPDF_CopyViewerPreferences:[["number","number"],"boolean"],FPDF_CountNamedDests:[["number"],"number"],FPDF_CreateClipPath:[["number","number","number","number"],"number"],FPDF_CreateNewDocument:[[],"number"],FPDF_DestroyClipPath:[["number"],null],FPDF_DestroyLibrary:[[],null],FPDF_DeviceToPage:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_DocumentHasValidCrossReferenceTable:[["number"],"boolean"],FPDF_FFLDraw:[["number","number","number","number","number","number","number","number","number"],null],FPDF_FreeDefaultSystemFontInfo:[["number"],null],FPDF_GetDefaultSystemFontInfo:[[],"number"],FPDF_GetDefaultTTFMap:[[],"number"],FPDF_GetDefaultTTFMapCount:[[],"number"],FPDF_GetDefaultTTFMapEntry:[["number"],"number"],FPDF_GetDocPermissions:[["number"],"number"],FPDF_GetDocUserPermissions:[["number"],"number"],FPDF_GetFileIdentifier:[["number","number","number","number"],"number"],FPDF_GetFileVersion:[["number","number"],"boolean"],FPDF_GetFormType:[["number"],"number"],FPDF_GetLastError:[[],"number"],FPDF_GetMetaText:[["number","string","number","number"],"number"],FPDF_GetNamedDest:[["number","number","number","number"],"number"],FPDF_GetNamedDestByName:[["number","string"],"number"],FPDF_GetPageAAction:[["number","number"],"number"],FPDF_GetPageBoundingBox:[["number","number"],"boolean"],FPDF_GetPageCount:[["number"],"number"],FPDF_GetPageHeight:[["number"],"number"],FPDF_GetPageHeightF:[["number"],"number"],FPDF_GetPageLabel:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndex:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndexF:[["number","number","number"],"boolean"],FPDF_GetPageWidth:[["number"],"number"],FPDF_GetPageWidthF:[["number"],"number"],FPDF_GetSecurityHandlerRevision:[["number"],"number"],FPDF_GetSignatureCount:[["number"],"number"],FPDF_GetSignatureObject:[["number","number"],"number"],FPDF_GetTrailerEnds:[["number","number","number"],"number"],FPDF_GetXFAPacketContent:[["number","number","number","number","number"],"boolean"],FPDF_GetXFAPacketCount:[["number"],"number"],FPDF_GetXFAPacketName:[["number","number","number","number"],"number"],FPDF_ImportNPagesToOne:[["number","number","number","number","number"],"number"],FPDF_ImportPages:[["number","number","string","number"],"boolean"],FPDF_ImportPagesByIndex:[["number","number","number","number","number"],"boolean"],FPDF_InitLibrary:[[],null],FPDF_InitLibraryWithConfig:[["number"],null],FPDF_LoadCustomDocument:[["number","string"],"number"],FPDF_LoadDocument:[["number","string"],"number"],FPDF_LoadMemDocument:[["number","number","string"],"number"],FPDF_LoadMemDocument64:[["number","number","string"],"number"],FPDF_LoadPage:[["number","number"],"number"],FPDF_LoadXFA:[["number"],"boolean"],FPDF_MovePages:[["number","number","number","number"],"boolean"],FPDF_NewFormObjectFromXObject:[["number"],"number"],FPDF_NewXObjectFromPage:[["number","number","number"],"number"],FPDF_PageToDevice:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_RemoveFormFieldHighlight:[["number"],null],FPDF_RenderPage_Close:[["number"],null],FPDF_RenderPage_Continue:[["number","number"],"number"],FPDF_RenderPageBitmap:[["number","number","number","number","number","number","number","number"],null],FPDF_RenderPageBitmap_Start:[["number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithColorScheme_Start:[["number","number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithMatrix:[["number","number","number","number","number"],null],FPDF_SaveAsCopy:[["number","number","number"],"boolean"],FPDF_SaveWithVersion:[["number","number","number","number"],"boolean"],FPDF_SetFormFieldHighlightAlpha:[["number","number"],null],FPDF_SetFormFieldHighlightColor:[["number","number","number"],null],FPDF_SetSandBoxPolicy:[["number","boolean"],null],FPDF_SetSystemFontInfo:[["number"],null],FPDF_StructElement_Attr_CountChildren:[["number"],"number"],FPDF_StructElement_Attr_GetBlobValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetBooleanValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_Attr_GetCount:[["number"],"number"],FPDF_StructElement_Attr_GetName:[["number","number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetNumberValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetStringValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetType:[["number"],"number"],FPDF_StructElement_Attr_GetValue:[["number","string"],"number"],FPDF_StructElement_CountChildren:[["number"],"number"],FPDF_StructElement_GetActualText:[["number","number","number"],"number"],FPDF_StructElement_GetAltText:[["number","number","number"],"number"],FPDF_StructElement_GetAttributeAtIndex:[["number","number"],"number"],FPDF_StructElement_GetAttributeCount:[["number"],"number"],FPDF_StructElement_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_GetChildMarkedContentID:[["number","number"],"number"],FPDF_StructElement_GetID:[["number","number","number"],"number"],FPDF_StructElement_GetLang:[["number","number","number"],"number"],FPDF_StructElement_GetMarkedContentID:[["number"],"number"],FPDF_StructElement_GetMarkedContentIdAtIndex:[["number","number"],"number"],FPDF_StructElement_GetMarkedContentIdCount:[["number"],"number"],FPDF_StructElement_GetObjType:[["number","number","number"],"number"],FPDF_StructElement_GetParent:[["number"],"number"],FPDF_StructElement_GetStringAttribute:[["number","string","number","number"],"number"],FPDF_StructElement_GetTitle:[["number","number","number"],"number"],FPDF_StructElement_GetType:[["number","number","number"],"number"],FPDF_StructTree_Close:[["number"],null],FPDF_StructTree_CountChildren:[["number"],"number"],FPDF_StructTree_GetChildAtIndex:[["number","number"],"number"],FPDF_StructTree_GetForPage:[["number"],"number"],FPDF_VIEWERREF_GetDuplex:[["number"],"number"],FPDF_VIEWERREF_GetName:[["number","string","number","number"],"number"],FPDF_VIEWERREF_GetNumCopies:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRange:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeCount:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeElement:[["number","number"],"number"],FPDF_VIEWERREF_GetPrintScaling:[["number"],"boolean"],FPDFAction_GetDest:[["number","number"],"number"],FPDFAction_GetFilePath:[["number","number","number"],"number"],FPDFAction_GetType:[["number"],"number"],FPDFAction_GetURIPath:[["number","number","number","number"],"number"],FPDFAnnot_AddFileAttachment:[["number","number"],"number"],FPDFAnnot_AddInkStroke:[["number","number","number"],"number"],FPDFAnnot_AppendAttachmentPoints:[["number","number"],"boolean"],FPDFAnnot_AppendObject:[["number","number"],"boolean"],FPDFAnnot_CountAttachmentPoints:[["number"],"number"],FPDFAnnot_GetAP:[["number","number","number","number"],"number"],FPDFAnnot_GetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_GetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_GetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_GetFileAttachment:[["number"],"number"],FPDFAnnot_GetFlags:[["number"],"number"],FPDFAnnot_GetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_GetFocusableSubtypesCount:[["number"],"number"],FPDFAnnot_GetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_GetFontSize:[["number","number","number"],"boolean"],FPDFAnnot_GetFormAdditionalActionJavaScript:[["number","number","number","number","number"],"number"],FPDFAnnot_GetFormControlCount:[["number","number"],"number"],FPDFAnnot_GetFormControlIndex:[["number","number"],"number"],FPDFAnnot_GetFormFieldAlternateName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldAtPoint:[["number","number","number"],"number"],FPDFAnnot_GetFormFieldExportValue:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldFlags:[["number","number"],"number"],FPDFAnnot_GetFormFieldName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldType:[["number","number"],"number"],FPDFAnnot_GetFormFieldValue:[["number","number","number","number"],"number"],FPDFAnnot_GetInkListCount:[["number"],"number"],FPDFAnnot_GetInkListPath:[["number","number","number","number"],"number"],FPDFAnnot_GetLine:[["number","number","number"],"boolean"],FPDFAnnot_GetLink:[["number"],"number"],FPDFAnnot_GetLinkedAnnot:[["number","string"],"number"],FPDFAnnot_GetNumberValue:[["number","string","number"],"boolean"],FPDFAnnot_GetObject:[["number","number"],"number"],FPDFAnnot_GetObjectCount:[["number"],"number"],FPDFAnnot_GetOptionCount:[["number","number"],"number"],FPDFAnnot_GetOptionLabel:[["number","number","number","number","number"],"number"],FPDFAnnot_GetRect:[["number","number"],"boolean"],FPDFAnnot_GetStringValue:[["number","string","number","number"],"number"],FPDFAnnot_GetSubtype:[["number"],"number"],FPDFAnnot_GetValueType:[["number","string"],"number"],FPDFAnnot_GetVertices:[["number","number","number"],"number"],FPDFAnnot_HasAttachmentPoints:[["number"],"boolean"],FPDFAnnot_HasKey:[["number","string"],"boolean"],FPDFAnnot_IsChecked:[["number","number"],"boolean"],FPDFAnnot_IsObjectSupportedSubtype:[["number"],"boolean"],FPDFAnnot_IsOptionSelected:[["number","number","number"],"boolean"],FPDFAnnot_IsSupportedSubtype:[["number"],"boolean"],FPDFAnnot_RemoveInkList:[["number"],"boolean"],FPDFAnnot_RemoveObject:[["number","number"],"boolean"],FPDFAnnot_SetAP:[["number","number","number"],"boolean"],FPDFAnnot_SetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_SetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_SetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_SetFlags:[["number","number"],"boolean"],FPDFAnnot_SetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_SetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_SetFormFieldFlags:[["number","number","number"],"boolean"],FPDFAnnot_SetRect:[["number","number"],"boolean"],FPDFAnnot_SetStringValue:[["number","string","number"],"boolean"],FPDFAnnot_SetURI:[["number","number"],"boolean"],FPDFAnnot_UpdateObject:[["number","number"],"boolean"],FPDFAttachment_GetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_GetName:[["number","number","number"],"number"],FPDFAttachment_GetStringValue:[["number","string","number","number"],"number"],FPDFAttachment_GetSubtype:[["number","number","number"],"number"],FPDFAttachment_GetValueType:[["number","string"],"number"],FPDFAttachment_HasKey:[["number","string"],"boolean"],FPDFAttachment_SetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_SetStringValue:[["number","string","number"],"boolean"],FPDFAvail_Create:[["number","number"],"number"],FPDFAvail_Destroy:[["number"],null],FPDFAvail_GetDocument:[["number","string"],"number"],FPDFAvail_GetFirstPageNum:[["number"],"number"],FPDFAvail_IsDocAvail:[["number","number"],"number"],FPDFAvail_IsFormAvail:[["number","number"],"number"],FPDFAvail_IsLinearized:[["number"],"number"],FPDFAvail_IsPageAvail:[["number","number","number"],"number"],FPDFBitmap_Create:[["number","number","number"],"number"],FPDFBitmap_CreateEx:[["number","number","number","number","number"],"number"],FPDFBitmap_Destroy:[["number"],null],FPDFBitmap_FillRect:[["number","number","number","number","number","number"],"boolean"],FPDFBitmap_GetBuffer:[["number"],"number"],FPDFBitmap_GetFormat:[["number"],"number"],FPDFBitmap_GetHeight:[["number"],"number"],FPDFBitmap_GetStride:[["number"],"number"],FPDFBitmap_GetWidth:[["number"],"number"],FPDFBookmark_Find:[["number","number"],"number"],FPDFBookmark_GetAction:[["number"],"number"],FPDFBookmark_GetCount:[["number"],"number"],FPDFBookmark_GetDest:[["number","number"],"number"],FPDFBookmark_GetFirstChild:[["number","number"],"number"],FPDFBookmark_GetNextSibling:[["number","number"],"number"],FPDFBookmark_GetTitle:[["number","number","number"],"number"],FPDFCatalog_IsTagged:[["number"],"boolean"],FPDFCatalog_SetLanguage:[["number","string"],"boolean"],FPDFClipPath_CountPaths:[["number"],"number"],FPDFClipPath_CountPathSegments:[["number","number"],"number"],FPDFClipPath_GetPathSegment:[["number","number","number"],"number"],FPDFDest_GetDestPageIndex:[["number","number"],"number"],FPDFDest_GetLocationInPage:[["number","number","number","number","number","number","number"],"boolean"],FPDFDest_GetView:[["number","number","number"],"number"],FPDFDoc_AddAttachment:[["number","number"],"number"],FPDFDoc_CloseJavaScriptAction:[["number"],null],FPDFDoc_DeleteAttachment:[["number","number"],"boolean"],FPDFDOC_ExitFormFillEnvironment:[["number"],null],FPDFDoc_GetAttachment:[["number","number"],"number"],FPDFDoc_GetAttachmentCount:[["number"],"number"],FPDFDoc_GetJavaScriptAction:[["number","number"],"number"],FPDFDoc_GetJavaScriptActionCount:[["number"],"number"],FPDFDoc_GetPageMode:[["number"],"number"],FPDFDOC_InitFormFillEnvironment:[["number","number"],"number"],FPDFFont_Close:[["number"],null],FPDFFont_GetAscent:[["number","number","number"],"boolean"],FPDFFont_GetBaseFontName:[["number","number","number"],"number"],FPDFFont_GetDescent:[["number","number","number"],"boolean"],FPDFFont_GetFamilyName:[["number","number","number"],"number"],FPDFFont_GetFlags:[["number"],"number"],FPDFFont_GetFontData:[["number","number","number","number"],"boolean"],FPDFFont_GetGlyphPath:[["number","number","number"],"number"],FPDFFont_GetGlyphWidth:[["number","number","number","number"],"boolean"],FPDFFont_GetIsEmbedded:[["number"],"number"],FPDFFont_GetItalicAngle:[["number","number"],"boolean"],FPDFFont_GetWeight:[["number"],"number"],FPDFFormObj_CountObjects:[["number"],"number"],FPDFFormObj_GetObject:[["number","number"],"number"],FPDFFormObj_RemoveObject:[["number","number"],"boolean"],FPDFGlyphPath_CountGlyphSegments:[["number"],"number"],FPDFGlyphPath_GetGlyphPathSegment:[["number","number"],"number"],FPDFImageObj_GetBitmap:[["number"],"number"],FPDFImageObj_GetIccProfileDataDecoded:[["number","number","number","number","number"],"boolean"],FPDFImageObj_GetImageDataDecoded:[["number","number","number"],"number"],FPDFImageObj_GetImageDataRaw:[["number","number","number"],"number"],FPDFImageObj_GetImageFilter:[["number","number","number","number"],"number"],FPDFImageObj_GetImageFilterCount:[["number"],"number"],FPDFImageObj_GetImageMetadata:[["number","number","number"],"boolean"],FPDFImageObj_GetImagePixelSize:[["number","number","number"],"boolean"],FPDFImageObj_GetRenderedBitmap:[["number","number","number"],"number"],FPDFImageObj_LoadJpegFile:[["number","number","number","number"],"boolean"],FPDFImageObj_LoadJpegFileInline:[["number","number","number","number"],"boolean"],FPDFImageObj_SetBitmap:[["number","number","number","number"],"boolean"],FPDFImageObj_SetMatrix:[["number","number","number","number","number","number","number"],"boolean"],FPDFJavaScriptAction_GetName:[["number","number","number"],"number"],FPDFJavaScriptAction_GetScript:[["number","number","number"],"number"],FPDFLink_CloseWebLinks:[["number"],null],FPDFLink_CountQuadPoints:[["number"],"number"],FPDFLink_CountRects:[["number","number"],"number"],FPDFLink_CountWebLinks:[["number"],"number"],FPDFLink_Enumerate:[["number","number","number"],"boolean"],FPDFLink_GetAction:[["number"],"number"],FPDFLink_GetAnnot:[["number","number"],"number"],FPDFLink_GetAnnotRect:[["number","number"],"boolean"],FPDFLink_GetDest:[["number","number"],"number"],FPDFLink_GetLinkAtPoint:[["number","number","number"],"number"],FPDFLink_GetLinkZOrderAtPoint:[["number","number","number"],"number"],FPDFLink_GetQuadPoints:[["number","number","number"],"boolean"],FPDFLink_GetRect:[["number","number","number","number","number","number","number"],"boolean"],FPDFLink_GetTextRange:[["number","number","number","number"],"boolean"],FPDFLink_GetURL:[["number","number","number","number"],"number"],FPDFLink_LoadWebLinks:[["number"],"number"],FPDFPage_CloseAnnot:[["number"],null],FPDFPage_CountObjects:[["number"],"number"],FPDFPage_CreateAnnot:[["number","number"],"number"],FPDFPage_Delete:[["number","number"],null],FPDFPage_Flatten:[["number","number"],"number"],FPDFPage_FormFieldZOrderAtPoint:[["number","number","number","number"],"number"],FPDFPage_GenerateContent:[["number"],"boolean"],FPDFPage_GetAnnot:[["number","number"],"number"],FPDFPage_GetAnnotCount:[["number"],"number"],FPDFPage_GetAnnotIndex:[["number","number"],"number"],FPDFPage_GetArtBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetBleedBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetCropBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetDecodedThumbnailData:[["number","number","number"],"number"],FPDFPage_GetMediaBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetObject:[["number","number"],"number"],FPDFPage_GetRawThumbnailData:[["number","number","number"],"number"],FPDFPage_GetRotation:[["number"],"number"],FPDFPage_GetThumbnailAsBitmap:[["number"],"number"],FPDFPage_GetTrimBox:[["number","number","number","number","number"],"boolean"],FPDFPage_HasFormFieldAtPoint:[["number","number","number","number"],"number"],FPDFPage_HasTransparency:[["number"],"boolean"],FPDFPage_InsertClipPath:[["number","number"],null],FPDFPage_InsertObject:[["number","number"],null],FPDFPage_InsertObjectAtIndex:[["number","number","number"],"boolean"],FPDFPage_New:[["number","number","number","number"],"number"],FPDFPage_RemoveAnnot:[["number","number"],"boolean"],FPDFPage_RemoveObject:[["number","number"],"boolean"],FPDFPage_SetArtBox:[["number","number","number","number","number"],null],FPDFPage_SetBleedBox:[["number","number","number","number","number"],null],FPDFPage_SetCropBox:[["number","number","number","number","number"],null],FPDFPage_SetMediaBox:[["number","number","number","number","number"],null],FPDFPage_SetRotation:[["number","number"],null],FPDFPage_SetTrimBox:[["number","number","number","number","number"],null],FPDFPage_TransformAnnots:[["number","number","number","number","number","number","number"],null],FPDFPage_TransFormWithClip:[["number","number","number"],"boolean"],FPDFPageObj_AddMark:[["number","string"],"number"],FPDFPageObj_CountMarks:[["number"],"number"],FPDFPageObj_CreateNewPath:[["number","number"],"number"],FPDFPageObj_CreateNewRect:[["number","number","number","number"],"number"],FPDFPageObj_CreateTextObj:[["number","number","number"],"number"],FPDFPageObj_Destroy:[["number"],null],FPDFPageObj_GetBounds:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetClipPath:[["number"],"number"],FPDFPageObj_GetDashArray:[["number","number","number"],"boolean"],FPDFPageObj_GetDashCount:[["number"],"number"],FPDFPageObj_GetDashPhase:[["number","number"],"boolean"],FPDFPageObj_GetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetIsActive:[["number","number"],"boolean"],FPDFPageObj_GetLineCap:[["number"],"number"],FPDFPageObj_GetLineJoin:[["number"],"number"],FPDFPageObj_GetMark:[["number","number"],"number"],FPDFPageObj_GetMarkedContentID:[["number"],"number"],FPDFPageObj_GetMatrix:[["number","number"],"boolean"],FPDFPageObj_GetRotatedBounds:[["number","number"],"boolean"],FPDFPageObj_GetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_GetType:[["number"],"number"],FPDFPageObj_HasTransparency:[["number"],"boolean"],FPDFPageObj_NewImageObj:[["number"],"number"],FPDFPageObj_NewTextObj:[["number","string","number"],"number"],FPDFPageObj_RemoveMark:[["number","number"],"boolean"],FPDFPageObj_SetBlendMode:[["number","string"],null],FPDFPageObj_SetDashArray:[["number","number","number","number"],"boolean"],FPDFPageObj_SetDashPhase:[["number","number"],"boolean"],FPDFPageObj_SetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetIsActive:[["number","boolean"],"boolean"],FPDFPageObj_SetLineCap:[["number","number"],"boolean"],FPDFPageObj_SetLineJoin:[["number","number"],"boolean"],FPDFPageObj_SetMatrix:[["number","number"],"boolean"],FPDFPageObj_SetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_Transform:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformClipPath:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformF:[["number","number"],"boolean"],FPDFPageObjMark_CountParams:[["number"],"number"],FPDFPageObjMark_GetName:[["number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamBlobValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamIntValue:[["number","string","number"],"boolean"],FPDFPageObjMark_GetParamKey:[["number","number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamStringValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamValueType:[["number","string"],"number"],FPDFPageObjMark_RemoveParam:[["number","number","string"],"boolean"],FPDFPageObjMark_SetBlobParam:[["number","number","number","string","number","number"],"boolean"],FPDFPageObjMark_SetIntParam:[["number","number","number","string","number"],"boolean"],FPDFPageObjMark_SetStringParam:[["number","number","number","string","string"],"boolean"],FPDFPath_BezierTo:[["number","number","number","number","number","number","number"],"boolean"],FPDFPath_Close:[["number"],"boolean"],FPDFPath_CountSegments:[["number"],"number"],FPDFPath_GetDrawMode:[["number","number","number"],"boolean"],FPDFPath_GetPathSegment:[["number","number"],"number"],FPDFPath_LineTo:[["number","number","number"],"boolean"],FPDFPath_MoveTo:[["number","number","number"],"boolean"],FPDFPath_SetDrawMode:[["number","number","boolean"],"boolean"],FPDFPathSegment_GetClose:[["number"],"boolean"],FPDFPathSegment_GetPoint:[["number","number","number"],"boolean"],FPDFPathSegment_GetType:[["number"],"number"],FPDFSignatureObj_GetByteRange:[["number","number","number"],"number"],FPDFSignatureObj_GetContents:[["number","number","number"],"number"],FPDFSignatureObj_GetDocMDPPermission:[["number"],"number"],FPDFSignatureObj_GetReason:[["number","number","number"],"number"],FPDFSignatureObj_GetSubFilter:[["number","number","number"],"number"],FPDFSignatureObj_GetTime:[["number","number","number"],"number"],FPDFText_ClosePage:[["number"],null],FPDFText_CountChars:[["number"],"number"],FPDFText_CountRects:[["number","number","number"],"number"],FPDFText_FindClose:[["number"],null],FPDFText_FindNext:[["number"],"boolean"],FPDFText_FindPrev:[["number"],"boolean"],FPDFText_FindStart:[["number","number","number","number"],"number"],FPDFText_GetBoundedText:[["number","number","number","number","number","number","number"],"number"],FPDFText_GetCharAngle:[["number","number"],"number"],FPDFText_GetCharBox:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetCharIndexAtPos:[["number","number","number","number","number"],"number"],FPDFText_GetCharIndexFromTextIndex:[["number","number"],"number"],FPDFText_GetCharOrigin:[["number","number","number","number"],"boolean"],FPDFText_GetFillColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetFontInfo:[["number","number","number","number","number"],"number"],FPDFText_GetFontSize:[["number","number"],"number"],FPDFText_GetFontWeight:[["number","number"],"number"],FPDFText_GetLooseCharBox:[["number","number","number"],"boolean"],FPDFText_GetMatrix:[["number","number","number"],"boolean"],FPDFText_GetRect:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetSchCount:[["number"],"number"],FPDFText_GetSchResultIndex:[["number"],"number"],FPDFText_GetStrokeColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetText:[["number","number","number","number"],"number"],FPDFText_GetTextIndexFromCharIndex:[["number","number"],"number"],FPDFText_GetTextObject:[["number","number"],"number"],FPDFText_GetUnicode:[["number","number"],"number"],FPDFText_HasUnicodeMapError:[["number","number"],"number"],FPDFText_IsGenerated:[["number","number"],"number"],FPDFText_IsHyphen:[["number","number"],"number"],FPDFText_LoadCidType2Font:[["number","number","number","string","number","number"],"number"],FPDFText_LoadFont:[["number","number","number","number","boolean"],"number"],FPDFText_LoadPage:[["number"],"number"],FPDFText_LoadStandardFont:[["number","string"],"number"],FPDFText_SetCharcodes:[["number","number","number"],"boolean"],FPDFText_SetText:[["number","number"],"boolean"],FPDFTextObj_GetFont:[["number"],"number"],FPDFTextObj_GetFontSize:[["number","number"],"boolean"],FPDFTextObj_GetRenderedBitmap:[["number","number","number","number"],"number"],FPDFTextObj_GetText:[["number","number","number","number"],"number"],FPDFTextObj_GetTextRenderMode:[["number"],"number"],FPDFTextObj_SetTextRenderMode:[["number","number"],"boolean"],PDFiumExt_CloseFileWriter:[["number"],null],PDFiumExt_CloseFormFillInfo:[["number"],null],PDFiumExt_ExitFormFillEnvironment:[["number"],null],PDFiumExt_GetFileWriterData:[["number","number","number"],"number"],PDFiumExt_GetFileWriterSize:[["number"],"number"],PDFiumExt_Init:[[],null],PDFiumExt_InitFormFillEnvironment:[["number","number"],"number"],PDFiumExt_OpenFileWriter:[[],"number"],PDFiumExt_OpenFormFillInfo:[[],"number"],PDFiumExt_SaveAsCopy:[["number","number"],"number"]};async function vn(H){return(async function(r){const n={pdfium:r};for(const o in pt){const e=o,u=pt[e][0],m=pt[e][1];n[e]=r.cwrap(o,m,u)}return n})(await xn(H))}function ue(H,r,n,o=100){let e=H.wasmExports.malloc(o);for(let d=0;d<o;d++)H.HEAP8[e+d]=0;const u=r(e,o);let m;if(u>o){H.wasmExports.free(e),e=H.wasmExports.malloc(u);for(let d=0;d<u;d++)H.HEAP8[e+d]=0;r(e,u),m=n(e)}else m=n(e);return H.wasmExports.free(e),m}function At(H,r){const n=r(0,0),o=H.wasmExports.malloc(n);r(o,n);const e=new ArrayBuffer(n),u=new DataView(e);for(let m=0;m<n;m++)u.setInt8(m,H.getValue(o+m,"i8"));return H.wasmExports.free(o),e}const On=new Set(["Title","Author","Subject","Keywords","Producer","Creator","CreationDate","ModDate","Trapped"]);function wn(H){if(!H||H.length>127||On.has(H)||H[0]==="/")return!1;for(let r=0;r<H.length;r++){const n=H.charCodeAt(r);if(n<32||n>126)return!1}return!0}const kn={pageTtl:5e3,maxPagesPerDocument:10};class Rn{constructor(r,n={}){this.pdfium=r,this.docs=new Map,this.config={...kn,...n}}setDocument(r,n,o){let e=this.docs.get(r);e||(e=new In(n,o,this.pdfium,this.config),this.docs.set(r,e))}getContext(r){return this.docs.get(r)}closeDocument(r){const n=this.docs.get(r);return!!n&&(n.dispose(),this.docs.delete(r),!0)}closeAllDocuments(){for(const r of this.docs.values())r.dispose();this.docs.clear()}updateConfig(r){Object.assign(this.config,r);for(const n of this.docs.values())n.updateConfig(this.config)}getCacheStats(){const r={};let n=0;for(const[o,e]of this.docs.entries()){const u=e.getCacheSize();r[o]=u,n+=u}return{documents:this.docs.size,totalPages:n,pagesByDocument:r}}}class In{constructor(r,n,o,e){this.filePtr=r,this.docPtr=n,this.pageCache=new jn(o,n,e)}acquirePage(r){return this.pageCache.acquire(r)}borrowPage(r,n){return this.pageCache.borrowPage(r,n)}updateConfig(r){this.pageCache.updateConfig(r)}getCacheSize(){return this.pageCache.size()}dispose(){this.pageCache.forceReleaseAll(),this.pageCache.pdf.FPDF_CloseDocument(this.docPtr),this.pageCache.pdf.pdfium.wasmExports.free(this.filePtr)}}class jn{constructor(r,n,o){this.pdf=r,this.docPtr=n,this.cache=new Map,this.accessOrder=[],this.config=o}acquire(r){let n=this.cache.get(r);if(!n){this.evictIfNeeded();const o=this.pdf.FPDF_LoadPage(this.docPtr,r);n=new Bn(this.pdf,this.docPtr,r,o,this.config.pageTtl,(()=>{this.cache.delete(r),this.removeFromAccessOrder(r)})),this.cache.set(r,n)}return this.updateAccessOrder(r),n.clearExpiryTimer(),n.bumpRefCount(),n}borrowPage(r,n){const o=this.cache.has(r),e=this.acquire(r);try{return n(e)}finally{o?e.release():e.disposeImmediate()}}forceReleaseAll(){for(const r of this.cache.values())r.disposeImmediate();this.cache.clear(),this.accessOrder.length=0}updateConfig(r){this.config=r;for(const n of this.cache.values())n.updateTtl(r.pageTtl);this.evictIfNeeded()}size(){return this.cache.size}evictIfNeeded(){for(;this.cache.size>=this.config.maxPagesPerDocument;){const r=this.accessOrder[0];if(r===void 0)break;{const n=this.cache.get(r);if(n){if(n.getRefCount()!==0)break;n.disposeImmediate()}else this.removeFromAccessOrder(r)}}}updateAccessOrder(r){this.removeFromAccessOrder(r),this.accessOrder.push(r)}removeFromAccessOrder(r){const n=this.accessOrder.indexOf(r);n>-1&&this.accessOrder.splice(n,1)}}class Bn{constructor(r,n,o,e,u,m){this.pdf=r,this.docPtr=n,this.pageIdx=o,this.pagePtr=e,this.onFinalDispose=m,this.refCount=0,this.disposed=!1,this.ttl=u}bumpRefCount(){if(this.disposed)throw new Error("Context already disposed");this.refCount++}getRefCount(){return this.refCount}clearExpiryTimer(){this.expiryTimer&&(clearTimeout(this.expiryTimer),this.expiryTimer=void 0)}updateTtl(r){this.ttl=r,this.expiryTimer&&this.refCount===0&&(this.clearExpiryTimer(),this.expiryTimer=setTimeout((()=>this.disposeImmediate()),this.ttl))}release(){this.disposed||(this.refCount--,this.refCount===0&&(this.expiryTimer=setTimeout((()=>this.disposeImmediate()),this.ttl)))}disposeImmediate(){this.disposed||(this.disposed=!0,this.clearExpiryTimer(),this.textPagePtr!==void 0&&this.pdf.FPDFText_ClosePage(this.textPagePtr),this.formHandle!==void 0&&(this.pdf.FORM_OnBeforeClosePage(this.pagePtr,this.formHandle),this.pdf.PDFiumExt_ExitFormFillEnvironment(this.formHandle)),this.formInfoPtr!==void 0&&this.pdf.PDFiumExt_CloseFormFillInfo(this.formInfoPtr),this.pdf.FPDF_ClosePage(this.pagePtr),this.onFinalDispose())}getTextPage(){return this.ensureAlive(),this.textPagePtr===void 0&&(this.textPagePtr=this.pdf.FPDFText_LoadPage(this.pagePtr)),this.textPagePtr}getFormHandle(){return this.ensureAlive(),this.formHandle===void 0&&(this.formInfoPtr=this.pdf.PDFiumExt_OpenFormFillInfo(),this.formHandle=this.pdf.PDFiumExt_InitFormFillEnvironment(this.docPtr,this.formInfoPtr),this.pdf.FORM_OnAfterLoadPage(this.pagePtr,this.formHandle)),this.formHandle}withAnnotation(r,n){this.ensureAlive();const o=this.pdf.FPDFPage_GetAnnot(this.pagePtr,r);try{return n(o)}finally{this.pdf.FPDFPage_CloseAnnot(o)}}ensureAlive(){if(this.disposed)throw new Error("PageContext already disposed")}}const on={MAX_TOTAL_MEMORY:2147483648},Et="PDFiumEngine",Mt="MemoryManager";class Ln{constructor(r,n){this.pdfiumModule=r,this.logger=n,this.allocations=new Map,this.totalAllocated=0}malloc(r){if(this.totalAllocated+r>on.MAX_TOTAL_MEMORY)throw new Error(`Total memory usage would exceed limit: ${this.totalAllocated+r} > ${on.MAX_TOTAL_MEMORY}`);const n=this.pdfiumModule.pdfium.wasmExports.malloc(r);if(!n)throw new Error(`Failed to allocate ${r} bytes`);const o={ptr:n,size:r,timestamp:Date.now(),stack:this.logger.isEnabled("debug")?new Error().stack:void 0};return this.allocations.set(n,o),this.totalAllocated+=r,n}free(r){const n=this.allocations.get(r);n?(this.totalAllocated-=n.size,this.allocations.delete(r)):this.logger.warn(Et,Mt,`Freeing untracked pointer: ${r}`),this.pdfiumModule.pdfium.wasmExports.free(r)}getStats(){return{totalAllocated:this.totalAllocated,allocationCount:this.allocations.size,allocations:this.logger.isEnabled("debug")?Array.from(this.allocations.values()):[]}}checkLeaks(){if(this.allocations.size>0){this.logger.warn(Et,Mt,`Potential memory leak: ${this.allocations.size} unfreed allocations`);for(const[r,n]of this.allocations)this.logger.warn(Et,Mt,`  - ${r}: ${n.size} bytes`,n.stack)}}}const g="PDFiumEngine",h="Engine";class yt extends Error{constructor(r){super(r),this.name="OffscreenCanvasError"}}const Nn=(H,r="image/webp",n)=>{if(typeof OffscreenCanvas>"u")return Promise.reject(new yt("OffscreenCanvas is not available in this environment. This converter is intended for browser use only. Falling back to WASM-based image encoding."));const o=H(),e=new ImageData(o.data,o.width,o.height),u=new OffscreenCanvas(e.width,e.height);return u.getContext("2d").putImageData(e,0,0),u.convertToBlob({type:r,quality:n})};class Vn{constructor(r,n={}){this.pdfiumModule=r,this.memoryLeakCheckInterval=null;const{logger:o=new hn,imageDataConverter:e=Nn}=n;this.cache=new Rn(this.pdfiumModule),this.logger=o,this.imageDataConverter=e,this.memoryManager=new Ln(this.pdfiumModule,this.logger),this.logger.isEnabled("debug")&&(this.memoryLeakCheckInterval=setInterval((()=>{this.memoryManager.checkLeaks()}),1e4))}initialize(){return this.logger.debug(g,h,"initialize"),this.logger.perf(g,h,"Initialize","Begin","General"),this.pdfiumModule.PDFiumExt_Init(),this.logger.perf(g,h,"Initialize","End","General"),G.resolve(!0)}destroy(){return this.logger.debug(g,h,"destroy"),this.logger.perf(g,h,"Destroy","Begin","General"),this.pdfiumModule.FPDF_DestroyLibrary(),this.memoryLeakCheckInterval&&(clearInterval(this.memoryLeakCheckInterval),this.memoryLeakCheckInterval=null),this.logger.perf(g,h,"Destroy","End","General"),G.resolve(!0)}withWString(r,n){const o=2*(r.length+1),e=this.memoryManager.malloc(o);try{return this.pdfiumModule.pdfium.stringToUTF16(r,e,o),n(e)}finally{this.memoryManager.free(e)}}withFloatArray(r,n){const o=r??[],e=4*o.length,u=e?this.memoryManager.malloc(e):0;try{if(e)for(let m=0;m<o.length;m++)this.pdfiumModule.pdfium.setValue(u+4*m,o[m],"float");return n(u,o.length)}finally{e&&this.memoryManager.free(u)}}openDocumentUrl(r,n){const o=n?.mode??"auto",e=n?.password??"";this.logger.debug(g,h,"openDocumentUrl called",r.url,o);const u=G.create();return(async()=>{try{(await this.fetchFullAndOpen(r,e)).wait((m=>u.resolve(m)),(m=>u.reject(m.reason)))}catch(m){this.logger.error(g,h,"openDocumentUrl error",m),u.reject({code:v.Unknown,message:String(m)})}})(),u}async checkRangeSupport(r){try{this.logger.debug(g,h,"checkRangeSupport",r);const n=await fetch(r,{method:"HEAD"}),o=n.headers.get("Content-Length");if(n.headers.get("Accept-Ranges")==="bytes")return{supportsRanges:!0,fileLength:parseInt(o??"0"),content:null};const e=await fetch(r,{headers:{Range:"bytes=0-1"}});if(e.status===200){const u=await e.arrayBuffer();return{supportsRanges:!1,fileLength:parseInt(o??"0"),content:u}}return{supportsRanges:e.status===206,fileLength:parseInt(o??"0"),content:null}}catch(n){throw this.logger.error(g,h,"checkRangeSupport failed",n),new Error("Failed to check range support: "+n)}}async fetchFullAndOpen(r,n){this.logger.debug(g,h,"fetchFullAndOpen",r.url);const o=await fetch(r.url);if(!o.ok)throw new Error(`Could not fetch PDF: ${o.statusText}`);const e=await o.arrayBuffer(),u={id:r.id,name:r.name,content:e};return this.openDocumentBuffer(u,{password:n})}async openDocumentWithRangeRequest(r,n,o){this.logger.debug(g,h,"openDocumentWithRangeRequest",r.url);const e=o??(await this.retrieveFileLength(r.url)).fileLength;return this.openDocumentFromLoader({id:r.id,fileLength:e,callback:(u,m)=>{const d=new XMLHttpRequest;if(d.open("GET",r.url,!1),d.overrideMimeType("text/plain; charset=x-user-defined"),d.setRequestHeader("Range",`bytes=${u}-${u+m-1}`),d.send(null),d.status===206||d.status===200)return this.convertResponseToUint8Array(d.responseText);throw new Error(`Range request failed with status ${d.status}`)}},n)}async retrieveFileLength(r){this.logger.debug(g,h,"retrieveFileLength",r);const n=await fetch(r,{method:"HEAD"});if(!n.ok)throw new Error(`Failed HEAD request for file length: ${n.statusText}`);const o=n.headers.get("Content-Length")||"0",e=parseInt(o,10)||0;if(!e)throw new Error("Content-Length not found or zero.");return{fileLength:e}}convertResponseToUint8Array(r){const n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=255&r.charCodeAt(o);return n}openDocumentBuffer(r,n){this.logger.debug(g,h,"openDocumentBuffer",r,n),this.logger.perf(g,h,"OpenDocumentBuffer","Begin",r.id);const o=new Uint8Array(r.content),e=o.length,u=this.memoryManager.malloc(e);this.pdfiumModule.pdfium.HEAPU8.set(o,u);const m=this.pdfiumModule.FPDF_LoadMemDocument(u,e,n?.password??"");if(!m){const p=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(g,h,`FPDF_LoadMemDocument failed with ${p}`),this.memoryManager.free(u),this.logger.perf(g,h,"OpenDocumentBuffer","End",r.id),G.reject({code:p,message:"FPDF_LoadMemDocument failed"})}const d=this.pdfiumModule.FPDF_GetPageCount(m),_=[],c=this.memoryManager.malloc(8);for(let p=0;p<d;p++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(m,p,c)){const y=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(g,h,`FPDF_GetPageSizeByIndexF failed with ${y}`),this.memoryManager.free(c),this.pdfiumModule.FPDF_CloseDocument(m),this.memoryManager.free(u),this.logger.perf(g,h,"OpenDocumentBuffer","End",r.id),G.reject({code:y,message:"FPDF_GetPageSizeByIndexF failed"})}const M=this.pdfiumModule.EPDF_GetPageRotationByIndex(m,p),E={index:p,size:{width:this.pdfiumModule.pdfium.getValue(c,"float"),height:this.pdfiumModule.pdfium.getValue(c+4,"float")},rotation:M};_.push(E)}this.memoryManager.free(c);const b={id:r.id,name:r.name,pageCount:d,pages:_};return this.cache.setDocument(r.id,u,m),this.logger.perf(g,h,"OpenDocumentBuffer","End",r.id),G.resolve(b)}openDocumentFromLoader(r,n=""){const{fileLength:o,callback:e,...u}=r;this.logger.debug(g,h,"openDocumentFromLoader",u,n),this.logger.perf(g,h,"OpenDocumentFromLoader","Begin",u.id);const m=this.pdfiumModule.pdfium.addFunction(((E,y,C,x)=>{try{if(this.logger.debug(g,h,"readBlock",y,x,C),y<0||y>=o)return this.logger.error(g,h,"Offset out of bounds:",y),0;const R=e(y,x);return new Uint8Array(this.pdfiumModule.pdfium.HEAPU8.buffer,C,R.length).set(R),R.length}catch(R){return this.logger.error(g,h,"ReadBlock error:",R),0}}),"iiiii"),d=this.memoryManager.malloc(12);this.pdfiumModule.pdfium.setValue(d,o,"i32"),this.pdfiumModule.pdfium.setValue(d+4,m,"i32"),this.pdfiumModule.pdfium.setValue(d+8,0,"i32");const _=this.pdfiumModule.FPDF_LoadCustomDocument(d,n);if(!_){const E=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(g,h,`FPDF_LoadCustomDocument failed with ${E}`),this.memoryManager.free(d),this.logger.perf(g,h,"OpenDocumentFromLoader","End",u.id),G.reject({code:E,message:"FPDF_LoadCustomDocument failed"})}const c=this.pdfiumModule.FPDF_GetPageCount(_),b=[],p=this.memoryManager.malloc(8);for(let E=0;E<c;E++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(_,E,p)){const x=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(g,h,`FPDF_GetPageSizeByIndexF failed with ${x}`),this.memoryManager.free(p),this.pdfiumModule.FPDF_CloseDocument(_),this.memoryManager.free(d),this.logger.perf(g,h,"OpenDocumentFromLoader","End",u.id),G.reject({code:x,message:"FPDF_GetPageSizeByIndexF failed"})}const y=this.pdfiumModule.EPDF_GetPageRotationByIndex(_,E),C={index:E,size:{width:this.pdfiumModule.pdfium.getValue(p,"float"),height:this.pdfiumModule.pdfium.getValue(p+4,"float")},rotation:y};b.push(C)}this.memoryManager.free(p);const M={id:u.id,name:u.name,pageCount:c,pages:b};return this.cache.setDocument(u.id,d,_),this.logger.perf(g,h,"OpenDocumentFromLoader","End",u.id),G.resolve(M)}getMetadata(r){this.logger.debug(g,h,"getMetadata",r),this.logger.perf(g,h,"GetMetadata","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(g,h,"GetMetadata","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const o=this.readMetaText(n.docPtr,"CreationDate"),e=this.readMetaText(n.docPtr,"ModDate"),u={title:this.readMetaText(n.docPtr,"Title"),author:this.readMetaText(n.docPtr,"Author"),subject:this.readMetaText(n.docPtr,"Subject"),keywords:this.readMetaText(n.docPtr,"Keywords"),producer:this.readMetaText(n.docPtr,"Producer"),creator:this.readMetaText(n.docPtr,"Creator"),creationDate:o?ut(o)??null:null,modificationDate:e?ut(e)??null:null,trapped:this.getMetaTrapped(n.docPtr),custom:this.readAllMeta(n.docPtr,!0)};return this.logger.perf(g,h,"GetMetadata","End",r.id),G.resolve(u)}setMetadata(r,n){this.logger.debug(g,h,"setMetadata",r,n),this.logger.perf(g,h,"SetMetadata","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"SetMetadata","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const e=[["title","Title"],["author","Author"],["subject","Subject"],["keywords","Keywords"],["producer","Producer"],["creator","Creator"]];let u=!0;for(const[d,_]of e){const c=n[d];if(c===void 0)continue;const b=c===null?null:c;this.setMetaText(o.docPtr,_,b)||(u=!1)}const m=(d,_)=>{const c=n[d];if(c===void 0)return;if(c===null)return void(this.setMetaText(o.docPtr,_,null)||(u=!1));const b=bt(c);this.setMetaText(o.docPtr,_,b)||(u=!1)};if(m("creationDate","CreationDate"),m("modificationDate","ModDate"),n.trapped!==void 0&&(this.setMetaTrapped(o.docPtr,n.trapped??null)||(u=!1)),n.custom!==void 0)for(const[d,_]of Object.entries(n.custom))wn(d)?this.setMetaText(o.docPtr,d,_??null)||(u=!1):this.logger.warn(g,h,"Invalid custom metadata key skipped",d);return this.logger.perf(g,h,"SetMetadata","End",r.id),u?G.resolve(!0):G.reject({code:v.Unknown,message:"one or more metadata fields could not be written"})}getDocPermissions(r){this.logger.debug(g,h,"getDocPermissions",r),this.logger.perf(g,h,"getDocPermissions","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(g,h,"getDocPermissions","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.FPDF_GetDocPermissions(n.docPtr);return G.resolve(o)}getDocUserPermissions(r){this.logger.debug(g,h,"getDocUserPermissions",r),this.logger.perf(g,h,"getDocUserPermissions","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(g,h,"getDocUserPermissions","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.FPDF_GetDocUserPermissions(n.docPtr);return G.resolve(o)}getSignatures(r){this.logger.debug(g,h,"getSignatures",r),this.logger.perf(g,h,"GetSignatures","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(g,h,"GetSignatures","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const o=[],e=this.pdfiumModule.FPDF_GetSignatureCount(n.docPtr);for(let u=0;u<e;u++){const m=this.pdfiumModule.FPDF_GetSignatureObject(n.docPtr,u),d=At(this.pdfiumModule.pdfium,((E,y)=>this.pdfiumModule.FPDFSignatureObj_GetContents(m,E,y))),_=At(this.pdfiumModule.pdfium,((E,y)=>4*this.pdfiumModule.FPDFSignatureObj_GetByteRange(m,E,y))),c=At(this.pdfiumModule.pdfium,((E,y)=>this.pdfiumModule.FPDFSignatureObj_GetSubFilter(m,E,y))),b=ue(this.pdfiumModule.pdfium,((E,y)=>this.pdfiumModule.FPDFSignatureObj_GetReason(m,E,y)),this.pdfiumModule.pdfium.UTF16ToString),p=ue(this.pdfiumModule.pdfium,((E,y)=>this.pdfiumModule.FPDFSignatureObj_GetTime(m,E,y)),this.pdfiumModule.pdfium.UTF8ToString),M=this.pdfiumModule.FPDFSignatureObj_GetDocMDPPermission(m);o.push({contents:d,byteRange:_,subFilter:c,reason:b,time:p,docMDP:M})}return this.logger.perf(g,h,"GetSignatures","End",r.id),G.resolve(o)}getBookmarks(r){this.logger.debug(g,h,"getBookmarks",r),this.logger.perf(g,h,"GetBookmarks","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(g,h,"getBookmarks","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const o=this.readPdfBookmarks(n.docPtr,0);return this.logger.perf(g,h,"GetBookmarks","End",r.id),G.resolve({bookmarks:o})}setBookmarks(r,n){this.logger.debug(g,h,"setBookmarks",r,n),this.logger.perf(g,h,"SetBookmarks","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"SetBookmarks","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});if(!this.pdfiumModule.EPDFBookmark_Clear(o.docPtr))return this.logger.perf(g,h,"SetBookmarks","End",r.id),G.reject({code:v.Unknown,message:"failed to clear existing bookmarks"});const e=(m,d)=>{var _;for(const c of d){const b=this.withWString(c.title??"",(p=>this.pdfiumModule.EPDFBookmark_AppendChild(o.docPtr,m,p)));if(!b||c.target&&!this.applyBookmarkTarget(o.docPtr,b,c.target)||(_=c.children)!=null&&_.length&&!e(b,c.children))return!1}return!0},u=e(0,n);return this.logger.perf(g,h,"SetBookmarks","End",r.id),u?G.resolve(!0):G.reject({code:v.Unknown,message:"failed to build bookmark tree"})}deleteBookmarks(r){this.logger.debug(g,h,"deleteBookmarks",r),this.logger.perf(g,h,"DeleteBookmarks","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(g,h,"DeleteBookmarks","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.EPDFBookmark_Clear(n.docPtr);return this.logger.perf(g,h,"DeleteBookmarks","End",r.id),o?G.resolve(!0):G.reject({code:v.Unknown,message:"failed to clear bookmarks"})}renderPage(r,n,o){this.logger.debug(g,h,"renderPage",r,n,o),this.logger.perf(g,h,"RenderPage","Begin",`${r.id}-${n.index}`);const e={origin:{x:0,y:0},size:n.size},u=this.renderRectEncoded(r,n,e,o);return this.logger.perf(g,h,"RenderPage","End",`${r.id}-${n.index}`),u}renderPageRect(r,n,o,e){this.logger.debug(g,h,"renderPageRect",r,n,o,e),this.logger.perf(g,h,"RenderPageRect","Begin",`${r.id}-${n.index}`);const u=this.renderRectEncoded(r,n,o,e);return this.logger.perf(g,h,"RenderPageRect","End",`${r.id}-${n.index}`),u}getAllAnnotations(r){this.logger.debug(g,h,"getAllAnnotations-with-progress",r),this.logger.perf(g,h,"GetAllAnnotations","Begin",r.id);const n=G.create();let o=!1;n.wait(Dn,(d=>{d.type==="abort"&&(o=!0)}));const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(g,h,"GetAllAnnotations","End",r.id),n.reject({code:v.DocNotOpen,message:"document does not open"}),n;const u={},m=d=>{if(o)return;const _=Math.min(d+100,r.pageCount);for(let c=d;c<_&&!o;++c){this.logger.debug(g,h,"GetAllAnnotations","Begin",r.id,c);const b=this.readPageAnnotationsRaw(e,r.pages[c]);u[c]=b,this.logger.debug(g,h,"GetAllAnnotations","End",r.id,c),n.progress({page:c,annotations:b})}return o?void 0:_>=r.pageCount?(this.logger.perf(g,h,"GetAllAnnotations","End",r.id),void n.resolve(u)):void setTimeout((()=>m(_)),0)};return m(0),n}readAllAnnotations(r,n){const o={};for(let e=0;e<r.pageCount;e++){const u=this.readPageAnnotations(n,r.pages[e]);o[e]=u}return o}getPageAnnotations(r,n){this.logger.debug(g,h,"getPageAnnotations",r,n),this.logger.perf(g,h,"GetPageAnnotations","Begin",`${r.id}-${n.index}`);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"GetPageAnnotations","End",`${r.id}-${n.index}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const e=this.readPageAnnotations(o,n);return this.logger.perf(g,h,"GetPageAnnotations","End",`${r.id}-${n.index}`),this.logger.debug(g,h,"GetPageAnnotations",`${r.id}-${n.index}`,e),G.resolve(e)}createPageAnnotation(r,n,o,e){this.logger.debug(g,h,"createPageAnnotation",r,n,o),this.logger.perf(g,h,"CreatePageAnnotation","Begin",`${r.id}-${n.index}`);const u=this.cache.getContext(r.id);if(!u)return this.logger.perf(g,h,"CreatePageAnnotation","End",`${r.id}-${n.index}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const m=u.acquirePage(n.index),d=this.pdfiumModule.EPDFPage_CreateAnnot(m.pagePtr,o.type);if(!d)return this.logger.perf(g,h,"CreatePageAnnotation","End",`${r.id}-${n.index}`),m.release(),G.reject({code:v.CantCreateAnnot,message:"can not create annotation with specified type"});if(Yt(o.id)||(o.id=Jt()),!this.setAnnotString(d,"NM",o.id))return this.pdfiumModule.FPDFPage_CloseAnnot(d),m.release(),G.reject({code:v.CantSetAnnotString,message:"can not set the name of the annotation"});if(!this.setPageAnnoRect(n,d,o.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(d),m.release(),this.logger.perf(g,h,"CreatePageAnnotation","End",`${r.id}-${n.index}`),G.reject({code:v.CantSetAnnotRect,message:"can not set the rect of the annotation"});let _=!1;switch(o.type){case L.INK:_=this.addInkStroke(n,m.pagePtr,d,o);break;case L.STAMP:_=this.addStampContent(u.docPtr,n,m.pagePtr,d,o,e?.imageData);break;case L.TEXT:_=this.addTextContent(n,m.pagePtr,d,o);break;case L.FREETEXT:_=this.addFreeTextContent(n,m.pagePtr,d,o);break;case L.LINE:_=this.addLineContent(n,m.pagePtr,d,o);break;case L.POLYLINE:case L.POLYGON:_=this.addPolyContent(n,m.pagePtr,d,o);break;case L.CIRCLE:case L.SQUARE:_=this.addShapeContent(n,m.pagePtr,d,o);break;case L.UNDERLINE:case L.STRIKEOUT:case L.SQUIGGLY:case L.HIGHLIGHT:_=this.addTextMarkupContent(n,m.pagePtr,d,o)}return _?(o.blendMode!==void 0?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(d,o.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(d),this.pdfiumModule.FPDFPage_GenerateContent(m.pagePtr),this.pdfiumModule.FPDFPage_CloseAnnot(d),m.release(),this.logger.perf(g,h,"CreatePageAnnotation","End",`${r.id}-${n.index}`),G.resolve(o.id)):(this.pdfiumModule.FPDFPage_RemoveAnnot(m.pagePtr,d),m.release(),this.logger.perf(g,h,"CreatePageAnnotation","End",`${r.id}-${n.index}`),G.reject({code:v.CantSetAnnotContent,message:"can not add content of the annotation"}))}updatePageAnnotation(r,n,o){this.logger.debug(g,h,"updatePageAnnotation",r,n,o),this.logger.perf(g,h,"UpdatePageAnnotation","Begin",`${r.id}-${n.index}`);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(g,h,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const u=e.acquirePage(n.index),m=this.getAnnotationByName(u.pagePtr,o.id);if(!m)return u.release(),this.logger.perf(g,h,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),G.reject({code:v.NotFound,message:"annotation not found"});if(!this.setPageAnnoRect(n,m,o.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(m),u.release(),this.logger.perf(g,h,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),G.reject({code:v.CantSetAnnotRect,message:"failed to move annotation"});let d=!1;switch(o.type){case L.INK:if(!this.pdfiumModule.FPDFAnnot_RemoveInkList(m))break;d=this.addInkStroke(n,u.pagePtr,m,o);break;case L.STAMP:d=this.addStampContent(e.docPtr,n,u.pagePtr,m,o);break;case L.TEXT:d=this.addTextContent(n,u.pagePtr,m,o);break;case L.FREETEXT:d=this.addFreeTextContent(n,u.pagePtr,m,o);break;case L.CIRCLE:case L.SQUARE:d=this.addShapeContent(n,u.pagePtr,m,o);break;case L.LINE:d=this.addLineContent(n,u.pagePtr,m,o);break;case L.POLYGON:case L.POLYLINE:d=this.addPolyContent(n,u.pagePtr,m,o);break;case L.HIGHLIGHT:case L.UNDERLINE:case L.STRIKEOUT:case L.SQUIGGLY:d=this.addTextMarkupContent(n,u.pagePtr,m,o);break;default:d=!1}return d&&(o.blendMode!==void 0?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(m,o.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(m),this.pdfiumModule.FPDFPage_GenerateContent(u.pagePtr)),this.pdfiumModule.FPDFPage_CloseAnnot(m),u.release(),this.logger.perf(g,h,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),d?G.resolve(!0):G.reject({code:v.CantSetAnnotContent,message:"failed to update annotation"})}removePageAnnotation(r,n,o){this.logger.debug(g,h,"removePageAnnotation",r,n,o),this.logger.perf(g,h,"RemovePageAnnotation","Begin",`${r.id}-${n.index}`);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(g,h,"RemovePageAnnotation","End",`${r.id}-${n.index}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const u=e.acquirePage(n.index);let m=!1;return m=this.removeAnnotationByName(u.pagePtr,o.id),m?(m=this.pdfiumModule.FPDFPage_GenerateContent(u.pagePtr),m||this.logger.error(g,h,"FPDFPage_GenerateContent Failed",`${r.id}-${n.index}`)):this.logger.error(g,h,"FPDFPage_RemoveAnnot Failed",`${r.id}-${n.index}`),u.release(),this.logger.perf(g,h,"RemovePageAnnotation","End",`${r.id}-${n.index}`),G.resolve(m)}getPageTextRects(r,n){this.logger.debug(g,h,"getPageTextRects",r,n),this.logger.perf(g,h,"GetPageTextRects","Begin",`${r.id}-${n.index}`);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"GetPageTextRects","End",`${r.id}-${n.index}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const e=o.acquirePage(n.index),u=this.pdfiumModule.FPDFText_LoadPage(e.pagePtr),m=this.readPageTextRects(n,e.docPtr,e.pagePtr,u);return this.pdfiumModule.FPDFText_ClosePage(u),e.release(),this.logger.perf(g,h,"GetPageTextRects","End",`${r.id}-${n.index}`),G.resolve(m)}renderThumbnail(r,n,o){const{scaleFactor:e=1,...u}=o??{};if(this.logger.debug(g,h,"renderThumbnail",r,n,o),this.logger.perf(g,h,"RenderThumbnail","Begin",`${r.id}-${n.index}`),!this.cache.getContext(r.id))return this.logger.perf(g,h,"RenderThumbnail","End",`${r.id}-${n.index}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const m=this.renderPage(r,n,{scaleFactor:Math.max(e,.5),...u});return this.logger.perf(g,h,"RenderThumbnail","End",`${r.id}-${n.index}`),m}getAttachments(r){this.logger.debug(g,h,"getAttachments",r),this.logger.perf(g,h,"GetAttachments","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(g,h,"GetAttachments","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const o=[],e=this.pdfiumModule.FPDFDoc_GetAttachmentCount(n.docPtr);for(let u=0;u<e;u++){const m=this.readPdfAttachment(n.docPtr,u);o.push(m)}return this.logger.perf(g,h,"GetAttachments","End",r.id),G.resolve(o)}addAttachment(r,n){this.logger.debug(g,h,"addAttachment",r,n?.name),this.logger.perf(g,h,"AddAttachment","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"AddAttachment","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const{name:e,description:u,mimeType:m,data:d}=n??{};if(!e)return this.logger.perf(g,h,"AddAttachment","End",r.id),G.reject({code:v.NotFound,message:"attachment name is required"});if(!d||d.byteLength===0)return this.logger.perf(g,h,"AddAttachment","End",r.id),G.reject({code:v.NotFound,message:"attachment data is empty"});const _=this.withWString(e,(M=>this.pdfiumModule.FPDFDoc_AddAttachment(o.docPtr,M)));if(!_)return this.logger.perf(g,h,"AddAttachment","End",r.id),G.reject({code:v.Unknown,message:`An attachment named "${e}" already exists`});this.withWString(u,(M=>this.pdfiumModule.EPDFAttachment_SetDescription(_,M))),this.pdfiumModule.EPDFAttachment_SetSubtype(_,m);const c=d instanceof Uint8Array?d:new Uint8Array(d),b=c.byteLength,p=this.memoryManager.malloc(b);try{if(this.pdfiumModule.pdfium.HEAPU8.set(c,p),!this.pdfiumModule.FPDFAttachment_SetFile(_,o.docPtr,p,b))return this.logger.perf(g,h,"AddAttachment","End",r.id),G.reject({code:v.Unknown,message:"failed to write attachment bytes"})}finally{this.memoryManager.free(p)}return this.logger.perf(g,h,"AddAttachment","End",r.id),G.resolve(!0)}removeAttachment(r,n){this.logger.debug(g,h,"deleteAttachment",r,n),this.logger.perf(g,h,"DeleteAttachment","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"DeleteAttachment","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.FPDFDoc_GetAttachmentCount(o.docPtr);if(n.index<0||n.index>=e)return this.logger.perf(g,h,"DeleteAttachment","End",r.id),G.reject({code:v.Unknown,message:`attachment index ${n.index} out of range`});const u=this.pdfiumModule.FPDFDoc_DeleteAttachment(o.docPtr,n.index);return this.logger.perf(g,h,"DeleteAttachment","End",r.id),u?G.resolve(!0):G.reject({code:v.Unknown,message:"failed to delete attachment"})}readAttachmentContent(r,n){this.logger.debug(g,h,"readAttachmentContent",r,n),this.logger.perf(g,h,"ReadAttachmentContent","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"ReadAttachmentContent","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.FPDFDoc_GetAttachment(o.docPtr,n.index),u=this.memoryManager.malloc(4);if(!this.pdfiumModule.FPDFAttachment_GetFile(e,0,0,u))return this.memoryManager.free(u),this.logger.perf(g,h,"ReadAttachmentContent","End",r.id),G.reject({code:v.CantReadAttachmentSize,message:"can not read attachment size"});const m=this.pdfiumModule.pdfium.getValue(u,"i32")>>>0,d=this.memoryManager.malloc(m);if(!this.pdfiumModule.FPDFAttachment_GetFile(e,d,m,u))return this.memoryManager.free(u),this.memoryManager.free(d),this.logger.perf(g,h,"ReadAttachmentContent","End",r.id),G.reject({code:v.CantReadAttachmentContent,message:"can not read attachment content"});const _=new ArrayBuffer(m),c=new DataView(_);for(let b=0;b<m;b++)c.setInt8(b,this.pdfiumModule.pdfium.getValue(d+b,"i8"));return this.memoryManager.free(u),this.memoryManager.free(d),this.logger.perf(g,h,"ReadAttachmentContent","End",r.id),G.resolve(_)}setFormFieldValue(r,n,o,e){this.logger.debug(g,h,"SetFormFieldValue",r,o,e),this.logger.perf(g,h,"SetFormFieldValue","Begin",`${r.id}-${o.id}`);const u=this.cache.getContext(r.id);if(!u)return this.logger.debug(g,h,"SetFormFieldValue","document is not opened"),this.logger.perf(g,h,"SetFormFieldValue","End",`${r.id}-${o.id}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const m=this.pdfiumModule.PDFiumExt_OpenFormFillInfo(),d=this.pdfiumModule.PDFiumExt_InitFormFillEnvironment(u.docPtr,m),_=u.acquirePage(n.index);this.pdfiumModule.FORM_OnAfterLoadPage(_.pagePtr,d);const c=this.getAnnotationByName(_.pagePtr,o.id);if(!c)return _.release(),this.logger.perf(g,h,"SetFormFieldValue","End",`${r.id}-${n.index}`),G.reject({code:v.NotFound,message:"annotation not found"});if(!this.pdfiumModule.FORM_SetFocusedAnnot(d,c))return this.logger.debug(g,h,"SetFormFieldValue","failed to set focused annotation"),this.logger.perf(g,h,"SetFormFieldValue","End",`${r.id}-${o.id}`),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),G.reject({code:v.CantFocusAnnot,message:"failed to set focused annotation"});switch(e.kind){case"text":{if(!this.pdfiumModule.FORM_SelectAllText(d,_.pagePtr))return this.logger.debug(g,h,"SetFormFieldValue","failed to select all text"),this.logger.perf(g,h,"SetFormFieldValue","End",`${r.id}-${o.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),G.reject({code:v.CantSelectText,message:"failed to select all text"});const b=2*(e.text.length+1),p=this.memoryManager.malloc(b);this.pdfiumModule.pdfium.stringToUTF16(e.text,p,b),this.pdfiumModule.FORM_ReplaceSelection(d,_.pagePtr,p),this.memoryManager.free(p)}break;case"selection":if(!this.pdfiumModule.FORM_SetIndexSelected(d,_.pagePtr,e.index,e.isSelected))return this.logger.debug(g,h,"SetFormFieldValue","failed to set index selected"),this.logger.perf(g,h,"SetFormFieldValue","End",`${r.id}-${o.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),G.reject({code:v.CantSelectOption,message:"failed to set index selected"});break;case"checked":if(!this.pdfiumModule.FORM_OnChar(d,_.pagePtr,13,0))return this.logger.debug(g,h,"SetFormFieldValue","failed to set field checked"),this.logger.perf(g,h,"SetFormFieldValue","End",`${r.id}-${o.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),G.reject({code:v.CantCheckField,message:"failed to set field checked"})}return this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),G.resolve(!0)}flattenPage(r,n,o){const{flag:e=bn.Display}=o??{};this.logger.debug(g,h,"flattenPage",r,n,e),this.logger.perf(g,h,"flattenPage","Begin",r.id);const u=this.cache.getContext(r.id);if(!u)return this.logger.perf(g,h,"flattenPage","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const m=u.acquirePage(n.index),d=this.pdfiumModule.FPDFPage_Flatten(m.pagePtr,e);return m.release(),this.logger.perf(g,h,"flattenPage","End",r.id),G.resolve(d)}extractPages(r,n){this.logger.debug(g,h,"extractPages",r,n),this.logger.perf(g,h,"ExtractPages","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"ExtractPages","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.FPDF_CreateNewDocument();if(!e)return this.logger.perf(g,h,"ExtractPages","End",r.id),G.reject({code:v.CantCreateNewDoc,message:"can not create new document"});const u=this.memoryManager.malloc(4*n.length);for(let d=0;d<n.length;d++)this.pdfiumModule.pdfium.setValue(u+4*d,n[d],"i32");if(!this.pdfiumModule.FPDF_ImportPagesByIndex(e,o.docPtr,u,n.length,0))return this.pdfiumModule.FPDF_CloseDocument(e),this.logger.perf(g,h,"ExtractPages","End",r.id),G.reject({code:v.CantImportPages,message:"can not import pages to new document"});const m=this.saveDocument(e);return this.pdfiumModule.FPDF_CloseDocument(e),this.logger.perf(g,h,"ExtractPages","End",r.id),G.resolve(m)}extractText(r,n){this.logger.debug(g,h,"extractText",r,n),this.logger.perf(g,h,"ExtractText","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"ExtractText","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const e=[];for(let m=0;m<n.length;m++){const d=o.acquirePage(n[m]),_=this.pdfiumModule.FPDFText_LoadPage(d.pagePtr),c=this.pdfiumModule.FPDFText_CountChars(_),b=this.memoryManager.malloc(2*(c+1));this.pdfiumModule.FPDFText_GetText(_,0,c,b);const p=this.pdfiumModule.pdfium.UTF16ToString(b);this.memoryManager.free(b),e.push(p),this.pdfiumModule.FPDFText_ClosePage(_),d.release()}const u=e.join(`

`);return this.logger.perf(g,h,"ExtractText","End",r.id),G.resolve(u)}getTextSlices(r,n){if(this.logger.debug(g,h,"getTextSlices",r,n),this.logger.perf(g,h,"GetTextSlices","Begin",r.id),n.length===0)return this.logger.perf(g,h,"GetTextSlices","End",r.id),G.resolve([]);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"GetTextSlices","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});try{const e=new Array(n.length),u=new Map;n.forEach(((m,d)=>{(u.get(m.pageIndex)??u.set(m.pageIndex,[]).get(m.pageIndex)).push({slice:m,pos:d})}));for(const[m,d]of u){const _=o.acquirePage(m),c=_.getTextPage();for(const{slice:b,pos:p}of d){const M=this.memoryManager.malloc(2*(b.charCount+1));this.pdfiumModule.FPDFText_GetText(c,b.charIndex,b.charCount,M),e[p]=fn(this.pdfiumModule.pdfium.UTF16ToString(M)),this.memoryManager.free(M)}_.release()}return this.logger.perf(g,h,"GetTextSlices","End",r.id),G.resolve(e)}catch(e){return this.logger.error(g,h,"getTextSlices error",e),this.logger.perf(g,h,"GetTextSlices","End",r.id),G.reject({code:v.Unknown,message:String(e)})}}merge(r){this.logger.debug(g,h,"merge",r);const n=r.map((d=>d.id)).join(".");this.logger.perf(g,h,"Merge","Begin",n);const o=this.pdfiumModule.FPDF_CreateNewDocument();if(!o)return this.logger.perf(g,h,"Merge","End",n),G.reject({code:v.CantCreateNewDoc,message:"can not create new document"});const e=[];for(const d of r.reverse()){const _=new Uint8Array(d.content),c=_.length,b=this.memoryManager.malloc(c);this.pdfiumModule.pdfium.HEAPU8.set(_,b);const p=this.pdfiumModule.FPDF_LoadMemDocument(b,c,"");if(!p){const M=this.pdfiumModule.FPDF_GetLastError();this.logger.error(g,h,`FPDF_LoadMemDocument failed with ${M}`),this.memoryManager.free(b);for(const E of e)this.pdfiumModule.FPDF_CloseDocument(E.docPtr),this.memoryManager.free(E.filePtr);return this.logger.perf(g,h,"Merge","End",n),G.reject({code:M,message:"FPDF_LoadMemDocument failed"})}if(e.push({filePtr:b,docPtr:p}),!this.pdfiumModule.FPDF_ImportPages(o,p,"",0)){this.pdfiumModule.FPDF_CloseDocument(o);for(const M of e)this.pdfiumModule.FPDF_CloseDocument(M.docPtr),this.memoryManager.free(M.filePtr);return this.logger.perf(g,h,"Merge","End",n),G.reject({code:v.CantImportPages,message:"can not import pages to new document"})}}const u=this.saveDocument(o);this.pdfiumModule.FPDF_CloseDocument(o);for(const d of e)this.pdfiumModule.FPDF_CloseDocument(d.docPtr),this.memoryManager.free(d.filePtr);const m={id:`${Math.random()}`,content:u};return this.logger.perf(g,h,"Merge","End",n),G.resolve(m)}mergePages(r){const n=r.map((e=>`${e.docId}:${e.pageIndices.join(",")}`)).join("|");this.logger.debug(g,h,"mergePages",r),this.logger.perf(g,h,"MergePages","Begin",n);const o=this.pdfiumModule.FPDF_CreateNewDocument();if(!o)return this.logger.perf(g,h,"MergePages","End",n),G.reject({code:v.CantCreateNewDoc,message:"Cannot create new document"});try{for(const m of[...r].reverse()){const d=this.cache.getContext(m.docId);if(!d){this.logger.warn(g,h,`Document ${m.docId} is not open, skipping`);continue}const _=this.pdfiumModule.FPDF_GetPageCount(d.docPtr),c=m.pageIndices.filter((p=>p>=0&&p<_));if(c.length===0)continue;const b=c.map((p=>p+1)).join(",");if(!this.pdfiumModule.FPDF_ImportPages(o,d.docPtr,b,0))throw new Error(`Failed to import pages ${b} from document ${m.docId}`)}const e=this.saveDocument(o),u={id:`${Math.random()}`,content:e};return this.logger.perf(g,h,"MergePages","End",n),G.resolve(u)}catch(e){return this.logger.error(g,h,"mergePages failed",e),this.logger.perf(g,h,"MergePages","End",n),G.reject({code:v.CantImportPages,message:e instanceof Error?e.message:"Failed to merge pages"})}finally{o&&this.pdfiumModule.FPDF_CloseDocument(o)}}saveAsCopy(r){this.logger.debug(g,h,"saveAsCopy",r),this.logger.perf(g,h,"SaveAsCopy","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(g,h,"SaveAsCopy","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const o=this.saveDocument(n.docPtr);return this.logger.perf(g,h,"SaveAsCopy","End",r.id),G.resolve(o)}closeDocument(r){this.logger.debug(g,h,"closeDocument",r),this.logger.perf(g,h,"CloseDocument","Begin",r.id);const n=this.cache.getContext(r.id);return n?(n.dispose(),this.logger.perf(g,h,"CloseDocument","End",r.id),G.resolve(!0)):(this.logger.perf(g,h,"CloseDocument","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"}))}closeAllDocuments(){return this.logger.debug(g,h,"closeAllDocuments"),this.logger.perf(g,h,"CloseAllDocuments","Begin"),this.cache.closeAllDocuments(),this.logger.perf(g,h,"CloseAllDocuments","End"),G.resolve(!0)}addTextContent(r,n,o,e){return!!this.setAnnotString(o,"Contents",e.contents??"")&&!!this.setAnnotString(o,"T",e.author||"")&&!(e.modified&&!this.setAnnotationDate(o,"M",e.modified))&&!(e.created&&!this.setAnnotationDate(o,"CreationDate",e.created))&&!(e.inReplyToId&&!this.setInReplyToId(n,o,e.inReplyToId))&&!!this.setAnnotationIcon(o,e.icon||pn.Comment)&&!!this.setAnnotationFlags(o,e.flags||["print","noZoom","noRotate"])&&!(e.state&&!this.setAnnotString(o,"State",e.state))&&!(e.stateModel&&!this.setAnnotString(o,"StateModel",e.stateModel))}addFreeTextContent(r,n,o,e){if(e.created&&!this.setAnnotationDate(o,"CreationDate",e.created)||e.flags&&!this.setAnnotationFlags(o,e.flags)||e.modified&&!this.setAnnotationDate(o,"M",e.modified)||!this.setBorderStyle(o,Se.SOLID,0)||!this.setAnnotString(o,"Contents",e.contents??"")||!this.setAnnotString(o,"T",e.author||"")||!this.setAnnotationOpacity(o,e.opacity??1)||!this.setAnnotationTextAlignment(o,e.textAlign)||!this.setAnnotationVerticalAlignment(o,e.verticalAlign)||!this.setAnnotationDefaultAppearance(o,e.fontFamily,e.fontSize,e.fontColor)||e.intent&&!this.setAnnotIntent(o,e.intent))return!1;if(e.backgroundColor&&e.backgroundColor!=="transparent"){if(!this.setAnnotationColor(o,e.backgroundColor??"#FFFFFF",oe.Color))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(o,oe.Color))return!1;return!0}addInkStroke(r,n,o,e){return!(e.created&&!this.setAnnotationDate(o,"CreationDate",e.created))&&!(e.flags&&!this.setAnnotationFlags(o,e.flags))&&!(e.modified&&!this.setAnnotationDate(o,"M",e.modified))&&!!this.setAnnotString(o,"Contents",e.contents??"")&&!!this.setBorderStyle(o,Se.SOLID,e.strokeWidth)&&!!this.setInkList(r,o,e.inkList)&&!!this.setAnnotString(o,"T",e.author||"")&&!!this.setAnnotationOpacity(o,e.opacity??1)&&!!this.setAnnotationColor(o,e.color??"#FFFF00",oe.Color)}addLineContent(r,n,o,e){var u,m;if(e.created&&!this.setAnnotationDate(o,"CreationDate",e.created)||e.flags&&!this.setAnnotationFlags(o,e.flags)||e.modified&&!this.setAnnotationDate(o,"M",e.modified)||!this.setLinePoints(r,o,e.linePoints.start,e.linePoints.end)||!this.setLineEndings(o,((u=e.lineEndings)==null?void 0:u.start)??He.None,((m=e.lineEndings)==null?void 0:m.end)??He.None)||!this.setAnnotString(o,"Contents",e.contents??"")||!this.setAnnotString(o,"T",e.author||"")||!this.setBorderStyle(o,e.strokeStyle,e.strokeWidth)||!this.setBorderDashPattern(o,e.strokeDashArray??[])||e.intent&&!this.setAnnotIntent(o,e.intent))return!1;if(e.color&&e.color!=="transparent"){if(!this.setAnnotationColor(o,e.color??"#FFFF00",oe.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(o,oe.InteriorColor))return!1;return!!this.setAnnotationOpacity(o,e.opacity??1)&&!!this.setAnnotationColor(o,e.strokeColor??"#FFFF00",oe.Color)}addPolyContent(r,n,o,e){var u,m;if(e.created&&!this.setAnnotationDate(o,"CreationDate",e.created)||e.modified&&!this.setAnnotationDate(o,"M",e.modified)||e.flags&&!this.setAnnotationFlags(o,e.flags)||e.type===L.POLYLINE&&!this.setLineEndings(o,((u=e.lineEndings)==null?void 0:u.start)??He.None,((m=e.lineEndings)==null?void 0:m.end)??He.None)||!this.setPdfAnnoVertices(r,o,e.vertices)||!this.setAnnotString(o,"Contents",e.contents??"")||!this.setAnnotString(o,"T",e.author||"")||!this.setBorderStyle(o,e.strokeStyle,e.strokeWidth)||!this.setBorderDashPattern(o,e.strokeDashArray??[])||e.intent&&!this.setAnnotIntent(o,e.intent))return!1;if(e.color&&e.color!=="transparent"){if(!this.setAnnotationColor(o,e.color??"#FFFF00",oe.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(o,oe.InteriorColor))return!1;return!!this.setAnnotationOpacity(o,e.opacity??1)&&!!this.setAnnotationColor(o,e.strokeColor??"#FFFF00",oe.Color)}addShapeContent(r,n,o,e){if(e.created&&!this.setAnnotationDate(o,"CreationDate",e.created)||e.modified&&!this.setAnnotationDate(o,"M",e.modified)||!this.setAnnotString(o,"Contents",e.contents??"")||!this.setAnnotString(o,"T",e.author||"")||!this.setBorderStyle(o,e.strokeStyle,e.strokeWidth)||!this.setBorderDashPattern(o,e.strokeDashArray??[])||!this.setAnnotationFlags(o,e.flags))return!1;if(e.color&&e.color!=="transparent"){if(!this.setAnnotationColor(o,e.color??"#FFFF00",oe.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(o,oe.InteriorColor))return!1;return!!this.setAnnotationOpacity(o,e.opacity??1)&&!!this.setAnnotationColor(o,e.strokeColor??"#FFFF00",oe.Color)}addTextMarkupContent(r,n,o,e){return!(e.created&&!this.setAnnotationDate(o,"CreationDate",e.created))&&!(e.custom&&!this.setAnnotCustom(o,e.custom))&&!(e.flags&&!this.setAnnotationFlags(o,e.flags))&&!(e.modified&&!this.setAnnotationDate(o,"M",e.modified))&&!!this.syncQuadPointsAnno(r,o,e.segmentRects)&&!!this.setAnnotString(o,"Contents",e.contents??"")&&!!this.setAnnotString(o,"T",e.author||"")&&!!this.setAnnotationOpacity(o,e.opacity??1)&&!!this.setAnnotationColor(o,e.color??"#FFFF00",oe.Color)}addStampContent(r,n,o,e,u,m){if(u.created&&!this.setAnnotationDate(e,"CreationDate",u.created)||u.flags&&!this.setAnnotationFlags(e,u.flags)||u.modified&&!this.setAnnotationDate(e,"M",u.modified)||u.icon&&!this.setAnnotationIcon(e,u.icon)||u.subject&&!this.setAnnotString(e,"Subj",u.subject)||!this.setAnnotString(e,"Contents",u.contents??""))return!1;if(m){for(let d=this.pdfiumModule.FPDFAnnot_GetObjectCount(e)-1;d>=0;d--)this.pdfiumModule.FPDFAnnot_RemoveObject(e,d);if(!this.addImageObject(r,n,o,e,u.rect,m))return!1}return!!this.pdfiumModule.EPDFAnnot_UpdateAppearanceToRect(e,An.Cover)}addImageObject(r,n,o,e,u,m){const d=m.width*m.height,_=this.memoryManager.malloc(4*d);if(!_)return!1;for(let E=0;E<d;E++){const y=m.data[4*E],C=m.data[4*E+1],x=m.data[4*E+2],R=m.data[4*E+3];this.pdfiumModule.pdfium.setValue(_+4*E,x,"i8"),this.pdfiumModule.pdfium.setValue(_+4*E+1,C,"i8"),this.pdfiumModule.pdfium.setValue(_+4*E+2,y,"i8"),this.pdfiumModule.pdfium.setValue(_+4*E+3,R,"i8")}const c=this.pdfiumModule.FPDFBitmap_CreateEx(m.width,m.height,4,_,0);if(!c)return this.memoryManager.free(_),!1;const b=this.pdfiumModule.FPDFPageObj_NewImageObj(r);if(!b)return this.pdfiumModule.FPDFBitmap_Destroy(c),this.memoryManager.free(_),!1;if(!this.pdfiumModule.FPDFImageObj_SetBitmap(o,0,b,c))return this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(b),this.memoryManager.free(_),!1;const p=this.memoryManager.malloc(24);if(this.pdfiumModule.pdfium.setValue(p,m.width,"float"),this.pdfiumModule.pdfium.setValue(p+4,0,"float"),this.pdfiumModule.pdfium.setValue(p+8,0,"float"),this.pdfiumModule.pdfium.setValue(p+12,m.height,"float"),this.pdfiumModule.pdfium.setValue(p+16,0,"float"),this.pdfiumModule.pdfium.setValue(p+20,0,"float"),!this.pdfiumModule.FPDFPageObj_SetMatrix(b,p))return this.memoryManager.free(p),this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(b),this.memoryManager.free(_),!1;this.memoryManager.free(p);const M=this.convertDevicePointToPagePoint(n,{x:u.origin.x,y:u.origin.y+m.height});return this.pdfiumModule.FPDFPageObj_Transform(b,1,0,0,1,M.x,M.y),this.pdfiumModule.FPDFAnnot_AppendObject(e,b)?(this.pdfiumModule.FPDFBitmap_Destroy(c),this.memoryManager.free(_),!0):(this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(b),this.memoryManager.free(_),!1)}saveDocument(r){const n=this.pdfiumModule.PDFiumExt_OpenFileWriter();this.pdfiumModule.PDFiumExt_SaveAsCopy(r,n);const o=this.pdfiumModule.PDFiumExt_GetFileWriterSize(n),e=this.memoryManager.malloc(o);this.pdfiumModule.PDFiumExt_GetFileWriterData(n,e,o);const u=new ArrayBuffer(o),m=new DataView(u);for(let d=0;d<o;d++)m.setInt8(d,this.pdfiumModule.pdfium.getValue(e+d,"i8"));return this.memoryManager.free(e),this.pdfiumModule.PDFiumExt_CloseFileWriter(n),u}readCatalogLanguage(r){const n=this.pdfiumModule.EPDFCatalog_GetLanguage(r,0,0)>>>0;return n===0?null:n===2?"":ue(this.pdfiumModule.pdfium,((o,e)=>this.pdfiumModule.EPDFCatalog_GetLanguage(r,o,e)),this.pdfiumModule.pdfium.UTF16ToString,n)}readMetaText(r,n){if(!this.pdfiumModule.EPDF_HasMetaText(r,n))return null;const o=this.pdfiumModule.FPDF_GetMetaText(r,n,0,0);return o===2?"":ue(this.pdfiumModule.pdfium,((e,u)=>this.pdfiumModule.FPDF_GetMetaText(r,n,e,u)),this.pdfiumModule.pdfium.UTF16ToString,o)}setMetaText(r,n,o){if(o==null||o.length===0)return!!this.pdfiumModule.EPDF_SetMetaText(r,n,0);const e=2*(o.length+1),u=this.memoryManager.malloc(e);try{return this.pdfiumModule.pdfium.stringToUTF16(o,u,e),!!this.pdfiumModule.EPDF_SetMetaText(r,n,u)}finally{this.memoryManager.free(u)}}getMetaTrapped(r){const n=Number(this.pdfiumModule.EPDF_GetMetaTrapped(r));switch(n){case be.NotSet:case be.True:case be.False:case be.Unknown:return n;default:return be.Unknown}}setMetaTrapped(r,n){const o=n==null||n===void 0?be.NotSet:n;return!(o!==be.NotSet&&o!==be.True&&o!==be.False&&o!==be.Unknown)&&!!this.pdfiumModule.EPDF_SetMetaTrapped(r,o)}getMetaKeyCount(r,n){return 0|Number(this.pdfiumModule.EPDF_GetMetaKeyCount(r,n))}getMetaKeyName(r,n,o){const e=this.pdfiumModule.EPDF_GetMetaKeyName(r,n,o,0,0);return e?ue(this.pdfiumModule.pdfium,((u,m)=>this.pdfiumModule.EPDF_GetMetaKeyName(r,n,o,u,m)),this.pdfiumModule.pdfium.UTF8ToString,e):null}readAllMeta(r,n=!0){const o=this.getMetaKeyCount(r,n),e={};for(let u=0;u<o;u++){const m=this.getMetaKeyName(r,u,n);m&&(e[m]=this.readMetaText(r,m))}return e}readPdfBookmarks(r,n=0){let o=this.pdfiumModule.FPDFBookmark_GetFirstChild(r,n);const e=[];for(;o;){const u=this.readPdfBookmark(r,o);e.push(u),o=this.pdfiumModule.FPDFBookmark_GetNextSibling(r,o)}return e}readPdfBookmark(r,n){const o=ue(this.pdfiumModule.pdfium,((u,m)=>this.pdfiumModule.FPDFBookmark_GetTitle(n,u,m)),this.pdfiumModule.pdfium.UTF16ToString),e=this.readPdfBookmarks(r,n);return{title:o,target:this.readPdfBookmarkTarget(r,(()=>this.pdfiumModule.FPDFBookmark_GetAction(n)),(()=>this.pdfiumModule.FPDFBookmark_GetDest(r,n))),children:e}}readPageTextRects(r,n,o,e){const u=this.pdfiumModule.FPDFText_CountRects(e,0,-1),m=[];for(let d=0;d<u;d++){const _=this.memoryManager.malloc(8),c=this.memoryManager.malloc(8),b=this.memoryManager.malloc(8),p=this.memoryManager.malloc(8);if(!this.pdfiumModule.FPDFText_GetRect(e,d,c,_,b,p)){this.memoryManager.free(c),this.memoryManager.free(_),this.memoryManager.free(b),this.memoryManager.free(p);continue}const M=this.pdfiumModule.pdfium.getValue(c,"double"),E=this.pdfiumModule.pdfium.getValue(_,"double"),y=this.pdfiumModule.pdfium.getValue(b,"double"),C=this.pdfiumModule.pdfium.getValue(p,"double");this.memoryManager.free(c),this.memoryManager.free(_),this.memoryManager.free(b),this.memoryManager.free(p);const x=this.memoryManager.malloc(4),R=this.memoryManager.malloc(4);this.pdfiumModule.FPDF_PageToDevice(o,0,0,r.size.width,r.size.height,0,M,E,x,R);const N=this.pdfiumModule.pdfium.getValue(x,"i32"),U=this.pdfiumModule.pdfium.getValue(R,"i32");this.memoryManager.free(x),this.memoryManager.free(R);const $={origin:{x:N,y:U},size:{width:Math.ceil(Math.abs(y-M)),height:Math.ceil(Math.abs(E-C))}},X=this.pdfiumModule.FPDFText_GetBoundedText(e,M,E,y,C,0,0),ee=2*(X+1),O=this.memoryManager.malloc(ee);this.pdfiumModule.FPDFText_GetBoundedText(e,M,E,y,C,O,X);const z=this.pdfiumModule.pdfium.UTF16ToString(O);this.memoryManager.free(O);const ie=this.pdfiumModule.FPDFText_GetCharIndexAtPos(e,M,E,2,2);let ae="",ne=$.size.height;if(ie>=0){ne=this.pdfiumModule.FPDFText_GetFontSize(e,ie);const we=this.pdfiumModule.FPDFText_GetFontInfo(e,ie,0,0,0)+1,fe=this.memoryManager.malloc(we),We=this.memoryManager.malloc(4);this.pdfiumModule.FPDFText_GetFontInfo(e,ie,fe,we,We),ae=this.pdfiumModule.pdfium.UTF8ToString(fe),this.memoryManager.free(fe),this.memoryManager.free(We)}const T={content:z,rect:$,font:{family:ae,size:ne}};m.push(T)}return m}getPageGeometry(r,n){const o="getPageGeometry";this.logger.perf(g,h,o,"Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(g,h,o,"End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const u=e.acquirePage(n.index),m=u.getTextPage(),d=this.pdfiumModule.FPDFText_CountChars(m),_=[];for(let b=0;b<d;b++){const p=this.readGlyphInfo(n,u.pagePtr,m,b);_.push(p)}const c=this.buildRunsFromGlyphs(_,m);return u.release(),this.logger.perf(g,h,o,"End",r.id),G.resolve({runs:c})}buildRunsFromGlyphs(r,n){const o=[];let e=null,u=null,m=null;for(let d=0;d<r.length;d++){const _=r[d],c=this.pdfiumModule.FPDFText_GetTextObject(n,d);if(c!==u&&(u=c,e={rect:{x:_.origin.x,y:_.origin.y,width:_.size.width,height:_.size.height},charStart:d,glyphs:[]},m={minX:_.origin.x,minY:_.origin.y,maxX:_.origin.x+_.size.width,maxY:_.origin.y+_.size.height},o.push(e)),e.glyphs.push({x:_.origin.x,y:_.origin.y,width:_.size.width,height:_.size.height,flags:_.isEmpty?2:_.isSpace?1:0}),_.isEmpty)continue;const b=_.origin.x+_.size.width,p=_.origin.y+_.size.height;m.minX=Math.min(m.minX,_.origin.x),m.minY=Math.min(m.minY,_.origin.y),m.maxX=Math.max(m.maxX,b),m.maxY=Math.max(m.maxY,p),e.rect.x=m.minX,e.rect.y=m.minY,e.rect.width=m.maxX-m.minX,e.rect.height=m.maxY-m.minY}return o}readGlyphInfo(r,n,o,e){const u=this.memoryManager.malloc(4),m=this.memoryManager.malloc(4),d=this.memoryManager.malloc(4),_=this.memoryManager.malloc(4),c=this.memoryManager.malloc(16);let b=0,p=0,M=0,E=0,y=!1;if(this.pdfiumModule.FPDFText_GetLooseCharBox(o,e,c)){const C=this.pdfiumModule.pdfium.getValue(c,"float"),x=this.pdfiumModule.pdfium.getValue(c+4,"float"),R=this.pdfiumModule.pdfium.getValue(c+8,"float"),N=this.pdfiumModule.pdfium.getValue(c+12,"float");if(C===R||x===N)return[c,u,m,d,_].forEach((O=>this.memoryManager.free(O))),{origin:{x:0,y:0},size:{width:0,height:0},isEmpty:!0};this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,C,x,u,m),this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,R,N,d,_);const U=this.pdfiumModule.pdfium.getValue(u,"i32"),$=this.pdfiumModule.pdfium.getValue(m,"i32"),X=this.pdfiumModule.pdfium.getValue(d,"i32"),ee=this.pdfiumModule.pdfium.getValue(_,"i32");b=Math.min(U,X),p=Math.min($,ee),M=Math.max(1,Math.abs(X-U)),E=Math.max(1,Math.abs(ee-$)),y=this.pdfiumModule.FPDFText_GetUnicode(o,e)===32}return[c,u,m,d,_].forEach((C=>this.memoryManager.free(C))),{origin:{x:b,y:p},size:{width:M,height:E},...y&&{isSpace:y}}}getPageGlyphs(r,n){this.logger.debug(g,h,"getPageGlyphs",r,n),this.logger.perf(g,h,"getPageGlyphs","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(g,h,"getPageGlyphs","End",r.id),G.reject({code:v.DocNotOpen,message:"document does not open"});const e=o.acquirePage(n.index),u=e.getTextPage(),m=this.pdfiumModule.FPDFText_CountChars(u),d=new Array(m);for(let _=0;_<m;_++){const c=this.readGlyphInfo(n,e.pagePtr,u,_);c.isEmpty||(d[_]={...c})}return e.release(),this.logger.perf(g,h,"getPageGlyphs","End",r.id),G.resolve(d)}readCharBox(r,n,o,e){const u=this.memoryManager.malloc(8),m=this.memoryManager.malloc(8),d=this.memoryManager.malloc(8),_=this.memoryManager.malloc(8);let c=0,b=0,p=0,M=0;if(this.pdfiumModule.FPDFText_GetCharBox(o,e,m,_,d,u)){const E=this.pdfiumModule.pdfium.getValue(u,"double"),y=this.pdfiumModule.pdfium.getValue(m,"double"),C=this.pdfiumModule.pdfium.getValue(d,"double"),x=this.pdfiumModule.pdfium.getValue(_,"double"),R=this.memoryManager.malloc(4),N=this.memoryManager.malloc(4);this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,y,E,R,N),c=this.pdfiumModule.pdfium.getValue(R,"i32"),b=this.pdfiumModule.pdfium.getValue(N,"i32"),this.memoryManager.free(R),this.memoryManager.free(N),p=Math.ceil(Math.abs(x-y)),M=Math.ceil(Math.abs(E-C))}return this.memoryManager.free(u),this.memoryManager.free(m),this.memoryManager.free(d),this.memoryManager.free(_),{origin:{x:c,y:b},size:{width:p,height:M}}}readPageAnnotations(r,n){return r.borrowPage(n.index,(o=>{const e=this.pdfiumModule.FPDFPage_GetAnnotCount(o.pagePtr),u=[];for(let m=0;m<e;m++)o.withAnnotation(m,(d=>{const _=this.readPageAnnotation(r.docPtr,n,d,o);_&&u.push(_)}));return u}))}readPageAnnotationsRaw(r,n){const o=this.pdfiumModule.EPDFPage_GetAnnotCountRaw(r.docPtr,n.index);if(o<=0)return[];const e=[];for(let u=0;u<o;++u){const m=this.pdfiumModule.EPDFPage_GetAnnotRaw(r.docPtr,n.index,u);if(m)try{const d=this.readPageAnnotation(r.docPtr,n,m);d&&e.push(d)}finally{this.pdfiumModule.FPDFPage_CloseAnnot(m)}}return e}readPageAnnotation(r,n,o,e){let u=this.getAnnotString(o,"NM");u&&Yt(u)||(u=Jt(),this.setAnnotString(o,"NM",u));const m=this.pdfiumModule.FPDFAnnot_GetSubtype(o);let d;switch(m){case L.TEXT:d=this.readPdfTextAnno(n,o,u);break;case L.FREETEXT:d=this.readPdfFreeTextAnno(n,o,u);break;case L.LINK:d=this.readPdfLinkAnno(n,r,o,u);break;case L.WIDGET:if(e)return this.readPdfWidgetAnno(n,o,e.getFormHandle(),u);case L.FILEATTACHMENT:d=this.readPdfFileAttachmentAnno(n,o,u);break;case L.INK:d=this.readPdfInkAnno(n,o,u);break;case L.POLYGON:d=this.readPdfPolygonAnno(n,o,u);break;case L.POLYLINE:d=this.readPdfPolylineAnno(n,o,u);break;case L.LINE:d=this.readPdfLineAnno(n,o,u);break;case L.HIGHLIGHT:d=this.readPdfHighlightAnno(n,o,u);break;case L.STAMP:d=this.readPdfStampAnno(n,o,u);break;case L.SQUARE:d=this.readPdfSquareAnno(n,o,u);break;case L.CIRCLE:d=this.readPdfCircleAnno(n,o,u);break;case L.UNDERLINE:d=this.readPdfUnderlineAnno(n,o,u);break;case L.SQUIGGLY:d=this.readPdfSquigglyAnno(n,o,u);break;case L.STRIKEOUT:d=this.readPdfStrikeOutAnno(n,o,u);break;case L.CARET:d=this.readPdfCaretAnno(n,o,u);break;default:d=this.readPdfAnno(n,m,o,u)}return d}readAnnotationColor(r,n=oe.Color){const o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),u=this.memoryManager.malloc(4);let m;return this.pdfiumModule.EPDFAnnot_GetColor(r,n,o,e,u)&&(m={red:255&this.pdfiumModule.pdfium.getValue(o,"i32"),green:255&this.pdfiumModule.pdfium.getValue(e,"i32"),blue:255&this.pdfiumModule.pdfium.getValue(u,"i32")}),this.memoryManager.free(o),this.memoryManager.free(e),this.memoryManager.free(u),m}getAnnotationColor(r,n=oe.Color){const o=this.readAnnotationColor(r,n);return o?qt(o):void 0}setAnnotationColor(r,n,o=oe.Color){const e=Qt(n);return this.pdfiumModule.EPDFAnnot_SetColor(r,o,255&e.red,255&e.green,255&e.blue)}getAnnotationOpacity(r){const n=this.memoryManager.malloc(4),o=this.pdfiumModule.EPDFAnnot_GetOpacity(r,n)?this.pdfiumModule.pdfium.getValue(n,"i32"):255;return this.memoryManager.free(n),En(o)}setAnnotationOpacity(r,n){const o=Tn(n);return this.pdfiumModule.EPDFAnnot_SetOpacity(r,255&o)}getAnnotationTextAlignment(r){return this.pdfiumModule.EPDFAnnot_GetTextAlignment(r)}setAnnotationTextAlignment(r,n){return!!this.pdfiumModule.EPDFAnnot_SetTextAlignment(r,n)}getAnnotationVerticalAlignment(r){return this.pdfiumModule.EPDFAnnot_GetVerticalAlignment(r)}setAnnotationVerticalAlignment(r,n){return!!this.pdfiumModule.EPDFAnnot_SetVerticalAlignment(r,n)}getAnnotationDefaultAppearance(r){const n=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),u=this.memoryManager.malloc(4),m=this.memoryManager.malloc(4);if(!this.pdfiumModule.EPDFAnnot_GetDefaultAppearance(r,n,o,e,u,m))return void[n,o,e,u,m].forEach((E=>this.memoryManager.free(E)));const d=this.pdfiumModule.pdfium,_=d.getValue(n,"i32"),c=d.getValue(o,"float"),b=255&d.getValue(e,"i32"),p=255&d.getValue(u,"i32"),M=255&d.getValue(m,"i32");return[n,o,e,u,m].forEach((E=>this.memoryManager.free(E))),{fontFamily:_,fontSize:c,fontColor:qt({red:b,green:p,blue:M})}}setAnnotationDefaultAppearance(r,n,o,e){const{red:u,green:m,blue:d}=Qt(e);return!!this.pdfiumModule.EPDFAnnot_SetDefaultAppearance(r,n,o,255&u,255&m,255&d)}getBorderStyle(r){const n=this.memoryManager.malloc(4);let o=0,e=Se.UNKNOWN,u=!1;return e=this.pdfiumModule.EPDFAnnot_GetBorderStyle(r,n),o=this.pdfiumModule.pdfium.getValue(n,"float"),u=e!==Se.UNKNOWN,this.memoryManager.free(n),{ok:u,style:e,width:o}}setBorderStyle(r,n,o){return this.pdfiumModule.EPDFAnnot_SetBorderStyle(r,n,o)}getAnnotationIcon(r){return this.pdfiumModule.EPDFAnnot_GetIcon(r)}setAnnotationIcon(r,n){return this.pdfiumModule.EPDFAnnot_SetIcon(r,n)}getBorderEffect(r){const n=this.memoryManager.malloc(4),o=!!this.pdfiumModule.EPDFAnnot_GetBorderEffect(r,n),e=o?this.pdfiumModule.pdfium.getValue(n,"float"):0;return this.memoryManager.free(n),{ok:o,intensity:e}}getRectangleDifferences(r){const n=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),u=this.memoryManager.malloc(4),m=!!this.pdfiumModule.EPDFAnnot_GetRectangleDifferences(r,n,o,e,u),d=this.pdfiumModule.pdfium,_=d.getValue(n,"float"),c=d.getValue(o,"float"),b=d.getValue(e,"float"),p=d.getValue(u,"float");return this.memoryManager.free(n),this.memoryManager.free(o),this.memoryManager.free(e),this.memoryManager.free(u),{ok:m,left:_,top:c,right:b,bottom:p}}getAnnotationDate(r,n){const o=this.getAnnotString(r,n);return o?ut(o):void 0}setAnnotationDate(r,n,o){const e=bt(o);return this.setAnnotString(r,n,e)}getAttachmentDate(r,n){const o=this.getAttachmentString(r,n);return o?ut(o):void 0}setAttachmentDate(r,n,o){const e=bt(o);return this.setAttachmentString(r,n,e)}getBorderDashPattern(r){const n=this.pdfiumModule.EPDFAnnot_GetBorderDashPatternCount(r);if(n===0)return{ok:!1,pattern:[]};const o=this.memoryManager.malloc(4*n),e=!!this.pdfiumModule.EPDFAnnot_GetBorderDashPattern(r,o,n),u=[];if(e){const m=this.pdfiumModule.pdfium;for(let d=0;d<n;d++)u.push(m.getValue(o+4*d,"float"))}return this.memoryManager.free(o),{ok:e,pattern:u}}setBorderDashPattern(r,n){if(!n||n.length===0)return this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,0,0);const o=n.map((d=>Number.isFinite(d)&&d>0?d:0)).filter((d=>d>0));if(o.length===0)return this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,0,0);const e=4*o.length,u=this.memoryManager.malloc(e);for(let d=0;d<o.length;d++)this.pdfiumModule.pdfium.setValue(u+4*d,o[d],"float");const m=!!this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,u,o.length);return this.memoryManager.free(u),m}getLineEndings(r){const n=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4);if(!this.pdfiumModule.EPDFAnnot_GetLineEndings(r,n,o))return this.memoryManager.free(n),void this.memoryManager.free(o);const e=this.pdfiumModule.pdfium.getValue(n,"i32"),u=this.pdfiumModule.pdfium.getValue(o,"i32");return this.memoryManager.free(n),this.memoryManager.free(o),{start:e,end:u}}setLineEndings(r,n,o){return!!this.pdfiumModule.EPDFAnnot_SetLineEndings(r,n,o)}getLinePoints(r,n){const o=this.memoryManager.malloc(8),e=this.memoryManager.malloc(8);if(!this.pdfiumModule.FPDFAnnot_GetLine(n,o,e))return this.memoryManager.free(o),void this.memoryManager.free(e);const u=this.pdfiumModule.pdfium,m=u.getValue(o+0,"float"),d=u.getValue(o+4,"float"),_=u.getValue(e+0,"float"),c=u.getValue(e+4,"float");return this.memoryManager.free(o),this.memoryManager.free(e),{start:this.convertPagePointToDevicePoint(r,{x:m,y:d}),end:this.convertPagePointToDevicePoint(r,{x:_,y:c})}}setLinePoints(r,n,o,e){const u=this.convertDevicePointToPagePoint(r,o),m=this.convertDevicePointToPagePoint(r,e);if(!u||!m)return!1;const d=this.memoryManager.malloc(16),_=this.pdfiumModule.pdfium;_.setValue(d+0,u.x,"float"),_.setValue(d+4,u.y,"float"),_.setValue(d+8,m.x,"float"),_.setValue(d+12,m.y,"float");const c=this.pdfiumModule.EPDFAnnot_SetLine(n,d,d+8);return this.memoryManager.free(d),!!c}getQuadPointsAnno(r,n){const o=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(n);if(o===0)return[];const e=[];for(let u=0;u<o;u++){const m=this.memoryManager.malloc(32);if(this.pdfiumModule.FPDFAnnot_GetAttachmentPoints(n,u,m)){const d=[],_=[];for(let E=0;E<4;E++){const y=m+8*E;d.push(this.pdfiumModule.pdfium.getValue(y,"float")),_.push(this.pdfiumModule.pdfium.getValue(y+4,"float"))}const c=this.convertPagePointToDevicePoint(r,{x:d[0],y:_[0]}),b=this.convertPagePointToDevicePoint(r,{x:d[1],y:_[1]}),p=this.convertPagePointToDevicePoint(r,{x:d[2],y:_[2]}),M=this.convertPagePointToDevicePoint(r,{x:d[3],y:_[3]});e.push({p1:c,p2:b,p3:p,p4:M})}this.memoryManager.free(m)}return e.map(Mn)}syncQuadPointsAnno(r,n,o){const e=this.pdfiumModule.pdfium,u=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(n),m=this.memoryManager.malloc(32),d=c=>{const b=Zt(c),p=this.convertDevicePointToPagePoint(r,b.p1),M=this.convertDevicePointToPagePoint(r,b.p2),E=this.convertDevicePointToPagePoint(r,b.p3),y=this.convertDevicePointToPagePoint(r,b.p4);e.setValue(m+0,p.x,"float"),e.setValue(m+4,p.y,"float"),e.setValue(m+8,M.x,"float"),e.setValue(m+12,M.y,"float"),e.setValue(m+16,y.x,"float"),e.setValue(m+20,y.y,"float"),e.setValue(m+24,E.x,"float"),e.setValue(m+28,E.y,"float")},_=Math.min(u,o.length);for(let c=0;c<_;c++)if(d(o[c]),!this.pdfiumModule.FPDFAnnot_SetAttachmentPoints(n,c,m))return this.memoryManager.free(m),!1;for(let c=u;c<o.length;c++)if(d(o[c]),!this.pdfiumModule.FPDFAnnot_AppendAttachmentPoints(n,m))return this.memoryManager.free(m),!1;return this.memoryManager.free(m),!0}redactTextInRects(r,n,o,e){const{recurseForms:u=!0,drawBlackBoxes:m=!1}=e??{};this.logger.debug("PDFiumEngine","Engine","redactTextInQuads",r.id,n.index,o.length);const d="RedactTextInQuads";this.logger.perf("PDFiumEngine","Engine",d,"Begin",`${r.id}-${n.index}`);const _=this.cache.getContext(r.id);if(!_)return this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const c=(o??[]).filter((y=>{var C,x,R,N;return y&&Number.isFinite((C=y.origin)==null?void 0:C.x)&&Number.isFinite((x=y.origin)==null?void 0:x.y)&&Number.isFinite((R=y.size)==null?void 0:R.width)&&Number.isFinite((N=y.size)==null?void 0:N.height)&&y.size.width>0&&y.size.height>0}));if(c.length===0)return this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),G.resolve(!1);const b=_.acquirePage(n.index),{ptr:p,count:M}=this.allocFSQuadsBufferFromRects(n,c);let E=!1;try{E=!!this.pdfiumModule.EPDFText_RedactInQuads(b.pagePtr,p,M,!!u,!!m)}finally{this.memoryManager.free(p)}return E&&(E=!!this.pdfiumModule.FPDFPage_GenerateContent(b.pagePtr)),b.disposeImmediate(),this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),G.resolve(!!E)}allocFSQuadsBufferFromRects(r,n){const o=n.length,e=this.memoryManager.malloc(32*o),u=this.pdfiumModule.pdfium;for(let m=0;m<o;m++){const d=n[m],_=Zt(d),c=this.convertDevicePointToPagePoint(r,_.p1),b=this.convertDevicePointToPagePoint(r,_.p2),p=this.convertDevicePointToPagePoint(r,_.p3),M=this.convertDevicePointToPagePoint(r,_.p4),E=e+32*m;u.setValue(E+0,c.x,"float"),u.setValue(E+4,c.y,"float"),u.setValue(E+8,b.x,"float"),u.setValue(E+12,b.y,"float"),u.setValue(E+16,M.x,"float"),u.setValue(E+20,M.y,"float"),u.setValue(E+24,p.x,"float"),u.setValue(E+28,p.y,"float")}return{ptr:e,count:o}}getInkList(r,n){const o=[],e=this.pdfiumModule.FPDFAnnot_GetInkListCount(n);if(e<=0)return o;const u=this.pdfiumModule.pdfium;for(let m=0;m<e;m++){const d=[],_=this.pdfiumModule.FPDFAnnot_GetInkListPath(n,m,0,0);if(_>0){const c=this.memoryManager.malloc(8*_);this.pdfiumModule.FPDFAnnot_GetInkListPath(n,m,c,_);for(let b=0;b<_;b++){const p=c+8*b,M=u.getValue(p+0,"float"),E=u.getValue(p+4,"float"),y=this.convertPagePointToDevicePoint(r,{x:M,y:E});d.push({x:y.x,y:y.y})}this.memoryManager.free(c)}o.push({points:d})}return o}setInkList(r,n,o){const e=this.pdfiumModule.pdfium;for(const u of o){const m=u.points.length;if(m===0)continue;const d=this.memoryManager.malloc(8*m);for(let c=0;c<m;c++){const b=u.points[c],p=this.convertDevicePointToPagePoint(r,b);e.setValue(d+8*c+0,p.x,"float"),e.setValue(d+8*c+4,p.y,"float")}const _=this.pdfiumModule.FPDFAnnot_AddInkStroke(n,d,m);if(this.memoryManager.free(d),_===-1)return!1}return!0}readPdfTextAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotString(n,"Contents")||"",p=this.getAnnotString(n,"State"),M=this.getAnnotString(n,"StateModel"),E=this.getAnnotationColor(n),y=this.getAnnotationOpacity(n),C=this.getInReplyToId(n),x=this.getAnnotationFlags(n),R=this.getAnnotationIcon(n);return{pageIndex:r.index,custom:e,id:o,type:L.TEXT,flags:x,contents:b,color:E??"#FFFF00",opacity:y,rect:m,inReplyToId:C,author:d,modified:_,created:c,state:p,stateModel:M,icon:R}}readPdfFreeTextAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"Contents")||"",_=this.getAnnotString(n,"T"),c=this.getAnnotationDate(n,"M"),b=this.getAnnotationDate(n,"CreationDate"),p=this.getAnnotString(n,"DS"),M=this.getAnnotationDefaultAppearance(n),E=this.getAnnotationColor(n),y=this.getAnnotationTextAlignment(n),C=this.getAnnotationVerticalAlignment(n),x=this.getAnnotationOpacity(n),R=this.getAnnotRichContent(n),N=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:e,id:o,type:L.FREETEXT,fontFamily:M?.fontFamily??yn.Unknown,fontSize:M?.fontSize??12,fontColor:M?.fontColor??"#000000",verticalAlign:C,backgroundColor:E,flags:N,opacity:x,textAlign:y,defaultStyle:p,richContent:R,contents:d,author:_,modified:c,created:b,rect:m}}readPdfLinkAnno(r,n,o,e){const u=this.getAnnotCustom(o),m=this.pdfiumModule.FPDFAnnot_GetLink(o);if(!m)return;const d=this.readPageAnnoRect(o),_=this.convertPageRectToDeviceRect(r,d),c=this.getAnnotString(o,"T"),b=this.getAnnotationDate(o,"M"),p=this.getAnnotationDate(o,"CreationDate"),M=this.getAnnotationFlags(o),E=this.readPdfLinkAnnoTarget(n,(()=>this.pdfiumModule.FPDFLink_GetAction(m)),(()=>this.pdfiumModule.FPDFLink_GetDest(n,m)));return{pageIndex:r.index,custom:u,id:e,type:L.LINK,flags:M,target:E,rect:_,author:c,modified:b,created:p}}readPdfWidgetAnno(r,n,o,e){const u=this.getAnnotCustom(n),m=this.readPageAnnoRect(n),d=this.convertPageRectToDeviceRect(r,m),_=this.getAnnotString(n,"T"),c=this.getAnnotationDate(n,"M"),b=this.getAnnotationDate(n,"CreationDate"),p=this.getAnnotationFlags(n),M=this.readPdfWidgetAnnoField(o,n);return{pageIndex:r.index,custom:u,id:e,type:L.WIDGET,flags:p,rect:d,field:M,author:_,modified:c,created:b}}readPdfFileAttachmentAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:e,id:o,type:L.FILEATTACHMENT,flags:b,rect:m,author:d,modified:_,created:c}}readPdfInkAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotationColor(n),p=this.getAnnotationOpacity(n),{width:M}=this.getBorderStyle(n),E=this.getInkList(r,n),y=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),C=this.getAnnotIntent(n),x=this.getAnnotationFlags(n),R=this.getAnnotString(n,"Contents")||"";return{pageIndex:r.index,custom:e,id:o,type:L.INK,...C&&{intent:C},contents:R,blendMode:y,flags:x,color:b??"#FF0000",opacity:p,strokeWidth:M===0?1:M,rect:m,inkList:E,author:d,modified:_,created:c}}readPdfPolygonAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.readPdfAnnoVertices(r,n),p=this.getAnnotString(n,"Contents")||"",M=this.getAnnotationFlags(n),E=this.getAnnotationColor(n),y=this.getAnnotationColor(n,oe.InteriorColor),C=this.getAnnotationOpacity(n);let x,{style:R,width:N}=this.getBorderStyle(n);if(R===Se.DASHED){const{ok:U,pattern:$}=this.getBorderDashPattern(n);U&&(x=$)}if(b.length>1){const U=b[0],$=b[b.length-1];U.x===$.x&&U.y===$.y&&b.pop()}return{pageIndex:r.index,custom:e,id:o,type:L.POLYGON,contents:p,flags:M,strokeColor:E??"#FF0000",color:y??"transparent",opacity:C,strokeWidth:N===0?1:N,strokeStyle:R,strokeDashArray:x,rect:m,vertices:b,author:d,modified:_,created:c}}readPdfPolylineAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.readPdfAnnoVertices(r,n),p=this.getAnnotString(n,"Contents")||"",M=this.getAnnotationColor(n),E=this.getAnnotationFlags(n),y=this.getAnnotationColor(n,oe.InteriorColor),C=this.getAnnotationOpacity(n);let x,{style:R,width:N}=this.getBorderStyle(n);if(R===Se.DASHED){const{ok:$,pattern:X}=this.getBorderDashPattern(n);$&&(x=X)}const U=this.getLineEndings(n);return{pageIndex:r.index,custom:e,id:o,type:L.POLYLINE,contents:p,flags:E,strokeColor:M??"#FF0000",color:y??"transparent",opacity:C,strokeWidth:N===0?1:N,strokeStyle:R,strokeDashArray:x,lineEndings:U,rect:m,vertices:b,author:d,modified:_,created:c}}readPdfLineAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getLinePoints(r,n),p=this.getLineEndings(n),M=this.getAnnotString(n,"Contents")||"",E=this.getAnnotationColor(n),y=this.getAnnotationFlags(n),C=this.getAnnotationColor(n,oe.InteriorColor),x=this.getAnnotationOpacity(n);let R,{style:N,width:U}=this.getBorderStyle(n);if(N===Se.DASHED){const{ok:$,pattern:X}=this.getBorderDashPattern(n);$&&(R=X)}return{pageIndex:r.index,custom:e,id:o,type:L.LINE,flags:y,rect:m,contents:M,strokeWidth:U===0?1:U,strokeStyle:N,strokeDashArray:R,strokeColor:E??"#FF0000",color:C??"transparent",opacity:x,linePoints:b||{start:{x:0,y:0},end:{x:0,y:0}},lineEndings:p||{start:He.None,end:He.None},author:d,modified:_,created:c}}readPdfHighlightAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getQuadPointsAnno(r,n),_=this.getAnnotationColor(n),c=this.getAnnotationOpacity(n),b=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),p=this.getAnnotString(n,"T"),M=this.getAnnotationDate(n,"M"),E=this.getAnnotationDate(n,"CreationDate"),y=this.getAnnotString(n,"Contents")||"",C=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:e,id:o,blendMode:b,type:L.HIGHLIGHT,rect:m,flags:C,contents:y,segmentRects:d,color:_??"#FFFF00",opacity:c,author:p,modified:M,created:E}}readPdfUnderlineAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getQuadPointsAnno(r,n),p=this.getAnnotString(n,"Contents")||"",M=this.getAnnotationColor(n),E=this.getAnnotationOpacity(n),y=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),C=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:e,id:o,blendMode:y,type:L.UNDERLINE,rect:m,flags:C,contents:p,segmentRects:b,color:M??"#FF0000",opacity:E,author:d,modified:_,created:c}}readPdfStrikeOutAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getQuadPointsAnno(r,n),p=this.getAnnotString(n,"Contents")||"",M=this.getAnnotationColor(n),E=this.getAnnotationOpacity(n),y=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),C=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:e,id:o,blendMode:y,type:L.STRIKEOUT,flags:C,rect:m,contents:p,segmentRects:b,color:M??"#FF0000",opacity:E,author:d,modified:_,created:c}}readPdfSquigglyAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getQuadPointsAnno(r,n),p=this.getAnnotString(n,"Contents")||"",M=this.getAnnotationColor(n),E=this.getAnnotationOpacity(n),y=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),C=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:e,id:o,blendMode:y,type:L.SQUIGGLY,rect:m,flags:C,contents:p,segmentRects:b,color:M??"#FF0000",opacity:E,author:d,modified:_,created:c}}readPdfCaretAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:e,id:o,type:L.CARET,rect:m,flags:b,author:d,modified:_,created:c}}readPdfStampAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),c=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotationFlags(n),p=this.getAnnotString(n,"Contents")||"";return{pageIndex:r.index,custom:e,id:o,type:L.STAMP,contents:p,rect:m,author:d,modified:_,created:c,flags:b}}readPdfPageObject(r){switch(this.pdfiumModule.FPDFPageObj_GetType(r)){case Ke.PATH:return this.readPathObject(r);case Ke.IMAGE:return this.readImageObject(r);case Ke.FORM:return this.readFormObject(r)}}readPathObject(r){const n=this.pdfiumModule.FPDFPath_CountSegments(r),o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),u=this.memoryManager.malloc(4),m=this.memoryManager.malloc(4);this.pdfiumModule.FPDFPageObj_GetBounds(r,o,e,u,m);const d={left:this.pdfiumModule.pdfium.getValue(o,"float"),bottom:this.pdfiumModule.pdfium.getValue(e,"float"),right:this.pdfiumModule.pdfium.getValue(u,"float"),top:this.pdfiumModule.pdfium.getValue(m,"float")};this.memoryManager.free(o),this.memoryManager.free(e),this.memoryManager.free(u),this.memoryManager.free(m);const _=[];for(let b=0;b<n;b++){const p=this.readPdfSegment(r,b);_.push(p)}const c=this.readPdfPageObjectTransformMatrix(r);return{type:Ke.PATH,bounds:d,segments:_,matrix:c}}readPdfSegment(r,n){const o=this.pdfiumModule.FPDFPath_GetPathSegment(r,n),e=this.pdfiumModule.FPDFPathSegment_GetType(o),u=this.pdfiumModule.FPDFPathSegment_GetClose(o),m=this.memoryManager.malloc(4),d=this.memoryManager.malloc(4);this.pdfiumModule.FPDFPathSegment_GetPoint(o,m,d);const _=this.pdfiumModule.pdfium.getValue(m,"float"),c=this.pdfiumModule.pdfium.getValue(d,"float");return this.memoryManager.free(m),this.memoryManager.free(d),{type:e,point:{x:_,y:c},isClosed:u}}readImageObject(r){const n=this.pdfiumModule.FPDFImageObj_GetBitmap(r),o=this.pdfiumModule.FPDFBitmap_GetBuffer(n),e=this.pdfiumModule.FPDFBitmap_GetWidth(n),u=this.pdfiumModule.FPDFBitmap_GetHeight(n),m=this.pdfiumModule.FPDFBitmap_GetFormat(n),d=e*u,_=new Uint8ClampedArray(4*d);for(let p=0;p<d;p++)if(m===2){const M=this.pdfiumModule.pdfium.getValue(o+3*p,"i8"),E=this.pdfiumModule.pdfium.getValue(o+3*p+1,"i8"),y=this.pdfiumModule.pdfium.getValue(o+3*p+2,"i8");_[4*p]=y,_[4*p+1]=E,_[4*p+2]=M,_[4*p+3]=100}const c=new ImageData(_,e,u),b=this.readPdfPageObjectTransformMatrix(r);return{type:Ke.IMAGE,imageData:c,matrix:b}}readFormObject(r){const n=this.pdfiumModule.FPDFFormObj_CountObjects(r),o=[];for(let u=0;u<n;u++){const m=this.pdfiumModule.FPDFFormObj_GetObject(r,u),d=this.readPdfPageObject(m);d&&o.push(d)}const e=this.readPdfPageObjectTransformMatrix(r);return{type:Ke.FORM,objects:o,matrix:e}}readPdfPageObjectTransformMatrix(r){const n=this.memoryManager.malloc(24);if(this.pdfiumModule.FPDFPageObj_GetMatrix(r,n)){const o=this.pdfiumModule.pdfium.getValue(n,"float"),e=this.pdfiumModule.pdfium.getValue(n+4,"float"),u=this.pdfiumModule.pdfium.getValue(n+8,"float"),m=this.pdfiumModule.pdfium.getValue(n+12,"float"),d=this.pdfiumModule.pdfium.getValue(n+16,"float"),_=this.pdfiumModule.pdfium.getValue(n+20,"float");return this.memoryManager.free(n),{a:o,b:e,c:u,d:m,e:d,f:_}}return this.memoryManager.free(n),{a:1,b:0,c:0,d:1,e:0,f:0}}readStampAnnotationContents(r){const n=[],o=this.pdfiumModule.FPDFAnnot_GetObjectCount(r);for(let e=0;e<o;e++){const u=this.pdfiumModule.FPDFAnnot_GetObject(r,e),m=this.readPdfPageObject(u);m&&n.push(m)}return n}getStrokeWidth(r){const n=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),u=this.pdfiumModule.FPDFAnnot_GetBorder(r,n,o,e)?this.pdfiumModule.pdfium.getValue(e,"float"):1;return this.memoryManager.free(n),this.memoryManager.free(o),this.memoryManager.free(e),u}getAnnotationFlags(r){const n=this.pdfiumModule.FPDFAnnot_GetFlags(r);return Gn(n)}setAnnotationFlags(r,n){const o=Sn(n);return this.pdfiumModule.FPDFAnnot_SetFlags(r,o)}readPdfCircleAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.getAnnotationFlags(n),m=this.readPageAnnoRect(n),d=this.convertPageRectToDeviceRect(r,m),_=this.getAnnotString(n,"T"),c=this.getAnnotationDate(n,"M"),b=this.getAnnotationDate(n,"CreationDate"),p=this.getAnnotString(n,"Contents")||"",M=this.getAnnotationColor(n,oe.InteriorColor),E=this.getAnnotationColor(n),y=this.getAnnotationOpacity(n);let C,{style:x,width:R}=this.getBorderStyle(n);if(x===Se.DASHED){const{ok:N,pattern:U}=this.getBorderDashPattern(n);N&&(C=U)}return{pageIndex:r.index,custom:e,id:o,type:L.CIRCLE,flags:u,color:M??"transparent",opacity:y,contents:p,strokeWidth:R,strokeColor:E??"#FF0000",strokeStyle:x,rect:d,author:_,modified:c,created:b,...C!==void 0&&{strokeDashArray:C}}}readPdfSquareAnno(r,n,o){const e=this.getAnnotCustom(n),u=this.getAnnotationFlags(n),m=this.readPageAnnoRect(n),d=this.convertPageRectToDeviceRect(r,m),_=this.getAnnotString(n,"T"),c=this.getAnnotationDate(n,"M"),b=this.getAnnotationDate(n,"CreationDate"),p=this.getAnnotString(n,"Contents")||"",M=this.getAnnotationColor(n,oe.InteriorColor),E=this.getAnnotationColor(n),y=this.getAnnotationOpacity(n);let C,{style:x,width:R}=this.getBorderStyle(n);if(x===Se.DASHED){const{ok:N,pattern:U}=this.getBorderDashPattern(n);N&&(C=U)}return{pageIndex:r.index,custom:e,id:o,type:L.SQUARE,flags:u,color:M??"transparent",opacity:y,contents:p,strokeColor:E??"#FF0000",strokeWidth:R,strokeStyle:x,rect:d,author:_,modified:c,created:b,...C!==void 0&&{strokeDashArray:C}}}readPdfAnno(r,n,o,e){const u=this.getAnnotCustom(o),m=this.readPageAnnoRect(o),d=this.convertPageRectToDeviceRect(r,m),_=this.getAnnotString(o,"T"),c=this.getAnnotationDate(o,"M"),b=this.getAnnotationDate(o,"CreationDate"),p=this.getAnnotationFlags(o);return{pageIndex:r.index,custom:u,id:e,flags:p,type:n,rect:d,author:_,modified:c,created:b}}getInReplyToId(r){const n=this.pdfiumModule.FPDFAnnot_GetLinkedAnnot(r,"IRT");if(n)return this.getAnnotString(n,"NM")}setInReplyToId(r,n,o){const e=this.getAnnotationByName(r,o);return!!e&&this.pdfiumModule.EPDFAnnot_SetLinkedAnnot(n,"IRT",e)}getAnnotString(r,n){const o=this.pdfiumModule.FPDFAnnot_GetStringValue(r,n,0,0);if(o===0)return;const e=2*(o+1),u=this.memoryManager.malloc(e);this.pdfiumModule.FPDFAnnot_GetStringValue(r,n,u,e);const m=this.pdfiumModule.pdfium.UTF16ToString(u);return this.memoryManager.free(u),m||void 0}getAttachmentString(r,n){const o=this.pdfiumModule.FPDFAttachment_GetStringValue(r,n,0,0);if(o===0)return;const e=2*(o+1),u=this.memoryManager.malloc(e);this.pdfiumModule.FPDFAttachment_GetStringValue(r,n,u,e);const m=this.pdfiumModule.pdfium.UTF16ToString(u);return this.memoryManager.free(u),m||void 0}getAttachmentNumber(r,n){const o=this.memoryManager.malloc(4);try{return this.pdfiumModule.EPDFAttachment_GetIntegerValue(r,n,o)?this.pdfiumModule.pdfium.getValue(o,"i32")>>>0:void 0}finally{this.memoryManager.free(o)}}getAnnotCustom(r){const n=this.getAnnotString(r,"EPDFCustom");if(n)try{return JSON.parse(n)}catch(o){return console.warn("Failed to parse annotation custom data as JSON:",o),void console.warn("Invalid JSON string:",n)}}setAnnotCustom(r,n){if(n==null)return this.setAnnotString(r,"EPDFCustom","");try{const o=JSON.stringify(n);return this.setAnnotString(r,"EPDFCustom",o)}catch(o){return console.warn("Failed to stringify annotation custom data as JSON:",o),console.warn("Invalid data object:",n),!1}}getAnnotIntent(r){const n=this.pdfiumModule.EPDFAnnot_GetIntent(r,0,0);if(n===0)return;const o=2*(n+1),e=this.memoryManager.malloc(o);this.pdfiumModule.EPDFAnnot_GetIntent(r,e,o);const u=this.pdfiumModule.pdfium.UTF16ToString(e);return this.memoryManager.free(e),u&&u!=="undefined"?u:void 0}setAnnotIntent(r,n){return this.pdfiumModule.EPDFAnnot_SetIntent(r,n)}getAnnotRichContent(r){const n=this.pdfiumModule.EPDFAnnot_GetRichContent(r,0,0);if(n===0)return;const o=2*(n+1),e=this.memoryManager.malloc(o);this.pdfiumModule.EPDFAnnot_GetRichContent(r,e,o);const u=this.pdfiumModule.pdfium.UTF16ToString(e);return this.memoryManager.free(e),u||void 0}getAnnotationByName(r,n){return this.withWString(n,(o=>this.pdfiumModule.EPDFPage_GetAnnotByName(r,o)))}removeAnnotationByName(r,n){return this.withWString(n,(o=>this.pdfiumModule.EPDFPage_RemoveAnnotByName(r,o)))}setAnnotString(r,n,o){return this.withWString(o,(e=>this.pdfiumModule.FPDFAnnot_SetStringValue(r,n,e)))}setAttachmentString(r,n,o){return this.withWString(o,(e=>this.pdfiumModule.FPDFAttachment_SetStringValue(r,n,e)))}readPdfAnnoVertices(r,n){const o=[],e=this.pdfiumModule.FPDFAnnot_GetVertices(n,0,0),u=this.memoryManager.malloc(8*e);this.pdfiumModule.FPDFAnnot_GetVertices(n,u,e);for(let m=0;m<e;m++){const d=this.pdfiumModule.pdfium.getValue(u+8*m,"float"),_=this.pdfiumModule.pdfium.getValue(u+8*m+4,"float"),{x:c,y:b}=this.convertPagePointToDevicePoint(r,{x:d,y:_}),p=o[o.length-1];p&&p.x===c&&p.y===b||o.push({x:c,y:b})}return this.memoryManager.free(u),o}setPdfAnnoVertices(r,n,o){const e=this.pdfiumModule.pdfium,u=this.memoryManager.malloc(8*o.length);o.forEach(((d,_)=>{const c=this.convertDevicePointToPagePoint(r,d);e.setValue(u+8*_+0,c.x,"float"),e.setValue(u+8*_+4,c.y,"float")}));const m=this.pdfiumModule.EPDFAnnot_SetVertices(n,u,o.length);return this.memoryManager.free(u),m}readPdfBookmarkTarget(r,n,o){const e=n();if(e)return{type:"action",action:this.readPdfAction(r,e)};{const u=o();if(u)return{type:"destination",destination:this.readPdfDestination(r,u)}}}readPdfWidgetAnnoField(r,n){const o=this.pdfiumModule.FPDFAnnot_GetFormFieldFlags(r,n),e=this.pdfiumModule.FPDFAnnot_GetFormFieldType(r,n),u=ue(this.pdfiumModule.pdfium,((b,p)=>this.pdfiumModule.FPDFAnnot_GetFormFieldName(r,n,b,p)),this.pdfiumModule.pdfium.UTF16ToString),m=ue(this.pdfiumModule.pdfium,((b,p)=>this.pdfiumModule.FPDFAnnot_GetFormFieldAlternateName(r,n,b,p)),this.pdfiumModule.pdfium.UTF16ToString),d=ue(this.pdfiumModule.pdfium,((b,p)=>this.pdfiumModule.FPDFAnnot_GetFormFieldValue(r,n,b,p)),this.pdfiumModule.pdfium.UTF16ToString),_=[];if(e===mt.COMBOBOX||e===mt.LISTBOX){const b=this.pdfiumModule.FPDFAnnot_GetOptionCount(r,n);for(let p=0;p<b;p++){const M=ue(this.pdfiumModule.pdfium,((y,C)=>this.pdfiumModule.FPDFAnnot_GetOptionLabel(r,n,p,y,C)),this.pdfiumModule.pdfium.UTF16ToString),E=this.pdfiumModule.FPDFAnnot_IsOptionSelected(r,n,p);_.push({label:M,isSelected:E})}}let c=!1;return e!==mt.CHECKBOX&&e!==mt.RADIOBUTTON||(c=this.pdfiumModule.FPDFAnnot_IsChecked(r,n)),{flag:o,type:e,name:u,alternateName:m,value:d,isChecked:c,options:_}}renderPageAnnotation(r,n,o,e){const{scaleFactor:u=1,rotation:m=Xe.Degree0,dpr:d=1,mode:_=Ye.Normal,imageType:c="image/webp",imageQuality:b}=e??{};this.logger.debug(g,h,"renderPageAnnotation",r,n,o,e),this.logger.perf(g,h,"RenderPageAnnotation","Begin",`${r.id}-${n.index}-${o.id}`);const p=new nn,M=this.cache.getContext(r.id);if(!M)return this.logger.perf(g,h,"RenderPageAnnotation","End",`${r.id}-${n.index}-${o.id}`),G.reject({code:v.DocNotOpen,message:"document does not open"});const E=M.acquirePage(n.index),y=this.getAnnotationByName(E.pagePtr,o.id);if(!y)return this.logger.perf(g,h,"RenderPageAnnotation","End",`${r.id}-${n.index}-${o.id}`),E.release(),G.reject({code:v.NotFound,message:"annotation not found"});const C=Math.max(.01,u*d),x=en(o.rect),R=en(Cn(n.size,x,m,C)),N=Math.max(1,R.size.width),U=Math.max(1,R.size.height),$=4*N,X=$*U,ee=this.memoryManager.malloc(X),O=this.pdfiumModule.FPDFBitmap_CreateEx(N,U,4,ee,$);this.pdfiumModule.FPDFBitmap_FillRect(O,0,0,N,U,0);const z=tn(x,m,N,U),ie=this.memoryManager.malloc(24);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,ie,6).set([z.a,z.b,z.c,z.d,z.e,z.f]);let ae=!1;try{ae=!!this.pdfiumModule.EPDF_RenderAnnotBitmap(O,E.pagePtr,y,_,ie,16)}finally{this.memoryManager.free(ie),this.pdfiumModule.FPDFBitmap_Destroy(O),this.pdfiumModule.FPDFPage_CloseAnnot(y),E.release()}return ae?(this.imageDataConverter((()=>{const ne=new Uint8ClampedArray(this.pdfiumModule.pdfium.HEAPU8.subarray(ee,ee+X));return{width:N,height:U,data:ne}}),c,b).then((ne=>p.resolve(ne))).catch((ne=>{if(ne instanceof yt)try{const T=this.encodeViaWasm({ptr:ee,width:N,height:U,stride:$},{type:c,quality:b});p.resolve(T)}catch(T){p.reject({code:v.Unknown,message:String(T)})}else p.reject({code:v.Unknown,message:String(ne)})})).finally((()=>this.memoryManager.free(ee))),p):(this.memoryManager.free(ee),this.logger.perf(g,h,"RenderPageAnnotation","End",`${r.id}-${n.index}-${o.id}`),G.reject({code:v.Unknown,message:"EPDF_RenderAnnotBitmap failed"}))}encodeViaWasm(r,n){const o=this.pdfiumModule.pdfium,e=(m,d,_)=>{const c=o.HEAPU8.subarray(m,m+d),b=new Uint8Array(c);return this.memoryManager.free(m),new Blob([b],{type:_})},u=this.memoryManager.malloc(4);try{n.type;{const m=this.pdfiumModule.EPDF_PNG_EncodeRGBA(r.ptr,r.width,r.height,r.stride,6,u);return e(o.getValue(u,"i32"),m,"image/png")}}finally{this.memoryManager.free(u)}}renderRectEncoded(r,n,o,e){const u=new nn,m=e?.imageType??"image/webp",d=e?.imageQuality,_=e?.rotation??Xe.Degree0,c=this.cache.getContext(r.id);if(!c)return G.reject({code:v.DocNotOpen,message:"document does not open"});const b=Math.max(.01,e?.scaleFactor??1)*Math.max(1,e?.dpr??1),p=o.size.width,M=o.size.height,E=!(1&~_),y=Math.max(1,Math.round((E?M:p)*b)),C=Math.max(1,Math.round((E?p:M)*b)),x=4*y,R=x*C,N=c.acquirePage(n.index),U=e?.withForms??!1?N.getFormHandle():void 0,$=this.memoryManager.malloc(R),X=this.pdfiumModule.FPDFBitmap_CreateEx(y,C,4,$,x);this.pdfiumModule.FPDFBitmap_FillRect(X,0,0,y,C,4294967295);const ee=tn(o,_,y,C),O=this.memoryManager.malloc(24);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,O,6).set([ee.a,ee.b,ee.c,ee.d,ee.e,ee.f]);const z=this.memoryManager.malloc(16);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,z,4).set([0,0,y,C]);let ie=16;e?.withAnnotations&&(ie|=1);try{if(this.pdfiumModule.FPDF_RenderPageBitmapWithMatrix(X,N.pagePtr,O,z,ie),U!==void 0){const ae=(function(ke,pe,tt,nt){const _e=pe.origin.x,Pe=pe.origin.y,Ce=_e+pe.size.width,Ae=Pe+pe.size.height,Re=tt.width,Te=tt.height,Fe=Math.hypot(ke.a,ke.b),K=Math.hypot(ke.c,ke.d),xe=!(1&~nt),V=xe?Math.max(1,Math.round(Te*Fe)):Math.max(1,Math.round(Re*Fe)),Z=xe?Math.max(1,Math.round(Re*K)):Math.max(1,Math.round(Te*K));let Ee,Me;switch(nt){case Xe.Degree0:Ee=-Math.round(_e*Fe),Me=-Math.round(Pe*K);break;case Xe.Degree90:Ee=Math.round((Ae-Te)*Fe),Me=-Math.round(_e*K);break;case Xe.Degree180:Ee=Math.round((Ce-Re)*Fe),Me=Math.round((Ae-Te)*K);break;case Xe.Degree270:Ee=-Math.round(Pe*Fe),Me=Math.round((Ce-Re)*K);break;default:Ee=-Math.round(_e*Fe),Me=-Math.round(Pe*K)}return{startX:Ee,startY:Me,formsWidth:V,formsHeight:Z,scaleX:Fe,scaleY:K}})(ee,o,n.size,_),{startX:ne,startY:T,formsWidth:we,formsHeight:fe,scaleX:We,scaleY:Ft}=ae;this.pdfiumModule.FPDF_FFLDraw(U,X,N.pagePtr,ne,T,we,fe,_,ie)}}finally{N.release(),this.memoryManager.free(O),this.memoryManager.free(z)}return this.imageDataConverter((()=>{const ae=this.pdfiumModule.pdfium.HEAPU8.buffer,ne=new Uint8ClampedArray(ae,$,R);return{width:y,height:C,data:ne}}),m,d).then((ae=>u.resolve(ae))).catch((ae=>{if(this.logger.error(g,h,"Error",ae),ae instanceof yt){this.logger.info(g,h,"Fallback to WASM encoding");try{const ne=this.encodeViaWasm({ptr:$,width:y,height:C,stride:x},{type:m,quality:d});u.resolve(ne)}catch(ne){u.reject({code:v.Unknown,message:String(ne)})}}else u.reject({code:v.Unknown,message:String(ae)})})).finally((()=>{this.pdfiumModule.FPDFBitmap_Destroy(X),this.memoryManager.free($)})),u}readPdfLinkAnnoTarget(r,n,o){const e=o();if(e)return{type:"destination",destination:this.readPdfDestination(r,e)};{const u=n();if(u)return{type:"action",action:this.readPdfAction(r,u)}}}createLocalDestPtr(r,n){var o,e;const u=this.pdfiumModule.FPDF_LoadPage(r,n.pageIndex);if(!u)return 0;try{if(n.zoom.mode===ge.XYZ){const{x:_,y:c,zoom:b}=n.zoom.params;return this.pdfiumModule.EPDFDest_CreateXYZ(u,!0,_,!0,c,!0,b)}let m,d=[];switch(n.zoom.mode){case ge.FitPage:m=ge.FitPage;break;case ge.FitHorizontal:m=ge.FitHorizontal,d=[((o=n.view)==null?void 0:o[0])??0];break;case ge.FitVertical:m=ge.FitVertical,d=[((e=n.view)==null?void 0:e[0])??0];break;case ge.FitRectangle:{const _=n.view??[];d=[_[0]??0,_[1]??0,_[2]??0,_[3]??0],m=ge.FitRectangle}break;case ge.Unknown:default:return 0}return this.withFloatArray(d,((_,c)=>this.pdfiumModule.EPDFDest_CreateView(u,m,_,c)))}finally{this.pdfiumModule.FPDF_ClosePage(u)}}applyBookmarkTarget(r,n,o){if(o.type==="destination"){const u=this.createLocalDestPtr(r,o.destination);return u?!!this.pdfiumModule.EPDFBookmark_SetDest(r,n,u):!1}const e=o.action;switch(e.type){case se.Goto:{const u=this.createLocalDestPtr(r,e.destination);if(!u)return!1;const m=this.pdfiumModule.EPDFAction_CreateGoTo(r,u);return!!m&&!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,m)}case se.URI:{const u=this.pdfiumModule.EPDFAction_CreateURI(r,e.uri);return!!u&&!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,u)}case se.LaunchAppOrOpenFile:{const u=this.withWString(e.path,(m=>this.pdfiumModule.EPDFAction_CreateLaunch(r,m)));return!!u&&!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,u)}case se.RemoteGoto:case se.Unsupported:default:return!1}}readPdfAction(r,n){let o;switch(this.pdfiumModule.FPDFAction_GetType(n)){case se.Unsupported:o={type:se.Unsupported};break;case se.Goto:{const e=this.pdfiumModule.FPDFAction_GetDest(r,n);if(e){const u=this.readPdfDestination(r,e);o={type:se.Goto,destination:u}}else o={type:se.Unsupported}}break;case se.RemoteGoto:o={type:se.Unsupported};break;case se.URI:{const e=ue(this.pdfiumModule.pdfium,((u,m)=>this.pdfiumModule.FPDFAction_GetURIPath(r,n,u,m)),this.pdfiumModule.pdfium.UTF8ToString);o={type:se.URI,uri:e}}break;case se.LaunchAppOrOpenFile:{const e=ue(this.pdfiumModule.pdfium,((u,m)=>this.pdfiumModule.FPDFAction_GetFilePath(n,u,m)),this.pdfiumModule.pdfium.UTF8ToString);o={type:se.LaunchAppOrOpenFile,path:e}}}return o}readPdfDestination(r,n){const o=this.pdfiumModule.FPDFDest_GetDestPageIndex(r,n),e=this.memoryManager.malloc(4),u=this.memoryManager.malloc(16),m=this.pdfiumModule.FPDFDest_GetView(n,e,u),d=this.pdfiumModule.pdfium.getValue(e,"i32"),_=[];for(let c=0;c<d;c++){const b=u+4*c;_.push(this.pdfiumModule.pdfium.getValue(b,"float"))}if(this.memoryManager.free(e),this.memoryManager.free(u),m===ge.XYZ){const c=this.memoryManager.malloc(1),b=this.memoryManager.malloc(1),p=this.memoryManager.malloc(1),M=this.memoryManager.malloc(4),E=this.memoryManager.malloc(4),y=this.memoryManager.malloc(4);if(this.pdfiumModule.FPDFDest_GetLocationInPage(n,c,b,p,M,E,y)){const C=this.pdfiumModule.pdfium.getValue(c,"i8"),x=this.pdfiumModule.pdfium.getValue(b,"i8"),R=this.pdfiumModule.pdfium.getValue(p,"i8"),N=C?this.pdfiumModule.pdfium.getValue(M,"float"):0,U=x?this.pdfiumModule.pdfium.getValue(E,"float"):0,$=R?this.pdfiumModule.pdfium.getValue(y,"float"):0;return this.memoryManager.free(c),this.memoryManager.free(b),this.memoryManager.free(p),this.memoryManager.free(M),this.memoryManager.free(E),this.memoryManager.free(y),{pageIndex:o,zoom:{mode:m,params:{x:N,y:U,zoom:$}},view:_}}return this.memoryManager.free(c),this.memoryManager.free(b),this.memoryManager.free(p),this.memoryManager.free(M),this.memoryManager.free(E),this.memoryManager.free(y),{pageIndex:o,zoom:{mode:m,params:{x:0,y:0,zoom:0}},view:_}}return{pageIndex:o,zoom:{mode:m},view:_}}readPdfAttachment(r,n){const o=this.pdfiumModule.FPDFDoc_GetAttachment(r,n),e=ue(this.pdfiumModule.pdfium,((c,b)=>this.pdfiumModule.FPDFAttachment_GetName(o,c,b)),this.pdfiumModule.pdfium.UTF16ToString),u=ue(this.pdfiumModule.pdfium,((c,b)=>this.pdfiumModule.EPDFAttachment_GetDescription(o,c,b)),this.pdfiumModule.pdfium.UTF16ToString),m=ue(this.pdfiumModule.pdfium,((c,b)=>this.pdfiumModule.FPDFAttachment_GetSubtype(o,c,b)),this.pdfiumModule.pdfium.UTF16ToString),d=this.getAttachmentDate(o,"CreationDate"),_=ue(this.pdfiumModule.pdfium,((c,b)=>this.pdfiumModule.FPDFAttachment_GetStringValue(o,"Checksum",c,b)),this.pdfiumModule.pdfium.UTF16ToString);return{index:n,name:e,description:u,mimeType:m,size:this.getAttachmentNumber(o,"Size"),creationDate:d,checksum:_}}convertDevicePointToPagePoint(r,n){const o=r.size.width,e=r.size.height,u=3&r.rotation;return u===0?{x:n.x,y:e-n.y}:u===1?{x:n.y,y:n.x}:u===2?{x:o-n.x,y:n.y}:{x:e-n.y,y:o-n.x}}convertPagePointToDevicePoint(r,n){const o=r.size.width,e=r.size.height,u=3&r.rotation;return u===0?{x:n.x,y:e-n.y}:u===1?{x:n.y,y:n.x}:u===2?{x:o-n.x,y:n.y}:{x:o-n.y,y:e-n.x}}convertPageRectToDeviceRect(r,n){const{x:o,y:e}=this.convertPagePointToDevicePoint(r,{x:n.left,y:n.top});return{origin:{x:o,y:e},size:{width:Math.abs(n.right-n.left),height:Math.abs(n.top-n.bottom)}}}readPageAnnoAppearanceStreams(r){return{normal:this.readPageAnnoAppearanceStream(r,Ye.Normal),rollover:this.readPageAnnoAppearanceStream(r,Ye.Rollover),down:this.readPageAnnoAppearanceStream(r,Ye.Down)}}readPageAnnoAppearanceStream(r,n=Ye.Normal){const o=2*(this.pdfiumModule.FPDFAnnot_GetAP(r,n,0,0)+1),e=this.memoryManager.malloc(o);this.pdfiumModule.FPDFAnnot_GetAP(r,n,e,o);const u=this.pdfiumModule.pdfium.UTF16ToString(e);return this.memoryManager.free(e),u}setPageAnnoAppearanceStream(r,n=Ye.Normal,o){const e=2*(o.length+1),u=this.memoryManager.malloc(e);try{return this.pdfiumModule.pdfium.stringToUTF16(o,u,e),!!this.pdfiumModule.FPDFAnnot_SetAP(r,n,u)}finally{this.memoryManager.free(u)}}setPageAnnoRect(r,n,o){const e=Math.floor(o.origin.x),u=Math.floor(o.origin.y),m=Math.floor(o.origin.x+o.size.width),d=Math.floor(o.origin.y+o.size.height),_=this.convertDevicePointToPagePoint(r,{x:e,y:u}),c=this.convertDevicePointToPagePoint(r,{x:m,y:u}),b=this.convertDevicePointToPagePoint(r,{x:m,y:d}),p=this.convertDevicePointToPagePoint(r,{x:e,y:d});let M=Math.min(_.x,c.x,b.x,p.x),E=Math.max(_.x,c.x,b.x,p.x),y=Math.min(_.y,c.y,b.y,p.y),C=Math.max(_.y,c.y,b.y,p.y);M>E&&([M,E]=[E,M]),y>C&&([y,C]=[C,y]);const x=this.memoryManager.malloc(16),R=this.pdfiumModule.pdfium;R.setValue(x+0,M,"float"),R.setValue(x+4,C,"float"),R.setValue(x+8,E,"float"),R.setValue(x+12,y,"float");const N=this.pdfiumModule.FPDFAnnot_SetRect(n,x);return this.memoryManager.free(x),!!N}readPageAnnoRect(r){const n=this.memoryManager.malloc(16),o={left:0,top:0,right:0,bottom:0};return this.pdfiumModule.FPDFAnnot_GetRect(r,n)&&(o.left=this.pdfiumModule.pdfium.getValue(n,"float"),o.top=this.pdfiumModule.pdfium.getValue(n+4,"float"),o.right=this.pdfiumModule.pdfium.getValue(n+8,"float"),o.bottom=this.pdfiumModule.pdfium.getValue(n+12,"float")),this.memoryManager.free(n),o}getHighlightRects(r,n,o,e){const u=this.pdfiumModule.FPDFText_CountRects(n,o,e),m=[],d=this.memoryManager.malloc(8),_=this.memoryManager.malloc(8),c=this.memoryManager.malloc(8),b=this.memoryManager.malloc(8);for(let p=0;p<u;p++){if(!this.pdfiumModule.FPDFText_GetRect(n,p,d,_,c,b))continue;const M=this.pdfiumModule.pdfium.getValue(d,"double"),E=this.pdfiumModule.pdfium.getValue(_,"double"),y=this.pdfiumModule.pdfium.getValue(c,"double"),C=this.pdfiumModule.pdfium.getValue(b,"double"),x=this.convertPagePointToDevicePoint(r,{x:M,y:E}),R=this.convertPagePointToDevicePoint(r,{x:y,y:E}),N=this.convertPagePointToDevicePoint(r,{x:y,y:C}),U=this.convertPagePointToDevicePoint(r,{x:M,y:C}),$=[x.x,R.x,N.x,U.x],X=[x.y,R.y,N.y,U.y],ee=Math.min(...$),O=Math.min(...X),z=Math.max(...$)-ee,ie=Math.max(...X)-O;m.push({origin:{x:ee,y:O},size:{width:Math.ceil(z),height:Math.ceil(ie)}})}return this.memoryManager.free(d),this.memoryManager.free(_),this.memoryManager.free(c),this.memoryManager.free(b),m}searchAllPages(r,n,o){var e;this.logger.debug(g,h,"searchAllPages",r,n,o),this.logger.perf(g,h,"SearchAllPages","Begin",r.id);const u=this.cache.getContext(r.id);if(!u)return this.logger.perf(g,h,"SearchAllPages","End",r.id),G.resolve({results:[],total:0});const m=2*(n.length+1),d=this.memoryManager.malloc(m);this.pdfiumModule.pdfium.stringToUTF16(n,d,m);const _=((e=o?.flags)==null?void 0:e.reduce(((E,y)=>E|y),rn.None))??rn.None,c=G.create();let b=!1;c.wait((()=>{}),(E=>{E.type==="abort"&&(b=!0)}));const p=[],M=E=>{if(b)return;const y=Math.min(E+100,r.pageCount);try{for(let C=E;C<y&&!b;C++){const x=this.searchAllInPage(u,r.pages[C],d,_);p.push(...x),c.progress({page:C,results:x})}}catch(C){return void(b||(this.memoryManager.free(d),this.logger.perf(g,h,"SearchAllPages","End",r.id),c.reject({code:v.Unknown,message:`Error searching document: ${C}`})))}return b?void 0:y>=r.pageCount?(this.memoryManager.free(d),this.logger.perf(g,h,"SearchAllPages","End",r.id),void c.resolve({results:p,total:p.length})):void setTimeout((()=>M(y)),0)};return setTimeout((()=>M(0)),0),c.wait((()=>{}),(E=>{if(E.type==="abort")try{this.memoryManager.free(d)}catch{}})),c}buildContext(r,n,o,e=30){const u=/[\s\u00A0.,;:!?()\[\]{}<>/\\\-"'`"\u2013\u2014]/;let m=n;for(;m>0&&u.test(r[m-1]);)m--;let d=0;for(;m>0&&d<e;)m--,u.test(r[m])||d++;m=(M=>{for(;M>0&&!u.test(r[M-1]);)M--;return M})(m);let _=n+o;for(;_<r.length&&u.test(r[_]);)_++;for(d=0;_<r.length&&d<e;)u.test(r[_])||d++,_++;_=(M=>{for(;M<r.length&&!u.test(r[M]);)M++;return M})(_);const c=r.slice(m,n).replace(/\s+/g," ").trimStart(),b=r.slice(n,n+o),p=r.slice(n+o,_).replace(/\s+/g," ").trimEnd();return{before:this.tidy(c),match:this.tidy(b),after:this.tidy(p),truncatedLeft:m>0,truncatedRight:_<r.length}}tidy(r){return r.replace(/-\uFFFE\s*/g,"").replace(/[\uFFFE\u00AD\u200B\u2060\uFEFF]/g,"").replace(/\s+/g," ")}searchAllInPage(r,n,o,e){return r.borrowPage(n.index,(u=>{const m=u.getTextPage(),d=this.pdfiumModule.FPDFText_CountChars(m),_=this.memoryManager.malloc(2*(d+1));this.pdfiumModule.FPDFText_GetText(m,0,d,_);const c=this.pdfiumModule.pdfium.UTF16ToString(_);this.memoryManager.free(_);const b=[],p=this.pdfiumModule.FPDFText_FindStart(m,o,e,0);for(;this.pdfiumModule.FPDFText_FindNext(p);){const M=this.pdfiumModule.FPDFText_GetSchResultIndex(p),E=this.pdfiumModule.FPDFText_GetSchCount(p),y=this.getHighlightRects(n,m,M,E),C=this.buildContext(c,M,E);b.push({pageIndex:n.index,charIndex:M,charCount:E,rects:y,context:C})}return this.pdfiumModule.FPDFText_FindClose(p),b}))}preparePrintDocument(r,n){const{includeAnnotations:o=!0,pageRange:e=null}=n??{};this.logger.debug(g,h,"preparePrintDocument",r,n),this.logger.perf(g,h,"PreparePrintDocument","Begin",r.id);const u=this.cache.getContext(r.id);if(!u)return this.logger.perf(g,h,"PreparePrintDocument","End",r.id),G.reject({code:v.DocNotOpen,message:"Document is not open"});const m=this.pdfiumModule.FPDF_CreateNewDocument();if(!m)return this.logger.perf(g,h,"PreparePrintDocument","End",r.id),G.reject({code:v.CantCreateNewDoc,message:"Cannot create print document"});try{const d=this.sanitizePageRange(e,r.pageCount);if(!this.pdfiumModule.FPDF_ImportPages(m,u.docPtr,d??"",0))return this.pdfiumModule.FPDF_CloseDocument(m),this.logger.error(g,h,"Failed to import pages for printing"),this.logger.perf(g,h,"PreparePrintDocument","End",r.id),G.reject({code:v.CantImportPages,message:"Failed to import pages for printing"});if(!o){const c=this.removeAnnotationsFromPrintDocument(m);if(!c.success)return this.pdfiumModule.FPDF_CloseDocument(m),this.logger.error(g,h,`Failed to remove annotations: ${c.error}`),this.logger.perf(g,h,"PreparePrintDocument","End",r.id),G.reject({code:v.Unknown,message:`Failed to prepare print document: ${c.error}`});this.logger.debug(g,h,`Removed ${c.annotationsRemoved} annotations from ${c.pagesProcessed} pages`)}const _=this.saveDocument(m);return this.pdfiumModule.FPDF_CloseDocument(m),this.logger.perf(g,h,"PreparePrintDocument","End",r.id),G.resolve(_)}catch(d){return m&&this.pdfiumModule.FPDF_CloseDocument(m),this.logger.error(g,h,"preparePrintDocument failed",d),this.logger.perf(g,h,"PreparePrintDocument","End",r.id),G.reject({code:v.Unknown,message:d instanceof Error?d.message:"Failed to prepare print document"})}}removeAnnotationsFromPrintDocument(r){let n=0,o=0;try{const e=this.pdfiumModule.FPDF_GetPageCount(r);for(let u=0;u<e;u++){const m=this.pdfiumModule.EPDFPage_GetAnnotCountRaw(r,u);if(m<=0){o++;continue}let d=0;for(let _=m-1;_>=0;_--)this.pdfiumModule.EPDFPage_RemoveAnnotRaw(r,u,_)?(d++,n++):this.logger.warn(g,h,`Failed to remove annotation ${_} from page ${u}`);if(d>0){const _=this.pdfiumModule.FPDF_LoadPage(r,u);_&&(this.pdfiumModule.FPDFPage_GenerateContent(_),this.pdfiumModule.FPDF_ClosePage(_))}o++}return{success:!0,annotationsRemoved:n,pagesProcessed:o}}catch(e){return{success:!1,annotationsRemoved:n,pagesProcessed:o,error:e instanceof Error?e.message:"Unknown error during annotation removal"}}}sanitizePageRange(r,n){if(!r||r.trim()==="")return null;try{const o=[],e=r.split(",");for(const c of e){const b=c.trim();if(b.includes("-")){const[p,M]=b.split("-").map((R=>R.trim())),E=parseInt(p,10),y=parseInt(M,10);if(isNaN(E)||isNaN(y)){this.logger.warn(g,h,`Invalid range: ${b}`);continue}const C=Math.max(1,Math.min(E,n)),x=Math.max(1,Math.min(y,n));for(let R=C;R<=x;R++)o.includes(R)||o.push(R)}else{const p=parseInt(b,10);if(isNaN(p)){this.logger.warn(g,h,`Invalid page number: ${b}`);continue}const M=Math.max(1,Math.min(p,n));o.includes(M)||o.push(M)}}if(o.length===0)return this.logger.warn(g,h,"No valid pages in range, using all pages"),null;o.sort(((c,b)=>c-b));const u=[];let m=o[0],d=o[0];for(let c=1;c<o.length;c++)o[c]===d+1||(m===d?u.push(m.toString()):d-m==1?(u.push(m.toString()),u.push(d.toString())):u.push(`${m}-${d}`),m=o[c]),d=o[c];m===d?u.push(m.toString()):d-m==1?(u.push(m.toString()),u.push(d.toString())):u.push(`${m}-${d}`);const _=u.join(",");return this.logger.debug(g,h,`Sanitized page range: "${r}" -> "${_}"`),_}catch(o){return this.logger.error(g,h,`Error sanitizing page range: ${o}`),null}}}async function $n(H,r){const n=await fetch(H),o=await n.arrayBuffer(),e=await vn({wasmBinary:o});return new Vn(e,{logger:r})}export{$n as createPdfiumEngine};
