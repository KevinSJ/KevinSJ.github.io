import{c as w,i as B}from"./style-D1FQfXNQ.js";import"./version-Dw8ZKLCV.js";import"./simple-mode-footer-D78rH_WB.js";import{G as b,a as f,b as I,c as P,h as L}from"./main-Da82M_MD.js";import"./mobileMenu-BoMunYmR.js";b.workerSrc=new URL("/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();const e={pdfDoc1:null,pdfDoc2:null,currentPage:1,viewMode:"overlay",isSyncScroll:!0};async function y(d,i,c,a){const n=await d.getPage(i),r=a.clientWidth-2,t=n.getViewport({scale:1}),o=r/t.width,s=n.getViewport({scale:o});c.width=s.width,c.height=s.height,await n.render({canvasContext:c.getContext("2d"),viewport:s,canvas:c}).promise}async function g(){if(!e.pdfDoc1||!e.pdfDoc2)return;I(`Loading page ${e.currentPage}...`);const d=document.getElementById("canvas-compare-1"),i=document.getElementById("canvas-compare-2"),c=document.getElementById("panel-1"),a=document.getElementById("panel-2"),n=document.getElementById("compare-viewer-wrapper"),r=e.viewMode==="overlay"?n:c,t=e.viewMode==="overlay"?n:a;await Promise.all([y(e.pdfDoc1,Math.min(e.currentPage,e.pdfDoc1.numPages),d,r),y(e.pdfDoc2,Math.min(e.currentPage,e.pdfDoc2.numPages),i,t)]),D(),L()}function D(){const d=Math.max(e.pdfDoc1?.numPages||0,e.pdfDoc2?.numPages||0),i=document.getElementById("current-page-display-compare"),c=document.getElementById("total-pages-display-compare"),a=document.getElementById("prev-page-compare"),n=document.getElementById("next-page-compare");i&&(i.textContent=e.currentPage.toString()),c&&(c.textContent=d.toString()),a&&(a.disabled=e.currentPage<=1),n&&(n.disabled=e.currentPage>=d)}function v(d){e.viewMode=d;const i=document.getElementById("compare-viewer-wrapper"),c=document.getElementById("overlay-controls"),a=document.getElementById("side-by-side-controls"),n=document.getElementById("view-mode-overlay"),r=document.getElementById("view-mode-side"),t=document.getElementById("canvas-compare-2"),o=document.getElementById("opacity-slider");d==="overlay"?(i&&(i.className="compare-viewer-wrapper overlay-mode bg-gray-900 rounded-lg border border-gray-700 min-h-[400px] relative"),c&&c.classList.remove("hidden"),a&&a.classList.add("hidden"),n&&(n.classList.add("bg-indigo-600"),n.classList.remove("bg-gray-700")),r&&(r.classList.remove("bg-indigo-600"),r.classList.add("bg-gray-700")),t&&o&&(t.style.opacity=o.value)):(i&&(i.className="compare-viewer-wrapper side-by-side-mode bg-gray-900 rounded-lg border border-gray-700 min-h-[400px]"),c&&c.classList.add("hidden"),a&&a.classList.remove("hidden"),n&&(n.classList.remove("bg-indigo-600"),n.classList.add("bg-gray-700")),r&&(r.classList.add("bg-indigo-600"),r.classList.remove("bg-gray-700")),t&&(t.style.opacity="1")),g()}async function E(d,i,c){const a=document.getElementById(d),n=document.getElementById(`drop-zone-${d.slice(-1)}`);async function r(t){if(!t||t.type!=="application/pdf"){f("Invalid File","Please select a valid PDF file.");return}const o=document.getElementById(c);if(o){o.innerHTML="";const s=document.createElement("i");s.setAttribute("data-lucide","check-circle"),s.className="w-10 h-10 mb-3 text-green-500";const l=document.createElement("p");l.className="text-sm text-gray-300 truncate",l.textContent=t.name,o.append(s,l),w({icons:B})}try{I(`Loading ${t.name}...`);const s=await t.arrayBuffer();if(e[i]=await P({data:s}).promise,e.pdfDoc1&&e.pdfDoc2){const l=document.getElementById("compare-viewer");l&&l.classList.remove("hidden"),e.currentPage=1,await g()}}catch(s){f("Error","Could not load PDF. It may be corrupt or password-protected."),console.error(s)}finally{L()}}a&&a.addEventListener("change",function(t){const o=t.target.files;o&&o[0]&&r(o[0])}),n&&(n.addEventListener("dragover",function(t){t.preventDefault()}),n.addEventListener("drop",function(t){t.preventDefault();const o=t.dataTransfer?.files;o&&o[0]&&r(o[0])}))}document.addEventListener("DOMContentLoaded",function(){const d=document.getElementById("back-to-tools");d&&d.addEventListener("click",function(){window.location.href="/"}),E("file-input-1","pdfDoc1","file-display-1"),E("file-input-2","pdfDoc2","file-display-2");const i=document.getElementById("prev-page-compare"),c=document.getElementById("next-page-compare");i&&i.addEventListener("click",function(){e.currentPage>1&&(e.currentPage--,g())}),c&&c.addEventListener("click",function(){const h=Math.max(e.pdfDoc1?.numPages||0,e.pdfDoc2?.numPages||0);e.currentPage<h&&(e.currentPage++,g())});const a=document.getElementById("view-mode-overlay"),n=document.getElementById("view-mode-side");a&&a.addEventListener("click",function(){v("overlay")}),n&&n.addEventListener("click",function(){v("side-by-side")});const r=document.getElementById("flicker-btn"),t=document.getElementById("canvas-compare-2"),o=document.getElementById("opacity-slider");let s=!0;r&&t&&r.addEventListener("click",function(){s=!s,t.style.transition="opacity 150ms ease-in-out",t.style.opacity=s?o?.value||"0.5":"0"}),o&&t&&o.addEventListener("input",function(){s=!0,t.style.transition="",t.style.opacity=o.value});const l=document.getElementById("panel-1"),m=document.getElementById("panel-2"),u=document.getElementById("sync-scroll-toggle");u&&u.addEventListener("change",function(){e.isSyncScroll=u.checked});let p=null;l&&m&&(l.addEventListener("scroll",function(){e.isSyncScroll&&p!==m&&(p=l,m.scrollTop=l.scrollTop,setTimeout(function(){p=null},100))}),m.addEventListener("scroll",function(){e.isSyncScroll&&p!==l&&(p=m,l.scrollTop=m.scrollTop,setTimeout(function(){p=null},100))})),w({icons:B})});
