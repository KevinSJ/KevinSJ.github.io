import{c as g,i as y}from"./style-D1FQfXNQ.js";import"./version-Dw8ZKLCV.js";import"./simple-mode-footer-D78rH_WB.js";import{P as v,w as E}from"./main-Da82M_MD.js";import"./mobileMenu-BoMunYmR.js";const o={pdfDoc:null,file:null};function m(e="Processing..."){const t=document.getElementById("loader-modal"),n=document.getElementById("loader-text");t&&t.classList.remove("hidden"),n&&(n.textContent=e)}function u(){const e=document.getElementById("loader-modal");e&&e.classList.add("hidden")}function s(e,t,n="error",d){const i=document.getElementById("alert-modal"),a=document.getElementById("alert-title"),r=document.getElementById("alert-message"),l=document.getElementById("alert-ok");if(a&&(a.textContent=e),r&&(r.textContent=t),i&&i.classList.remove("hidden"),l){const c=l.cloneNode(!0);l.replaceWith(c),c.addEventListener("click",()=>{i?.classList.add("hidden"),d&&d()})}}function L(e,t){const n=URL.createObjectURL(e),d=document.createElement("a");d.href=n,d.download=t,d.click(),URL.revokeObjectURL(n)}function B(){const e=document.getElementById("file-display-area");if(!e||!o.file||!o.pdfDoc)return;const t=o.file.size<1024*1024?`${(o.file.size/1024).toFixed(1)} KB`:`${(o.file.size/1024/1024).toFixed(2)} MB`,n=o.pdfDoc.getPageCount();e.innerHTML=`
        <div class="bg-gray-700 p-3 rounded-lg border border-gray-600 hover:border-indigo-500 transition-colors">
            <div class="flex items-center justify-between">
                <div class="flex-1 min-w-0">
                    <p class="truncate font-medium text-white">${o.file.name}</p>
                    <p class="text-gray-400 text-sm">${t} â€¢ ${n} page${n!==1?"s":""}</p>
                </div>
                <button id="remove-file" class="text-red-400 hover:text-red-300 p-2 flex-shrink-0 ml-2" title="Remove file">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    `,g({icons:y}),document.getElementById("remove-file")?.addEventListener("click",()=>p())}function p(){o.pdfDoc=null,o.file=null;const e=document.getElementById("file-display-area");e&&(e.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const t=document.getElementById("file-input");t&&(t.value="")}async function f(e){if(!e||e.type!=="application/pdf"){s("Error","Please upload a valid PDF file.");return}m("Loading PDF...");try{const t=await e.arrayBuffer();o.pdfDoc=await v.load(t),o.file=e,B(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(t){console.error(t),s("Error","Failed to load PDF file.")}finally{u()}}async function h(){if(!o.pdfDoc){s("Error","Please upload a PDF file first.");return}m("Removing annotations...");try{const e=o.pdfDoc.getPages();for(let n=0;n<e.length;n++){const d=e[n];(d.node.Annots()?.asArray()||[]).length>0&&d.node.delete(E.of("Annots"))}const t=await o.pdfDoc.save();L(new Blob([new Uint8Array(t)],{type:"application/pdf"}),"annotations-removed.pdf"),s("Success","Annotations removed successfully!","success",()=>{p()})}catch(e){console.error(e),s("Error","Could not remove annotations.")}finally{u()}}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),n=document.getElementById("process-btn"),d=document.getElementById("back-to-tools");e?.addEventListener("change",i=>{const a=i.target.files?.[0];a&&f(a)}),t?.addEventListener("dragover",i=>{i.preventDefault(),t.classList.add("border-indigo-500")}),t?.addEventListener("dragleave",()=>{t.classList.remove("border-indigo-500")}),t?.addEventListener("drop",i=>{i.preventDefault(),t.classList.remove("border-indigo-500");const a=i.dataTransfer?.files[0];a&&f(a)}),n?.addEventListener("click",h),d?.addEventListener("click",()=>{window.location.href="../../index.html"})});
