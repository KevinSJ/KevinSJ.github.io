import{c as u,i as v}from"./style-D1FQfXNQ.js";import"./version-Dw8ZKLCV.js";import"./simple-mode-footer-D78rH_WB.js";import{a as m,f as w,b as E,P as L,d as B,h as b}from"./main-Da82M_MD.js";import"./mobileMenu-BoMunYmR.js";let i=[];document.readyState==="loading"?document.addEventListener("DOMContentLoaded",h):h();function h(){u({icons:v});const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),o=document.getElementById("add-more-btn"),a=document.getElementById("clear-files-btn"),c=document.getElementById("process-btn");e&&e.addEventListener("change",x),t&&(t.addEventListener("dragover",n=>{n.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",()=>{t.classList.remove("bg-gray-700")}),t.addEventListener("drop",n=>{n.preventDefault(),t.classList.remove("bg-gray-700");const s=n.dataTransfer?.files;s&&s.length>0&&y(s)}),e?.addEventListener("click",()=>{e&&(e.value="")})),o&&o.addEventListener("click",()=>{e?.click()}),a&&a.addEventListener("click",()=>{i=[],f()}),c&&c.addEventListener("click",C),document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/"})}function x(e){const t=e.target;t.files&&t.files.length>0&&y(t.files)}function y(e){const t=Array.from(e).filter(o=>o.type==="image/svg+xml"||o.name.toLowerCase().endsWith(".svg"));t.length<e.length&&m("Invalid Files","Some files were skipped. Only SVG graphics are allowed."),t.length>0&&(i=[...i,...t],f())}const I=()=>{i=[],f()};function f(){const e=document.getElementById("file-display-area"),t=document.getElementById("file-controls"),o=document.getElementById("jpg-to-pdf-options");!e||!t||!o||(e.innerHTML="",i.length>0?(t.classList.remove("hidden"),o.classList.remove("hidden"),i.forEach((a,c)=>{const n=document.createElement("div");n.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const s=document.createElement("div");s.className="flex items-center gap-2 overflow-hidden";const d=document.createElement("span");d.className="truncate font-medium text-gray-200",d.textContent=a.name;const l=document.createElement("span");l.className="flex-shrink-0 text-gray-400 text-xs",l.textContent=`(${w(a.size)})`,s.append(d,l);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=()=>{i=i.filter((g,p)=>p!==c),f()},n.append(s,r),e.appendChild(n)}),u({icons:v})):(t.classList.add("hidden"),o.classList.add("hidden")))}function k(e){return new Promise((t,o)=>{const a=new Image,c=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(c);a.onload=()=>{const s=document.createElement("canvas"),d=a.naturalWidth||a.width||800,l=a.naturalHeight||a.height||600;s.width=d,s.height=l;const r=s.getContext("2d");if(!r)return URL.revokeObjectURL(n),o(new Error("Could not get canvas context"));r.fillStyle="white",r.fillRect(0,0,d,l),r.drawImage(a,0,0,d,l),s.toBlob(async g=>{if(URL.revokeObjectURL(n),!g)return o(new Error("Canvas toBlob conversion failed."));const p=await g.arrayBuffer();t(new Uint8Array(p))},"image/png")},a.onerror=()=>{URL.revokeObjectURL(n),o(new Error("Failed to load SVG image"))},a.src=n})}async function C(){if(i.length===0){m("No Files","Please select at least one SVG file.");return}E("Creating PDF from SVG files...");try{const e=await L.create();for(const o of i)try{const a=await o.text(),c=await k(a),n=await e.embedPng(c);e.addPage([n.width,n.height]).drawImage(n,{x:0,y:0,width:n.width,height:n.height})}catch(a){throw console.error(`Failed to process ${o.name}:`,a),new Error(`Could not process "${o.name}". The file may be corrupted.`)}const t=await e.save();B(new Blob([new Uint8Array(t)],{type:"application/pdf"}),"from_svgs.pdf"),m("Success","PDF created successfully!","success",()=>{I()})}catch(e){console.error(e),m("Conversion Error",e.message)}finally{b()}}
