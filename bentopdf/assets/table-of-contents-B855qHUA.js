import"./style-CYUbkObH.js";import"./version-BHeJdyYx.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-Q5E4PlzL.js";import{d as b,f as y}from"./main-DWubsKaN.js";import{i as k}from"./shortcuts-init-C06Pt8iU.js";import"./mobileMenu-BoMunYmR.js";const i=new Worker("/bentopdf/workers/table-of-contents.worker.js");let l=null;const a=document.getElementById("drop-zone"),m=document.getElementById("file-input"),s=document.getElementById("generate-btn"),E=document.getElementById("toc-title"),B=document.getElementById("font-size"),v=document.getElementById("font-family"),h=document.getElementById("add-bookmark"),c=document.getElementById("status-message"),d=document.getElementById("file-display-area"),f=document.getElementById("back-to-tools");function n(e,t="info"){c.textContent=e,c.className=`mt-4 p-3 rounded-lg text-sm ${t==="success"?"bg-green-900 text-green-200":t==="error"?"bg-red-900 text-red-200":"bg-blue-900 text-blue-200"}`,c.classList.remove("hidden")}function w(){c.classList.add("hidden")}function L(e){d.innerHTML="",d.classList.remove("hidden");const t=document.createElement("div");t.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const r=document.createElement("span");r.className="truncate font-medium text-gray-200",r.textContent=e.name;const o=document.createElement("span");o.className="flex-shrink-0 ml-4 text-gray-400",o.textContent=y(e.size),t.append(r,o),d.appendChild(t)}function u(e){if(e.type!=="application/pdf"){n("Please select a PDF file.","error");return}l=e,s.disabled=!1,L(e)}a.addEventListener("dragover",e=>{e.preventDefault(),a.classList.add("border-blue-500")});a.addEventListener("dragleave",()=>{a.classList.remove("border-blue-500")});a.addEventListener("drop",e=>{e.preventDefault(),a.classList.remove("border-blue-500");const t=e.dataTransfer?.files[0];t&&u(t)});m.addEventListener("change",e=>{const t=e.target.files?.[0];t&&u(t)});async function I(){if(!l){n("Please select a PDF file first.","error");return}try{s.disabled=!0,n("Reading file (Main Thread)...","info");const e=await l.arrayBuffer();n("Generating table of contents...","info");const t=E.value||"Table of Contents",r=parseInt(B.value,10),o=parseInt(v.value,10),p=h.checked,g={command:"generate-toc",pdfData:e,title:t,fontSize:r,fontFamily:o,addBookmark:p};i.postMessage(g,[e])}catch(e){console.error("Error reading file:",e),n(`Error reading file: ${e instanceof Error?e.message:"Unknown error occurred"}`,"error"),s.disabled=!1}}i.onmessage=e=>{if(s.disabled=!1,e.data.status==="success"){const t=e.data.pdfBytes,r=new Uint8Array(t),o=new Blob([r],{type:"application/pdf"});b(o,l?.name.replace(".pdf","_with_toc.pdf")||"output_with_toc.pdf"),n("Table of contents generated successfully! Download started.","success"),w(),l=null,m.value="",d.innerHTML="",d.classList.add("hidden"),s.disabled=!0}else if(e.data.status==="error"){const t=e.data.message||"Unknown error occurred in worker.";console.error("Worker Error:",t),n(`Error: ${t}`,"error")}};i.onerror=e=>{console.error("Worker error:",e),n("Worker error occurred. Check console for details.","error"),s.disabled=!1};f&&f.addEventListener("click",()=>{window.location.href="/bentopdf/"});s.addEventListener("click",I);k();
