const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-3IPKxw9h.js","assets/main-DWubsKaN.js","assets/style-CYUbkObH.js","assets/style-BSB0ervv.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as C,i as k}from"./style-CYUbkObH.js";import"./version-BHeJdyYx.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-Q5E4PlzL.js";import{n as A,o as N,s as t,a as g,b as E,d as $,h as B,_ as R,f as b,r as S,e as M}from"./main-DWubsKaN.js";import"./mobileMenu-BoMunYmR.js";const w=new A(N("pymupdf"));document.addEventListener("DOMContentLoaded",()=>{const m=document.getElementById("file-input"),l=document.getElementById("drop-zone"),p=document.getElementById("process-btn"),y=document.getElementById("file-display-area"),h=document.getElementById("rasterize-options"),z=document.getElementById("file-controls"),I=document.getElementById("add-more-btn"),D=document.getElementById("clear-files-btn"),P=document.getElementById("back-to-tools");P&&P.addEventListener("click",()=>{window.location.href="/bentopdf/"});const L=async()=>{if(!(!y||!h||!p||!z))if(t.files.length>0){y.innerHTML="";for(let e=0;e<t.files.length;e++){const a=t.files[e],s=document.createElement("div");s.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const c=document.createElement("div");c.className="flex flex-col overflow-hidden";const o=document.createElement("div");o.className="truncate font-medium text-gray-200 text-sm mb-1",o.textContent=a.name;const r=document.createElement("div");r.className="text-xs text-gray-400",r.textContent=`${b(a.size)} • Loading pages...`,c.append(o,r);const n=document.createElement("button");n.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",n.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',n.onclick=()=>{t.files=t.files.filter((i,d)=>d!==e),L()},s.append(c,n),y.appendChild(s);try{const i=await S(a),d=await M({data:i}).promise;r.textContent=`${b(a.size)} • ${d.numPages} pages`}catch(i){console.error("Error loading PDF:",i),r.textContent=`${b(a.size)} • Could not load page count`}}C({icons:k}),z.classList.remove("hidden"),h.classList.remove("hidden"),p.disabled=!1}else y.innerHTML="",z.classList.add("hidden"),h.classList.add("hidden"),p.disabled=!0},v=()=>{t.files=[],t.pdfDoc=null,L()},_=async()=>{try{if(t.files.length===0){g("No Files","Please select at least one PDF file.");return}E("Loading engine..."),await w.load();const e=parseInt(document.getElementById("rasterize-dpi").value)||150,a=document.getElementById("rasterize-format").value,s=document.getElementById("rasterize-grayscale").checked,c=t.files.length;let o=0,r=0;if(c===1){const n=t.files[0];E(`Rasterizing ${n.name}...`);const i=await w.rasterizePdf(n,{dpi:e,format:a,grayscale:s,quality:95}),d=n.name.replace(/\.pdf$/i,"")+"_rasterized.pdf";$(i,d),B(),g("Rasterization Complete",`Successfully rasterized PDF at ${e} DPI.`,"success",()=>v())}else{const n=(await R(async()=>{const{default:f}=await import("./jszip.min-3IPKxw9h.js").then(u=>u.j);return{default:f}},__vite__mapDeps([0,1,2,3,4]))).default,i=new n;for(const f of t.files)try{E(`Rasterizing ${f.name} (${o+1}/${c})...`);const u=await w.rasterizePdf(f,{dpi:e,format:a,grayscale:s,quality:95}),F=f.name.replace(/\.pdf$/i,"")+"_rasterized.pdf";i.file(F,u),o++}catch(u){console.error(`Failed to rasterize ${f.name}:`,u),r++}E("Creating ZIP archive...");const d=await i.generateAsync({type:"blob"});$(d,"rasterized-pdfs.zip"),B(),r===0?g("Rasterization Complete",`Successfully rasterized ${o} PDF(s) at ${e} DPI.`,"success",()=>v()):g("Rasterization Partial",`Rasterized ${o} PDF(s), failed ${r}.`,"warning",()=>v())}}catch(e){B(),g("Error",`An error occurred during rasterization. Error: ${e.message}`)}},x=e=>{if(e&&e.length>0){const a=Array.from(e).filter(s=>s.type==="application/pdf"||s.name.toLowerCase().endsWith(".pdf"));a.length>0&&(t.files=[...t.files,...a],L())}};m&&l&&(m.addEventListener("change",e=>{x(e.target.files)}),l.addEventListener("dragover",e=>{e.preventDefault(),l.classList.add("bg-gray-700")}),l.addEventListener("dragleave",e=>{e.preventDefault(),l.classList.remove("bg-gray-700")}),l.addEventListener("drop",e=>{e.preventDefault(),l.classList.remove("bg-gray-700"),x(e.dataTransfer?.files??null)}),m.addEventListener("click",()=>{m.value=""})),I&&I.addEventListener("click",()=>{m.click()}),D&&D.addEventListener("click",v),p&&p.addEventListener("click",_)});
