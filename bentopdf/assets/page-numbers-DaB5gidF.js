import{c as P,i as F}from"./style-D1FQfXNQ.js";import"./version-Dw8ZKLCV.js";import"./simple-mode-footer-D78rH_WB.js";import{a as y,b as k,P as $,h as z,f as O,q as _,t as U,u as j,d as q}from"./main-Da82M_MD.js";import"./mobileMenu-BoMunYmR.js";const a={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I();function I(){P({icons:F});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),o=document.getElementById("back-to-tools"),r=document.getElementById("process-btn");t&&(t.addEventListener("change",R),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",n=>{n.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",n=>{n.preventDefault(),e.classList.remove("border-indigo-500"),n.dataTransfer?.files.length&&C(n.dataTransfer.files)})),o&&o.addEventListener("click",()=>{window.location.href="/"}),r&&r.addEventListener("click",W)}function R(t){const e=t.target;e.files?.length&&C(e.files)}async function C(t){const e=t[0];if(!e||e.type!=="application/pdf"){y("Invalid File","Please upload a valid PDF file.");return}k("Loading PDF...");try{const o=await e.arrayBuffer();a.pdfDoc=await $.load(o),a.file=e,V(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(o){console.error(o),y("Error","Failed to load PDF file.")}finally{z()}}function V(){const t=document.getElementById("file-display-area");if(!t||!a.file||!a.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const o=document.createElement("div");o.className="flex flex-col flex-1 min-w-0";const r=document.createElement("div");r.className="truncate font-medium text-gray-200 text-sm mb-1",r.textContent=a.file.name;const n=document.createElement("div");n.className="text-xs text-gray-400",n.textContent=`${O(a.file.size)} â€¢ ${a.pdfDoc.getPageCount()} pages`,o.append(r,n);const p=document.createElement("button");p.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",p.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',p.onclick=S,e.append(o,p),t.appendChild(e),P({icons:F})}function S(){a.file=null,a.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function W(){if(!a.pdfDoc){y("Error","Please upload a PDF file first.");return}k("Adding page numbers...");try{const t=document.getElementById("position").value,e=parseInt(document.getElementById("font-size").value)||12,o=document.getElementById("number-format").value,r=document.getElementById("text-color").value,n=_(r),p=a.pdfDoc.getPages(),E=p.length,M=await a.pdfDoc.embedFont(U.Helvetica);for(let g=0;g<E;g++){const b=p[g],H=b.getMediaBox(),v=b.getCropBox()||H,d=v.width,h=v.height,l=v.x||0,m=v.y||0,B=o==="page_x_of_y"?`${g+1} / ${E}`:`${g+1}`,f=M.widthOfTextAtSize(B,e),x=e,D=8,w=40,L=.04,N=Math.max(D,Math.min(w,d*L)),A=Math.max(D,Math.min(w,h*L)),i=Math.max(N,f/2+3),u=Math.max(A,x+3);let s=0,c=0;switch(t){case"bottom-center":s=Math.max(i,Math.min(d-i-f,(d-f)/2))+l,c=u+m;break;case"bottom-left":s=i+l,c=u+m;break;case"bottom-right":s=Math.max(i,d-i-f)+l,c=u+m;break;case"top-center":s=Math.max(i,Math.min(d-i-f,(d-f)/2))+l,c=h-u-x+m;break;case"top-left":s=i+l,c=h-u-x+m;break;case"top-right":s=Math.max(i,d-i-f)+l,c=h-u-x+m;break}s=Math.max(l+3,Math.min(l+d-f-3,s)),c=Math.max(m+3,Math.min(m+h-x-3,c)),b.drawText(B,{x:s,y:c,font:M,size:e,color:j(n.r,n.g,n.b)})}const T=await a.pdfDoc.save();q(new Blob([new Uint8Array(T)],{type:"application/pdf"}),"paginated.pdf"),y("Success","Page numbers added successfully!","success",()=>{S()})}catch(t){console.error(t),y("Error","Could not add page numbers.")}finally{z()}}
