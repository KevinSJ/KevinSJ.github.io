import{c as x,i as E}from"./style-CNx3HTbi.js";import"./version-D4ympJL5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-ODFatrFN.js";import{a as g,b as L,P as T,h as w,f as S,u as F,t as R,q as z,v as A,d as k}from"./main-Dqs2Ohqn.js";import"./mobileMenu-BoMunYmR.js";const r={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v();function v(){x({icons:E});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),d=document.getElementById("back-to-tools"),n=document.getElementById("process-btn");t&&(t.addEventListener("change",H),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",a=>{a.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",a=>{a.preventDefault(),e.classList.remove("border-indigo-500"),a.dataTransfer?.files.length&&B(a.dataTransfer.files)})),d&&d.addEventListener("click",()=>{window.location.href="/bentopdf/"}),n&&n.addEventListener("click",O)}function H(t){const e=t.target;e.files?.length&&B(e.files)}async function B(t){const e=t[0];if(!e||e.type!=="application/pdf"){g("Invalid File","Please upload a valid PDF file.");return}L("Loading PDF...");try{const d=await e.arrayBuffer();r.pdfDoc=await T.load(d),r.file=e,N(),document.getElementById("options-panel")?.classList.remove("hidden");const n=document.getElementById("total-pages");n&&(n.textContent=String(r.pdfDoc.getPageCount()))}catch(d){console.error(d),g("Error","Failed to load PDF file.")}finally{w()}}function N(){const t=document.getElementById("file-display-area");if(!t||!r.file||!r.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const d=document.createElement("div");d.className="flex flex-col flex-1 min-w-0";const n=document.createElement("div");n.className="truncate font-medium text-gray-200 text-sm mb-1",n.textContent=r.file.name;const a=document.createElement("div");a.className="text-xs text-gray-400",a.textContent=`${S(r.file.size)} â€¢ ${r.pdfDoc.getPageCount()} pages`,d.append(n,a);const l=document.createElement("button");l.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",l.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',l.onclick=I,e.append(d,l),t.appendChild(e),x({icons:E})}function I(){r.file=null,r.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function O(){if(!r.pdfDoc){g("Error","Please upload a PDF file first.");return}L("Adding header & footer...");try{const t=await r.pdfDoc.embedFont(F.Helvetica),e=r.pdfDoc.getPages(),d=e.length,n=40,a=parseInt(document.getElementById("font-size")?.value||"10")||10,l=document.getElementById("font-color")?.value||"#000000",p=R(l),D=document.getElementById("page-range")?.value||"",s={headerLeft:document.getElementById("header-left")?.value||"",headerCenter:document.getElementById("header-center")?.value||"",headerRight:document.getElementById("header-right")?.value||"",footerLeft:document.getElementById("footer-left")?.value||"",footerCenter:document.getElementById("footer-center")?.value||"",footerRight:document.getElementById("footer-right")?.value||""},h=z(D,d);if(h.length===0)throw new Error("Invalid page range specified.");const c={font:t,size:a,color:A(p.r,p.g,p.b)};for(const y of h){const i=e[y],{width:m,height:u}=i.getSize(),b=y+1,f=P=>P.replace(/{page}/g,String(b)).replace(/{total}/g,String(d)),o={headerLeft:f(s.headerLeft),headerCenter:f(s.headerCenter),headerRight:f(s.headerRight),footerLeft:f(s.footerLeft),footerCenter:f(s.footerCenter),footerRight:f(s.footerRight)};o.headerLeft&&i.drawText(o.headerLeft,{...c,x:n,y:u-n}),o.headerCenter&&i.drawText(o.headerCenter,{...c,x:m/2-t.widthOfTextAtSize(o.headerCenter,a)/2,y:u-n}),o.headerRight&&i.drawText(o.headerRight,{...c,x:m-n-t.widthOfTextAtSize(o.headerRight,a),y:u-n}),o.footerLeft&&i.drawText(o.footerLeft,{...c,x:n,y:n}),o.footerCenter&&i.drawText(o.footerCenter,{...c,x:m/2-t.widthOfTextAtSize(o.footerCenter,a)/2,y:n}),o.footerRight&&i.drawText(o.footerRight,{...c,x:m-n-t.widthOfTextAtSize(o.footerRight,a),y:n})}const C=await r.pdfDoc.save();k(new Blob([new Uint8Array(C)],{type:"application/pdf"}),"header-footer-added.pdf"),g("Success","Header & Footer added successfully!","success",()=>{I()})}catch(t){console.error(t),g("Error",t.message||"Could not add header or footer.")}finally{w()}}
