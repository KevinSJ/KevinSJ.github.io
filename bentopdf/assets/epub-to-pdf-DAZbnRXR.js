const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-DQhFtpFI.js","assets/main-Da82M_MD.js","assets/style-D1FQfXNQ.js","assets/style-D0-w46sZ.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as D,i as P}from"./style-D1FQfXNQ.js";import"./version-Dw8ZKLCV.js";import"./simple-mode-footer-D78rH_WB.js";import{s as t,a as u,b as p,m as T,n as F,d as C,h,_ as N,f as k}from"./main-Da82M_MD.js";import"./mobileMenu-BoMunYmR.js";const L="epub",S=[".epub"],b="EPUB";document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("file-input"),l=document.getElementById("drop-zone"),d=document.getElementById("process-btn"),f=document.getElementById("file-display-area"),v=document.getElementById("file-controls"),B=document.getElementById("add-more-btn"),w=document.getElementById("clear-files-btn"),x=document.getElementById("back-to-tools");x&&x.addEventListener("click",()=>{window.location.href="/"});const m=document.getElementById("convert-options"),g=async()=>{if(!(!f||!d||!v))if(t.files.length>0){f.innerHTML="";for(let e=0;e<t.files.length;e++){const s=t.files[e],o=document.createElement("div");o.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex flex-col overflow-hidden";const n=document.createElement("div");n.className="truncate font-medium text-gray-200 text-sm mb-1",n.textContent=s.name;const i=document.createElement("div");i.className="text-xs text-gray-400",i.textContent=k(s.size),a.append(n,i);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=()=>{t.files=t.files.filter((_,y)=>y!==e),g()},o.append(a,r),f.appendChild(o)}D({icons:P}),v.classList.remove("hidden"),m&&m.classList.remove("hidden"),d.disabled=!1}else f.innerHTML="",v.classList.add("hidden"),m&&m.classList.add("hidden"),d.disabled=!0},E=()=>{t.files=[],t.pdfDoc=null,g()},$=async()=>{try{if(t.files.length===0){u("No Files",`Please select at least one ${b} file.`);return}p("Loading engine...");const e=new T(F("pymupdf"));if(await e.load(),t.files.length===1){const s=t.files[0];p(`Converting ${s.name}...`);const o=await e.convertToPdf(s,{filetype:L}),a=s.name.replace(/\.[^.]+$/,"")+".pdf";C(o,a),h(),u("Conversion Complete",`Successfully converted ${s.name} to PDF.`,"success",()=>E())}else{p("Converting files...");const s=(await N(async()=>{const{default:n}=await import("./jszip.min-DQhFtpFI.js").then(i=>i.j);return{default:n}},__vite__mapDeps([0,1,2,3,4]))).default,o=new s;for(let n=0;n<t.files.length;n++){const i=t.files[n];p(`Converting ${n+1}/${t.files.length}: ${i.name}...`);const r=await e.convertToPdf(i,{filetype:L}),_=i.name.replace(/\.[^.]+$/,""),y=await r.arrayBuffer();o.file(`${_}.pdf`,y)}const a=await o.generateAsync({type:"blob"});C(a,`${L}-converted.zip`),h(),u("Conversion Complete",`Successfully converted ${t.files.length} ${b} file(s) to PDF.`,"success",()=>E())}}catch(e){console.error(`[${b}2PDF] ERROR:`,e),h(),u("Error",`An error occurred during conversion. Error: ${e.message}`)}},I=e=>{e&&e.length>0&&(t.files=[...t.files,...Array.from(e)],g())};c&&l&&(c.addEventListener("change",e=>{I(e.target.files)}),l.addEventListener("dragover",e=>{e.preventDefault(),l.classList.add("bg-gray-700")}),l.addEventListener("dragleave",e=>{e.preventDefault(),l.classList.remove("bg-gray-700")}),l.addEventListener("drop",e=>{e.preventDefault(),l.classList.remove("bg-gray-700");const s=e.dataTransfer?.files;if(s&&s.length>0){const o=Array.from(s).filter(a=>{const n=a.name.toLowerCase();return S.some(i=>n.endsWith(i))});if(o.length>0){const a=new DataTransfer;o.forEach(n=>a.items.add(n)),I(a.files)}}}),c.addEventListener("click",()=>{c.value=""})),B&&B.addEventListener("click",()=>{c.click()}),w&&w.addEventListener("click",()=>{E()}),d&&d.addEventListener("click",$)});
