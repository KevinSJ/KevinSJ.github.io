const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-DQhFtpFI.js","assets/main-Da82M_MD.js","assets/style-D1FQfXNQ.js","assets/style-D0-w46sZ.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as $,i as D}from"./style-D1FQfXNQ.js";import"./version-Dw8ZKLCV.js";import"./simple-mode-footer-D78rH_WB.js";import{s as t,a as m,b as u,m as T,n as P,d as _,h as E,_ as F,f as N}from"./main-Da82M_MD.js";import"./mobileMenu-BoMunYmR.js";const h="mobi",k=[".mobi"],L="MOBI";document.addEventListener("DOMContentLoaded",()=>{const d=document.getElementById("file-input"),l=document.getElementById("drop-zone"),r=document.getElementById("process-btn"),f=document.getElementById("file-display-area"),p=document.getElementById("file-controls"),b=document.getElementById("add-more-btn"),B=document.getElementById("clear-files-btn"),w=document.getElementById("back-to-tools");w&&w.addEventListener("click",()=>{window.location.href="/"});const v=async()=>{if(!(!f||!r||!p))if(t.files.length>0){f.innerHTML="";for(let e=0;e<t.files.length;e++){const s=t.files[e],o=document.createElement("div");o.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex flex-col overflow-hidden";const n=document.createElement("div");n.className="truncate font-medium text-gray-200 text-sm mb-1",n.textContent=s.name;const i=document.createElement("div");i.className="text-xs text-gray-400",i.textContent=N(s.size),a.append(n,i);const c=document.createElement("button");c.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",c.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',c.onclick=()=>{t.files=t.files.filter((I,y)=>y!==e),v()},o.append(a,c),f.appendChild(o)}$({icons:D}),p.classList.remove("hidden"),r.classList.remove("hidden"),r.disabled=!1}else f.innerHTML="",p.classList.add("hidden"),r.classList.add("hidden"),r.disabled=!0},g=()=>{t.files=[],t.pdfDoc=null,v()},C=async()=>{try{if(t.files.length===0){m("No Files",`Please select at least one ${L} file.`);return}u("Loading engine...");const e=new T(P("pymupdf"));if(await e.load(),t.files.length===1){const s=t.files[0];u(`Converting ${s.name}...`);const o=await e.convertToPdf(s,{filetype:h}),a=s.name.replace(/\.[^.]+$/,"")+".pdf";_(o,a),E(),m("Conversion Complete",`Successfully converted ${s.name} to PDF.`,"success",()=>g())}else{u("Converting files...");const s=(await F(async()=>{const{default:n}=await import("./jszip.min-DQhFtpFI.js").then(i=>i.j);return{default:n}},__vite__mapDeps([0,1,2,3,4]))).default,o=new s;for(let n=0;n<t.files.length;n++){const i=t.files[n];u(`Converting ${n+1}/${t.files.length}: ${i.name}...`);const c=await e.convertToPdf(i,{filetype:h}),I=i.name.replace(/\.[^.]+$/,""),y=await c.arrayBuffer();o.file(`${I}.pdf`,y)}const a=await o.generateAsync({type:"blob"});_(a,`${h}-converted.zip`),E(),m("Conversion Complete",`Successfully converted ${t.files.length} ${L} file(s) to PDF.`,"success",()=>g())}}catch(e){console.error(`[${L}2PDF] ERROR:`,e),E(),m("Error",`An error occurred during conversion. Error: ${e.message}`)}},x=e=>{e&&e.length>0&&(t.files=[...t.files,...Array.from(e)],v())};d&&l&&(d.addEventListener("change",e=>{x(e.target.files)}),l.addEventListener("dragover",e=>{e.preventDefault(),l.classList.add("bg-gray-700")}),l.addEventListener("dragleave",e=>{e.preventDefault(),l.classList.remove("bg-gray-700")}),l.addEventListener("drop",e=>{e.preventDefault(),l.classList.remove("bg-gray-700");const s=e.dataTransfer?.files;if(s&&s.length>0){const o=Array.from(s).filter(a=>{const n=a.name.toLowerCase();return k.some(i=>n.endsWith(i))});if(o.length>0){const a=new DataTransfer;o.forEach(n=>a.items.add(n)),x(a.files)}}}),d.addEventListener("click",()=>{d.value=""})),b&&b.addEventListener("click",()=>{d.click()}),B&&B.addEventListener("click",()=>{g()}),r&&r.addEventListener("click",C)});
