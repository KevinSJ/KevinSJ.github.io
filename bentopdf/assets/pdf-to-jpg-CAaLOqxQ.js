import{c as h,i as E}from"./style-CNx3HTbi.js";import"./version-D4ympJL5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-ODFatrFN.js";import{G as w,a as m,b as x,e as f,r as y,d as L,h as b,f as u}from"./main-Dqs2Ohqn.js";import{J as B}from"./jszip.min-DMkQATzN.js";import"./mobileMenu-BoMunYmR.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";w.workerSrc=new URL("/bentopdf/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();let d=[];const p=()=>{const n=document.getElementById("file-display-area"),t=document.getElementById("options-panel"),s=document.getElementById("drop-zone");!n||!t||!s||(n.innerHTML="",d.length>0?(t.classList.remove("hidden"),d.forEach(i=>{const l=document.createElement("div");l.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const o=document.createElement("div");o.className="flex flex-col overflow-hidden";const c=document.createElement("div");c.className="truncate font-medium text-gray-200 text-sm mb-1",c.textContent=i.name;const e=document.createElement("div");e.className="text-xs text-gray-400",e.textContent=`${u(i.size)} • Loading pages...`,o.append(c,e);const a=document.createElement("button");a.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",a.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',a.onclick=()=>{d=[],p()},l.append(o,a),n.appendChild(l),y(i).then(r=>f(r).promise).then(r=>{e.textContent=`${u(i.size)} • ${r.numPages} page${r.numPages!==1?"s":""}`}).catch(r=>{console.warn("Error loading PDF page count:",r),e.textContent=u(i.size)})}),h({icons:E})):t.classList.add("hidden"))},I=()=>{d=[];const n=document.getElementById("file-input");n&&(n.value="");const t=document.getElementById("jpg-quality"),s=document.getElementById("jpg-quality-value");t&&(t.value="0.9"),s&&(s.textContent="90%"),p()};async function P(){if(d.length===0){m("No File","Please upload a PDF file first.");return}x("Converting to JPG...");try{const n=await f(await y(d[0])).promise,t=new B,s=document.getElementById("jpg-quality"),i=s?parseFloat(s.value):.9;for(let o=1;o<=n.numPages;o++){const c=await n.getPage(o),e=c.getViewport({scale:2}),a=document.createElement("canvas"),r=a.getContext("2d");a.height=e.height,a.width=e.width,await c.render({canvasContext:r,viewport:e,canvas:a}).promise;const g=await new Promise(v=>a.toBlob(v,"image/jpeg",i));g&&t.file(`page_${o}.jpg`,g)}const l=await t.generateAsync({type:"blob"});L(l,"converted_images.zip"),m("Success","PDF converted to JPGs successfully!","success",()=>{I()})}catch(n){console.error(n),m("Error","Failed to convert PDF to JPG. The file might be corrupted.")}finally{b()}}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("file-input"),t=document.getElementById("drop-zone"),s=document.getElementById("process-btn"),i=document.getElementById("back-to-tools"),l=document.getElementById("jpg-quality"),o=document.getElementById("jpg-quality-value");i&&i.addEventListener("click",()=>{window.location.href="/bentopdf/"}),l&&o&&l.addEventListener("input",()=>{o.textContent=`${Math.round(parseFloat(l.value)*100)}%`});const c=e=>{if(!e||e.length===0)return;const a=Array.from(e).filter(r=>r.type==="application/pdf");if(a.length===0){m("Invalid File","Please upload a PDF file.");return}d=[a[0]],p()};n&&t&&(n.addEventListener("change",e=>{c(e.target.files)}),t.addEventListener("dragover",e=>{e.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",e=>{e.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",e=>{e.preventDefault(),t.classList.remove("bg-gray-700"),c(e.dataTransfer?.files??null)}),n.addEventListener("click",()=>{n.value=""})),s&&s.addEventListener("click",P)});
