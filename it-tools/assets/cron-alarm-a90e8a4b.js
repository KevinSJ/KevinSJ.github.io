import{d as J,a0 as K,am as S,bd as W,r as b,O as X,i as f,o as x,c as w,k as t,w as n,a as u,l as e,m as E,a6 as _,G as m,j as Z,a7 as V,a8 as ee,ad as te,s as ae,af as le,aj as oe,bq as ne}from"./index-0c1fde36.js";import{v as se}from"./vue3-flip-countdown.common-ea9a44f6.js";import{p as re}from"./parser-5ff11d21.js";import{h as $}from"./moment-55cb88ed.js";import{_ as ue}from"./TimePicker-2440af2b.js";import{_ as me}from"./FormItem-1b9a5952.js";import{_ as ie,a as ce}from"./Checkbox-ba7202eb.js";import{_ as _e}from"./Space-7fc52151.js";import{_ as de}from"./p-77eb774b.js";import{_ as pe}from"./Card-7ba5ce79.js";import{_ as fe}from"./Modal-045d7e50.js";import{_ as ve}from"./a-07fc27a5.js";import"./empty-d0adf2b0.js";import"./empty-c5f13335.js";import"./index-2f7cbd79.js";import"./defaultOptions-f1a3e221.js";import"./differenceInCalendarDays-31c28b0a.js";import"./addMonths-31c9456f.js";import"./FocusDetector-089b8822.js";import"./index-cbfaa337.js";import"./context-00991937.js";import"./get-slot-1efb97e5.js";const be={"max-w-600px":""},xe={"mb-1":"",flex:"","justify-center":""},ye={flex:"","justify-center":""},ge={flex:"","justify-center":""},he={"mb-2":"",flex:"","justify-center":""},ke={"mb-2":"",flex:"","justify-center":""},we={flex:"","justify-center":"","gap-1":""},B="0,1,2,3,4,5,6",Ee="YYYY-MM-DD HH:mm:ss",$e=J({__name:"cron-alarm",setup(je){const{t:l}=K(),d=S({tool:"cronalarm",name:"at",defaultValue:"17:30:00"}),v=S({tool:"cronalarm",name:"days",defaultValue:B}),p=W("cronalarm:hst",[]);function N(o,a){const i=new URL(window.location.href);return i.searchParams.set("at",o),i.searchParams.set("days",a),i.toString()}const r=b("stopped"),y=b(null);X(()=>{r.value==="ended"&&y.value?.play()});const U=b($()),g=f({get(){return(v.value||B).split(",").map(o=>o.trim())},set(o){v.value=o.join(",")}}),Y=f(()=>{const[o,a,i]=d.value.split(":");return`${i} ${a} ${o} * * ${v.value}`}),j=f(()=>re.parseExpression(Y.value).next().toDate()),H=f(()=>$(j.value).format(Ee));function P(){U.value=$(),r.value="running";const o={at:d.value,days:v.value};p.value.find(a=>a.at===o.at&&a.days===o.days)||(p.value=[o,...p.value])}function C(){r.value="stopped",y.value?.pause()}function T(){r.value==="running"&&(r.value="ended"),document.fullscreenElement&&document.exitFullscreen?.()}const D=b();function q(){const o=D.value;o&&(document.fullscreenElement?document.exitFullscreen?.():o?.requestFullscreen())}const h=f(()=>r.value==="ended");return(o,a)=>{const i=ue,I=me,c=ie,L=_e,M=ce,k=ae,A=le,R=de,z=oe,G=pe,O=fe,Q=ve;return x(),w("div",be,[t(A,{disabled:e(r)!=="stopped",title:e(l)("tools.cron-alarm.texts.title-alarm"),"mb-4":""},{default:n(()=>[u("div",xe,[t(I,{label:e(l)("tools.cron-alarm.texts.label-alarm-at"),"label-placement":"left"},{default:n(()=>[t(i,{"formatted-value":e(d),"onUpdate:formattedValue":a[0]||(a[0]=s=>E(d)?d.value=s:null)},null,8,["formatted-value"])]),_:1},8,["label"])]),u("div",ye,[t(M,{value:e(g),"onUpdate:value":a[1]||(a[1]=s=>E(g)?g.value=s:null)},{default:n(()=>[t(L,{"item-style":"display: flex;"},{default:n(()=>[t(c,{value:"1",label:e(l)("tools.cron-alarm.texts.label-monday")},null,8,["label"]),t(c,{value:"2",label:e(l)("tools.cron-alarm.texts.label-tuesday")},null,8,["label"]),t(c,{value:"3",label:e(l)("tools.cron-alarm.texts.label-wednesday")},null,8,["label"]),t(c,{value:"4",label:e(l)("tools.cron-alarm.texts.label-thursday")},null,8,["label"]),t(c,{value:"5",label:e(l)("tools.cron-alarm.texts.label-friday")},null,8,["label"]),t(c,{value:"6",label:e(l)("tools.cron-alarm.texts.label-saturday")},null,8,["label"]),t(c,{value:"0",label:e(l)("tools.cron-alarm.texts.label-sunday")},null,8,["label"])]),_:1})]),_:1},8,["value"])]),u("div",ge,[t(k,{onClick:P},{default:n(()=>[_(m(e(l)("tools.cron-alarm.texts.tag-start")),1)]),_:1})])]),_:1},8,["disabled","title"]),u("div",{id:"fullScreenElement",ref_key:"fullScreenElement",ref:D,"mb-2":""},[u("div",null,[t(e(se.Countdown),{deadline:e(H),stop:e(r)!=="running","mb-2":"",onTimeElapsed:a[2]||(a[2]=s=>T())},null,8,["deadline","stop"]),u("div",he,[t(k,{disabled:e(r)==="stopped",onClick:q},{default:n(()=>[_(m(e(l)("tools.cron-alarm.texts.tag-toggle-fullscreen")),1)]),_:1},8,["disabled"])])])],512),u("div",ke,[t(k,{disabled:e(r)==="stopped",onClick:C},{default:n(()=>[_(m(e(l)("tools.cron-alarm.texts.tag-stop")),1)]),_:1},8,["disabled"])]),t(R,{align:"center"},{default:n(()=>[_(" Next alarm at: "+m(e(j)),1)]),_:1}),t(O,{show:e(h),"onUpdate:show":a[4]||(a[4]=s=>E(h)?h.value=s:null),"mask-closable":"false"},{default:n(()=>[t(G,{style:{width:"600px"},title:e(l)("tools.cron-alarm.texts.title-timer-finished"),bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:n(()=>[t(z,{onClick:a[3]||(a[3]=s=>C())},{default:n(()=>[_(m(e(l)("tools.cron-alarm.texts.tag-ok")),1)]),_:1})]),default:n(()=>[u("p",null,m(e(l)("tools.cron-alarm.texts.tag-timer-elapsed")),1)]),_:1},8,["title"])]),_:1},8,["show"]),e(p)?(x(),Z(A,{key:0,title:e(l)("tools.cron-alarm.texts.title-history")},{default:n(()=>[u("div",we,[(x(!0),w(V,null,ee(e(p),(s,F)=>(x(),w(V,{key:F},[_(m(F>0?" / ":"")+" ",1),t(Q,{href:N(s.at,s.days)},{default:n(()=>[_(" At: "+m(s.at)+" ; Days: "+m(s.days||"*"),1)]),_:2},1032,["href"])],64))),128))])]),_:1},8,["title"])):te("",!0),u("audio",{ref_key:"audio",ref:y,loop:"",src:"/Beep.mp3"},null,512)])}}});const Je=ne($e,[["__scopeId","data-v-636aa4f2"]]);export{Je as default};
