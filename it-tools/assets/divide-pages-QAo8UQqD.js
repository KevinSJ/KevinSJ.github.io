import{c as L,i as I}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{a as g,f as P,b as m,P as w,h as y,q as x,d as b}from"./main-CdZmBCMR.js";import"./mobileMenu-BoMunYmR.js";const t={file:null,pdfDoc:null,totalPages:0};function v(){t.file=null,t.pdfDoc=null,t.totalPages=0;const o=document.getElementById("file-display-area");o&&(o.innerHTML="");const e=document.getElementById("tool-options");e&&e.classList.add("hidden");const c=document.getElementById("file-input");c&&(c.value="");const s=document.getElementById("split-type");s&&(s.value="vertical");const a=document.getElementById("page-range");a&&(a.value="")}async function C(){const o=document.getElementById("file-display-area"),e=document.getElementById("tool-options");if(o)if(o.innerHTML="",t.file){const c=document.createElement("div");c.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const s=document.createElement("div");s.className="flex flex-col overflow-hidden";const a=document.createElement("div");a.className="truncate font-medium text-gray-200 text-sm mb-1",a.textContent=t.file.name;const n=document.createElement("div");n.className="text-xs text-gray-400",n.textContent=`${P(t.file.size)} • Loading...`,s.append(a,n);const i=document.createElement("button");i.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",i.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',i.onclick=function(){v()},c.append(s,i),o.appendChild(c),L({icons:I});try{m("Loading PDF...");const l=await t.file.arrayBuffer();t.pdfDoc=await w.load(l,{ignoreEncryption:!0,throwOnInvalidObject:!1}),t.totalPages=t.pdfDoc.getPageCount(),y(),n.textContent=`${P(t.file.size)} • ${t.totalPages} pages`,e&&e.classList.remove("hidden")}catch(l){console.error("Error loading PDF:",l),y(),g("Error","Failed to load PDF file."),v()}}else e&&e.classList.add("hidden")}async function S(){if(!t.pdfDoc||!t.file){g("Error","Please upload a PDF first.");return}const e=document.getElementById("page-range")?.value.trim().toLowerCase()||"",s=document.getElementById("split-type").value;let a;if(e===""||e==="all")a=new Set(Array.from({length:t.totalPages},(n,i)=>i+1));else{const n=x(e,t.totalPages);if(a=new Set(n.map(i=>i+1)),a.size===0){g("Invalid Range","Please enter a valid page range (e.g., 1-5, 8, 11-13).");return}}m("Splitting PDF pages...");try{const n=await w.create(),i=t.pdfDoc.getPages();for(let r=0;r<i.length;r++){const h=r+1,B=i[r],{width:d,height:p}=B.getSize();if(m(`Processing page ${h} of ${i.length}...`),a.has(h)){const[f]=await n.copyPages(t.pdfDoc,[r]),[u]=await n.copyPages(t.pdfDoc,[r]);switch(s){case"vertical":f.setCropBox(0,0,d/2,p),u.setCropBox(d/2,0,d/2,p);break;case"horizontal":f.setCropBox(0,p/2,d,p/2),u.setCropBox(0,0,d,p/2);break}n.addPage(f),n.addPage(u)}else{const[f]=await n.copyPages(t.pdfDoc,[r]);n.addPage(f)}}const l=await n.save(),D=t.file.name.replace(/\.pdf$/i,"");b(new Blob([new Uint8Array(l)],{type:"application/pdf"}),`${D}_divided.pdf`),g("Success","Pages have been divided successfully!","success",function(){v()})}catch(n){console.error(n),g("Error","An error occurred while dividing the PDF.")}finally{y()}}function E(o){if(o&&o.length>0){const e=o[0];(e.type==="application/pdf"||e.name.toLowerCase().endsWith(".pdf"))&&(t.file=e,C())}}document.addEventListener("DOMContentLoaded",function(){const o=document.getElementById("file-input"),e=document.getElementById("drop-zone"),c=document.getElementById("process-btn"),s=document.getElementById("back-to-tools");s&&s.addEventListener("click",function(){window.location.href="/itools/"}),o&&e&&(o.addEventListener("change",function(a){E(a.target.files)}),e.addEventListener("dragover",function(a){a.preventDefault(),e.classList.add("bg-gray-700")}),e.addEventListener("dragleave",function(a){a.preventDefault(),e.classList.remove("bg-gray-700")}),e.addEventListener("drop",function(a){a.preventDefault(),e.classList.remove("bg-gray-700");const n=a.dataTransfer?.files;if(n&&n.length>0){const i=Array.from(n).filter(function(l){return l.type==="application/pdf"||l.name.toLowerCase().endsWith(".pdf")});if(i.length>0){const l=new DataTransfer;l.items.add(i[0]),E(l.files)}}}),o.addEventListener("click",function(){o.value=""})),c&&c.addEventListener("click",S)});
