import{_ as W}from"./TextareaCopyable-59231e95.js";import{d as z,a0 as E,r as i,ac as C,o as p,j as _,w as c,k as l,l as t,m as d,ad as b,a as H,a6 as U,G as V,aW as J,x as K,af as M,aj as Y,ag as Z}from"./index-0c1fde36.js";import{u as N,w as tt}from"./xlsx-5c2e05c6.js";import{c as et}from"./csv-to-json.service-b4fa508d.js";import{o as ot}from"./objectarray.export-a35a6164.js";import{_ as lt}from"./Radio-424d9905.js";import{_ as at}from"./Space-7fc52151.js";import{_ as nt}from"./RadioGroup-1850ca84.js";import{_ as st}from"./Checkbox-ba7202eb.js";import{_ as S}from"./FormItem-1b9a5952.js";import{_ as ct}from"./Select-9917c364.js";import{_ as ut}from"./Card-7ba5ce79.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./index-4d6d007b.js";import"./index-84e3bf78.js";import"./public-api-a830925a.js";import"./index-32bbd1ee.js";import"./sax-dae1c632.js";import"./index-fdbe2ce9.js";import"./string_decoder-8ac4312e.js";import"./index-649b5bab.js";import"./inherits_browser-6f38ab1b.js";import"./index-0397ab6f.js";import"./index-ceeeeaf1.js";import"./merge-53ce9f8a.js";import"./isPlainObject-1c699aec.js";import"./get-slot-1efb97e5.js";import"./context-00991937.js";import"./Tag-e75b8dae.js";import"./FocusDetector-089b8822.js";import"./VirtualList-8140ffff.js";import"./Empty-ca426d71.js";import"./index-cbfaa337.js";const rt={"mt-3":"",flex:"","justify-center":""},Kt=z({__name:"csv-to-data",setup(mt){const{t:e}=E(),r=i("file"),v=i(""),w=i(),x=i(""),g=i(""),m=C({name:"fmt",storageName:"csv-to-data:fmt",defaultValue:"json"}),f=C({name:"table",storageName:"csv-to-data:tbl",defaultValue:"TableName"}),y=i(!1),k=i(!1),T=[{label:e("tools.csv-to-data.texts.label-json"),value:"json"},{label:e("tools.csv-to-data.texts.label-yaml"),value:"yaml"},{label:e("tools.csv-to-data.texts.label-sql-insert"),value:"sql"},{label:e("tools.csv-to-data.texts.label-csv-comma"),value:"csv"},{label:e("tools.csv-to-data.texts.label-csv-semicolon"),value:"csv_semicolon"},{label:e("tools.csv-to-data.texts.label-csv-tab"),value:"tsv"},{label:e("tools.csv-to-data.texts.label-markdown"),value:"markdown"},{label:e("tools.csv-to-data.texts.label-xml"),value:"xml"},{label:e("tools.csv-to-data.texts.label-xlsx"),value:"xlsx"}];async function A(u){u&&(w.value=u)}function B(u){return new Promise((o,n)=>{const a=new FileReader;a.onload=()=>{o(a.result||"")},a.onerror=n,a.readAsText(u)})}async function q(){let u=v.value;const o=w.value;x.value="";try{r.value==="file"&&o&&(u=await B(o));const n=et(u,k.value),a=m.value;a==="xlsx"?(g.value="",D(n,f.value)):g.value=ot(n,a,{tableName:f.value,nestify:y.value})}catch(n){return x.value=n.toString(),null}}function D(u,o="data"){const n=N.json_to_sheet(u),a=N.book_new();N.book_append_sheet(a,n,o),tt(a,`${o}.xlsx`)}return(u,o)=>{const n=lt,a=at,I=nt,P=J,j=K,h=M,$=st,F=S,R=ct,X=S,G=Y,L=Z,O=W,Q=ut;return p(),_(Q,{title:t(e)("tools.csv-to-data.texts.title-csv-converter")},{default:c(()=>[l(h,null,{default:c(()=>[l(I,{value:t(r),"onUpdate:value":o[0]||(o[0]=s=>d(r)?r.value=s:null),name:"radiogroup","mb-2":"",flex:"","justify-center":""},{default:c(()=>[l(a,null,{default:c(()=>[l(n,{value:"file",label:t(e)("tools.csv-to-data.texts.label-file")},null,8,["label"]),l(n,{value:"content",label:t(e)("tools.csv-to-data.texts.label-content")},null,8,["label"])]),_:1})]),_:1},8,["value"]),t(r)==="file"?(p(),_(P,{key:0,accept:".csv,.tsv",title:t(e)("tools.csv-to-data.texts.title-drag-and-drop-a-csv-file-here-or-click-to-select-a-file"),onFileUpload:A},null,8,["title"])):b("",!0),t(r)==="content"?(p(),_(j,{key:1,value:t(v),"onUpdate:value":o[1]||(o[1]=s=>d(v)?v.value=s:null),label:t(e)("tools.csv-to-data.texts.label-paste-your-csv-content"),placeholder:t(e)("tools.csv-to-data.texts.placeholder-your-csv"),multiline:"",rows:"8","data-test-id":"input"},null,8,["value","label","placeholder"])):b("",!0)]),_:1}),l(a,{justify:"center"},{default:c(()=>[l(F,{label:t(e)("tools.csv-to-data.texts.label-typed-values"),"label-placement":"left"},{default:c(()=>[l($,{checked:t(k),"onUpdate:checked":o[2]||(o[2]=s=>d(k)?k.value=s:null)},null,8,["checked"])]),_:1},8,["label"]),l(F,{label:t(e)("tools.csv-to-data.texts.label-nestify-a-b-c-to-nested-objects"),"label-placement":"left"},{default:c(()=>[l($,{checked:t(y),"onUpdate:checked":o[3]||(o[3]=s=>d(y)?y.value=s:null)},null,8,["checked"])]),_:1},8,["label"])]),_:1}),l(X,{label:t(e)("tools.csv-to-data.texts.label-select-output-format"),"label-placement":"left"},{default:c(()=>[l(R,{value:t(m),"onUpdate:value":o[4]||(o[4]=s=>d(m)?m.value=s:null),options:T,placeholder:t(e)("tools.csv-to-data.texts.placeholder-select-format")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(m)==="sql"?(p(),_(j,{key:0,value:t(f),"onUpdate:value":o[5]||(o[5]=s=>d(f)?f.value=s:null),label:t(e)("tools.csv-to-data.texts.label-table-name"),"label-placement":"left"},null,8,["value","label"])):b("",!0),H("div",rt,[l(G,{disabled:!(t(r)==="file"&&t(w)||t(v)),onClick:q},{default:c(()=>[U(V(t(e)("tools.csv-to-data.texts.tag-convert")),1)]),_:1},8,["disabled"])]),t(x)?(p(),_(L,{key:1},{default:c(()=>[U(V(t(x)),1)]),_:1})):b("",!0),t(g)?(p(),_(h,{key:2,title:t(e)("tools.csv-to-data.texts.title-converted-data")},{default:c(()=>[l(O,{value:t(g),language:t(m),"download-file-name":`output.${t(m)}`},null,8,["value","language","download-file-name"])]),_:1},8,["title"])):b("",!0)]),_:1},8,["title"])}}});export{Kt as default};
