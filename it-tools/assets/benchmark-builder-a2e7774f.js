import{d as j,o as v,c as b,a as f,P as O,_ as A,a0 as R,cM as E,e as W,a7 as T,a8 as I,k as t,l as e,cb as q,ai as F,w as _,a6 as $,G as y,b$ as G,b3 as L,s as P,v as H,al as z,i as J,f as Q,m as X,x as Y,cN as Z,j as ee,ad as te,af as ne}from"./index-0c1fde36.js";import{_ as oe}from"./Scrollbar-54724e22.js";import{_ as ae}from"./Divider-5fc425b0.js";import{_ as se}from"./FormItem-1b9a5952.js";import"./context-00991937.js";const le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},re=f("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[f("path",{d:"M12 5v14"}),f("path",{d:"M5 12h14"})],-1),ce=[re],D=j({name:"Plus",render:function(o,s){return v(),b("svg",le,ce)}}),ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ie=O('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),pe=[ie],K=j({name:"Trash",render:function(o,s){return v(),b("svg",ue,pe)}});function N({data:a}){return a.length===0?0:A.sum(a)/a.length}function de({data:a}){const o=N({data:a}),s=a.map(p=>(p-o)**2);return N({data:s})}function _e({data:a,headerMap:o={}}){if(!Array.isArray(a)||a.length===0)return"";const s=Object.keys(a[0]),p=a.map(c=>Object.values(c)),m=`| ${s.map(c=>o[c]??c).join(" | ")} |`,r=`| ${s.map(()=>"---").join(" | ")} |`,k=p.map(c=>`| ${c.join(" | ")} |`).join(`
`);return`${m}
${r}
${k}`}const me=j({__name:"dynamic-values",props:{values:{}},emits:["update:values"],setup(a,{emit:o}){const s=a,{t:p}=R(),m=E(),r=W(s,"values",o);async function k(){r.value.push(null),await G(),m.value.at(-1)?.focus()}function c(M){if(M===r.value.length-1){k();return}m.value.at(M+1)?.focus()}return(M,U)=>{const l=L,n=P,u=H;return v(),b("div",null,[(v(!0),b(T,null,I(e(r),(x,i)=>(v(),b("div",{key:i,"mb-2":"",flex:"","flex-nowrap":"","gap-2":""},[t(e(F),{ref_for:!0,ref:e(m).set,value:e(r)[i],"onUpdate:value":g=>e(r)[i]=g,"show-button":!1,placeholder:e(p)("tools.benchmark-builder.texts.placeholder-set-your-measure"),autofocus:"",onKeydown:q(g=>c(i),["enter"])},null,8,["value","onUpdate:value","placeholder","onKeydown"]),t(u,{tooltip:"Delete this value"},{default:_(()=>[t(n,{circle:"",variant:"text",onClick:g=>e(r).splice(i,1)},{default:_(()=>[t(l,{component:e(K),depth:"3",size:"18"},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),t(n,{onClick:k},{default:_(()=>[t(l,{component:e(D),depth:"3","mr-2":"",size:"18"},null,8,["component"]),$(y(e(p)("tools.benchmark-builder.texts.tag-add-a-measure")),1)]),_:1})])}}}),he={"mb-5":"",flex:"","flex-1":"","flex-nowrap":"","justify-center":"","gap-12px":""},fe={flex:"","justify-center":""},ve={style:{flex:"0 0 100%"}},be={style:{"max-width":"600px",margin:"0 auto"}},ke={"mx-auto":"","max-w-sm":"",flex:"","justify-center":"","gap-3":""},xe={"mt-5":"",flex:"","justify-center":"","gap-3":""},Ce=j({__name:"benchmark-builder",setup(a){const{t:o}=R(),s=z("benchmark-builder:suites",[{title:"Suite 1",data:[5,10]},{title:"Suite 2",data:[8,12]}]),p=z("benchmark-builder:unit",""),m=l=>Math.round(l*1e3)/1e3,r=J(()=>s.value.map(({data:l,title:n})=>{const u=l.filter(A.isNumber);return{title:n,size:u.length,mean:N({data:u}),variance:de({data:u})}}).sort((l,n)=>l.mean-n.mean).map(({mean:l,variance:n,size:u,title:x},i,g)=>{const w=p.value.trim(),h=g[0].mean,V=l-h,S=h===0?"∞":m(l/h),d=i!==0&&h!==l?` (+${m(V)}${w} ; x${S})`:"";return{position:i+1,title:x,mean:`${m(l)}${w}${d}`,variance:`${m(n)}${w}${w?"²":""}`,size:u}})),{copy:k}=Q({createToast:!1}),c={position:"Position",title:"Suite",size:"Samples",mean:"Mean",variance:"Variance"};function M(){k(_e({data:r.value,headerMap:c}))}function U(){const l=r.value.flatMap(({title:n,...u})=>[` - ${n}`,...Object.entries(u).map(([x,i])=>`    - ${c[x]??x}: ${i}`)]).join(`
`);k(l)}return(l,n)=>{const u=Y,x=ae,i=se,g=ne,w=L,h=P,V=oe,S=Z;return v(),b(T,null,[t(V,{style:{flex:"1"},"x-scrollable":""},{default:_(()=>[f("div",he,[(v(!0),b(T,null,I(e(s),(d,B)=>(v(),b("div",{key:B},[t(g,{style:{width:"294px"}},{default:_(()=>[t(u,{value:d.title,"onUpdate:value":C=>d.title=C,"label-position":"left",label:e(o)("tools.benchmark-builder.texts.label-suite-name"),placeholder:e(o)("tools.benchmark-builder.texts.placeholder-suite-name"),clearable:""},null,8,["value","onUpdate:value","label","placeholder"]),t(x),t(i,{label:e(o)("tools.benchmark-builder.texts.label-suite-values"),"show-feedback":!1},{default:_(()=>[t(me,{values:d.data,"onUpdate:values":C=>d.data=C},null,8,["values","onUpdate:values"])]),_:2},1032,["label"])]),_:2},1024),f("div",fe,[e(s).length>1?(v(),ee(h,{key:0,variant:"text",onClick:C=>e(s).splice(B,1)},{default:_(()=>[t(w,{component:e(K),depth:"3","mr-2":"",size:"18"},null,8,["component"]),$(y(e(o)("tools.benchmark-builder.texts.tag-delete-suite")),1)]),_:2},1032,["onClick"])):te("",!0),t(h,{variant:"text",onClick:C=>e(s).splice(B+1,0,{data:[0],title:`Suite ${e(s).length+1}`})},{default:_(()=>[t(w,{component:e(D),depth:"3","mr-2":"",size:"18"},null,8,["component"]),$(y(e(o)("tools.benchmark-builder.texts.tag-add-suite")),1)]),_:2},1032,["onClick"])])]))),128))])]),_:1}),f("div",ve,[f("div",be,[f("div",ke,[t(u,{value:e(p),"onUpdate:value":n[0]||(n[0]=d=>X(p)?p.value=d:null),placeholder:e(o)("tools.benchmark-builder.texts.placeholder-unit-eg-ms"),label:e(o)("tools.benchmark-builder.texts.label-unit"),"label-position":"left","mb-4":""},null,8,["value","placeholder","label"]),t(h,{onClick:n[1]||(n[1]=d=>s.value=[{title:"Suite 1",data:[]},{title:"Suite 2",data:[]}])},{default:_(()=>[$(y(e(o)("tools.benchmark-builder.texts.tag-reset-suites")),1)]),_:1})]),t(S,{data:e(r),headers:c},null,8,["data"]),f("div",xe,[t(h,{onClick:n[2]||(n[2]=d=>M())},{default:_(()=>[$(y(e(o)("tools.benchmark-builder.texts.tag-copy-as-markdown-table")),1)]),_:1}),t(h,{onClick:n[3]||(n[3]=d=>U())},{default:_(()=>[$(y(e(o)("tools.benchmark-builder.texts.tag-copy-as-bullet-list")),1)]),_:1})])])])],64)}}});export{Ce as default};
