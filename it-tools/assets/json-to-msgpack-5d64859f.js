import{d as N,a0 as $,r as c,R as P,aX as k,o as v,c as S,k as i,l as t,m as j,a as x,w as d,a6 as g,G as f,j as w,ad as y,x as T,aj as E,s as I,af as O,ag as D}from"./index-0c1fde36.js";import{_ as G}from"./TextareaCopyable-59231e95.js";import{p as H}from"./pack-bffcc79b.js";import"./index-a6f01dde.js";import"./base64-ae7cf34b.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";const M={"mb-2":"",flex:"","justify-center":""},X={flex:"","justify-center":""},et=N({__name:"json-to-msgpack",setup(q){const{t:n}=$(),s=c(""),p=c(""),r=c(""),b=P({source:s,rules:[{validator:a=>k.parse(a),message:n("tools.json-to-msgpack.texts.message-json-is-invalid")}]}),u=c(""),_=c(null);function R(){r.value="",u.value="";try{_.value=H(k.parse(s.value)),u.value=_.value.toString("hex")}catch(a){r.value=a.toString()}}function U(a,e){const o=document.createElement("a");o.href=a,o.download=e,document.body.appendChild(o),o.style.display="none",o.click(),o.remove()}function V(a,e){const o=new Blob([a],{type:"application/octet-stream"}),m=window.URL.createObjectURL(o);U(m,e),setTimeout(()=>window.URL.revokeObjectURL(m),1e3)}return(a,e)=>{const o=T,m=E,h=G,B=I,C=O,L=D;return v(),S("div",null,[i(o,{value:t(p),"onUpdate:value":e[0]||(e[0]=l=>j(p)?p.value=l:null),label:t(n)("tools.json-to-msgpack.texts.label-output-filename"),"label-position":"left",placeholder:t(n)("tools.json-to-msgpack.texts.placeholder-enter-output-filename"),"mb-2":""},null,8,["value","label","placeholder"]),i(o,{value:t(s),"onUpdate:value":e[1]||(e[1]=l=>j(s)?s.value=l:null),label:t(n)("tools.json-to-msgpack.texts.label-json-to-convert"),multiline:"",placeholder:t(n)("tools.json-to-msgpack.texts.placeholder-enter-json-to-convert"),validation:t(b),rows:"5","mb-2":""},null,8,["value","label","placeholder","validation"]),x("div",M,[i(m,{onClick:e[2]||(e[2]=l=>R())},{default:d(()=>[g(f(t(n)("tools.json-to-msgpack.texts.tag-convert")),1)]),_:1})]),t(u)?(v(),w(C,{key:0,title:t(n)("tools.json-to-msgpack.texts.title-msgpack-binary")},{default:d(()=>[i(h,{value:t(u),"mb-3":""},null,8,["value"]),x("div",X,[i(B,{disabled:t(s)===""||!t(b).isValid,onClick:e[3]||(e[3]=l=>V(t(_),t(p)))},{default:d(()=>[g(f(t(n)("tools.json-to-msgpack.texts.tag-download-msgpack-file")),1)]),_:1},8,["disabled"])])]),_:1},8,["title"])):y("",!0),t(r)?(v(),w(L,{key:1},{default:d(()=>[g(f(t(r)),1)]),_:1})):y("",!0)])}}});export{et as default};
