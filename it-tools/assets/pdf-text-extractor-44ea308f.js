import{b7 as S,d as J,a0 as L,bm as N,r as u,o as v,c as O,a as p,k as c,l as e,w as b,m as R,a6 as k,G as D,j as y,ad as w,aW as M,s as W,ag as G,af as z}from"./index-0c1fde36.js";import{_ as q}from"./TextareaCopyable-59231e95.js";import{_ as H}from"./InputCopyable.vue_vue_type_script_setup_true_lang-294ac243.js";import{_ as K,p as Q}from"./pdf.worker-72a2c238.js";import{_ as X}from"./Checkbox-ba7202eb.js";import{_ as Y}from"./FormItem-1b9a5952.js";import{_ as Z}from"./Spin-885f2a22.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./context-00991937.js";let m;globalThis.process?.release?.name;async function F(t,o={}){const{getDocument:r}=await tt();return await r({data:t,isEvalSupported:!1,useSystemFonts:!0,...o}).promise}async function tt(){return m||await P(),m}async function P(t,{reload:o=!1}={}){if(!(m&&!o)){if(t)try{m=await ot(t());return}catch(r){throw new Error(`PDF.js could not be resolved: ${r}`)}try{m=await S(()=>import("unpdf/pdfjs"),[])}catch(r){throw new Error(`Serverless PDF.js bundle could not be resolved: ${r}`)}}}function et(t){return typeof t=="object"&&t!==null&&"_pdfInfo"in t}async function ot(t){const o=await t;return o.default||o}async function at(t,o={}){const{mergePages:r=!1}=o,a=et(t)?t:await F(t),n=await Promise.all(Array.from({length:a.numPages},(l,_)=>nt(a,_+1)));return{totalPages:a.numPages,text:r?n.join(`
`).replace(/\s+/g," "):n}}async function nt(t,o){return(await(await t.getPage(o)).getTextContent()).items.filter(n=>n.str!=null).map(n=>n.str+(n.hasEOL?`
`:"")).join("")}async function rt(t){await P(t,{reload:!0})}const st=async(...t)=>(await P(),await at(...t)),lt={style:{flex:"0 0 100%"},"mb-1":""},ct={"mx-auto":"","max-w-600px":""},it={flex:"","justify-center":""},ut={flex:"","justify-center":""},_t={"mb-1":"","mt-3":"",flex:"","justify-center":""},Ft=J({__name:"pdf-text-extractor",async setup(t){let o,r;const{t:a}=L();K.workerSrc=Q,[o,r]=N(()=>rt(()=>S(()=>import("./pdf.worker-72a2c238.js").then(s=>s.b),["assets/pdf.worker-72a2c238.js","assets/index-0c1fde36.js","assets/index-290a8ba3.css","assets/index-a6f01dde.js"]))),await o,r();const n=u("idle"),l=u(null),_=u(0),f=u(""),d=u(""),x=u(!1);function j(s){l.value=s,_.value=0,f.value=""}async function E(){if(l.value){n.value="idle",d.value="";try{n.value="processing";const s=await l.value.arrayBuffer(),g=await F(new Uint8Array(s)),i=await st(g,{mergePages:x.value});_.value=i.totalPages,f.value=Array.isArray(i.text)?i.text.join(`
`):i.text,n.value="done"}catch(s){d.value=s.toString(),n.value="error"}}}return(s,g)=>{const i=M,T=X,$=Y,A=W,B=G,C=Z,h=H,V=q,I=z;return v(),O("div",null,[p("div",lt,[p("div",ct,[c(i,{title:e(a)("tools.pdf-text-extractor.texts.title-drag-and-drop-a-pdf-file-here-or-click-to-select-a-file"),accept:".pdf",onFileUpload:j},null,8,["title"])])]),p("div",it,[c($,{label:e(a)("tools.pdf-text-extractor.texts.label-merge-pages"),"label-placement":"left"},{default:b(()=>[c(T,{checked:e(x),"onUpdate:checked":g[0]||(g[0]=U=>R(x)?x.value=U:null)},null,8,["checked"])]),_:1},8,["label"])]),p("div",ut,[c(A,{"mb-1":"",disabled:!e(l),onClick:E},{default:b(()=>[k(D(e(a)("tools.pdf-text-extractor.texts.tag-extract-text")),1)]),_:1},8,["disabled"])]),p("div",_t,[e(d)?(v(),y(B,{key:0,type:"error"},{default:b(()=>[k(D(e(d)),1)]),_:1})):w("",!0),e(n)==="processing"?(v(),y(C,{key:1,size:"small"})):w("",!0)]),e(l)&&e(f)?(v(),y(I,{key:0,title:e(a)("tools.pdf-text-extractor.texts.title-output")},{default:b(()=>[c(h,{label:e(a)("tools.pdf-text-extractor.texts.label-file-name"),value:e(l)?.name,"mb-1":""},null,8,["label","value"]),c(V,{label:e(a)("tools.pdf-text-extractor.texts.label-text"),value:e(f),"mb-1":"","download-file-name":"output.txt"},null,8,["label","value"]),c(h,{label:e(a)("tools.pdf-text-extractor.texts.label-total-pages"),value:e(_).toString(),"mb-1":""},null,8,["label","value"])]),_:1},8,["title"])):w("",!0)])}}});export{Ft as default};
