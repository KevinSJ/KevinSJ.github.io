import{d as G,a0 as H,ac as m,r as E,o as i,c as P,k as n,w as s,l as e,m as c,a6 as U,G as v,ad as _,j as w,a as S,x as R,ae as $,af as I,s as J,ag as L}from"./index-0c1fde36.js";import{_ as j}from"./TextareaCopyable-59231e95.js";import{_ as z}from"./DynamicInput-1857fb62.js";import{_ as K}from"./Spin-885f2a22.js";import{_ as Q}from"./Checkbox-ba7202eb.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./ArrowDown-6fbf6d78.js";const F={key:0,"w-100":"",flex:"","justify-center":"","gap-2":""},M={key:0,"w-100":"",flex:"","justify-center":"","gap-2":""},W={"mt-5":"",flex:"","justify-center":""},ce=G({__name:"api-tester",setup(X){const{t:a}=H(),y=m({name:"url",storageName:"api-tester:url",defaultValue:""}),u=m({name:"method",storageName:"api-tester:m",defaultValue:"POST"}),f=m({name:"params",storageName:"api-tester:params",defaultValue:[]}),x=m({name:"headers",storageName:"api-tester:headers",defaultValue:[]}),h=m({name:"ct",storageName:"api-tester:ct",defaultValue:"application/json"}),b=m({name:"body",storageName:"api-tester:body",defaultValue:""}),g=E(!1),r=E(),N=E(!1);async function O(){const T=new URL(y.value);for(const l of f.value)l.key&&T.searchParams.append(l.key,l.value||"");const o=[];for(const l of x.value)l.key&&o.push([l.key,l.value||""]);o.push(["Content-Type",h.value||""]);try{const l=await fetch(T,{method:u.value,headers:o,body:u.value==="GET"||u.value==="HEAD"?null:b.value,mode:g.value?"no-cors":"cors"});let d=await l.text();try{d=JSON.stringify(JSON.parse(d),null,2)}catch{}r.value={code:l.status,error:"",result:d}}catch(l){r.value={code:-1,error:l.toString(),result:null}}}function C(){return{key:"",value:""}}return(T,o)=>{const l=R,d=$,V=z,k=I,q=Q,A=J,B=K,D=L;return i(),P("div",null,[n(k,{title:e(a)("tools.api-tester.texts.title-api-calling")},{default:s(()=>[n(l,{value:e(y),"onUpdate:value":o[0]||(o[0]=t=>c(y)?y.value=t:null),label:e(a)("tools.api-tester.texts.label-base-api-url"),placeholder:e(a)("tools.api-tester.texts.placeholder-base-api-url"),"mb-2":""},null,8,["value","label","placeholder"]),n(d,{value:e(u),"onUpdate:value":o[1]||(o[1]=t=>c(u)?u.value=t:null),label:e(a)("tools.api-tester.texts.label-http-method"),options:["GET","POST","PUT","DELETE","PATCH"],"mb-2":""},null,8,["value","label"]),n(k,{title:e(a)("tools.api-tester.texts.title-headers"),"mb-2":""},{default:s(()=>[n(V,{value:e(x),"onUpdate:value":o[2]||(o[2]=t=>c(x)?x.value=t:null),"on-create":C},{"create-button-default":s(()=>[U(v(e(a)("tools.api-tester.texts.tag-add-a-new-http-header")),1)]),default:s(({value:t})=>[t?(i(),P("div",F,[n(l,{value:t.key,"onUpdate:value":p=>t.key=p,placeholder:e(a)("tools.api-tester.texts.placeholder-header-name"),type:"text"},null,8,["value","onUpdate:value","placeholder"]),n(l,{value:t.value,"onUpdate:value":p=>t.value=p,placeholder:e(a)("tools.api-tester.texts.placeholder-value"),type:"text"},null,8,["value","onUpdate:value","placeholder"])])):_("",!0)]),_:1},8,["value"]),n(d,{value:e(h),"onUpdate:value":o[3]||(o[3]=t=>c(h)?h.value=t:null),label:e(a)("tools.api-tester.texts.label-content-type"),options:["application/json","text/plain"],"mt-2":""},null,8,["value","label"])]),_:1},8,["title"]),n(k,{title:e(a)("tools.api-tester.texts.title-query-parameters"),"mb-2":""},{default:s(()=>[n(V,{value:e(f),"onUpdate:value":o[4]||(o[4]=t=>c(f)?f.value=t:null),"on-create":C},{"create-button-default":s(()=>[U(v(e(a)("tools.api-tester.texts.tag-add-a-new-query-parameter")),1)]),default:s(({value:t})=>[t?(i(),P("div",M,[n(l,{value:t.key,"onUpdate:value":p=>t.key=p,placeholder:e(a)("tools.api-tester.texts.placeholder-param-name"),type:"text"},null,8,["value","onUpdate:value","placeholder"]),n(l,{value:t.value,"onUpdate:value":p=>t.value=p,placeholder:e(a)("tools.api-tester.texts.placeholder-value"),type:"text"},null,8,["value","onUpdate:value","placeholder"])])):_("",!0)]),_:1},8,["value"])]),_:1},8,["title"]),e(u)!=="GET"&&e(u)!=="HEAD"?(i(),w(l,{key:0,value:e(b),"onUpdate:value":o[5]||(o[5]=t=>c(b)?b.value=t:null),label:e(a)("tools.api-tester.texts.label-body"),placeholder:e(a)("tools.api-tester.texts.placeholder-http-query-body"),multiline:"",monospace:"","mb-2":""},null,8,["value","label","placeholder"])):_("",!0),n(q,{checked:e(g),"onUpdate:checked":o[6]||(o[6]=t=>c(g)?g.value=t:null)},{default:s(()=>[U(v(e(a)("tools.api-tester.texts.tag-no-cors")),1)]),_:1},8,["checked"]),S("div",W,[n(A,{secondary:"",onClick:O},{default:s(()=>[U(v(e(a)("tools.api-tester.texts.tag-call-api")),1)]),_:1})])]),_:1},8,["title"]),e(N)?(i(),w(B,{key:0,size:"small"})):_("",!0),!e(N)&&e(r)&&e(r).code!==200?(i(),w(D,{key:1,type:"error","mt-12":"",title:e(a)("tools.api-tester.texts.title-error-while-calling-api")},{default:s(()=>[S("p",null,[S("strong",null,"Status code = "+v(e(r).code),1)]),n(j,{value:e(r).error,"copy-placement":"none"},null,8,["value"])]),_:1},8,["title"])):_("",!0),!e(N)&&e(r)&&e(r).code===200?(i(),w(k,{key:2,"mt-12":"",title:e(a)("tools.api-tester.texts.title-api-call-result")},{default:s(()=>[n(j,{value:e(r).result,"word-wrap":""},null,8,["value"])]),_:1},8,["title"])):_("",!0)])}}});export{ce as default};
