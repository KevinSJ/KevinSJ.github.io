import{_ as U}from"./TextareaCopyable-59231e95.js";import{d as P,a0 as R,r as v,ac as z,i as L,o as p,c as q,k as u,l as e,m,w as d,a6 as T,G as $,j as _,ad as f,ah as D,ae as E,aj as G,ag as Q}from"./index-0c1fde36.js";import{_ as B,a as X}from"./transformers.web-0f7f2de1.js";import{_ as A}from"./Space-7fc52151.js";import{_ as F}from"./Spin-885f2a22.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./get-slot-1efb97e5.js";const H={"max-w-600px":""},vl=P({__name:"translator",setup(J){const{t:l}=R();B.useBrowserCache=!0,B.allowRemoteModels=!0;const b=v(""),r=v(""),i=v(""),n=z({name:"from",storageName:"translator:from",defaultValue:"en"}),o=z({name:"to",storageName:"translator:to",defaultValue:"fr"}),c=v(!1),x=v(!1),k=[{label:l("tools.translator.texts.label-afrikaans"),value:"af"},{label:l("tools.translator.texts.label-amharic"),value:"am"},{label:l("tools.translator.texts.label-arabic"),value:"ar"},{label:l("tools.translator.texts.label-azerbaijani"),value:"az"},{label:l("tools.translator.texts.label-basque"),value:"eu"},{label:l("tools.translator.texts.label-belarusian"),value:"be"},{label:l("tools.translator.texts.label-bengali"),value:"bn"},{label:l("tools.translator.texts.label-bulgarian"),value:"bg"},{label:l("tools.translator.texts.label-catalan"),value:"ca"},{label:l("tools.translator.texts.label-chinese"),value:"zh"},{label:l("tools.translator.texts.label-croatian"),value:"hr"},{label:l("tools.translator.texts.label-czech"),value:"cs"},{label:l("tools.translator.texts.label-danish"),value:"da"},{label:l("tools.translator.texts.label-dutch"),value:"nl"},{label:l("tools.translator.texts.label-english"),value:"en"},{label:l("tools.translator.texts.label-estonian"),value:"et"},{label:l("tools.translator.texts.label-finnish"),value:"fi"},{label:l("tools.translator.texts.label-french"),value:"fr"},{label:l("tools.translator.texts.label-galician"),value:"gl"},{label:l("tools.translator.texts.label-georgian"),value:"ka"},{label:l("tools.translator.texts.label-german"),value:"de"},{label:l("tools.translator.texts.label-greek"),value:"el"},{label:l("tools.translator.texts.label-hebrew"),value:"he"},{label:l("tools.translator.texts.label-hindi"),value:"hi"},{label:l("tools.translator.texts.label-hungarian"),value:"hu"},{label:l("tools.translator.texts.label-icelandic"),value:"is"},{label:l("tools.translator.texts.label-indonesian"),value:"id"},{label:l("tools.translator.texts.label-irish"),value:"ga"},{label:l("tools.translator.texts.label-italian"),value:"it"},{label:l("tools.translator.texts.label-japanese"),value:"ja"},{label:l("tools.translator.texts.label-kazakh"),value:"kk"},{label:l("tools.translator.texts.label-korean"),value:"ko"},{label:l("tools.translator.texts.label-latvian"),value:"lv"},{label:l("tools.translator.texts.label-lithuanian"),value:"lt"},{label:l("tools.translator.texts.label-macedonian"),value:"mk"},{label:l("tools.translator.texts.label-malay"),value:"ms"},{label:l("tools.translator.texts.label-norwegian"),value:"no"},{label:l("tools.translator.texts.label-persian"),value:"fa"},{label:l("tools.translator.texts.label-polish"),value:"pl"},{label:l("tools.translator.texts.label-portuguese"),value:"pt"},{label:l("tools.translator.texts.label-romanian"),value:"ro"},{label:l("tools.translator.texts.label-russian"),value:"ru"},{label:l("tools.translator.texts.label-serbian"),value:"sr"},{label:l("tools.translator.texts.label-slovak"),value:"sk"},{label:l("tools.translator.texts.label-slovenian"),value:"sl"},{label:l("tools.translator.texts.label-spanish"),value:"es"},{label:l("tools.translator.texts.label-swahili"),value:"sw"},{label:l("tools.translator.texts.label-swedish"),value:"sv"},{label:l("tools.translator.texts.label-tamil"),value:"ta"},{label:l("tools.translator.texts.label-telugu"),value:"te"},{label:l("tools.translator.texts.label-thai"),value:"th"},{label:l("tools.translator.texts.label-turkish"),value:"tr"},{label:l("tools.translator.texts.label-ukrainian"),value:"uk"},{label:l("tools.translator.texts.label-urdu"),value:"ur"},{label:l("tools.translator.texts.label-vietnamese"),value:"vi"},{label:l("tools.translator.texts.label-welsh"),value:"cy"}].reduce((t,{value:a,label:g})=>(t[a]=g,t),{}),y={af:["en"],ar:["en"],cs:["en"],da:["de","en"],de:["en","es","fr"],en:["af","ar","cs","da","de","es","fi","fr","hi","hu","id","it","jap","nl","ro","ru","sv","uk","vi","xh","zh"],es:["de","en","fr","it","ru"],et:["en"],fi:["de","en"],fr:["de","en","es","ro","ru"],hi:["en"],hu:["en"],id:["en"],it:["en","es","fr"],ja:["en"],jap:["en"],ko:["en"],nl:["en","fr"],no:["de"],pl:["en"],ro:["fr"],ru:["en","es","fr","uk"],sv:["en"],th:["en"],tr:["en"],uk:["en","ru"],vi:["en"],xh:["en"],zh:["en"]},C=L(()=>Object.keys(y).map(t=>({label:k[t]||t,value:t}))),S=L(()=>{const t=y[n.value]||[];return t.includes(o.value)||(o.value=t[0]),t.map(a=>({label:k[a]||a,value:a}))}),h=new Map;async function V(){if(!b.value||n.value===o.value)return;r.value="",i.value="";const t=`Xenova/opus-mt-${n.value}-${o.value}`;if(!h.has(t)){c.value=!0;try{h.set(t,await X("translation",t))}catch(a){i.value=`Model loading failed: ${a.toString()}`;return}finally{c.value=!1}}x.value=!0;try{const a=await h.get(t)(b.value);r.value=a[0]?.translation_text}catch(a){i.value=`Translation failed: ${a.toString()}`}finally{x.value=!1}}return(t,a)=>{const g=D,w=E,I=G,j=A,N=F,M=Q,O=U;return p(),q("div",H,[u(g,{value:e(b),"onUpdate:value":a[0]||(a[0]=s=>m(b)?b.value=s:null),type:"textarea",placeholder:e(l)("tools.translator.texts.placeholder-enter-text-to-translate"),"mb-1":""},null,8,["value","placeholder"]),u(w,{value:e(n),"onUpdate:value":a[1]||(a[1]=s=>m(n)?n.value=s:null),searchable:"",label:e(l)("tools.translator.texts.label-from"),"label-position":"left","label-width":"70px",options:e(C),placeholder:e(l)("tools.translator.texts.placeholder-from"),"mb-1":""},null,8,["value","label","options","placeholder"]),u(w,{value:e(o),"onUpdate:value":a[2]||(a[2]=s=>m(o)?o.value=s:null),searchable:"",label:e(l)("tools.translator.texts.label-to"),"label-position":"left","label-width":"70px",options:e(S),placeholder:e(l)("tools.translator.texts.placeholder-to"),"mb-1":""},null,8,["value","label","options","placeholder"]),u(j,{justify:"center","mb-2":"","mt-2":""},{default:d(()=>[u(I,{type:"primary",disabled:e(c)||e(x),onClick:V},{default:d(()=>[T($(e(l)("tools.translator.texts.tag-translate")),1)]),_:1},8,["disabled"])]),_:1}),u(j,{justify:"center","mb-3":"","mt-3":""},{default:d(()=>[e(c)?(p(),_(N,{key:0,size:"large",description:"Loading translation model..."})):f("",!0),e(x)?(p(),_(N,{key:1,size:"large",description:"Translating..."})):f("",!0)]),_:1}),e(i)?(p(),_(M,{key:0,"mb-2":""},{default:d(()=>[T($(e(i)),1)]),_:1})):f("",!0),e(r)?(p(),_(O,{key:1,value:e(r),"onUpdate:value":a[3]||(a[3]=s=>m(r)?r.value=s:null),placeholder:e(l)("tools.translator.texts.placeholder-translation-will-appear-here"),"mb-2":""},null,8,["value","placeholder"])):f("",!0)])}}});export{vl as default};
