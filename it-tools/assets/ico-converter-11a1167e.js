import{d as w,a0 as h,r as n,o as d,c as I,a as p,k as B,l as s,j as u,w as k,a6 as N,G as A,ad as f,aW as C,ag as U}from"./index-0c1fde36.js";import{g as _}from"./base64-ae7cf34b.js";import{g as j,h as E,e as V,f as $}from"./index-8d236247.js";import{u as b}from"./downloadBase64-508288e2.js";import{T as O}from"./transform-13d1005e.js";import{_ as P}from"./Spin-885f2a22.js";import"./index-a6f01dde.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";const T={style:{flex:"0 0 100%"}},z={"mx-auto":"","max-w-600px":""},D={"mt-3":"",flex:"","justify-center":""},M=w({__name:"ico-converter",setup(F){const{t:g}=h(),o=n("idle"),v=n(null),r=n(""),c=n(""),i=n(""),{download:y}=b({source:r,filename:c,extension:i});async function x(t){v.value=t;const l=new Uint8Array(await t.arrayBuffer());c.value=`${t.name}`,o.value="processing";try{if(t.type.includes("icon")){const e=j({data:l,largest:!0});if(e==null)throw new Error("Invalid ICO file!");const a=E({image:e});i.value="png",r.value=`data:image/png;base64,${_.fromUint8Array(a)}`}else{const e=V({data:l});if(e==null)throw new Error("Invalid PNG file!");const a=$({images:[16,32,64,128,256].map(m=>O.copyResize({image:e,width:m,maintainAspect:!0}))});i.value="ico",r.value=`data:image/x-icon;base64,${_.fromUint8Array(a)}`}o.value="done",y()}catch{o.value="error"}}return(t,l)=>{const e=C,a=U,m=P;return d(),I("div",null,[p("div",T,[p("div",z,[B(e,{title:s(g)("tools.ico-converter.texts.title-drag-and-drop-an-ico-or-png-jpeg-file-here-or-click-to-select-a-file"),accept:".ico,.png,.jpg","paste-image":"",onFileUpload:x},null,8,["title"])])]),p("div",D,[s(o)==="error"?(d(),u(a,{key:0,type:"error"},{default:k(()=>[N(" An error occured processing "+A(s(c)),1)]),_:1})):f("",!0),s(o)==="processing"?(d(),u(m,{key:1,size:"small"})):f("",!0)])])}}});export{M as default};
