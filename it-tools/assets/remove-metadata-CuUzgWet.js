import{c as u,i as p}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{a as d,P as y,d as g,f as v,x as r}from"./main-CdZmBCMR.js";import"./mobileMenu-BoMunYmR.js";const l={file:null};function h(e){const n=e.getInfoDict();n.keys().forEach(t=>{n.delete(t)}),e.setTitle(""),e.setAuthor(""),e.setSubject(""),e.setKeywords([]),e.setCreator(""),e.setProducer("");try{const t=e.catalog.dict;t.has(r.of("Metadata"))&&t.delete(r.of("Metadata"))}catch(t){console.warn("Could not remove XMP metadata:",t.message)}try{const t=e.context;t.trailerInfo&&delete t.trailerInfo.ID}catch(t){console.warn("Could not remove document IDs:",t.message)}try{const t=e.catalog.dict;t.has(r.of("PieceInfo"))&&t.delete(r.of("PieceInfo"))}catch(t){console.warn("Could not remove PieceInfo:",t.message)}}function m(){l.file=null;const e=document.getElementById("file-display-area");e&&(e.innerHTML="");const n=document.getElementById("tool-options");n&&n.classList.add("hidden");const a=document.getElementById("file-input");a&&(a.value="")}async function E(){const e=document.getElementById("file-display-area"),n=document.getElementById("tool-options");if(e)if(e.innerHTML="",l.file){const a=document.createElement("div");a.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const t=document.createElement("div");t.className="flex flex-col overflow-hidden";const o=document.createElement("div");o.className="truncate font-medium text-gray-200 text-sm mb-1",o.textContent=l.file.name;const i=document.createElement("div");i.className="text-xs text-gray-400",i.textContent=v(l.file.size),t.append(o,i);const s=document.createElement("button");s.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",s.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',s.onclick=function(){m()},a.append(t,s),e.appendChild(a),u({icons:p}),n&&n.classList.remove("hidden")}else n&&n.classList.add("hidden")}function f(e){if(e&&e.length>0){const n=e[0];(n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf"))&&(l.file=n,E())}}async function I(){if(!l.file){d("No File","Please upload a PDF file first.");return}const e=document.getElementById("loader-modal"),n=document.getElementById("loader-text");e&&e.classList.remove("hidden"),n&&(n.textContent="Removing all metadata...");try{const a=await l.file.arrayBuffer(),t=await y.load(a);h(t);const o=await t.save();g(new Blob([o],{type:"application/pdf"}),"metadata-removed.pdf"),d("Success","Metadata removed successfully!","success",()=>{m()})}catch(a){console.error(a),d("Error","An error occurred while trying to remove metadata.")}finally{e&&e.classList.add("hidden")}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("file-input"),n=document.getElementById("drop-zone"),a=document.getElementById("process-btn"),t=document.getElementById("back-to-tools");t&&t.addEventListener("click",function(){window.location.href="/itools/"}),e&&n&&(e.addEventListener("change",function(o){f(o.target.files)}),n.addEventListener("dragover",function(o){o.preventDefault(),n.classList.add("bg-gray-700")}),n.addEventListener("dragleave",function(o){o.preventDefault(),n.classList.remove("bg-gray-700")}),n.addEventListener("drop",function(o){o.preventDefault(),n.classList.remove("bg-gray-700");const i=o.dataTransfer?.files;if(i&&i.length>0){const s=Array.from(i).filter(function(c){return c.type==="application/pdf"||c.name.toLowerCase().endsWith(".pdf")});if(s.length>0){const c=new DataTransfer;c.items.add(s[0]),f(c.files)}}}),e.addEventListener("click",function(){e.value=""})),a&&a.addEventListener("click",I)});
