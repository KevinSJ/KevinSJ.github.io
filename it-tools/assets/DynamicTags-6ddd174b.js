import{t as L,N as P,c as U}from"./Tag-e75b8dae.js";import{c5 as N,bF as $,aH as K,c6 as W,ao as w,d as E,au as H,bD as G,aG as M,r as y,u as B,bz as q,bA as J,i as F,ay as Q,h as r,ah as X,aj as Y,bE as Z,c7 as ee,b$ as te,az as j}from"./index-0c1fde36.js";import{s as ne,_ as ae}from"./Space-7fc52151.js";import{s as se}from"./prop-f417a2fb.js";const ie=N({name:"DynamicTags",common:$,peers:{Input:K,Button:W,Tag:L,Space:ne},self(){return{inputWidth:"64px"}}}),le=ie,ue=w("dynamic-tags",[w("input",{minWidth:"var(--n-input-width)"})]),oe=Object.assign(Object.assign(Object.assign({},B.props),U),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),ge=E({name:"DynamicTags",props:oe,slots:Object,setup(t){const{mergedClsPrefixRef:v,inlineThemeDisabled:c}=H(t),{localeRef:d}=G("DynamicTags"),m=M(t),{mergedDisabledRef:s}=m,g=y(""),p=y(!1),f=y(!0),b=y(null),C=B("DynamicTags","-dynamic-tags",ue,le,t,v),T=y(t.defaultValue),V=q(t,"value"),l=J(V,T),z=F(()=>d.value.add),O=F(()=>se(t.size)),_=F(()=>s.value||!!t.max&&l.value.length>=t.max);function I(e){const{onChange:n,"onUpdate:value":a,onUpdateValue:o}=t,{nTriggerFormInput:k,nTriggerFormChange:x}=m;n&&j(n,e),o&&j(o,e),a&&j(a,e),T.value=e,k(),x()}function R(e){const n=l.value.slice(0);n.splice(e,1),I(n)}function D(e){switch(e.key){case"Enter":u()}}function u(e){const n=e??g.value;if(n){const a=l.value.slice(0);a.push(t.onCreate(n)),I(a)}p.value=!1,f.value=!0,g.value=""}function A(){u()}function S(){p.value=!0,te(()=>{var e;(e=b.value)===null||e===void 0||e.focus(),f.value=!1})}const h=F(()=>{const{self:{inputWidth:e}}=C.value;return{"--n-input-width":e}}),i=c?Q("dynamic-tags",void 0,h,t):void 0;return{mergedClsPrefix:v,inputInstRef:b,localizedAdd:z,inputSize:O,inputValue:g,showInput:p,inputForceFocused:f,mergedValue:l,mergedDisabled:s,triggerDisabled:_,handleInputKeyDown:D,handleAddClick:S,handleInputBlur:A,handleCloseClick:R,handleInputConfirm:u,mergedTheme:C,cssVars:c?void 0:h,themeClass:i?.themeClass,onRender:i?.onRender}},render(){const{mergedTheme:t,cssVars:v,mergedClsPrefix:c,onRender:d,renderTag:m}=this;return d?.(),r(ae,{class:[`${c}-dynamic-tags`,this.themeClass],size:"small",style:v,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagClass:g,tagStyle:p,type:f,round:b,size:C,color:T,closable:V,mergedDisabled:l,showInput:z,inputValue:O,inputClass:_,inputStyle:I,inputSize:R,inputForceFocused:D,triggerDisabled:u,handleInputKeyDown:A,handleInputBlur:S,handleAddClick:h,handleCloseClick:i,handleInputConfirm:e,$slots:n}=this;return this.mergedValue.map((a,o)=>m?m(a,o):r(P,{key:o,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,class:g,style:p,type:f,round:b,size:C,color:T,closable:V,disabled:l,onClose:()=>{i(o)}},{default:()=>typeof a=="string"?a:a.label})).concat(z?n.input?n.input({submit:e,deactivate:S}):r(X,Object.assign({placeholder:"",size:R,style:I,class:_,autosize:!0},this.inputProps,{ref:"inputInstRef",value:O,onUpdateValue:a=>{this.inputValue=a},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeydown:A,onBlur:S,internalForceFocus:D})):n.trigger?n.trigger({activate:h,disabled:u}):r(Y,{dashed:!0,disabled:u,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:R,onClick:h},{icon:()=>r(Z,{clsPrefix:c},{default:()=>r(ee,null)})}))}})}});export{ge as _};
