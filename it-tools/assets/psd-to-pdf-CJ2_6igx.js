import{c as P,i as I}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{s as n,a as d,b as E,d as x,h as y,f as k,n as F,o as T}from"./main-CdZmBCMR.js";import"./mobileMenu-BoMunYmR.js";const N=[".psd"],w="PSD";let m=null;async function S(){return m||(m=new F(T("pymupdf")),await m.load()),m}document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("file-input"),s=document.getElementById("drop-zone"),l=document.getElementById("process-btn"),r=document.getElementById("file-display-area"),f=document.getElementById("file-controls"),L=document.getElementById("add-more-btn"),h=document.getElementById("clear-files-btn"),B=document.getElementById("back-to-tools");B&&B.addEventListener("click",()=>{window.location.href="/itools/"});const u=async()=>{if(!(!r||!l||!f))if(n.files.length>0){r.innerHTML="";for(let e=0;e<n.files.length;e++){const t=n.files[e],o=document.createElement("div");o.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex flex-col overflow-hidden";const g=document.createElement("div");g.className="truncate font-medium text-gray-200 text-sm mb-1",g.textContent=t.name;const v=document.createElement("div");v.className="text-xs text-gray-400",v.textContent=k(t.size),a.append(g,v);const c=document.createElement("button");c.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",c.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',c.onclick=()=>{n.files=n.files.filter((M,D)=>D!==e),u()},o.append(a,c),r.appendChild(o)}P({icons:I}),f.classList.remove("hidden"),l.classList.remove("hidden")}else r.innerHTML="",f.classList.add("hidden"),l.classList.add("hidden")},p=()=>{n.files=[],u()},C=async()=>{if(n.files.length===0){d("No Files",`Please select at least one ${w} file.`);return}try{E("Loading engine...");const e=await S();if(n.files.length===1){const t=n.files[0];E(`Converting ${t.name}...`);const o=await e.imageToPdf(t,{imageType:"psd"}),a=t.name.replace(/\.[^/.]+$/,"");x(o,`${a}.pdf`),y(),d("Conversion Complete",`Successfully converted ${t.name} to PDF.`,"success",()=>p())}else{E("Converting multiple files...");const t=await e.imagesToPdf(n.files);x(t,"psd_to_pdf.pdf"),y(),d("Conversion Complete",`Successfully converted ${n.files.length} PSD files to a single PDF.`,"success",()=>p())}}catch(e){y();const t=e instanceof Error?e.message:"Unknown error";console.error(`[${w}ToPDF] Error:`,e),d("Error",`An error occurred during conversion. Error: ${t}`)}},b=e=>{if(e&&e.length>0){const t=Array.from(e).filter(o=>{const a="."+o.name.split(".").pop()?.toLowerCase();return N.includes(a)});t.length>0&&(n.files=[...n.files,...t],u())}};i&&s&&(i.addEventListener("change",e=>b(e.target.files)),s.addEventListener("dragover",e=>{e.preventDefault(),s.classList.add("bg-gray-700")}),s.addEventListener("dragleave",e=>{e.preventDefault(),s.classList.remove("bg-gray-700")}),s.addEventListener("drop",e=>{e.preventDefault(),s.classList.remove("bg-gray-700"),b(e.dataTransfer?.files??null)}),i.addEventListener("click",()=>{i.value=""})),L&&L.addEventListener("click",()=>i.click()),h&&h.addEventListener("click",p),l&&l.addEventListener("click",C)});
