import{aV as R,b as $,d as B,a0 as C,b6 as E,r as w,E as I,o as m,c as T,k as f,w as V,a6 as v,G as x,l as o,a as _,j as h,m as H,ad as g,ag as J,aW as A,bo as D,bp as L,bq as N}from"./index-0c1fde36.js";import{a as U}from"./transformers.web-0f7f2de1.js";import{_ as q}from"./TextareaCopyable-59231e95.js";import{_ as F}from"./Divider-5fc425b0.js";import{_ as O}from"./Spin-885f2a22.js";import"./index-a6f01dde.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./base64-ae7cf34b.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";var y={exports:{}},r=R,l=r.defineComponent({name:"VueMathjax",props:{formula:{type:String,default:""},safe:{type:Boolean,default:!0},options:{type:Object,default:function(){return{}}}},setup(e){const t=r.reactive({mathjaxRef:null}),n=()=>{e.safe?t.mathjaxRef.textContent=e.formula:t.mathjaxRef.innerHTML=e.formula,window.MathJax&&(window.MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["(",")"]],displayMath:[["$$","$$"],["[","]"]],processEscapes:!0,processEnvironments:!0},displayAlign:"center","HTML-CSS":{styles:{".MathJax_Display":{margin:0}},linebreaks:{automatic:!0}},...e.options}),window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,t.mathjaxRef]))};return r.watch(()=>e.formula,()=>{n()}),r.onMounted(()=>{n()}),{...r.toRefs(t)}}});const P={ref:"mathjaxRef"};l.render=function(e,t,n,d,c,b){return r.openBlock(),r.createElementBlock("span",P,null,512)},l.__file="src/index.vue",l.install=function(e){e.component(l.name,l)},y.exports=l;var X=y.exports;const z=$(X),G=e=>(D("data-v-9acb1bb6"),e=e(),L(),e),Q=G(()=>_("br",null,null,-1)),W={style:{"text-align":"center"}},K=B({__name:"math-ocr",setup(e){const{t}=C();E("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_HTML");const n=w(!1),d=w(),c=I(async()=>{try{return await M(d.value)}catch(a){return a.toString()}});async function b(a){a&&(d.value=a)}function j(a){return new Promise((i,u)=>{const s=new FileReader;s.readAsDataURL(a),s.onload=()=>i(s.result?.toString()??""),s.onerror=p=>u(p)})}async function M(a){if(!a)return"";n.value=!0;const i=await j(a),s=await(await U("image-to-text","Xenova/texify"))(i,{max_new_tokens:384});return n.value=!1,s.map(p=>p.generated_text).join(`
`)}return(a,i)=>{const u=J,s=A,p=F,k=O;return m(),T("div",null,[f(u,{type:"warning","mb-2":""},{default:V(()=>[v(x(o(t)("tools.math-ocr.texts.tag-nb-processing-is-done-in-your-browser-so-be-patient-processing-can-take-a-while")),1),Q,v(x(o(t)("tools.math-ocr.texts.tag-this-tool-required-internet-connection-to-access-models")),1)]),_:1}),f(s,{title:o(t)("tools.math-ocr.texts.title-drag-and-drop-a-image-here-or-click-to-select-a-file"),"paste-image":"",onFileUpload:b},null,8,["title"]),f(p),_("div",null,[_("h3",null,x(o(t)("tools.math-ocr.texts.tag-latex-result")),1),o(n)?g("",!0):(m(),h(q,{key:0,value:o(c),"onUpdate:value":i[0]||(i[0]=S=>H(c)?c.value=S:null),"word-wrap":!0,"mb-2":"","download-file-name":"output.tex"},null,8,["value"])),_("div",W,[o(n)?g("",!0):(m(),h(o(z),{key:0,formula:o(c)},null,8,["formula"]))]),o(n)?(m(),h(k,{key:1,size:"small"})):g("",!0)])])}}});const ue=N(K,[["__scopeId","data-v-9acb1bb6"]]);export{ue as default};
