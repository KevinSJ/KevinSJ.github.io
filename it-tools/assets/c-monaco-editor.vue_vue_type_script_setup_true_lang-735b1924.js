import{m as ie,e as S}from"./editor.main-9e6d3164.js";import{d as K,dI as C,i as I,c2 as ue,D as p,h as P,b0 as G,b$ as Y,r as J,e as le,cd as ce,e_ as se,o as fe,j as de,b8 as ve,l as k,m as pe}from"./index-0c1fde36.js";function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(n){ge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function he(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function me(e,t){if(e==null)return{};var r=he(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ye(e,t){return be(e)||we(e,t)||Oe(e,t)||je()}function be(e){if(Array.isArray(e))return e}function we(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,o=void 0;try{for(var l=e[Symbol.iterator](),u;!(n=(u=l.next()).done)&&(r.push(u.value),!(t&&r.length===t));n=!0);}catch(i){a=!0,o=i}finally{try{!n&&l.return!=null&&l.return()}finally{if(a)throw o}}return r}}function Oe(e,t){if(e){if(typeof e=="string")return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}}function N(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(n){Se(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(a,o){return o(a)},n)}}function h(e){return function t(){for(var r=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=e.length?e.apply(this,a):function(){for(var l=arguments.length,u=new Array(l),i=0;i<l;i++)u[i]=arguments[i];return t.apply(r,[].concat(a,u))}}}function w(e){return{}.toString.call(e).includes("Object")}function Me(e){return!Object.keys(e).length}function m(e){return typeof e=="function"}function _e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $e(e,t){return w(t)||d("changeType"),Object.keys(t).some(function(r){return!_e(e,r)})&&d("changeField"),t}function Ee(e){m(e)||d("selectorType")}function Ie(e){m(e)||w(e)||d("handlerType"),w(e)&&Object.values(e).some(function(t){return!m(t)})&&d("handlersType")}function Te(e){e||d("initialIsRequired"),w(e)||d("initialType"),Me(e)&&d("initialContent")}function Ae(e,t){throw new Error(e[t]||e.default)}var Ce={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},d=h(Ae)(Ce),b={changes:$e,selector:Ee,handler:Ie,initial:Te};function Ve(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.initial(e),b.handler(t);var r={current:e},n=h(De)(r,t),a=h(ke)(r),o=h(b.changes)(e),l=h(We)(r);function u(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(s){return s};return b.selector(c),c(r.current)}function i(c){Pe(n,a,o,l)(c)}return[u,i]}function We(e,t){return m(t)?t(e.current):t}function ke(e,t){return e.current=q(q({},e.current),t),t}function De(e,t,r){return m(t)?t(e.current):Object.keys(r).forEach(function(n){var a;return(a=t[n])===null||a===void 0?void 0:a.call(t,e.current[n])}),r}var Le={create:Ve},Ne={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Ue(e){return function t(){for(var r=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=e.length?e.apply(this,a):function(){for(var l=arguments.length,u=new Array(l),i=0;i<l;i++)u[i]=arguments[i];return t.apply(r,[].concat(a,u))}}}function qe(e){return{}.toString.call(e).includes("Object")}function ze(e){return e||z("configIsRequired"),qe(e)||z("configType"),e.urls?(xe(),{paths:{vs:e.urls.monacoBase}}):e}function xe(){console.warn(Q.deprecation)}function Be(e,t){throw new Error(e[t]||e.default)}var Q={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},z=Ue(Be)(Q),Fe={config:ze},He=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(a){return r.reduceRight(function(o,l){return l(o)},a)}};function X(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],X(e[r],t[r]))}),L(L({},e),t)}var Re={type:"cancelation",msg:"operation is manually canceled"};function M(e){var t=!1,r=new Promise(function(n,a){e.then(function(o){return t?a(Re):n(o)}),e.catch(a)});return r.cancel=function(){return t=!0},r}var Ke=Le.create({config:Ne,isInitialized:!1,resolve:null,reject:null,monaco:null}),Z=ye(Ke,2),y=Z[0],O=Z[1];function Ge(e){var t=Fe.config(e),r=t.monaco,n=me(t,["monaco"]);O(function(a){return{config:X(a.config,n),monaco:r}})}function Ye(){var e=y(function(t){var r=t.monaco,n=t.isInitialized,a=t.resolve;return{monaco:r,isInitialized:n,resolve:a}});if(!e.isInitialized){if(O({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),M(_);if(window.monaco&&window.monaco.editor)return ee(window.monaco),e.resolve(window.monaco),M(_);He(Je,Xe)(Ze)}return M(_)}function Je(e){return document.body.appendChild(e)}function Qe(e){var t=document.createElement("script");return e&&(t.src=e),t}function Xe(e){var t=y(function(n){var a=n.config,o=n.reject;return{config:a,reject:o}}),r=Qe("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function Ze(){var e=y(function(r){var n=r.config,a=r.resolve,o=r.reject;return{config:n,resolve:a,reject:o}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){ee(r),e.resolve(r)},function(r){e.reject(r)})}function ee(e){y().monaco||O({monaco:e})}function et(){return y(function(e){var t=e.monaco;return t})}var _=new Promise(function(e,t){return O({resolve:e,reject:t})}),T={config:Ge,init:Ye,__getMonacoInstance:et},tt=Object.defineProperty,rt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,B=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))at.call(t,r)&&B(e,r,t[r]);if(x)for(var r of x(t))ot.call(t,r)&&B(e,r,t[r]);return e},it=(e,t)=>rt(e,nt(t));const E={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function ut(e,t){const r=I(()=>{const{width:a,height:o}=e;return it($({},E.wrapper),{width:a,height:o})}),n=I(()=>$($({},E.fullWidth),!t.value&&E.hide));return{wrapperStyle:r,containerStyle:n}}function lt(){const e=C(T.__getMonacoInstance()),t=J(!1);let r;return G(()=>{e.value||(r=T.init(),r.then(a=>e.value=a).catch(a=>{a?.type!=="cancelation"&&(t.value=!0,console.error("Monaco initialization error:",a))}))}),{monacoRef:e,unload:()=>r?.cancel(),isLoadFailed:t}}function F(e){return typeof e=="function"?e():e}function A(e){return e===void 0}function te(e,t,r,n){return ct(e,n)||st(e,t,r,n)}function ct(e,t){return e.editor.getModel(re(e,t))}function st(e,t,r,n){return e.editor.createModel(t,r,n?re(e,n):void 0)}function re(e,t){return e.Uri.parse(t)}var ft=Object.defineProperty,H=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pt=(e,t)=>{for(var r in t||(t={}))dt.call(t,r)&&R(e,r,t[r]);if(H)for(var r of H(t))vt.call(t,r)&&R(e,r,t[r]);return e};const gt={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var ht=K({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){const r=new Map,n=C(null),{monacoRef:a,unload:o,isLoadFailed:l}=lt(),{editorRef:u}=mt(t,e,a,n),{disposeValidator:i}=yt(t,e,a,u),c=I(()=>!!a.value&&!!u.value),{wrapperStyle:s,containerStyle:V}=ut(e,c);return ue(()=>{var f,v;(f=i.value)==null||f.call(i),u.value?((v=u.value.getModel())==null||v.dispose(),u.value.dispose()):o()}),p([()=>e.path,()=>e.value,()=>e.language,()=>e.line],([f,v,j,g],[W,Mt,ne,ae])=>{if(c.value){if(f!==W){const oe=te(a.value,v||e.defaultValue||"",j||e.defaultLanguage||"",f||e.defaultPath||"");e.saveViewState&&r.set(W,u.value.saveViewState()),u.value.setModel(oe),e.saveViewState&&u.value.restoreViewState(r.get(f)),A(g)||u.value.revealLine(g);return}u.value.getValue()!==v&&u.value.setValue(v),j!==ne&&a.value.editor.setModelLanguage(u.value.getModel(),j),!A(g)&&g!==ae&&u.value.revealLine(g)}}),p(()=>e.options,f=>u.value&&u.value.updateOptions(f),{deep:!0}),p(()=>e.theme,f=>a.value&&a.value.editor.setTheme(f)),{containerRef:n,isEditorReady:c,isLoadFailed:l,wrapperStyle:s,containerStyle:V}},render(){const{$slots:e,isEditorReady:t,isLoadFailed:r,wrapperStyle:n,containerStyle:a,className:o}=this;return P("div",{style:n},[!t&&P("div",{style:gt},r?e.failure?F(e.failure):"load failed":e.default?F(e.default):"loading..."),P("div",{ref:"containerRef",key:"monaco_editor_container",style:a,class:o})])}});function mt({emit:e},t,r,n){const a=C(null);G(()=>{const l=p(r,()=>{n.value&&r.value&&(Y(()=>l()),o())},{immediate:!0})});function o(){var l;if(!n.value||!r.value||a.value)return;e("beforeMount",r.value);const u=t.path||t.defaultPath,i=te(r.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",u||"");a.value=r.value.editor.create(n.value,pt({model:i,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),(l=a.value)==null||l.onDidChangeModelContent(c=>{const s=a.value.getValue();s!==t.value&&(e("update:value",s),e("change",s,c))}),a.value&&!A(t.line)&&a.value.revealLine(t.line),e("mount",a.value,r.value)}return{editorRef:a}}function yt({emit:e},t,r,n){const a=J(null),o=p([r,n],()=>{if(r.value&&n.value){Y(()=>o());const l=r.value.editor.onDidChangeMarkers(u=>{var i,c;const s=(c=(i=n.value)==null?void 0:i.getModel())==null?void 0:c.uri;if(s&&u.find(f=>f.path===s.path)){const f=r.value.editor.getModelMarkers({resource:s});e("validate",f)}});a.value=()=>l?.dispose()}});return{disposeValidator:a}}function bt(){return new Worker("/it-tools/assets/editor.worker-ae8fe275.js")}function wt(){return new Worker("/it-tools/assets/json.worker-c4cc62ea.js")}function Ot(){return new Worker("/it-tools/assets/css.worker-0f93a51e.js")}function jt(){return new Worker("/it-tools/assets/html.worker-a9ff79fb.js")}function St(){return new Worker("/it-tools/assets/ts.worker-894e7444.js")}const Pt={inheritAttrs:!1},Et=K({...Pt,__name:"c-monaco-editor",props:{defaultValue:{},defaultPath:{},defaultLanguage:{},value:{},language:{},path:{},theme:{default:"vs"},line:{},options:{default:()=>({})},overrideServices:{default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{default:"100%"},height:{default:"100%"},className:{}},emits:["update:value","beforeMount","mount","change","validate"],setup(e,{emit:t}){const r=e,n=le(r,"value",t);globalThis.MonacoEnvironment={getWorker(u,i){return i==="json"?new wt:i==="css"||i==="scss"||i==="less"?new Ot:i==="html"||i==="handlebars"||i==="razor"?new jt:i==="typescript"||i==="javascript"?new St:new bt}},T.config({monaco:ie}),S.defineTheme("it-tools-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#00000000"}}),S.defineTheme("it-tools-light",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#00000000"}});const a=ce();p(()=>a.isDarkTheme,u=>S.setTheme(u?"it-tools-dark":"it-tools-light"),{immediate:!0});const l={...se(),...r};return(u,i)=>(fe(),de(k(ht),ve(l,{value:k(n),"onUpdate:value":i[0]||(i[0]=c=>pe(n)?n.value=c:null),onBeforeMount:i[1]||(i[1]=c=>t("beforeMount",c)),onMount:i[2]||(i[2]=(c,s)=>t("mount",c,s)),onChange:i[3]||(i[3]=(c,s)=>t("change",c,s)),onValidate:i[4]||(i[4]=c=>t("validate",c))}),null,16,["value"]))}});export{Et as _};
