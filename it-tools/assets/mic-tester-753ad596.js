import{r as g,cc as w,t as C,d as M,a4 as B,a0 as A,o as N,c as S,k as _,w as p,a as m,l as o,a6 as h,G as x,bc as T,s as q,af as D,bq as L}from"./index-0c1fde36.js";function R(f){let e=null,t=null,l=null,s=null,c=null;const n=g(!1),r=g(0);function y(){const a=new Uint8Array(s.frequencyBinCount),d=()=>{s.getByteFrequencyData(a);let v=0;a.forEach(k=>v+=k);const b=v/a.length;r.value=b,n.value&&requestAnimationFrame(d)};d()}const i=async()=>{e||(e=new(window.AudioContext||window.webkitAudioContext));try{c=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(a){console.error("Microphone access denied:",a),f.error(C("tools.mic-tester.service.text.microphone-access-denied-the-error-is-also-in-the-console"),a);return}l=e.createMediaStreamSource(c),t=e.createDelay(1),t.delayTime.value=1,s=e.createAnalyser(),s.fftSize=256,l.connect(t),t.connect(e.destination),l.connect(s),n.value=!0,y()};function u(){e&&c&&(c.getTracks().forEach(d=>d.stop()),e.close(),e=null,n.value=!1,r.value=0)}return w(()=>{u()}),{startMicReplay:i,stopMicReplay:u,loudnessLevel:r,isPlaying:n}}const E={class:"control-buttons"},U={id:"loudnessMeter"},V=M({__name:"mic-tester",setup(f){const e=B(),{t}=A(),{startMicReplay:l,stopMicReplay:s,loudnessLevel:c,isPlaying:n}=R(e);return(r,y)=>{const i=q,u=D;return N(),S("div",null,[_(u,null,{default:p(()=>[m("div",E,[_(i,{disabled:o(n),onClick:o(l)},{default:p(()=>[h(x(o(t)("tools.mic-tester.start-button-text")),1)]),_:1},8,["disabled","onClick"]),_(i,{disabled:!o(n),onClick:o(s)},{default:p(()=>[h(x(o(t)("tools.mic-tester.stop-button-text")),1)]),_:1},8,["disabled","onClick"])]),m("div",U,[m("div",{id:"loudnessBar",style:T({width:`${o(c)}%`})},null,4)])]),_:1})])}}});const F=L(V,[["__scopeId","data-v-fac165a8"]]);export{F as default};
