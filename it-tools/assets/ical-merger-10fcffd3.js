import{_ as D}from"./TextareaCopyable-59231e95.js";import{t as C,d as L,a0 as M,r as d,o as _,c as h,k as n,l as t,w as m,m as x,a6 as f,G as g,a as I,a7 as R,a8 as T,j as P,ad as S,aW as q,ah as G,aj as O,ag as H,bq as J}from"./index-0c1fde36.js";import{I as U}from"./ical-b19a0188.js";import{v as K}from"./v4-3aa83ef1.js";import{_ as Q}from"./FormItem-1b9a5952.js";import{_ as X}from"./Checkbox-ba7202eb.js";import{_ as Y}from"./Space-7fc52151.js";import{_ as Z}from"./Divider-5fc425b0.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./context-00991937.js";import"./get-slot-1efb97e5.js";function ee(y,e={}){let l;for(const a of y)try{const c=U.parse(a),i=new U.Component(c);if(!l)l=i,l.updatePropertyWithValue("prodid","it-tools-ical-merger"),l.updatePropertyWithValue("version","1.0"),e.calname&&l.updatePropertyWithValue("x-wr-calname",e.calname),e.timezone&&l.updatePropertyWithValue("x-wr-timezone",e.timezone),e.caldesc&&l.updatePropertyWithValue("x-wr-caldesc",e.caldesc);else for(const p of i.getAllSubcomponents("vevent"))l.addSubcomponent(p)}catch(c){throw new Error(C("tools.ical-merger.service.text.failed-to-merge-e-n-nwith-input-input",[c,a]))}if(!l)throw new Error(C("tools.ical-merger.service.text.no-icals-parsed-successfully"));if(e.regenerate_uids)for(const a of l.getAllSubcomponents("vevent"))a.updatePropertyWithValue("uid",K());return l.toString()}const te={flex:"","justify-center":""},le=L({__name:"ical-merger",setup(y){const{t:e}=M(),l=d([]),a=d(""),c=d(""),i=d(""),p=d(!1),v=d("");function W(r){l.value=[...l.value,...r]}function F(r){l.value.splice(r,1)}async function N(){const r=[];for(const o of l.value)r.push(await j(o));v.value="",a.value="";try{a.value=ee(r,{calname:c.value,caldesc:i.value,regenerate_uids:p.value})}catch(o){v.value=o.toString()}}function j(r){return new Promise((o,b)=>{const u=new FileReader;u.onload=()=>{o(u.result||"")},u.onerror=b,u.readAsText(r)})}return(r,o)=>{const b=q,u=G,w=Q,A=X,B=Y,k=O,$=Z,z=H,E=D;return _(),h("div",null,[n(b,{title:t(e)("tools.ical-merger.texts.title-drag-and-drop-ical-file-here-or-click-to-select-a-file"),multiple:"","mb-2":"",onFilesUpload:W},null,8,["title"]),n(w,{label:t(e)("tools.ical-merger.texts.label-title"),"label-placement":"left"},{default:m(()=>[n(u,{value:t(c),"onUpdate:value":o[0]||(o[0]=s=>x(c)?c.value=s:null),placeholder:t(e)("tools.ical-merger.texts.placeholder-please-input-merge-calendar-title")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(w,{label:t(e)("tools.ical-merger.texts.label-description")},{default:m(()=>[n(u,{value:t(i),"onUpdate:value":o[1]||(o[1]=s=>x(i)?i.value=s:null),placeholder:t(e)("tools.ical-merger.texts.placeholder-please-input-merged-calendar-description")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(B,{justify:"center"},{default:m(()=>[n(A,{checked:t(p),"onUpdate:checked":o[2]||(o[2]=s=>x(p)?p.value=s:null)},{default:m(()=>[f(g(t(e)("tools.ical-merger.text.regenerate-uids")),1)]),_:1},8,["checked"])]),_:1}),I("ul",null,[(_(!0),h(R,null,T(t(l),(s,V)=>(_(),h("li",{key:V,"mb-1":""},[n(k,{"mr-2":"",onClick:oe=>F(V)},{default:m(()=>[f(g(t(e)("tools.ical-merger.texts.tag-delete")),1)]),_:2},1032,["onClick"]),f(" "+g(t(e)("tools.ical-merger.texts.file-to-merge-file-name",[s.name])),1)]))),128))]),I("div",te,[n(k,{onClick:N},{default:m(()=>[f(g(t(e)("tools.ical-merger.texts.tag-merge-ical-files")),1)]),_:1})]),n($),t(v)?(_(),P(z,{key:0,"mb-2":""},{default:m(()=>[f(g(t(v)),1)]),_:1})):S("",!0),t(a)?(_(),P(E,{key:1,value:t(a),"onUpdate:value":o[3]||(o[3]=s=>x(a)?a.value=s:null),"download-file-name":"merge.ics","download-button-text":t(e)("tools.ical-merger.texts.download-merged-ical"),label:t(e)("tools.ical-merger.texts.label-merged-ical"),"mb-2":""},null,8,["value","download-button-text","label"])):S("",!0)])}}});const ye=J(le,[["__scopeId","data-v-151609a7"]]);export{ye as default};
