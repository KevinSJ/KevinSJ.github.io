import{d as F,al as G,r as x,ac as g,b0 as M,cc as Q,o as w,c as N,a as S,k as e,l,m as i,w as o,a6 as p,G as D,a7 as K,a8 as X,b$ as Y,x as Z,a$ as ee,aj as te,ah as ae,ai as oe,bo as ne,bp as le,bq as se}from"./index-0c1fde36.js";import{_ as re}from"./p-77eb774b.js";import{_ as ue}from"./Space-7fc52151.js";import{N as pe}from"./Tag-e75b8dae.js";import{_ as ce}from"./Select-9917c364.js";import{_ as de}from"./FormItem-1b9a5952.js";import{_ as ie}from"./Card-7ba5ce79.js";import"./get-slot-1efb97e5.js";import"./FocusDetector-089b8822.js";import"./VirtualList-8140ffff.js";import"./Empty-ca426d71.js";import"./index-cbfaa337.js";import"./context-00991937.js";const _e=b=>(ne("data-v-5678d6a1"),b=b(),le(),b),fe={"mb-1":""},me={"mb-2":""},ve=_e(()=>S("summary",{"mb-1":""}," WebSocket TCP/UDP Bridge Configuration ",-1)),ge=F({__name:"tcp-udp-port-tester",setup(b){const y=G("tcp-udp-port-tester:ws","ws://localhost:8080"),a=x(null),n=x(!1),T=x([]),_=g({name:"target",storageName:"tcp-udp-port-tester:t",defaultValue:"localhost"}),f=g({name:"port",storageName:"tcp-udp-port-tester:p",defaultValue:9e3}),m=g({name:"proto",storageName:"tcp-udp-port-tester:o",defaultValue:"tcp"}),I=[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"}],c=g({name:"text",storageName:"tcp-udp-port-tester:e",defaultValue:""}),v=g({name:"hex",storageName:"tcp-udp-port-tester:h",defaultValue:""});function $(){if(a.value&&n.value){s("âš ï¸ Already connected");return}a.value=new WebSocket(y.value),a.value.binaryType="arraybuffer",a.value.onopen=()=>{n.value=!0,s("âœ… Connected to WebSocket bridge")},a.value.onmessage=r=>{try{const t=JSON.parse(r.data);t.error?s(`âŒ Error: ${t.error}`):t.end&&s(`ðŸ›‘ End: ${t.end}`)}catch{if(typeof r.data=="string")s(`ðŸ“© Text: ${r.data}`);else{const t=new Uint8Array(r.data);s(`ðŸ“© Binary: ${Array.from(t).map(k=>k.toString(16).padStart(2,"0")).join(" ")}`);try{s(`ðŸ“© Text: ${new TextDecoder().decode(t)}`)}catch{}}}},a.value.onclose=()=>{n.value=!1,s("ðŸ”Œ Disconnected")}}function V(){if(!a.value){s("âš ï¸ No active connection");return}s("ðŸ”» Disconnecting..."),a.value.close(),a.value=null,n.value=!1}function j(){if(a.value&&n.value){const r={type:"config",protocol:m.value,host:_.value,port:f.value};a.value.send(JSON.stringify(r)),s(`âš™ï¸ Configured ${m.value.toUpperCase()} â†’ ${_.value}:${f.value}`)}}function O(){a.value&&n.value&&c.value.trim()!==""&&(a.value.send(JSON.stringify({type:"send",payload:c.value.replace(/\\n/g,`
`).replace(/\\r/g,"\r")})),s(`âž¡ï¸ Sent text: ${c.value}`))}function W(){if(a.value&&n.value){const r=H(v.value);a.value.send(JSON.stringify({type:"send",payload:r})),s(`âž¡ï¸ Sent hex: ${v.value}`)}}function H(r){return r.match(/.{1,2}/g)?.map(t=>Number.parseInt(t,16))??[]}function L(){T.value=[]}const h=x(null);function s(r){T.value.push(r),Y(()=>{h.value&&(h.value.scrollTop=h.value.scrollHeight)})}return M(()=>$()),Q(()=>{a.value&&a.value.close()}),(r,t)=>{const k=Z,A=ee,J=re,d=te,C=ue,R=pe,P=ae,E=oe,q=ce,U=de,B=ie;return w(),N("div",null,[S("div",fe,[S("details",me,[ve,e(k,{value:l(y),"onUpdate:value":t[0]||(t[0]=u=>i(y)?y.value=u:null),label:"WebSocket TCP/UDP Bridge Url:","label-position":"left",placeholder:"WebSocket URL","mb-1":""},null,8,["value"]),e(J,{"mb-1":""},{default:o(()=>[p(" To use this tool, you need to host a WebSocket TCP/UDP Bridge based on "),e(A,{target:"_blank",href:"https://github.com/sharevb/ws-tcp-udp-bridge?tab=readme-ov-file#running-with-it-tools"},{default:o(()=>[p(" https://github.com/sharevb/ws-tcp-udp-bridge ")]),_:1})]),_:1}),e(C,{justify:"center"},{default:o(()=>[e(d,{type:"primary",disabled:l(n),onClick:$},{default:o(()=>[p(" Connect ")]),_:1},8,["disabled"]),e(d,{type:"error",disabled:!l(n),onClick:V},{default:o(()=>[p(" Disconnect ")]),_:1},8,["disabled"])]),_:1})]),e(C,{justify:"center"},{default:o(()=>[e(R,{type:l(n)?"success":"error"},{default:o(()=>[p(D(l(n)?"Connected":"Disconnected"),1)]),_:1},8,["type"])]),_:1})]),e(U,{label:"Target:","label-placement":"left"},{default:o(()=>[e(P,{value:l(_),"onUpdate:value":t[1]||(t[1]=u=>i(_)?_.value=u:null),placeholder:"Target IP","mr-1":""},null,8,["value"]),e(E,{value:l(f),"onUpdate:value":t[2]||(t[2]=u=>i(f)?f.value=u:null),placeholder:"Port",style:{width:"250px"},"mr-1":""},null,8,["value"]),e(q,{value:l(m),"onUpdate:value":t[3]||(t[3]=u=>i(m)?m.value=u:null),options:I,placeholder:"Protocol",style:{width:"250px"},"mr-1":""},null,8,["value"]),e(d,{type:"primary",disabled:!l(n),onClick:j},{default:o(()=>[p(" Apply Configuration ")]),_:1},8,["disabled"])]),_:1}),e(B,{title:"Logs","mb-1":""},{default:o(()=>[e(C,{justify:"center","mb-1":""},{default:o(()=>[e(d,{onClick:L},{default:o(()=>[p(" Clear logs ")]),_:1})]),_:1}),S("div",{ref_key:"logsRef",ref:h,style:{"font-size":".8em",height:"250px","overflow-y":"scroll"}},[(w(!0),N(K,null,X(l(T),(u,z)=>(w(),N("pre",{key:z,style:{"white-space":"pre-wrap"}},D(u),1))),128))],512)]),_:1}),e(B,{title:"Payload Builder","mb-1":""},{default:o(()=>[e(U,{label:"Send Text payload (can add \\r \\n):","label-placement":"left"},{default:o(()=>[e(P,{value:l(c),"onUpdate:value":t[4]||(t[4]=u=>i(c)?c.value=u:null),placeholder:"Text payload","mr-1":""},null,8,["value"]),e(d,{disabled:!l(n),onClick:O},{default:o(()=>[p(" Send ")]),_:1},8,["disabled"])]),_:1}),e(U,{label:"Send Hex payload:","label-placement":"left"},{default:o(()=>[e(P,{value:l(v),"onUpdate:value":t[5]||(t[5]=u=>i(v)?v.value=u:null),placeholder:"Hex payload (e.g. 48656c6c6f)","mr-1":""},null,8,["value"]),e(d,{disabled:!l(n),onClick:W},{default:o(()=>[p(" Send ")]),_:1},8,["disabled"])]),_:1})]),_:1})])}}});const Be=se(ge,[["__scopeId","data-v-5678d6a1"]]);export{Be as default};
