import{b as D,Q as b}from"./index-0c1fde36.js";import{w as _}from"./defaults-4d6daddf.js";var T={exports:{}},M={exports:{}};(function(p,f){Object.defineProperty(f,"__esModule",{value:!0}),f.ParsingError=void 0;class h extends Error{constructor(r,i){super(r),this.cause=i}}f.ParsingError=h;let o;function g(){return C(!1)||P()||y()||S()||x()}function E(){return n(/\s*/),C(!0)||y()||O()||x()}function u(){const t=x(),r=[];let i,a=E();for(;a;){if(a.node.type==="Element"){if(i)throw new Error("Found multiple root nodes");i=a.node}a.excluded||r.push(a.node),a=E()}if(!i)throw new h("Failed to parse XML","Root Element not found");if(o.xml.length!==0)throw new h("Failed to parse XML","Not Well-Formed XML");return{declaration:t?t.node:null,root:i,children:r}}function x(){const t=n(/^<\?([\w-:.]+)\s*/);if(!t)return;const r={name:t[1],type:"ProcessingInstruction",content:""},i=o.xml.indexOf("?>");if(i>-1)r.content=o.xml.substring(0,i).trim(),o.xml=o.xml.slice(i);else throw new h("Failed to parse XML","ProcessingInstruction closing tag not found");return n(/\?>/),{excluded:o.options.filter(r)===!1,node:r}}function C(t){const r=n(/^<([^?!</>\s]+)\s*/);if(!r)return;const i={type:"Element",name:r[1],attributes:{},children:[]},a=t?!1:o.options.filter(i)===!1;for(;!(l()||c(">")||c("?>")||c("/>"));){const m=w();if(m)i.attributes[m.name]=m.value;else return}if(n(/^\s*\/>/))return i.children=null,{excluded:a,node:i};n(/\??>/);let s=g();for(;s;)s.excluded||i.children.push(s.node),s=g();if(o.options.strictMode){const m=`</${i.name}>`;if(o.xml.startsWith(m))o.xml=o.xml.slice(m.length);else throw new h("Failed to parse XML",`Closing tag not matching "${m}"`)}else n(/^<\/[\w-:.\u00C0-\u00FF]+\s*>/);return{excluded:a,node:i}}function O(){const t=n(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||n(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||n(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||n(/^<!DOCTYPE\s+\S+\s*>/);if(t){const r={type:"DocumentType",content:t[0]};return{excluded:o.options.filter(r)===!1,node:r}}}function S(){if(o.xml.startsWith("<![CDATA[")){const t=o.xml.indexOf("]]>");if(t>-1){const r=t+3,i={type:"CDATA",content:o.xml.substring(0,r)};return o.xml=o.xml.slice(r),{excluded:o.options.filter(i)===!1,node:i}}}}function y(){const t=n(/^<!--[\s\S]*?-->/);if(t){const r={type:"Comment",content:t[0]};return{excluded:o.options.filter(r)===!1,node:r}}}function P(){const t=n(/^([^<]+)/);if(t){const r={type:"Text",content:t[1]};return{excluded:o.options.filter(r)===!1,node:r}}}function w(){const t=n(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(t)return{name:t[1].trim(),value:e(t[2].trim())}}function e(t){return t.replace(/^['"]|['"]$/g,"")}function n(t){const r=o.xml.match(t);if(r)return o.xml=o.xml.slice(r[0].length),r}function l(){return o.xml.length===0}function c(t){return o.xml.indexOf(t)===0}function d(t,r={}){t=t.trim();const i=r.filter||(()=>!0);return o={xml:t,options:Object.assign(Object.assign({},r),{filter:i,strictMode:r.strictMode===!0})},u()}p.exports=d,f.default=d})(M,M.exports);var X=M.exports;(function(p,f){var h=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f,"__esModule",{value:!0});const o=h(X);function g(e){if(!e.options.indentation&&!e.options.lineSeparator)return;e.content+=e.options.lineSeparator;let n;for(n=0;n<e.level;n++)e.content+=e.options.indentation}function E(e){e.content=e.content.replace(/ +$/,"");let n;for(n=0;n<e.level;n++)e.content+=e.options.indentation}function u(e,n){e.content+=n}function x(e,n,l){if(e.type==="Element")S(e,n,l);else if(e.type==="ProcessingInstruction")P(e,n);else if(typeof e.content=="string")C(e.content,n,l);else throw new Error("Unknown node type: "+e.type)}function C(e,n,l){if(!l){const c=e.trim();(n.options.lineSeparator||c.length===0)&&(e=c)}e.length>0&&(!l&&n.content.length>0&&g(n),u(n,e))}function O(e,n){const l="/"+e.join("/"),c=e[e.length-1];return n.includes(c)||n.includes(l)}function S(e,n,l){if(n.path.push(e.name),!l&&n.content.length>0&&g(n),u(n,"<"+e.name),y(n,e.attributes),e.children===null||n.options.forceSelfClosingEmptyTag&&e.children.length===0){const c=n.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";u(n,c)}else if(e.children.length===0)u(n,"></"+e.name+">");else{const c=e.children;u(n,">"),n.level++;let d=e.attributes["xml:space"]==="preserve"||l,t=!1;if(!d&&n.options.ignoredPaths&&(t=O(n.path,n.options.ignoredPaths),d=t),!d&&n.options.collapseContent){let r=!1,i=!1,a=!1;c.forEach(function(s,m){s.type==="Text"?(s.content.includes(`
`)?(i=!0,s.content=s.content.trim()):(m===0||m===c.length-1)&&!l&&s.content.trim().length===0&&(s.content=""),(s.content.trim().length>0||c.length===1)&&(r=!0)):s.type==="CDATA"?r=!0:a=!0}),r&&(!a||!i)&&(d=!0)}c.forEach(function(r){x(r,n,l||d)}),n.level--,!l&&!d&&g(n),t&&E(n),u(n,"</"+e.name+">")}n.path.pop()}function y(e,n){Object.keys(n).forEach(function(l){const c=n[l].replace(/"/g,"&quot;");u(e," "+l+'="'+c+'"')})}function P(e,n){n.content.length>0&&g(n),u(n,"<?"+e.name),u(n," "+e.content.trim()),u(n,"?>")}function w(e,n={}){n.indentation="indentation"in n?n.indentation:"    ",n.collapseContent=n.collapseContent===!0,n.lineSeparator="lineSeparator"in n?n.lineSeparator:`\r
`,n.whiteSpaceAtEndOfSelfclosingTag=n.whiteSpaceAtEndOfSelfclosingTag===!0,n.throwOnFailure=n.throwOnFailure!==!1;try{const l=(0,o.default)(e,{filter:n.filter,strictMode:n.strictMode}),c={content:"",level:0,options:n,path:[]};return l.declaration&&P(l.declaration,c),l.children.forEach(function(d){x(d,c,!1)}),n.lineSeparator?c.content.replace(/\r\n/g,`
`).replace(/\n/g,n.lineSeparator):c.content}catch(l){if(n.throwOnFailure)throw l;return e}}w.minify=(e,n={})=>w(e,Object.assign(Object.assign({},n),{indentation:"",lineSeparator:""})),p.exports=w,f.default=w})(T,T.exports);var v=T.exports;const j=D(v);function F(p){return p.trim()}function N(p,f){return _(()=>j(F(p),f)??"","")}function I(p){const f=F(p);if(f==="")return!0;try{return j(f),!0}catch{return!1}}export{N as f,I as i};
