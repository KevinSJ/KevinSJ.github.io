import{d as T,a0 as A,am as w,bd as G,r as x,O,i as S,o as h,c as C,k as l,w as n,a as r,l as e,m as v,a6 as d,G as s,j as Q,a7 as U,a8 as J,ad as K,ak as W,s as X,af as Z,aj as ee,bq as te}from"./index-0c1fde36.js";import{v as oe}from"./vue3-flip-countdown.common-ea9a44f6.js";import{h as D}from"./moment-55cb88ed.js";import{_ as ne}from"./Modal-045d7e50.js";import{_ as se}from"./Card-7ba5ce79.js";import{_ as ae}from"./p-77eb774b.js";import{_ as le}from"./a-07fc27a5.js";import"./index-cbfaa337.js";const ue={"max-w-600px":""},de={"mb-4":"",flex:"","justify-center":"","gap-2":""},ie={flex:"","justify-center":""},re={"mb-2":"",flex:"","justify-center":""},ce={"mb-2":"",flex:"","justify-center":""},me={flex:"","justify-center":"","gap-1":""},_e="YYYY-MM-DD HH:mm:ss",fe=T({__name:"countdown",setup(pe){const{t:u}=A();function B(a){const t=new URL(window.location.href);return t.searchParams.set("d",a.d.toString()),t.searchParams.set("h",a.h.toString()),t.searchParams.set("m",a.m.toString()),t.searchParams.set("s",a.s.toString()),t.toString()}const c=w({tool:"countdown",name:"d",defaultValue:0}),m=w({tool:"countdown",name:"h",defaultValue:0}),_=w({tool:"countdown",name:"m",defaultValue:0}),f=w({tool:"countdown",name:"s",defaultValue:0}),p=G("countdown:hst",[]),i=x("stopped"),b=x(null);O(()=>{i.value==="ended"&&b.value?.play()});const k=x(D()),P=S(()=>k.value.add(c.value,"d").add(m.value,"h").add(_.value,"m").add(f.value,"s").toDate()),N=S(()=>k.value.add(c.value,"d").add(m.value,"h").add(_.value,"m").add(f.value,"s").format(_e));function Y(){k.value=D(),i.value="running";const a={d:c.value,h:m.value,m:_.value,s:f.value};p.value.find(t=>t.d===a.d&&t.h===a.h&&t.m===a.m&&t.s===a.s)||(p.value=[a,...p.value])}function $(){i.value="stopped",b.value?.pause()}function H(){i.value==="running"&&(i.value="ended"),document.fullscreenElement&&document.exitFullscreen?.()}const V=x();function q(){const a=V.value;a&&(document.fullscreenElement?document.exitFullscreen?.():a?.requestFullscreen())}const y=S(()=>i.value==="ended");return(a,t)=>{const g=W,E=X,j=Z,z=ee,I=se,L=ne,M=ae,R=le;return h(),C("div",ue,[l(j,{disabled:e(i)!=="stopped",title:e(u)("tools.countdown.texts.title-countdown-time"),"mb-4":""},{default:n(()=>[r("div",de,[l(g,{value:e(c),"onUpdate:value":t[0]||(t[0]=o=>v(c)?c.value=o:null),min:0},{suffix:n(()=>[d(s(e(u)("tools.countdown.texts.tag-days")),1)]),_:1},8,["value"]),l(g,{value:e(m),"onUpdate:value":t[1]||(t[1]=o=>v(m)?m.value=o:null),min:0},{suffix:n(()=>[d(s(e(u)("tools.countdown.texts.tag-hours")),1)]),_:1},8,["value"]),l(g,{value:e(_),"onUpdate:value":t[2]||(t[2]=o=>v(_)?_.value=o:null),min:0},{suffix:n(()=>[d(s(e(u)("tools.countdown.texts.tag-minutes")),1)]),_:1},8,["value"]),l(g,{value:e(f),"onUpdate:value":t[3]||(t[3]=o=>v(f)?f.value=o:null),min:0},{suffix:n(()=>[d(s(e(u)("tools.countdown.texts.tag-seconds")),1)]),_:1},8,["value"])]),r("div",ie,[l(E,{onClick:Y},{default:n(()=>[d(s(e(u)("tools.countdown.texts.tag-start")),1)]),_:1})])]),_:1},8,["disabled","title"]),r("div",{id:"fullScreenElement",ref_key:"fullScreenElement",ref:V,"mb-2":""},[r("div",null,[l(e(oe.Countdown),{deadline:e(N),stop:e(i)!=="running","mb-2":"","countdown-size":"4rem",onTimeElapsed:t[4]||(t[4]=o=>H())},null,8,["deadline","stop"]),r("div",re,[l(E,{disabled:e(i)==="stopped",onClick:q},{default:n(()=>[d(s(e(u)("tools.countdown.texts.tag-toggle-fullscreen")),1)]),_:1},8,["disabled"])])])],512),l(L,{show:e(y),"onUpdate:show":t[6]||(t[6]=o=>v(y)?y.value=o:null),"mask-closable":"false"},{default:n(()=>[l(I,{style:{width:"600px"},title:e(u)("tools.countdown.texts.title-timer-finished"),bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:n(()=>[l(z,{onClick:t[5]||(t[5]=o=>$())},{default:n(()=>[d(s(e(u)("tools.countdown.texts.tag-ok")),1)]),_:1})]),default:n(()=>[r("p",null,s(e(u)("tools.countdown.texts.tag-timer-ellapsed")),1)]),_:1},8,["title"])]),_:1},8,["show"]),r("div",ce,[l(E,{disabled:e(i)==="stopped",onClick:$},{default:n(()=>[d(s(e(u)("tools.countdown.texts.tag-stop")),1)]),_:1},8,["disabled"])]),l(M,{align:"center"},{default:n(()=>[d(" Alarm at: "+s(e(P)),1)]),_:1}),e(p)?(h(),Q(j,{key:0,title:e(u)("tools.countdown.texts.title-history")},{default:n(()=>[r("div",me,[(h(!0),C(U,null,J(e(p),(o,F)=>(h(),C(U,{key:F},[d(s(F>0?" / ":"")+" ",1),l(R,{href:B(o)},{default:n(()=>[d(s(o.d>0?`${o.d} days`:"")+" "+s(o.h>0?`${o.h}h`:"")+" "+s(o.m>0?`${o.m}m`:"")+" "+s(o.s>0?`${o.s}s`:""),1)]),_:2},1032,["href"])],64))),128))])]),_:1},8,["title"])):K("",!0),r("audio",{ref_key:"audio",ref:b,loop:"",src:"/Beep.mp3"},null,512)])}}});const Ee=te(fe,[["__scopeId","data-v-cf747742"]]);export{Ee as default};
