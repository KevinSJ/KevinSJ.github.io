import{c as h,i as v}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{a as m,b as y,P as w,d as E,h as B,f as L}from"./main-CdZmBCMR.js";import"./mobileMenu-BoMunYmR.js";let l=[];async function b(t){return new Promise((n,s)=>{const a=new Image,o=new FileReader;o.onload=d=>{a.onload=async()=>{const r=document.createElement("canvas");r.width=a.width,r.height=a.height;const e=r.getContext("2d");if(!e){s(new Error("Failed to get canvas context"));return}e.drawImage(a,0,0);const i=await new Promise(g=>r.toBlob(g,"image/png"));if(!i){s(new Error("Failed to create PNG blob"));return}const c=await i.arrayBuffer();n(c)},a.onerror=()=>s(new Error("Failed to load image.")),a.src=d.target?.result},o.onerror=()=>s(new Error("Failed to read file.")),o.readAsDataURL(t)})}const f=()=>{const t=document.getElementById("file-display-area"),n=document.getElementById("file-controls"),s=document.getElementById("process-btn");!t||!n||!s||(t.innerHTML="",l.length>0?(n.classList.remove("hidden"),s.classList.remove("hidden"),l.forEach((a,o)=>{const d=document.createElement("div");d.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const r=document.createElement("div");r.className="flex items-center gap-2 overflow-hidden";const e=document.createElement("span");e.className="truncate font-medium text-gray-200",e.textContent=a.name;const i=document.createElement("span");i.className="flex-shrink-0 text-gray-400 text-xs",i.textContent=`(${L(a.size)})`,r.append(e,i);const c=document.createElement("button");c.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",c.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',c.onclick=()=>{l=l.filter((g,u)=>u!==o),f()},d.append(r,c),t.appendChild(d)}),h({icons:v})):(n.classList.add("hidden"),s.classList.add("hidden")))},p=()=>{l=[],f()};async function I(){if(l.length===0){m("No Files","Please select at least one BMP file.");return}y("Converting BMP to PDF...");try{const t=await w.create();for(const s of l){const a=await b(s),o=await t.embedPng(a);t.addPage([o.width,o.height]).drawImage(o,{x:0,y:0,width:o.width,height:o.height})}const n=await t.save();E(new Blob([new Uint8Array(n)],{type:"application/pdf"}),"from_bmps.pdf"),m("Success","PDF created successfully!","success",()=>{p()})}catch(t){console.error(t),m("Error","Failed to convert BMP to PDF. One of the files may be invalid.")}finally{B()}}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("file-input"),n=document.getElementById("drop-zone"),s=document.getElementById("add-more-btn"),a=document.getElementById("clear-files-btn"),o=document.getElementById("process-btn"),d=document.getElementById("back-to-tools");d&&d.addEventListener("click",()=>{window.location.href="/itools/"});const r=e=>{if(!e||e.length===0)return;const i=Array.from(e).filter(c=>c.type==="image/bmp"||c.name.toLowerCase().endsWith(".bmp"));i.length<e.length&&m("Invalid Files","Some files were skipped. Only BMP files are allowed."),i.length>0&&(l=[...l,...i],f())};t&&n&&(t.addEventListener("change",e=>{r(e.target.files)}),n.addEventListener("dragover",e=>{e.preventDefault(),n.classList.add("bg-gray-700")}),n.addEventListener("dragleave",e=>{e.preventDefault(),n.classList.remove("bg-gray-700")}),n.addEventListener("drop",e=>{e.preventDefault(),n.classList.remove("bg-gray-700"),r(e.dataTransfer?.files??null)}),t.addEventListener("click",()=>{t.value=""})),s&&s.addEventListener("click",()=>{t?.click()}),a&&a.addEventListener("click",()=>{p()}),o&&o.addEventListener("click",I)});
