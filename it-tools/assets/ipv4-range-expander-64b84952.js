import{d as y,F,i as x,_ as U,o as c,c as f,a as d,G as v,l as t,k as u,a0 as j,ac as w,R as V,m as S,j as N,w as g,a7 as D,a8 as G,a6 as Q,ad as q,x as H,b3 as J,s as K}from"./index-0c1fde36.js";import{a as k,i as I}from"./ipv4-address-converter.service-64d91d12.js";import{c as $}from"./integer-base-converter.model-04cc1fa7.js";import{_ as C}from"./SpanCopyable.vue_vue_type_script_setup_true_lang-8d5870e2.js";import{E as M}from"./Exchange-50a0cd13.js";import{_ as W}from"./Table-4b7ecda9.js";import{N as X}from"./Alert-a9fb131b.js";function B(n){return`${n>>>24}.${n>>16&255}.${n>>8&255}.${n&255}`}function b(n,e){return n==null||e==null?-1:1+Number.parseInt(e,2)-Number.parseInt(n,2)}function Y(n,e){if(n==null||e==null||b(n,e)<1)return null;let a=32;for(let i=0;i<32;i++)if(n[i]!==e[i]){a=i;break}const o=n.substring(0,a)+"0".repeat(32-a),r=e.substring(0,a)+"1".repeat(32-a);return{start:o,end:r,mask:a}}function Z({startIp:n,endIp:e}){const l=$({value:k({ip:n}).toString(),fromBase:10,toBase:2}).padStart(32,"0"),a=$({value:k({ip:e}).toString(),fromBase:10,toBase:2}).padStart(32,"0"),o=Y(l,a);if(o!=null){const r={};return r.newEnd=B(Number.parseInt(o.end,2)),r.newStart=B(Number.parseInt(o.start,2)),r.newCidr=`${r.newStart}/${o.mask}`,r.newSize=b(o.start,o.end),r.oldSize=b(l,a),r}}const ee={"font-bold":""},te=["data-test-id"],ae=["data-test-id"],ne=y({__name:"result-row",props:{label:{default:""},oldValue:{default:""},newValue:{default:""}},setup(n){const e=n,{label:l,oldValue:a,newValue:o}=F(e),r=x(()=>U.kebabCase(l.value));return(i,_)=>(c(),f("tr",null,[d("td",ee,v(t(l)),1),d("td",{"data-test-id":`${t(r)}.old`},[u(C,{value:t(a),class:"monospace"},null,8,["value"])],8,te),d("td",{"data-test-id":`${t(r)}.new`},[u(C,{value:t(o)},null,8,["value"])],8,ae)]))}}),se={"mb-4":"",flex:"","gap-4":""},le={scope:"col"},oe={scope:"col"},re={scope:"col"},de=d("div",{"my-3":"","op-70":""}," The end IPv4 address is lower than the start IPv4 address. This is not valid and no result could be calculated. In the most cases the solution to solve this problem is to change start and end address. ",-1),ge=y({__name:"ipv4-range-expander",setup(n){const{t:e}=j(),l=w({name:"start",storageName:"ipv4-range-expander:startAddress",defaultValue:"192.168.1.1"}),a=w({name:"end",storageName:"ipv4-range-expander:endAddress",defaultValue:"192.168.6.255"}),o=x(()=>Z({startIp:l.value,endIp:a.value})),r=[{label:e("tools.ipv4-range-expander.texts.label-start-address"),getOldValue:()=>l.value,getNewValue:s=>s?.newStart},{label:e("tools.ipv4-range-expander.texts.label-end-address"),getOldValue:()=>a.value,getNewValue:s=>s?.newEnd},{label:e("tools.ipv4-range-expander.texts.label-addresses-in-range"),getOldValue:s=>s?.oldSize?.toLocaleString(),getNewValue:s=>s?.newSize?.toLocaleString()},{label:e("tools.ipv4-range-expander.texts.label-cidr"),getOldValue:()=>"",getNewValue:s=>s?.newCidr}],i=V({source:l,rules:[{message:e("tools.ipv4-range-expander.texts.message-invalid-ipv4-address"),validator:s=>I({ip:s})}]}),_=V({source:a,rules:[{message:e("tools.ipv4-range-expander.texts.message-invalid-ipv4-address"),validator:s=>I({ip:s})}]}),E=x(()=>_.isValid&&i.isValid&&o.value!==void 0);function z(){const s=l.value;l.value=a.value,a.value=s}return(s,m)=>{const h=H,A=W,O=J,R=K,T=X;return c(),f("div",null,[d("div",se,[u(h,{value:t(l),"onUpdate:value":m[0]||(m[0]=p=>S(l)?l.value=p:null),label:t(e)("tools.ipv4-range-expander.texts.label-start-address"),placeholder:t(e)("tools.ipv4-range-expander.texts.placeholder-start-ipv4-address"),validation:t(i),clearable:""},null,8,["value","label","placeholder","validation"]),u(h,{value:t(a),"onUpdate:value":m[1]||(m[1]=p=>S(a)?a.value=p:null),label:t(e)("tools.ipv4-range-expander.texts.label-end-address"),placeholder:t(e)("tools.ipv4-range-expander.texts.placeholder-end-ipv4-address"),validation:t(_),clearable:""},null,8,["value","label","placeholder","validation"])]),t(E)?(c(),N(A,{key:0,"data-test-id":"result"},{default:g(()=>[d("thead",null,[d("tr",null,[d("th",le,v(t(e)("tools.ipv4-range-expander.texts.tag-nbsp")),1),d("th",oe,v(t(e)("tools.ipv4-range-expander.texts.tag-old-value")),1),d("th",re,v(t(e)("tools.ipv4-range-expander.texts.tag-new-value")),1)])]),d("tbody",null,[(c(),f(D,null,G(r,({label:p,getOldValue:L,getNewValue:P})=>u(ne,{key:p,label:p,"old-value":L(t(o)),"new-value":P(t(o))},null,8,["label","old-value","new-value"])),64))])]),_:1})):t(i).isValid&&t(_).isValid?(c(),N(T,{key:1,title:t(e)("tools.ipv4-range-expander.texts.title-invalid-combination-of-start-and-end-ipv4-address"),type:"error"},{default:g(()=>[de,u(R,{onClick:z},{default:g(()=>[u(O,{"mr-2":"",component:t(M),depth:"3",size:"22"},null,8,["component"]),Q(v(t(e)("tools.ipv4-range-expander.texts.tag-switch-start-and-end-ipv4-address")),1)]),_:1})]),_:1},8,["title"])):q("",!0)])}}});export{ge as default};
