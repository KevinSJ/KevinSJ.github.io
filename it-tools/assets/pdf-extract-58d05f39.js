import{_ as D}from"./InputCopyable.vue_vue_type_script_setup_true_lang-294ac243.js";import{d as E,a0 as S,r as a,o as b,c as I,a as r,k as n,l as t,w as c,m as M,a6 as v,G as d,j as B,ad as F,aW as O,x as R,af as W,s as z,ag as G}from"./index-0c1fde36.js";import{g as T}from"./base64-ae7cf34b.js";import{q as H}from"./qpdf-45a7a22a.js";import{u as J}from"./downloadBase64-508288e2.js";import{_ as K}from"./a-07fc27a5.js";import{_ as L}from"./p-77eb774b.js";import{_ as Q}from"./Divider-5fc425b0.js";import{_ as X}from"./Spin-885f2a22.js";import"./index-a6f01dde.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";const Y={style:{flex:"0 0 100%"}},Z={"mx-auto":"","max-w-600px":""},tt={"mt-2":"","text-center":""},et={"mt-3":"",flex:"","justify-center":""},ot={"mt-3":"",flex:"","justify-center":""},xt=E({__name:"pdf-extract",setup(nt){const{t:e}=S(),i=a("idle"),p=a(null),f=a(""),h=a(""),m=a([]),x=a(""),{download:$}=J({source:h,filename:x,extension:"pdf"}),y=a("");function q(l){p.value=l,x.value=`extract_${p.value.name}`}async function C(){if(!p.value)return;const l=await p.value.arrayBuffer();i.value="processing";try{const o=["in.pdf","--verbose","--pages",".",`${f.value}`,"--","out.pdf"],_=await j(l,o,0);h.value=`data:application/pdf;base64,${T.fromUint8Array(_)}`,i.value="done",$()}catch{i.value="error"}}async function j(l,o,_){y.value=o.join(" "),m.value=[];const s=await H({print(u){m.value.push(u)},printErr(u){m.value.push(u)}});s.FS.writeFile("in.pdf",new Uint8Array(l));const g=s.callMain(o);if(_!==g)throw new Error("Process run failed");return s.FS.readFile("out.pdf")}return(l,o)=>{const _=O,s=R,g=K,u=L,w=W,N=z,P=Q,U=G,V=X,A=D;return b(),I("div",null,[r("div",Y,[r("div",Z,[n(_,{title:t(e)("tools.pdf-extract.texts.title-drag-and-drop-a-pdf-file-here-or-click-to-select-a-file"),accept:".pdf",onFileUpload:q},null,8,["title"]),r("div",tt,[n(s,{value:t(x),label:t(e)("tools.pdf-extract.texts.label-output-file"),"label-position":"left"},null,8,["value","label"])])])]),n(w,{title:t(e)("tools.pdf-extract.texts.title-extraction-range"),"mb-3":"","mt-3":""},{default:c(()=>[n(s,{value:t(f),"onUpdate:value":o[0]||(o[0]=k=>M(f)?f.value=k:null),label:t(e)("tools.pdf-extract.texts.label-range"),placeholder:t(e)("tools.pdf-extract.texts.placeholder-qpdf-range"),"mb-2":""},null,8,["value","label","placeholder"]),n(u,null,{default:c(()=>[v(d(t(e)("tools.pdf-extract.texts.tag-for-details-about-range-options-see")),1),n(g,{target:"_blank",href:"https://qpdf.readthedocs.io/en/stable/cli.html#page-selection"},{default:c(()=>[v(d(t(e)("tools.pdf-extract.texts.tag-qpdf-documentation")),1)]),_:1})]),_:1})]),_:1},8,["title"]),r("div",et,[n(N,{disabled:!t(p),onClick:o[1]||(o[1]=k=>C())},{default:c(()=>[v(d(t(e)("tools.pdf-extract.texts.tag-extract-pdf-pages")),1)]),_:1},8,["disabled"])]),n(P),r("div",ot,[t(i)==="error"?(b(),B(U,{key:0,type:"error"},{default:c(()=>[v(" An error occured processing "+d(t(x)),1)]),_:1})):F("",!0),t(i)==="processing"?(b(),B(V,{key:1,size:"small"})):F("",!0)]),n(w,{title:t(e)("tools.pdf-extract.texts.title-logs")},{default:c(()=>[n(A,{label:t(e)("tools.pdf-extract.texts.label-qpdf"),value:t(y),"mb-1":""},null,8,["label","value"]),r("pre",null,d(t(m).join(`
`)),1)]),_:1},8,["title"])])}}});export{xt as default};
