const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-eEAMQJTJ.js","assets/main-CdZmBCMR.js","assets/style-ynO7IsM1.js","assets/style-BjgAlZWF.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as N,i as P}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{n as H,o as j,s as o,a as E,b as w,h as b,_ as S,d as k,f as B,r as U,e as O}from"./main-CdZmBCMR.js";import"./mobileMenu-BoMunYmR.js";const A=new H(j("pymupdf"));let r=[];document.addEventListener("DOMContentLoaded",()=>{const p=document.getElementById("file-input"),m=document.getElementById("drop-zone"),h=document.getElementById("process-btn"),y=document.getElementById("file-display-area"),x=document.getElementById("extract-options"),v=document.getElementById("file-controls"),I=document.getElementById("add-more-btn"),C=document.getElementById("clear-files-btn"),D=document.getElementById("back-to-tools"),u=document.getElementById("images-container"),f=document.getElementById("images-grid"),F=document.getElementById("download-all-btn");D&&D.addEventListener("click",()=>{window.location.href="/itools/"});const L=async()=>{if(!(!y||!x||!h||!v))if(r=[],u&&u.classList.add("hidden"),f&&(f.innerHTML=""),o.files.length>0){y.innerHTML="";for(let e=0;e<o.files.length;e++){const t=o.files[e],n=document.createElement("div");n.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex flex-col overflow-hidden";const i=document.createElement("div");i.className="truncate font-medium text-gray-200 text-sm mb-1",i.textContent=t.name;const s=document.createElement("div");s.className="text-xs text-gray-400",s.textContent=`${B(t.size)} • Loading pages...`,a.append(i,s);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=()=>{o.files=o.files.filter((l,c)=>c!==e),L()},n.append(a,d),y.appendChild(n);try{const l=await U(t),c=await O({data:l}).promise;s.textContent=`${B(t.size)} • ${c.numPages} pages`}catch{s.textContent=`${B(t.size)} • Could not load page count`}}N({icons:P}),v.classList.remove("hidden"),x.classList.remove("hidden"),h.disabled=!1}else y.innerHTML="",v.classList.add("hidden"),x.classList.add("hidden"),h.disabled=!0},M=()=>{o.files=[],o.pdfDoc=null,r=[],u&&u.classList.add("hidden"),f&&(f.innerHTML=""),L()},$=()=>{!f||!u||(f.innerHTML="",r.forEach((e,t)=>{const n=new Blob([new Uint8Array(e.data)]),a=URL.createObjectURL(n),i=document.createElement("div");i.className="bg-gray-700 rounded-lg overflow-hidden";const s=document.createElement("img");s.src=a,s.className="w-full h-32 object-cover";const d=document.createElement("div");d.className="p-2 flex justify-between items-center";const l=document.createElement("span");l.className="text-xs text-gray-300 truncate",l.textContent=e.name;const c=document.createElement("button");c.className="text-indigo-400 hover:text-indigo-300",c.innerHTML='<i data-lucide="download" class="w-4 h-4"></i>',c.onclick=()=>{k(n,e.name)},d.append(l,c),i.append(s,d),f.appendChild(i)}),N({icons:P}),u.classList.remove("hidden"))},T=async()=>{try{if(o.files.length===0){E("No Files","Please select at least one PDF file.");return}w("Loading PDF processor..."),await A.load(),r=[];let e=0;for(let t=0;t<o.files.length;t++){const n=o.files[t];w(`Extracting images from ${n.name}...`);const a=await A.open(n),i=a.pageCount;for(let s=0;s<i;s++){const d=a.getPage(s),l=d.getImages();for(const c of l)try{const g=d.extractImage(c.xref);g&&g.data&&(e++,r.push({data:g.data,name:`image_${e}.${g.ext||"png"}`,ext:g.ext||"png"}))}catch(g){console.warn("Failed to extract image:",g)}}a.close()}b(),r.length===0?E("No Images Found","No embedded images were found in the selected PDF(s)."):($(),E("Extraction Complete",`Found ${r.length} image(s) in ${o.files.length} PDF(s).`,"success"))}catch(e){b(),E("Error",`An error occurred during extraction. Error: ${e.message}`)}},z=async()=>{if(r.length===0)return;w("Creating ZIP archive...");const e=(await S(async()=>{const{default:a}=await import("./jszip.min-eEAMQJTJ.js").then(i=>i.j);return{default:a}},__vite__mapDeps([0,1,2,3,4]))).default,t=new e;r.forEach(a=>{t.file(a.name,a.data)});const n=await t.generateAsync({type:"blob"});k(n,"extracted-images.zip"),b()},_=e=>{if(e&&e.length>0){const t=Array.from(e).filter(n=>n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf"));o.files=[...o.files,...t],L()}};p&&m&&(p.addEventListener("change",e=>{_(e.target.files)}),m.addEventListener("dragover",e=>{e.preventDefault(),m.classList.add("bg-gray-700")}),m.addEventListener("dragleave",e=>{e.preventDefault(),m.classList.remove("bg-gray-700")}),m.addEventListener("drop",e=>{e.preventDefault(),m.classList.remove("bg-gray-700");const t=e.dataTransfer?.files;t&&t.length>0&&_(t)}),p.addEventListener("click",()=>{p.value=""})),I&&I.addEventListener("click",()=>{p.click()}),C&&C.addEventListener("click",()=>{M()}),h&&h.addEventListener("click",T),F&&F.addEventListener("click",z)});
