import{b as O,d as q,r as $,i as N,ca as P,a0 as V,o as F,c as G,k as M,l as v,m as j,w as z,a6 as R,G as S,a as J,x as K,aj as Q}from"./index-0c1fde36.js";import{s as W,a as X}from"./index-937f4495.js";import{_ as Y}from"./TextareaCopyable-59231e95.js";import{_ as Z}from"./Checkbox-ba7202eb.js";import{_ as ee}from"./a-07fc27a5.js";import{_ as ne}from"./Space-7fc52151.js";import{_ as te}from"./Divider-5fc425b0.js";import{_ as oe}from"./FormItem-1b9a5952.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./get-slot-1efb97e5.js";import"./context-00991937.js";var re=function(u,p){var r=u.linkify,k=u.utils.escapeHtml,g='<a\\s([^<>]*href="[^"<>]*"[^<>]*)\\s?>',f=RegExp(g,"i"),a='<img\\s([^<>]*src="[^"<>]*"[^<>]*)\\s?\\/?>',o=RegExp(a,"i"),n=/^(?:https?:)?\/\//i,t=/^(?:https?:\/\/|ftp:\/\/|\/\/|mailto:|xmpp:)/i;p=p||{};var m=typeof p.removeUnknown<"u"?p.removeUnknown:!1,E=typeof p.removeUnbalanced<"u"?p.removeUnbalanced:!1,h=typeof p.imageClass<"u"?p.imageClass:"",y=!1,e,b=["a","b","blockquote","code","em","h1","h2","h3","h4","h5","h6","li","ol","p","pre","s","sub","sup","strong","ul"],C=new Array(b.length),T=new Array(b.length);for(e=0;e<b.length;e++)C[e]=0;for(e=0;e<b.length;e++)T[e]=!1;function s(c){var l=r.match(c);return l&&l.length===1&&l[0].index===0&&l[0].lastIndex===c.length?l[0].url:null}function D(c){return c=c.replace(/<[^<>]*>?/gi,function(l){var i,w,U,_,d,x;return/(^<->|^<-\s|^<3\s)/.test(l)?l:(i=l.match(o),i&&(w=i[1],U=s(w.match(/src="([^"<>]*)"/i)[1]),_=w.match(/alt="([^"<>]*)"/i),_=_&&typeof _[1]<"u"?_[1]:"",d=w.match(/title="([^"<>]*)"/i),d=d&&typeof d[1]<"u"?d[1]:"",U&&n.test(U))?h!==""?'<img src="'+U+'" alt="'+_+'" title="'+d+'" class="'+h+'">':'<img src="'+U+'" alt="'+_+'" title="'+d+'">':(x=b.indexOf("a"),i=l.match(f),i&&(w=i[1],U=s(w.match(/href="([^"<>]*)"/i)[1]),d=w.match(/title="([^"<>]*)"/i),d=d&&typeof d[1]<"u"?d[1]:"",U&&t.test(U))?(y=!0,C[x]+=1,'<a href="'+U+'" title="'+d+'" target="_blank">'):(i=/<\/a>/i.test(l),i?(y=!0,C[x]-=1,C[x]<0&&(T[x]=!0),"</a>"):(i=l.match(/<(br|hr)\s?\/?>/i),i?"<"+i[1].toLowerCase()+">":(i=l.match(/<(\/?)(b|blockquote|code|em|h[1-6]|li|ol(?: start="\d+")?|p|pre|s|sub|sup|strong|ul)>/i),i&&!/<\/ol start="\d+"/i.test(l)?(y=!0,x=b.indexOf(i[2].toLowerCase().split(" ")[0]),i[1]==="/"?C[x]-=1:C[x]+=1,C[x]<0&&(T[x]=!0),"<"+i[1]+i[2].toLowerCase()+">"):m===!0?"":k(l))))))}),c}function L(c){var l,i,w;for(e=0;e<b.length;e++)C[e]=0;for(e=0;e<b.length;e++)T[e]=!1;for(y=!1,i=0;i<c.tokens.length;i++)if(c.tokens[i].type==="html_block"&&(c.tokens[i].content=D(c.tokens[i].content)),c.tokens[i].type==="inline")for(w=c.tokens[i].children,l=0;l<w.length;l++)w[l].type==="html_inline"&&(w[l].content=D(w[l].content))}function A(c){if(y===!1)return;var l,i;function w(_,d){var x,H;return d==="a"?x=RegExp('<a href="[^"<>]*" title="[^"<>]*" target="_blank">',"g"):d==="ol"?x=/<ol(?: start="\d+")?>/g:x=RegExp("<"+d+">","g"),H=RegExp("</"+d+">","g"),E===!0?(_=_.replace(x,""),_=_.replace(H,"")):(_=_.replace(x,function(B){return k(B)}),_=_.replace(H,function(B){return k(B)})),_}function U(_){var d;for(d=0;d<b.length;d++)T[d]===!0&&(_=w(_,b[d]));return _}for(e=0;e<b.length;e++)C[e]!==0&&(T[e]=!0);for(l=0;l<c.tokens.length;l++){if(c.tokens[l].type==="html_block"){c.tokens[l].content=U(c.tokens[l].content);continue}if(c.tokens[l].type==="inline")for(i=c.tokens[l].children,e=0;e<i.length;e++)i[e].type==="html_inline"&&(i[e].content=U(i[e].content))}}u.core.ruler.after("linkify","sanitize_inline",L),u.core.ruler.after("sanitize_inline","sanitize_balance",A)};const le=O(re);function ae(I){function u(r,k){const g=r.pos,f=r.src.charCodeAt(g);if(k||f!==61)return!1;const a=r.scanDelims(r.pos,!0);let o=a.length;const n=String.fromCharCode(f);if(o<2)return!1;if(o%2){const t=r.push("text","",0);t.content=n,o--}for(let t=0;t<o;t+=2){const m=r.push("text","",0);m.content=n+n,!(!a.can_open&&!a.can_close)&&r.delimiters.push({marker:f,length:0,jump:t/2,token:r.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return r.pos+=a.length,!0}function p(r,k){const g=[],f=k.length;for(let a=0;a<f;a++){const o=k[a];if(o.marker!==61||o.end===-1)continue;const n=k[o.end],t=r.tokens[o.token];t.type="mark_open",t.tag="mark",t.nesting=1,t.markup="==",t.content="";const m=r.tokens[n.token];m.type="mark_close",m.tag="mark",m.nesting=-1,m.markup="==",m.content="",r.tokens[n.token-1].type==="text"&&r.tokens[n.token-1].content==="="&&g.push(n.token-1)}for(;g.length;){const a=g.pop();let o=a+1;for(;o<r.tokens.length&&r.tokens[o].type==="mark_close";)o++;if(o--,a!==o){const n=r.tokens[o];r.tokens[o]=r.tokens[a],r.tokens[a]=n}}}I.inline.ruler.before("emphasis","mark",u),I.inline.ruler2.before("emphasis","mark",function(r){let k;const g=r.tokens_meta,f=(r.tokens_meta||[]).length;for(p(r,r.delimiters),k=0;k<f;k++)g[k]&&g[k].delimiters&&p(r,g[k].delimiters)})}const ie=(I,{name:u,marker:p=":",validate:r=f=>f.trim().split(" ",2)[0]===u,openRender:k=(f,a,o,n,t)=>(f[a].attrJoin("class",u),t.renderToken(f,a,o)),closeRender:g=(f,a,o,n,t)=>t.renderToken(f,a,o)}={name:""})=>{const f=p[0],a=p.length,o=(n,t,m,E)=>{let h=n.bMarks[t]+n.tShift[t],y=n.eMarks[t];if(f!==n.src[h])return!1;let e=h+1;for(;e<=y&&p[(e-h)%a]===n.src[e];)e++;const b=Math.floor((e-h)/a);if(b<3)return!1;e-=(e-h)%a;const C=n.src.slice(h,e),T=n.src.slice(e,y);if(!r(T,C))return!1;if(E)return!0;let s=t,D=!1;for(;s<m&&(s++,h=n.bMarks[s]+n.tShift[s],y=n.eMarks[s],!(h<y&&n.sCount[s]<n.blkIndent));)if(f===n.src[h]&&n.sCount[s]-n.blkIndent<4){for(e=h+1;e<=y&&p[(e-h)%a]===n.src[e];e++);if(Math.floor((e-h)/a)>=b&&(e-=(e-h)%a,e=n.skipSpaces(e),e>=y)){D=!0;break}}const L=n.parentType,A=n.lineMax;n.parentType="container",n.lineMax=s;const c=n.push(`container_${u}_open`,"div",1);c.markup=C,c.block=!0,c.info=T,c.map=[t,s],n.md.block.tokenize(n,t+1,s);const l=n.push(`container_${u}_close`,"div",-1);return l.markup=n.src.slice(h,e),l.block=!0,n.parentType=L,n.lineMax=A,n.line=s+(D?1:0),!0};I.block.ruler.before("fence",`container_${u}`,o,{alt:["paragraph","reference","blockquote","list"]}),I.renderer.rules[`container_${u}_open`]=k,I.renderer.rules[`container_${u}_close`]=g},se=I=>{["left","center","right","justify"].forEach(u=>I.use(p=>ie(p,{name:u,openRender:()=>`<div style="text-align:${u}">
`})))},ce={flex:"","justify-center":""},Te=q({__name:"markdown-to-html",setup(I){const u=$(!0),p=$(!0),r=$(!1),k=$(!1),g=$(!1),f=$(""),a=N(()=>{let t=P({html:u.value});return u.value&&p.value&&(t=t.use(le)),r.value&&(t=t.use(se)),k.value&&(t=t.use(W).use(X)),g.value&&(t=t.use(ae)),t.render(f.value)}),{t:o}=V();function n(){const t=window.open();t!==null&&(t.document.body.innerHTML=a.value,t.print())}return(t,m)=>{const E=K,h=Z,y=ee,e=ne,b=te,C=oe,T=Q;return F(),G("div",null,[M(E,{value:v(f),"onUpdate:value":m[0]||(m[0]=s=>j(f)?f.value=s:null),multiline:"","raw-text":"",placeholder:v(o)("tools.markdown-to-html.markdownInput"),rows:"8",autofocus:"",label:v(o)("tools.markdown-to-html.markdown")},null,8,["value","placeholder","label"]),M(e,{justify:"center","gap-1":""},{default:z(()=>[M(h,{checked:v(u),"onUpdate:checked":m[1]||(m[1]=s=>j(u)?u.value=s:null)},{default:z(()=>[R(S(v(o)("tools.markdown-to-html.texts.tag-allow-html-tags")),1)]),_:1},8,["checked"]),M(h,{checked:v(p),"onUpdate:checked":m[2]||(m[2]=s=>j(p)?p.value=s:null),disabled:!v(u)},{default:z(()=>[R(S(v(o)("tools.markdown-to-html.texts.tag-sanitize-html")),1)]),_:1},8,["checked","disabled"]),M(h,{checked:v(k),"onUpdate:checked":m[3]||(m[3]=s=>j(k)?k.value=s:null)},{default:z(()=>[R(S(v(o)("tools.markdown-to-html.texts.tag-allow-superscript-and-subscript")),1)]),_:1},8,["checked"]),M(h,{checked:v(r),"onUpdate:checked":m[4]||(m[4]=s=>j(r)?r.value=s:null)},{default:z(()=>[R(S(v(o)("tools.markdown-to-html.texts.tag-handle")),1),M(y,{href:"https://mdit-plugins.github.io/align.html#syntax",target:"blank"},{default:z(()=>[R(S(v(o)("tools.markdown-to-html.texts.tag-alignment")),1)]),_:1})]),_:1},8,["checked"]),M(h,{checked:v(g),"onUpdate:checked":m[5]||(m[5]=s=>j(g)?g.value=s:null)},{default:z(()=>[R(S(v(o)("tools.markdown-to-html.texts.tag-allow-mark")),1)]),_:1},8,["checked"])]),_:1}),M(b),M(C,{label:v(o)("tools.markdown-to-html.html")},{default:z(()=>[M(Y,{value:v(a),"word-wrap":!0,language:"html","download-file-name":"output.htm"},null,8,["value"])]),_:1},8,["label"]),J("div",ce,[M(T,{onClick:n},{default:z(()=>[R(S(v(o)("tools.markdown-to-html.texts.tag-print-ie-use-a-pdf-printer-to-get-a-pdf-file")),1)]),_:1})])])}}});export{Te as default};
