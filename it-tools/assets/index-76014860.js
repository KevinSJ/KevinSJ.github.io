const b=e=>Number.isFinite(e)?e:0;function g(e){return{days:Math.trunc(e/864e5),hours:Math.trunc(e/36e5%24),minutes:Math.trunc(e/6e4%60),seconds:Math.trunc(e/1e3%60),milliseconds:Math.trunc(e%1e3),microseconds:Math.trunc(b(e*1e3)%1e3),nanoseconds:Math.trunc(b(e*1e6)%1e3)}}function y(e){return{days:e/86400000n,hours:e/3600000n%24n,minutes:e/60000n%60n,seconds:e/1000n%60n,milliseconds:e%1000n,microseconds:0n,nanoseconds:0n}}function _(e){switch(typeof e){case"number":{if(Number.isFinite(e))return g(e);break}case"bigint":return y(e)}throw new TypeError("Expected a finite number or bigint")}const I=e=>e===0||e===0n,x=(e,n)=>n===1||n===1n?e:`${e}s`,E=1e-7,F=24n*60n*60n*1000n;function w(e,n){const f=typeof e=="bigint";if(!f&&!Number.isFinite(e))throw new TypeError("Expected a finite number or bigint");n={...n};const l=e<0?"-":"";e=e<0?-e:e,n.colonNotation&&(n.compact=!1,n.formatSubMilliseconds=!1,n.separateMilliseconds=!1,n.verbose=!1),n.compact&&(n.unitCount=1,n.secondsDecimalDigits=0,n.millisecondsDecimalDigits=0);let i=[];const N=(o,c)=>{const r=Math.floor(o*10**c+E);return(Math.round(r)/10**c).toFixed(c)},s=(o,c,r,t)=>{if(!((i.length===0||!n.colonNotation)&&I(o)&&!(n.colonNotation&&r==="m"))){if(t??=String(o),n.colonNotation){const u=t.includes(".")?t.split(".")[0].length:t.length,m=i.length>0?2:1;t="0".repeat(Math.max(0,m-u))+t}else t+=n.verbose?" "+x(c,o):r;i.push(t)}},a=_(e),d=BigInt(a.days);if(n.hideYearAndDays?s(BigInt(d)*24n+BigInt(a.hours),"hour","h"):(n.hideYear?s(d,"day","d"):(s(d/365n,"year","y"),s(d%365n,"day","d")),s(Number(a.hours),"hour","h")),s(Number(a.minutes),"minute","m"),!n.hideSeconds)if(n.separateMilliseconds||n.formatSubMilliseconds||!n.colonNotation&&e<1e3&&!n.subSecondsAsDecimals){const o=Number(a.seconds),c=Number(a.milliseconds),r=Number(a.microseconds),t=Number(a.nanoseconds);if(s(o,"second","s"),n.formatSubMilliseconds)s(c,"millisecond","ms"),s(r,"microsecond","Âµs"),s(t,"nanosecond","ns");else{const u=c+r/1e3+t/1e6,m=typeof n.millisecondsDecimalDigits=="number"?n.millisecondsDecimalDigits:0,M=u>=1?Math.round(u):Math.ceil(u),h=m?u.toFixed(m):M;s(Number.parseFloat(h),"millisecond","ms",h)}}else{const o=(f?Number(e%F):e)/1e3%60,c=typeof n.secondsDecimalDigits=="number"?n.secondsDecimalDigits:1,r=N(o,c),t=n.keepDecimalsOnWholeSeconds?r:r.replace(/\.0+$/,"");s(Number.parseFloat(t),"second","s",t)}if(i.length===0)return l+"0"+(n.verbose?" milliseconds":"ms");const D=n.colonNotation?":":" ";return typeof n.unitCount=="number"&&(i=i.slice(0,Math.max(n.unitCount,1))),l+i.join(D)}export{w as p};
