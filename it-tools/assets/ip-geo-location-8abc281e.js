import{_ as L}from"./c-key-value-list.vue_vue_type_script_setup_true_lang-6aa5d428.js";import{d as S,a0 as T,am as G,r as d,al as P,i as R,o as _,c as U,a as x,k as l,l as e,m as w,w as s,a6 as m,G as r,j as f,ad as g,x as D,s as M,af as Q}from"./index-0c1fde36.js";import{_ as A}from"./a-07fc27a5.js";import{_ as E}from"./p-77eb774b.js";import{_ as H}from"./Divider-5fc425b0.js";import{N as O}from"./Alert-a9fb131b.js";const q={flex:"","items-center":"","gap-2":""},F={"mt-2":""},oe=S({__name:"ip-geo-location",setup(J){const{t:a}=T(),p=G({tool:"ip-geo-loc",name:"ip",defaultValue:"8.8.8.8"}),y=d(""),I=[{field:"ip",name:"IP"},{field:"hostname",name:"Host Name"},{field:"country",name:"Country Code"},{field:"region",name:"Region/state Code"},{field:"city",name:"City"},{field:"postal",name:"Postal Code"},{field:"loc",name:"Latitude/Longitude"},{field:"timezone",name:"Timezone"},{field:"org",name:"Organization Name"}],h=d([]),$=d({}),n=d("pending"),u=P("ip-geoloc:token",""),C=R(()=>{const[t,o]=$.value.loc?.split(",")||[];return t&&o?`https://www.openstreetmap.org/?mlat=${t}&mlon=${o}#map=18/${t}/${o}`:void 0});async function N(){try{n.value="pending";const t=await fetch(u.value!==""?`//ipinfo.io/${p.value}/json?token=${u.value}`:`//ipinfo.io/${p.value}/json`);if(!t.ok)throw t.statusText;const o=await t.json(),c=[];for(const i of I)o[i.field]&&c.push({label:i.name,value:o[i.field]});n.value="success",h.value=c,$.value=o}catch(t){return y.value=t.toString(),n.value="error",[]}}return(t,o)=>{const c=D,i=M,b=A,V=E,j=H,v=Q,z=L,B=O;return _(),U("div",null,[x("div",q,[l(c,{value:e(p),"onUpdate:value":[o[0]||(o[0]=k=>w(p)?p.value=k:null),o[1]||(o[1]=()=>{n.value="pending"})],placeholder:e(a)("tools.ip-geo-location.texts.placeholder-enter-an-ipv4-6")},null,8,["value","placeholder"]),l(i,{"align-center":"",onClick:N},{default:s(()=>[m(r(e(a)("tools.ip-geo-location.texts.tag-get-geo-location-infos")),1)]),_:1})]),x("details",F,[x("summary",null,r(e(a)("tools.ip-geo-location.texts.tag-optional-ipinfo-io-token")),1),l(c,{value:e(u),"onUpdate:value":[o[2]||(o[2]=k=>w(u)?u.value=k:null),o[3]||(o[3]=()=>{n.value="pending"})],placeholder:e(a)("tools.ip-geo-location.texts.placeholder-optional-ipinfo-io-token")},null,8,["value","placeholder"]),l(V,null,{default:s(()=>[l(b,{href:"https://ipinfo.io/"},{default:s(()=>[m(r(e(a)("tools.ip-geo-location.texts.tag-signup-for-a-free-token")),1)]),_:1})]),_:1})]),l(j),e(n)==="pending"?(_(),f(v,{key:0,"mt-5":""},{default:s(()=>[m(r(e(a)("tools.ip-geo-location.texts.tag-click-on-button-above-to-get-latest-infos")),1)]),_:1})):g("",!0),e(n)==="success"&&e(C)?(_(),f(v,{key:1,"mt-4":""},{default:s(()=>[l(i,{href:e(C),target:"_blank"},{default:s(()=>[m(r(e(a)("tools.ip-geo-location.texts.tag-localize-on-open-street-map")),1)]),_:1},8,["href"])]),_:1})):g("",!0),e(n)==="success"?(_(),f(v,{key:2,"mt-5":""},{default:s(()=>[l(z,{items:e(h)},null,8,["items"])]),_:1})):g("",!0),e(n)==="error"?(_(),f(B,{key:3,title:e(a)("tools.ip-geo-location.texts.title-errors-occured"),type:"error","mt-5":""},{default:s(()=>[m(r(e(y)),1)]),_:1},8,["title"])):g("",!0)])}}});export{oe as default};
