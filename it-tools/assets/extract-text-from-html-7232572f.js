import{_ as Q}from"./FormatTransformer-bc7b3ed5.js";import{D as y,h as E,p as Y}from"./index-669822ed.js";import{m as O}from"./cjs-489bc8b7.js";import{r as H}from"./index-012df571.js";import{d as Z,a0 as ee,o as te,j as ne,l as _}from"./index-0c1fde36.js";import"./TextareaCopyable-59231e95.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./index-8270f3b5.js";import"./index-3812cd3f.js";function b(n,e,t=()=>{}){if(n===void 0){const s=function(...i){return e(s,...i)};return s}return n>=0?function(...s){return e(b(n-1,e,t),...s)}:t}function j(n,e){let t=0,s=n.length;for(;t<s&&n[t]===e;)++t;for(;s>t&&n[s-1]===e;)--s;return t>0||s<n.length?n.substring(t,s):n}function se(n,e){let t=n.length;for(;t>0&&n[t-1]===e;)--t;return t<n.length?n.substring(0,t):n}function ie(n){return n.replace(/[\s\S]/g,e=>"\\u"+e.charCodeAt().toString(16).padStart(4,"0"))}function F(n,e){const t=new Map;for(let s=n.length;s-- >0;){const i=n[s],a=e(i);t.set(a,t.has(a)?O(i,t.get(a),{arrayMerge:re}):i)}return[...t.values()].reverse()}const re=(n,e,t)=>[...e];function B(n,e){for(const t of e){if(!n)return;n=n[t]}return n}function R(n,e="a",t=26){const s=[];do n-=1,s.push(n%t),n=n/t>>0;while(n>0);const i=e.charCodeAt(0);return s.reverse().map(a=>String.fromCharCode(i+a)).join("")}const T=["I","X","C","M"],P=["V","L","D"];function v(n){return[...n+""].map(e=>+e).reverse().map((e,t)=>e%5<4?(e<5?"":P[t])+T[t].repeat(e%5):T[t]+(e<5?P[t]:T[t+1])).reverse().join("")}class U{constructor(e,t=void 0){this.lines=[],this.nextLineWords=[],this.maxLineLength=t||e.wordwrap||Number.MAX_VALUE,this.nextLineAvailableChars=this.maxLineLength,this.wrapCharacters=B(e,["longWordSplit","wrapCharacters"])||[],this.forceWrapOnLimit=B(e,["longWordSplit","forceWrapOnLimit"])||!1,this.stashedSpace=!1,this.wordBreakOpportunity=!1}pushWord(e,t=!1){this.nextLineAvailableChars<=0&&!t&&this.startNewLine();const s=this.nextLineWords.length===0,i=e.length+(s?0:1);if(i<=this.nextLineAvailableChars||t)this.nextLineWords.push(e),this.nextLineAvailableChars-=i;else{const[a,...r]=this.splitLongWord(e);s||this.startNewLine(),this.nextLineWords.push(a),this.nextLineAvailableChars-=a.length;for(const o of r)this.startNewLine(),this.nextLineWords.push(o),this.nextLineAvailableChars-=o.length}}popWord(){const e=this.nextLineWords.pop();if(e!==void 0){const t=this.nextLineWords.length===0,s=e.length+(t?0:1);this.nextLineAvailableChars+=s}return e}concatWord(e,t=!1){if(this.wordBreakOpportunity&&e.length>this.nextLineAvailableChars)this.pushWord(e,t),this.wordBreakOpportunity=!1;else{const s=this.popWord();this.pushWord(s?s.concat(e):e,t)}}startNewLine(e=1){this.lines.push(this.nextLineWords),e>1&&this.lines.push(...Array.from({length:e-1},()=>[])),this.nextLineWords=[],this.nextLineAvailableChars=this.maxLineLength}isEmpty(){return this.lines.length===0&&this.nextLineWords.length===0}clear(){this.lines.length=0,this.nextLineWords.length=0,this.nextLineAvailableChars=this.maxLineLength}toString(){return[...this.lines,this.nextLineWords].map(e=>e.join(" ")).join(`
`)}splitLongWord(e){const t=[];let s=0;for(;e.length>this.maxLineLength;){const i=e.substring(0,this.maxLineLength),a=e.substring(this.maxLineLength),r=i.lastIndexOf(this.wrapCharacters[s]);if(r>-1)e=i.substring(r+1)+a,t.push(i.substring(0,r+1));else if(s++,s<this.wrapCharacters.length)e=i+a;else{if(this.forceWrapOnLimit){if(t.push(i),e=a,e.length>this.maxLineLength)continue}else e=i+a;break}}return t.push(e),t}}class x{constructor(e=null){this.next=e}getRoot(){return this.next?this.next:this}}class u extends x{constructor(e,t=null,s=1,i=void 0){super(t),this.leadingLineBreaks=s,this.inlineTextBuilder=new U(e,i),this.rawText="",this.stashedLineBreaks=0,this.isPre=t&&t.isPre,this.isNoWrap=t&&t.isNoWrap}}class A extends u{constructor(e,t=null,{interRowLineBreaks:s=1,leadingLineBreaks:i=2,maxLineLength:a=void 0,maxPrefixLength:r=0,prefixAlign:o="left"}={}){super(e,t,i,a),this.maxPrefixLength=r,this.prefixAlign=o,this.interRowLineBreaks=s}}class g extends u{constructor(e,t=null,{leadingLineBreaks:s=1,maxLineLength:i=void 0,prefix:a=""}={}){super(e,t,s,i),this.prefix=a}}class D extends x{constructor(e=null){super(e),this.rows=[],this.isPre=e&&e.isPre,this.isNoWrap=e&&e.isNoWrap}}class M extends x{constructor(e=null){super(e),this.cells=[],this.isPre=e&&e.isPre,this.isNoWrap=e&&e.isNoWrap}}class k extends x{constructor(e,t=null,s=void 0){super(t),this.inlineTextBuilder=new U(e,s),this.rawText="",this.stashedLineBreaks=0,this.isPre=t&&t.isPre,this.isNoWrap=t&&t.isNoWrap}}class ae extends x{constructor(e=null,t){super(e),this.transform=t}}function oe(n){return[...n].map(e=>"\\u"+e.charCodeAt(0).toString(16).padStart(4,"0")).join("")}class ce{constructor(e){this.whitespaceChars=e.preserveNewlines?e.whitespaceCharacters.replace(/\n/g,""):e.whitespaceCharacters;const t=oe(this.whitespaceChars);if(this.leadingWhitespaceRe=new RegExp(`^[${t}]`),this.trailingWhitespaceRe=new RegExp(`[${t}]$`),this.allWhitespaceOrEmptyRe=new RegExp(`^[${t}]*$`),this.newlineOrNonWhitespaceRe=new RegExp(`(\\n|[^\\n${t}])`,"g"),this.newlineOrNonNewlineStringRe=new RegExp("(\\n|[^\\n]+)","g"),e.preserveNewlines){const s=new RegExp(`\\n|[^\\n${t}]+`,"gm");this.shrinkWrapAdd=function(i,a,r=c=>c,o=!1){if(!i)return;const c=a.stashedSpace;let l=!1,h=s.exec(i);if(h)for(l=!0,h[0]===`
`?a.startNewLine():c||this.testLeadingWhitespace(i)?a.pushWord(r(h[0]),o):a.concatWord(r(h[0]),o);(h=s.exec(i))!==null;)h[0]===`
`?a.startNewLine():a.pushWord(r(h[0]),o);a.stashedSpace=c&&!l||this.testTrailingWhitespace(i)}}else{const s=new RegExp(`[^${t}]+`,"g");this.shrinkWrapAdd=function(i,a,r=c=>c,o=!1){if(!i)return;const c=a.stashedSpace;let l=!1,h=s.exec(i);if(h)for(l=!0,c||this.testLeadingWhitespace(i)?a.pushWord(r(h[0]),o):a.concatWord(r(h[0]),o);(h=s.exec(i))!==null;)a.pushWord(r(h[0]),o);a.stashedSpace=c&&!l||this.testTrailingWhitespace(i)}}}addLiteral(e,t,s=!0){if(!e)return;const i=t.stashedSpace;let a=!1,r=this.newlineOrNonNewlineStringRe.exec(e);if(r)for(a=!0,r[0]===`
`?t.startNewLine():i?t.pushWord(r[0],s):t.concatWord(r[0],s);(r=this.newlineOrNonNewlineStringRe.exec(e))!==null;)r[0]===`
`?t.startNewLine():t.pushWord(r[0],s);t.stashedSpace=i&&!a}testLeadingWhitespace(e){return this.leadingWhitespaceRe.test(e)}testTrailingWhitespace(e){return this.trailingWhitespaceRe.test(e)}testContainsWords(e){return!this.allWhitespaceOrEmptyRe.test(e)}countNewlinesNoWords(e){this.newlineOrNonWhitespaceRe.lastIndex=0;let t=0,s;for(;(s=this.newlineOrNonWhitespaceRe.exec(e))!==null;)if(s[0]===`
`)t++;else return 0;return t}}class le{constructor(e,t,s=void 0){this.options=e,this.picker=t,this.metadata=s,this.whitespaceProcessor=new ce(e),this._stackItem=new u(e),this._wordTransformer=void 0}pushWordTransform(e){this._wordTransformer=new ae(this._wordTransformer,e)}popWordTransform(){if(!this._wordTransformer)return;const e=this._wordTransformer.transform;return this._wordTransformer=this._wordTransformer.next,e}startNoWrap(){this._stackItem.isNoWrap=!0}stopNoWrap(){this._stackItem.isNoWrap=!1}_getCombinedWordTransformer(){const e=this._wordTransformer?s=>z(s,this._wordTransformer):void 0,t=this.options.encodeCharacters;return e?t?s=>t(e(s)):e:t}_popStackItem(){const e=this._stackItem;return this._stackItem=e.next,e}addLineBreak(){(this._stackItem instanceof u||this._stackItem instanceof g||this._stackItem instanceof k)&&(this._stackItem.isPre?this._stackItem.rawText+=`
`:this._stackItem.inlineTextBuilder.startNewLine())}addWordBreakOpportunity(){(this._stackItem instanceof u||this._stackItem instanceof g||this._stackItem instanceof k)&&(this._stackItem.inlineTextBuilder.wordBreakOpportunity=!0)}addInline(e,{noWordTransform:t=!1}={}){if(this._stackItem instanceof u||this._stackItem instanceof g||this._stackItem instanceof k){if(this._stackItem.isPre){this._stackItem.rawText+=e;return}if(!(e.length===0||this._stackItem.stashedLineBreaks&&!this.whitespaceProcessor.testContainsWords(e))){if(this.options.preserveNewlines){const s=this.whitespaceProcessor.countNewlinesNoWords(e);if(s>0){this._stackItem.inlineTextBuilder.startNewLine(s);return}}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.shrinkWrapAdd(e,this._stackItem.inlineTextBuilder,t?void 0:this._getCombinedWordTransformer(),this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}}addLiteral(e){if((this._stackItem instanceof u||this._stackItem instanceof g||this._stackItem instanceof k)&&e.length!==0){if(this._stackItem.isPre){this._stackItem.rawText+=e;return}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.addLiteral(e,this._stackItem.inlineTextBuilder,this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}openBlock({leadingLineBreaks:e=1,reservedLineLength:t=0,isPre:s=!1}={}){const i=Math.max(20,this._stackItem.inlineTextBuilder.maxLineLength-t);this._stackItem=new u(this.options,this._stackItem,e,i),s&&(this._stackItem.isPre=!0)}closeBlock({trailingLineBreaks:e=1,blockTransform:t=void 0}={}){const s=this._popStackItem(),i=t?t(m(s)):m(s);I(this._stackItem,i,s.leadingLineBreaks,Math.max(s.stashedLineBreaks,e))}openList({maxPrefixLength:e=0,prefixAlign:t="left",interRowLineBreaks:s=1,leadingLineBreaks:i=2}={}){this._stackItem=new A(this.options,this._stackItem,{interRowLineBreaks:s,leadingLineBreaks:i,maxLineLength:this._stackItem.inlineTextBuilder.maxLineLength,maxPrefixLength:e,prefixAlign:t})}openListItem({prefix:e=""}={}){if(!(this._stackItem instanceof A))throw new Error("Can't add a list item to something that is not a list! Check the formatter.");const t=this._stackItem,s=Math.max(e.length,t.maxPrefixLength),i=Math.max(20,t.inlineTextBuilder.maxLineLength-s);this._stackItem=new g(this.options,t,{prefix:e,maxLineLength:i,leadingLineBreaks:t.interRowLineBreaks})}closeListItem(){const e=this._popStackItem(),t=e.next,s=Math.max(e.prefix.length,t.maxPrefixLength),i=`
`+" ".repeat(s),r=(t.prefixAlign==="right"?e.prefix.padStart(s):e.prefix.padEnd(s))+m(e).replace(/\n/g,i);I(t,r,e.leadingLineBreaks,Math.max(e.stashedLineBreaks,t.interRowLineBreaks))}closeList({trailingLineBreaks:e=2}={}){const t=this._popStackItem(),s=m(t);s&&I(this._stackItem,s,t.leadingLineBreaks,e)}openTable(){this._stackItem=new D(this._stackItem)}openTableRow(){if(!(this._stackItem instanceof D))throw new Error("Can't add a table row to something that is not a table! Check the formatter.");this._stackItem=new M(this._stackItem)}openTableCell({maxColumnWidth:e=void 0}={}){if(!(this._stackItem instanceof M))throw new Error("Can't add a table cell to something that is not a table row! Check the formatter.");this._stackItem=new k(this.options,this._stackItem,e)}closeTableCell({colspan:e=1,rowspan:t=1}={}){const s=this._popStackItem(),i=j(m(s),`
`);s.next.cells.push({colspan:e,rowspan:t,text:i})}closeTableRow(){const e=this._popStackItem();e.next.rows.push(e.cells)}closeTable({tableToString:e,leadingLineBreaks:t=2,trailingLineBreaks:s=2}){const i=this._popStackItem(),a=e(i.rows);a&&I(this._stackItem,a,t,s)}toString(){return m(this._stackItem.getRoot())}}function m(n){if(!(n instanceof u||n instanceof g||n instanceof k))throw new Error("Only blocks, list items and table cells can be requested for text contents.");return n.inlineTextBuilder.isEmpty()?n.rawText:n.rawText+n.inlineTextBuilder.toString()}function I(n,e,t,s){if(!(n instanceof u||n instanceof g||n instanceof k))throw new Error("Only blocks, list items and table cells can contain text.");const i=m(n),a=Math.max(n.stashedLineBreaks,t);n.inlineTextBuilder.clear(),i?n.rawText=i+`
`.repeat(a)+e:(n.rawText=e,n.leadingLineBreaks=a),n.stashedLineBreaks=s}function z(n,e){return e?z(e.transform(n),e.next):n}function he(n={}){const e=n.selectors.filter(r=>!r.format);if(e.length)throw new Error("Following selectors have no specified format: "+e.map(r=>`\`${r.selector}\``).join(", "));const t=new y(n.selectors.map(r=>[r.selector,r])).build(E);typeof n.encodeCharacters!="function"&&(n.encodeCharacters=ue(n.encodeCharacters));const s=new y(n.baseElements.selectors.map((r,o)=>[r,o+1])).build(E);function i(r){return pe(r,n,s)}const a=b(n.limits.maxDepth,de,function(r,o){o.addInline(n.limits.ellipsis||"")});return function(r,o=void 0){return fe(r,o,n,t,i,a)}}function fe(n,e,t,s,i,a){const r=t.limits.maxInputLength;r&&n&&n.length>r&&(console.warn(`Input length ${n.length} is above allowed limit of ${r}. Truncating without ellipsis.`),n=n.substring(0,r));const o=Y(n,{decodeEntities:t.decodeEntities}),c=i(o.children),l=new le(t,s,e);return a(c,l),l.toString()}function pe(n,e,t){const s=[];function i(r,o){o=o.slice(0,e.limits.maxChildNodes);for(const c of o){if(c.type!=="tag")continue;const l=t.pick1(c);if(l>0?s.push({selectorIndex:l,element:c}):c.children&&r(c.children),s.length>=e.limits.maxBaseElements)return}}return b(e.limits.maxDepth,i)(n),e.baseElements.orderBy!=="occurrence"&&s.sort((r,o)=>r.selectorIndex-o.selectorIndex),e.baseElements.returnDomByDefault&&s.length===0?n:s.map(r=>r.element)}function de(n,e,t){if(!e)return;const s=t.options;e.length>s.limits.maxChildNodes&&(e=e.slice(0,s.limits.maxChildNodes),e.push({data:s.limits.ellipsis,type:"text"}));for(const a of e)switch(a.type){case"text":{t.addInline(a.data);break}case"tag":{const r=t.picker.pick1(a),o=s.formatters[r.format];o(a,n,t,r.options||{});break}}}function ue(n){if(!n||Object.keys(n).length===0)return;const e=Object.entries(n).filter(([,a])=>a!==!1),t=new RegExp(e.map(([a])=>`(${ie([...a][0])})`).join("|"),"g"),s=e.map(([,a])=>a),i=(a,...r)=>s[r.findIndex(o=>o)];return a=>a.replace(t,i)}function me(n,e,t,s){}function ge(n,e,t,s){t.addLiteral(s.string||"")}function ke(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks||2}),t.addLiteral(s.string||""),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2})}function Le(n,e,t,s){e(n.children,t)}function Be(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks||2}),e(n.children,t),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2})}function q(n){const e=n.attribs&&n.attribs.length?" "+Object.entries(n.attribs).map(([t,s])=>s===""?t:`${t}=${s.replace(/"/g,"&quot;")}`).join(" "):"";return`<${n.name}${e}>`}function V(n){return`</${n.name}>`}function we(n,e,t,s){t.startNoWrap(),t.addLiteral(q(n)),t.stopNoWrap(),e(n.children,t),t.startNoWrap(),t.addLiteral(V(n)),t.stopNoWrap()}function xe(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks||2}),t.startNoWrap(),t.addLiteral(q(n)),t.stopNoWrap(),e(n.children,t),t.startNoWrap(),t.addLiteral(V(n)),t.stopNoWrap(),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2})}function Ie(n,e,t,s){t.startNoWrap(),t.addLiteral(H(n,{decodeEntities:t.options.decodeEntities})),t.stopNoWrap()}function We(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks||2}),t.startNoWrap(),t.addLiteral(H(n,{decodeEntities:t.options.decodeEntities})),t.stopNoWrap(),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2})}function _e(n,e,t,s){t.addLiteral(s.prefix||""),e(n.children,t),t.addLiteral(s.suffix||"")}var Te=Object.freeze({__proto__:null,block:Be,blockHtml:We,blockString:ke,blockTag:xe,inline:Le,inlineHtml:Ie,inlineString:ge,inlineSurround:_e,inlineTag:we,skip:me});function W(n,e){return n[e]||(n[e]=[]),n[e]}function Ce(n,e=0){for(;n[e];)e++;return e}function Se(n,e){for(let t=0;t<e;t++){const s=W(n,t);for(let i=0;i<t;i++){const a=W(n,i);if(s[i]||a[t]){const r=s[i];s[i]=a[t],a[t]=r}}}}function be(n,e,t,s){for(let i=0;i<n.rowspan;i++){const a=W(e,t+i);for(let r=0;r<n.colspan;r++)a[s+r]=n}}function C(n,e){return n[e]===void 0&&(n[e]=e===0?0:1+C(n,e-1)),n[e]}function $(n,e,t,s){n[e+t]=Math.max(C(n,e+t),C(n,e)+s)}function Ne(n,e,t){const s=[];let i=0;const a=n.length,r=[0];for(let l=0;l<a;l++){const h=W(s,l),f=n[l];let L=0;for(let p=0;p<f.length;p++){const d=f[p];L=Ce(h,L),be(d,s,l,L),L+=d.colspan,d.lines=d.text.split(`
`);const w=d.lines.length;$(r,l,d.rowspan,w+e)}i=h.length>i?h.length:i}Se(s,a>i?a:i);const o=[],c=[0];for(let l=0;l<i;l++){let h=0,f;const L=Math.min(a,s[l].length);for(;h<L;)if(f=s[l][h],f){if(!f.rendered){let p=0;for(let d=0;d<f.lines.length;d++){const w=f.lines[d],N=r[h]+d;o[N]=(o[N]||"").padEnd(c[l])+w,p=w.length>p?w.length:p}$(c,l,f.colspan,p+t),f.rendered=!0}h+=f.rowspan}else{const p=r[h];o[p]=o[p]||"",h++}}return o.join(`
`)}function ye(n,e,t,s){t.addLineBreak()}function Ee(n,e,t,s){t.addWordBreakOpportunity()}function Re(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks||2}),t.addInline("-".repeat(s.length||t.options.wordwrap||40)),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2})}function Pe(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks||2}),e(n.children,t),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2})}function ve(n,e,t,s){t.openBlock({isPre:!0,leadingLineBreaks:s.leadingLineBreaks||2}),e(n.children,t),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2})}function Ae(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks||2}),s.uppercase!==!1?(t.pushWordTransform(i=>i.toUpperCase()),e(n.children,t),t.popWordTransform()):e(n.children,t),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2})}function De(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks||2,reservedLineLength:2}),e(n.children,t),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks||2,blockTransform:i=>(s.trimEmptyLines!==!1?j(i,`
`):i).split(`
`).map(a=>"> "+a).join(`
`)})}function S(n,e){if(!e)return n;const t=typeof e[0]=="string"?e[0]:"[",s=typeof e[1]=="string"?e[1]:"]";return t+n+s}function X(n,e,t,s,i){const a=typeof e=="function"?e(n,s,i):n;return a[0]==="/"&&t?se(t,"/")+a:a}function Me(n,e,t,s){const i=n.attribs||{},a=i.alt?i.alt:"",r=i.src?X(i.src,s.pathRewrite,s.baseUrl,t.metadata,n):"",o=r?a?a+" "+S(r,s.linkBrackets):S(r,s.linkBrackets):a;t.addInline(o,{noWordTransform:!0})}function $e(n,e,t,s){function i(){if(s.ignoreHref||!n.attribs||!n.attribs.href)return"";let r=n.attribs.href.replace(/^mailto:/,"");return s.noAnchorUrl&&r[0]==="#"?"":(r=X(r,s.pathRewrite,s.baseUrl,t.metadata,n),r)}const a=i();if(!a)e(n.children,t);else{let r="";t.pushWordTransform(c=>(c&&(r+=c),c)),e(n.children,t),t.popWordTransform(),s.hideLinkHrefIfSameAsText&&a===r||t.addInline(r?" "+S(a,s.linkBrackets):a,{noWordTransform:!0})}}function J(n,e,t,s,i){const a=B(n,["parent","name"])==="li";let r=0;const o=(n.children||[]).filter(c=>c.type!=="text"||!/^\s*$/.test(c.data)).map(function(c){if(c.name!=="li")return{node:c,prefix:""};const l=a?i().trimStart():i();return l.length>r&&(r=l.length),{node:c,prefix:l}});if(o.length){t.openList({interRowLineBreaks:1,leadingLineBreaks:a?1:s.leadingLineBreaks||2,maxPrefixLength:r,prefixAlign:"left"});for(const{node:c,prefix:l}of o)t.openListItem({prefix:l}),e([c],t),t.closeListItem();t.closeList({trailingLineBreaks:a?1:s.trailingLineBreaks||2})}}function Oe(n,e,t,s){const i=s.itemPrefix||" * ";return J(n,e,t,s,()=>i)}function He(n,e,t,s){let i=Number(n.attribs.start||"1");const a=je(n.attribs.type);return J(n,e,t,s,()=>" "+a(i++)+". ")}function je(n="1"){switch(n){case"a":return e=>R(e,"a");case"A":return e=>R(e,"A");case"i":return e=>v(e).toLowerCase();case"I":return e=>v(e);case"1":default:return e=>e.toString()}}function Fe(n){const e=[],t=[];for(const s of n)s.startsWith(".")?e.push(s.substring(1)):s.startsWith("#")&&t.push(s.substring(1));return{classes:e,ids:t}}function Ue(n,e){if(e===!0)return!0;if(!n)return!1;const{classes:t,ids:s}=Fe(e),i=(n.class||"").split(" "),a=(n.id||"").split(" ");return i.some(r=>t.includes(r))||a.some(r=>s.includes(r))}function ze(n,e,t,s){return Ue(n.attribs,t.options.tables)?K(n,e,t,s):qe(n,e,t,s)}function qe(n,e,t,s){t.openBlock({leadingLineBreaks:s.leadingLineBreaks}),e(n.children,t),t.closeBlock({trailingLineBreaks:s.trailingLineBreaks})}function K(n,e,t,s){t.openTable(),n.children.forEach(a),t.closeTable({tableToString:r=>Ne(r,s.rowSpacing??0,s.colSpacing??3),leadingLineBreaks:s.leadingLineBreaks,trailingLineBreaks:s.trailingLineBreaks});function i(r){const o=+B(r,["attribs","colspan"])||1,c=+B(r,["attribs","rowspan"])||1;t.openTableCell({maxColumnWidth:s.maxColumnWidth}),e(r.children,t),t.closeTableCell({colspan:o,rowspan:c})}function a(r){if(r.type!=="tag")return;const o=s.uppercaseHeaderCells!==!1?c=>{t.pushWordTransform(l=>l.toUpperCase()),i(c),t.popWordTransform()}:i;switch(r.name){case"thead":case"tbody":case"tfoot":case"center":r.children.forEach(a);return;case"tr":{t.openTableRow();for(const c of r.children)if(c.type==="tag")switch(c.name){case"th":{o(c);break}case"td":{i(c);break}}t.closeTableRow();break}}}}var Ve=Object.freeze({__proto__:null,anchor:$e,blockquote:De,dataTable:K,heading:Ae,horizontalLine:Re,image:Me,lineBreak:ye,orderedList:He,paragraph:Pe,pre:ve,table:ze,unorderedList:Oe,wbr:Ee});const Xe={baseElements:{selectors:["body"],orderBy:"selectors",returnDomByDefault:!0},decodeEntities:!0,encodeCharacters:{},formatters:{},limits:{ellipsis:"...",maxBaseElements:void 0,maxChildNodes:void 0,maxDepth:void 0,maxInputLength:1<<24},longWordSplit:{forceWrapOnLimit:!1,wrapCharacters:[]},preserveNewlines:!1,selectors:[{selector:"*",format:"inline"},{selector:"a",format:"anchor",options:{baseUrl:null,hideLinkHrefIfSameAsText:!1,ignoreHref:!1,linkBrackets:["[","]"],noAnchorUrl:!0}},{selector:"article",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"aside",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"blockquote",format:"blockquote",options:{leadingLineBreaks:2,trailingLineBreaks:2,trimEmptyLines:!0}},{selector:"br",format:"lineBreak"},{selector:"div",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"footer",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"form",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"h1",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h2",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h3",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h4",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h5",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h6",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"header",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"hr",format:"horizontalLine",options:{leadingLineBreaks:2,length:void 0,trailingLineBreaks:2}},{selector:"img",format:"image",options:{baseUrl:null,linkBrackets:["[","]"]}},{selector:"main",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"nav",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"ol",format:"orderedList",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"p",format:"paragraph",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"pre",format:"pre",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"section",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"table",format:"table",options:{colSpacing:3,leadingLineBreaks:2,maxColumnWidth:60,rowSpacing:0,trailingLineBreaks:2,uppercaseHeaderCells:!0}},{selector:"ul",format:"unorderedList",options:{itemPrefix:" * ",leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"wbr",format:"wbr"}],tables:[],whitespaceCharacters:` 	\r
\fâ€‹`,wordwrap:80},Je=(n,e,t)=>[...n,...e],G=(n,e,t)=>[...e],Ke=(n,e,t)=>n.some(s=>typeof s=="object")?Je(n,e):G(n,e);function Ge(n={}){return n=O(Xe,n,{arrayMerge:G,customMerge:e=>e==="selectors"?Ke:void 0}),n.formatters=Object.assign({},Te,Ve,n.formatters),n.selectors=F(n.selectors,e=>e.selector),Ye(n),he(n)}function Qe(n,e={},t=void 0){return Ge(e)(n,t)}function Ye(n){if(n.tags){const t=Object.entries(n.tags).map(([s,i])=>({...i,selector:s||"*"}));n.selectors.push(...t),n.selectors=F(n.selectors,s=>s.selector)}function e(t,s,i){const a=s.pop();for(const r of s){let o=t[r];o||(o={},t[r]=o),t=o}t[a]=i}if(n.baseElement){const t=n.baseElement;e(n,["baseElements","selectors"],Array.isArray(t)?t:[t])}n.returnDomByDefault!==void 0&&e(n,["baseElements","returnDomByDefault"],n.returnDomByDefault);for(const t of n.selectors)t.format==="anchor"&&B(t,["options","noLinkBrackets"])&&e(t,["options","linkBrackets"],!1)}function Ze(n){try{new DOMParser().parseFromString(n,"text/html")}catch{return!1}const e=/<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>|<([a-z][a-z0-9]*)\b[^\/]*\/>/gi,t=n.match(e);return!!(t!==null&&t.length)}function et(n){return Qe(n)}const gt=Z({__name:"extract-text-from-html",setup(n){const{t:e}=ee();function t(i){if(i==="")return"";try{return et(i)}catch(a){return a.toString()}}const s=[{validator:i=>i===""||Ze(i),message:e("tools.extract-text-from-html.texts.message-provided-html-is-not-valid")}];return(i,a)=>{const r=Q;return te(),ne(r,{"input-label":_(e)("tools.extract-text-from-html.texts.input-label-your-raw-html"),"input-placeholder":_(e)("tools.extract-text-from-html.texts.input-placeholder-paste-your-raw-html-here"),"output-label":_(e)("tools.extract-text-from-html.texts.output-label-text-from-your-html"),"input-validation-rules":s,transformer:t},null,8,["input-label","input-placeholder","output-label"])}}});export{gt as default};
