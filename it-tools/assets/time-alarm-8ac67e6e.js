import{d as I,a0 as L,am as M,bd as P,r as p,O as R,i as h,o as f,c as y,k as n,w as a,a as r,l as e,m as C,a6 as u,G as i,j as G,a7 as j,a8 as O,ad as Q,s as J,af as K,aj as W,bq as X}from"./index-0c1fde36.js";import{v as Z}from"./vue3-flip-countdown.common-ea9a44f6.js";import{h as A}from"./moment-55cb88ed.js";import{_ as ee}from"./TimePicker-2440af2b.js";import{_ as te}from"./FormItem-1b9a5952.js";import{_ as oe}from"./Card-7ba5ce79.js";import{_ as ne}from"./Modal-045d7e50.js";import{_ as ae}from"./p-77eb774b.js";import{_ as le}from"./a-07fc27a5.js";import"./index-2f7cbd79.js";import"./defaultOptions-f1a3e221.js";import"./differenceInCalendarDays-31c28b0a.js";import"./addMonths-31c9456f.js";import"./FocusDetector-089b8822.js";import"./index-cbfaa337.js";import"./context-00991937.js";const se={"max-w-600px":""},re={flex:"","justify-center":""},me={flex:"","justify-center":""},ie={"mb-2":"",flex:"","justify-center":""},ue={"mb-2":"",flex:"","justify-center":""},_e={flex:"","justify-center":"","gap-1":""},de="YYYY-MM-DD HH:mm:ss",ce=I({__name:"time-alarm",setup(pe){const{t:s}=L(),_=M({tool:"time-alarm",name:"alarmAt",defaultValue:"17:30:00"}),d=P("timealarm:hst",[]);function F(o){const t=new URL(window.location.href);return t.searchParams.set("at",o),t.toString()}const l=p("stopped"),v=p(null);R(()=>{l.value==="ended"&&v.value?.play()});const g=p(A()),S=h(()=>{const[o,t,c]=_.value.split(":");return g.value.set("h",Number(o)).set("m",Number(t)).set("s",Number(c)).toDate()}),V=h(()=>{const[o,t,c]=_.value.split(":");return g.value.set("h",Number(o)).set("m",Number(t)).set("s",Number(c)).format(de)});function $(){g.value=A(),l.value="running";const o=_.value;d.value.find(t=>t===o)||(d.value=[o,...d.value])}function k(){l.value="stopped",v.value?.pause()}function B(){l.value==="running"&&(l.value="ended"),document.fullscreenElement&&document.exitFullscreen?.()}const w=p();function D(){const o=w.value;o&&(document.fullscreenElement?document.exitFullscreen?.():o?.requestFullscreen())}const b=h(()=>l.value==="ended");return(o,t)=>{const c=ee,U=te,x=J,E=K,Y=W,H=oe,T=ne,q=ae,z=le;return f(),y("div",se,[n(E,{disabled:e(l)!=="stopped",title:e(s)("tools.time-alarm.texts.title-alarm"),"mb-4":""},{default:a(()=>[r("div",re,[n(U,{label:e(s)("tools.time-alarm.texts.label-alarm-at"),"label-placement":"left"},{default:a(()=>[n(c,{"formatted-value":e(_),"onUpdate:formattedValue":t[0]||(t[0]=m=>C(_)?_.value=m:null)},null,8,["formatted-value"])]),_:1},8,["label"])]),r("div",me,[n(x,{onClick:$},{default:a(()=>[u(i(e(s)("tools.time-alarm.texts.tag-start")),1)]),_:1})])]),_:1},8,["disabled","title"]),r("div",{id:"fullScreenElement",ref_key:"fullScreenElement",ref:w,"mb-2":""},[r("div",null,[n(e(Z.Countdown),{deadline:e(V),stop:e(l)!=="running","mb-2":"","countdown-size":"5rem",onTimeElapsed:t[1]||(t[1]=m=>B())},null,8,["deadline","stop"]),r("div",ie,[n(x,{disabled:e(l)==="stopped",onClick:D},{default:a(()=>[u(i(e(s)("tools.time-alarm.texts.tag-toggle-fullscreen")),1)]),_:1},8,["disabled"])])])],512),n(T,{show:e(b),"onUpdate:show":t[3]||(t[3]=m=>C(b)?b.value=m:null),"mask-closable":"false"},{default:a(()=>[n(H,{style:{width:"600px"},title:e(s)("tools.time-alarm.texts.title-timer-finished"),bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:a(()=>[n(Y,{onClick:t[2]||(t[2]=m=>k())},{default:a(()=>[u(i(e(s)("tools.time-alarm.texts.tag-ok")),1)]),_:1})]),default:a(()=>[r("p",null,i(e(s)("tools.time-alarm.texts.tag-timer-ellapsed")),1)]),_:1},8,["title"])]),_:1},8,["show"]),r("div",ue,[n(x,{disabled:e(l)==="stopped",onClick:k},{default:a(()=>[u(i(e(s)("tools.time-alarm.texts.tag-stop")),1)]),_:1},8,["disabled"])]),n(q,{align:"center"},{default:a(()=>[u(" Alarm at: "+i(e(S)),1)]),_:1}),e(d)?(f(),G(E,{key:0,title:e(s)("tools.time-alarm.texts.title-history")},{default:a(()=>[r("div",_e,[(f(!0),y(j,null,O(e(d),(m,N)=>(f(),y(j,{key:N},[u(i(N>0?" / ":"")+" ",1),n(z,{href:F(m)},{default:a(()=>[u(i(m),1)]),_:2},1032,["href"])],64))),128))])]),_:1},8,["title"])):Q("",!0),r("audio",{ref_key:"audio",ref:v,loop:"",src:"/Beep.mp3"},null,512)])}}});const Ve=X(ce,[["__scopeId","data-v-ef9606d8"]]);export{Ve as default};
