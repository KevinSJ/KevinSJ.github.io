import{c as h,i as E}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{G as x,a as m,b as w,e as f,r as v,d as L,h as B,f as p}from"./main-CdZmBCMR.js";import{J as b}from"./jszip.min-eEAMQJTJ.js";import"./mobileMenu-BoMunYmR.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";x.workerSrc=new URL("/itools/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();let d=[];const u=()=>{const n=document.getElementById("file-display-area"),t=document.getElementById("options-panel"),s=document.getElementById("drop-zone");!n||!t||!s||(n.innerHTML="",d.length>0?(t.classList.remove("hidden"),d.forEach(r=>{const c=document.createElement("div");c.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const o=document.createElement("div");o.className="flex flex-col overflow-hidden";const l=document.createElement("div");l.className="truncate font-medium text-gray-200 text-sm mb-1",l.textContent=r.name;const e=document.createElement("div");e.className="text-xs text-gray-400",e.textContent=`${p(r.size)} • Loading pages...`,o.append(l,e);const a=document.createElement("button");a.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",a.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',a.onclick=()=>{d=[],u()},c.append(o,a),n.appendChild(c),v(r).then(i=>f(i).promise).then(i=>{e.textContent=`${p(r.size)} • ${i.numPages} page${i.numPages!==1?"s":""}`}).catch(i=>{console.warn("Error loading PDF page count:",i),e.textContent=p(r.size)})}),h({icons:E})):t.classList.add("hidden"))},I=()=>{d=[];const n=document.getElementById("file-input");n&&(n.value="");const t=document.getElementById("png-scale"),s=document.getElementById("png-scale-value");t&&(t.value="2.0"),s&&(s.textContent="2.0x"),u()};async function P(){if(d.length===0){m("No File","Please upload a PDF file first.");return}w("Converting to PNG...");try{const n=await f(await v(d[0])).promise,t=new b,s=document.getElementById("png-scale"),r=s?parseFloat(s.value):2;for(let o=1;o<=n.numPages;o++){const l=await n.getPage(o),e=l.getViewport({scale:r}),a=document.createElement("canvas"),i=a.getContext("2d");a.height=e.height,a.width=e.width,await l.render({canvasContext:i,viewport:e,canvas:a}).promise;const g=await new Promise(y=>a.toBlob(y,"image/png"));g&&t.file(`page_${o}.png`,g)}const c=await t.generateAsync({type:"blob"});L(c,"converted_images.zip"),m("Success","PDF converted to PNGs successfully!","success",()=>{I()})}catch(n){console.error(n),m("Error","Failed to convert PDF to PNG. The file might be corrupted.")}finally{B()}}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("file-input"),t=document.getElementById("drop-zone"),s=document.getElementById("process-btn"),r=document.getElementById("back-to-tools"),c=document.getElementById("png-scale"),o=document.getElementById("png-scale-value");r&&r.addEventListener("click",()=>{window.location.href="/itools/"}),c&&o&&c.addEventListener("input",()=>{o.textContent=`${parseFloat(c.value).toFixed(1)}x`});const l=e=>{if(!e||e.length===0)return;const a=Array.from(e).filter(i=>i.type==="application/pdf");if(a.length===0){m("Invalid File","Please upload a PDF file.");return}d=[a[0]],u()};n&&t&&(n.addEventListener("change",e=>{l(e.target.files)}),t.addEventListener("dragover",e=>{e.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",e=>{e.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",e=>{e.preventDefault(),t.classList.remove("bg-gray-700"),l(e.dataTransfer?.files??null)}),n.addEventListener("click",()=>{n.value=""})),s&&s.addEventListener("click",P)});
