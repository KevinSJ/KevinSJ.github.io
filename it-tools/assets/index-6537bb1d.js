const D="-",b="- ",ce=",",g=":",te=" ",fe="|",K=".",_="[",je="]",$e="{",ne="}",X="null",se="true",oe="false",m="\\",u='"',Le=`
`,xe="\r",P="	",J={comma:ce,tab:P,pipe:fe},O=J.comma;function le(e){return e.replace(/\\/g,`${m}${m}`).replace(/"/g,`${m}${u}`).replace(/\n/g,`${m}n`).replace(/\r/g,`${m}r`).replace(/\t/g,`${m}t`)}function de(e){let n="",t=0;for(;t<e.length;){if(e[t]===m){if(t+1>=e.length)throw new SyntaxError("Invalid escape sequence: backslash at end of string");const i=e[t+1];if(i==="n"){n+=Le,t+=2;continue}if(i==="t"){n+=P,t+=2;continue}if(i==="r"){n+=xe,t+=2;continue}if(i===m){n+=m,t+=2;continue}if(i===u){n+=u,t+=2;continue}throw new SyntaxError(`Invalid escape sequence: \\${i}`)}n+=e[t],t++}return n}function U(e,n){let t=n+1;for(;t<e.length;){if(e[t]===m&&t+1<e.length){t+=2;continue}if(e[t]===u)return t;t++}return-1}function ae(e,n,t=0){let i=!1,r=t;for(;r<e.length;){if(e[r]===m&&r+1<e.length&&i){r+=2;continue}if(e[r]===u){i=!i,r++;continue}if(e[r]===n&&!i)return r;r++}return-1}function ye(e){return e===se||e===oe||e===X}function Ae(e){if(!e||e.length>1&&e[0]==="0"&&e[1]!==".")return!1;const n=Number(e);return!Number.isNaN(n)&&Number.isFinite(n)}function M(e,n){const t=e.trimStart();let i=-1;if(t.startsWith(u)){const a=U(t,0);if(a===-1||!t.slice(a+1).startsWith(_))return;const L=e.length-t.length+a+1;i=e.indexOf(_,L)}else i=e.indexOf(_);if(i===-1)return;const r=e.indexOf(je,i);if(r===-1)return;let c=r+1,f=c;const s=e.indexOf($e,r);if(s!==-1&&s<e.indexOf(g,r)){const a=e.indexOf(ne,s);a!==-1&&(f=a+1)}if(c=e.indexOf(g,Math.max(r,f)),c===-1)return;let o;if(i>0){const a=e.slice(0,i).trim();o=a.startsWith(u)?z(a):a}const l=e.slice(c+1).trim(),d=e.slice(i+1,r);let $;try{$=Ie(d,n)}catch{return}const{length:k,delimiter:I}=$;let w;if(s!==-1&&s<c){const a=e.indexOf(ne,s);a!==-1&&a<c&&(w=Y(e.slice(s+1,a),I).map(L=>z(L.trim())))}return{header:{key:o,length:k,delimiter:I,fields:w},inlineValues:l||void 0}}function Ie(e,n){let t=e,i=n;t.endsWith(P)?(i=J.tab,t=t.slice(0,-1)):t.endsWith(fe)&&(i=J.pipe,t=t.slice(0,-1));const r=Number.parseInt(t,10);if(Number.isNaN(r))throw new TypeError(`Invalid array length: ${e}`);return{length:r,delimiter:i}}function Y(e,n){const t=[];let i="",r=!1,c=0;for(;c<e.length;){const f=e[c];if(f===m&&c+1<e.length&&r){i+=f+e[c+1],c+=2;continue}if(f===u){r=!r,i+=f,c++;continue}if(f===n&&!r){t.push(i.trim()),i="",c++;continue}i+=f,c++}return(i||t.length>0)&&t.push(i.trim()),t}function ue(e){return e.map(n=>Q(n))}function Q(e){const n=e.trim();if(!n)return"";if(n.startsWith(u))return z(n);if(ye(n)){if(n===se)return!0;if(n===oe)return!1;if(n===X)return null}if(Ae(n)){const t=Number.parseFloat(n);return Object.is(t,-0)?0:t}return n}function z(e){const n=e.trim();if(n.startsWith(u)){const t=U(n,0);if(t===-1)throw new SyntaxError("Unterminated string: missing closing quote");if(t!==n.length-1)throw new SyntaxError("Unexpected characters after closing quote");return de(n.slice(1,t))}return n}function Ne(e,n){let t=n;for(;t<e.length&&e[t]!==g;)t++;if(t>=e.length||e[t]!==g)throw new SyntaxError("Missing colon after key");const i=e.slice(n,t).trim();return t++,{key:i,end:t}}function Ke(e,n){const t=U(e,n);if(t===-1)throw new SyntaxError("Unterminated quoted key");const i=de(e.slice(n+1,t));let r=t+1;if(r>=e.length||e[r]!==g)throw new SyntaxError("Missing colon after key");return r++,{key:i,end:r}}function Te(e,n){const t=e[n]===u;return{...t?Ke(e,n):Ne(e,n),isQuoted:t}}function he(e){return e.trim().startsWith(_)&&ae(e,g)!==-1}function Pe(e){return ae(e,g)!==-1}function Ve(){return{lineNumber:0,blankLines:[]}}function Re(e,n,t,i){n.lineNumber++;const r=n.lineNumber;let c=0;for(;c<e.length&&e[c]===te;)c++;const f=e.slice(c);if(!f.trim()){const o=ie(c,t);n.blankLines.push({lineNumber:r,indent:c,depth:o});return}const s=ie(c,t);if(i){let o=0;for(;o<e.length&&(e[o]===te||e[o]===P);)o++;if(e.slice(0,o).includes(P))throw new SyntaxError(`Line ${r}: Tabs are not allowed in indentation in strict mode`);if(c>0&&c%t!==0)throw new SyntaxError(`Line ${r}: Indentation must be exact multiple of ${t}, but found ${c} spaces`)}return{raw:e,indent:c,content:f,depth:s,lineNumber:r}}function*Ce(e,n,t,i){for(const r of e){const c=Re(r,i,n,t);c!==void 0&&(yield c)}}function ie(e,n){return Math.floor(e/n)}function V(e,n,t,i){if(i.strict&&e!==n)throw new RangeError(`Expected ${n} ${t}, but got ${e}`)}function Fe(e,n,t){if(e?.depth===n&&e.content.startsWith(b))throw new RangeError(`Expected ${t} list array items, but found more`)}function _e(e,n,t){if(e?.depth===n&&!e.content.startsWith(b)&&Be(e.content,t.delimiter))throw new RangeError(`Expected ${t.length} tabular rows, but found more`)}function me(e,n,t,i,r){if(!i)return;const c=t.find(f=>f.lineNumber>e&&f.lineNumber<n);if(c)throw new SyntaxError(`Line ${c.lineNumber}: Blank lines inside ${r} are not allowed in strict mode`)}function Be(e,n){const t=e.indexOf(g),i=e.indexOf(n);return t===-1||i!==-1&&i<t}var Me=class{buffer=[];generator;done=!1;lastLine;scanState;constructor(e,n){this.generator=e,this.scanState=n}getBlankLines(){return this.scanState.blankLines}async peek(){if(this.buffer.length>0)return this.buffer[0];if(this.done)return;const e=await this.generator.next();if(e.done){this.done=!0;return}return this.buffer.push(e.value),e.value}async next(){const e=await this.peek();return e!==void 0&&(this.buffer.shift(),this.lastLine=e),e}async advance(){await this.next()}current(){return this.lastLine}async atEnd(){return await this.peek()===void 0}peekSync(){if(this.buffer.length>0)return this.buffer[0];if(this.done)return;const e=this.generator.next();if(e.done){this.done=!0;return}return this.buffer.push(e.value),e.value}nextSync(){const e=this.peekSync();return e!==void 0&&(this.buffer.shift(),this.lastLine=e),e}advanceSync(){this.nextSync()}atEndSync(){return this.peekSync()===void 0}};function*We(e,n){if(n?.expandPaths!==void 0)throw new Error("expandPaths is not supported in streaming decode");const t={indent:n?.indent??2,strict:n?.strict??!0},i=Ve(),r=new Me(Ce(e,t.indent,t.strict,i),i),c=r.peekSync();if(!c){yield{type:"startObject"},yield{type:"endObject"};return}if(he(c.content)){const f=M(c.content,O);if(f){r.advanceSync(),yield*W(f.header,f.inlineValues,r,0,t);return}}if(r.advanceSync(),r.atEndSync()&&!Je(c)){yield{type:"primitive",value:Q(c.content.trim())};return}for(yield{type:"startObject"},yield*x(c.content,r,0,t);!r.atEndSync();){const f=r.peekSync();if(!f||f.depth!==0)break;r.advanceSync(),yield*x(f.content,r,0,t)}yield{type:"endObject"}}function*x(e,n,t,i){const r=M(e,O);if(r&&r.header.key){yield{type:"key",key:r.header.key},yield*W(r.header,r.inlineValues,n,t,i);return}const{key:c,isQuoted:f}=Te(e,0),s=e.indexOf(g,c.length),o=s>=0?e.slice(s+1).trim():"";if(yield f?{type:"key",key:c,wasQuoted:!0}:{type:"key",key:c},!o){const l=n.peekSync();if(l&&l.depth>t){yield{type:"startObject"},yield*qe(n,t+1,i),yield{type:"endObject"};return}yield{type:"startObject"},yield{type:"endObject"};return}yield{type:"primitive",value:Q(o)}}function*qe(e,n,t){let i;for(;!e.atEndSync();){const r=e.peekSync();if(!r||r.depth<n)break;if(i===void 0&&r.depth>=n&&(i=r.depth),r.depth===i)e.advanceSync(),yield*x(r.content,e,i,t);else break}}function*W(e,n,t,i,r){if(yield{type:"startArray",length:e.length},n){yield*De(e,n,r),yield{type:"endArray"};return}if(e.fields&&e.fields.length>0){yield*Ue(e,t,i,r),yield{type:"endArray"};return}yield*Qe(e,t,i,r),yield{type:"endArray"}}function*De(e,n,t){if(!n.trim()){V(0,e.length,"inline array items",t);return}const i=ue(Y(n,e.delimiter));V(i.length,e.length,"inline array items",t);for(const r of i)yield{type:"primitive",value:r}}function*Ue(e,n,t,i){const r=t+1;let c=0,f,s;for(;!n.atEndSync()&&c<e.length;){const o=n.peekSync();if(!o||o.depth<r)break;if(o.depth===r){f===void 0&&(f=o.lineNumber),s=o.lineNumber,n.advanceSync();const l=Y(o.content,e.delimiter);V(l.length,e.fields.length,"tabular row values",i);const d=ue(l);yield*ze(e.fields,d),c++}else break}V(c,e.length,"tabular rows",i),i.strict&&f!==void 0&&s!==void 0&&me(f,s,n.getBlankLines(),i.strict,"tabular array"),i.strict&&_e(n.peekSync(),r,e)}function*Qe(e,n,t,i){const r=t+1;let c=0,f,s;for(;!n.atEndSync()&&c<e.length;){const o=n.peekSync();if(!o||o.depth<r)break;const l=o.content.startsWith(b)||o.content===D;if(o.depth===r&&l){f===void 0&&(f=o.lineNumber),s=o.lineNumber,yield*He(n,r,i);const d=n.current();d&&(s=d.lineNumber),c++}else break}V(c,e.length,"list array items",i),i.strict&&f!==void 0&&s!==void 0&&me(f,s,n.getBlankLines(),i.strict,"list array"),i.strict&&Fe(n.peekSync(),r,e.length)}function*He(e,n,t){const i=e.nextSync();if(!i)throw new ReferenceError("Expected list item");let r;if(i.content===D){const f=n+1,s=e.peekSync();if(!s||s.depth<f){yield{type:"startObject"},yield{type:"endObject"};return}if(s.depth===f&&!s.content.startsWith(b)){for(yield{type:"startObject"};!e.atEndSync();){const o=e.peekSync();if(!o||o.depth<f)break;if(o.depth===f&&!o.content.startsWith(b))e.advanceSync(),yield*x(o.content,e,f,t);else break}yield{type:"endObject"};return}else{yield{type:"startObject"},yield{type:"endObject"};return}}else if(i.content.startsWith(b))r=i.content.slice(b.length);else throw new SyntaxError(`Expected list item to start with "${b}"`);if(!r.trim()){yield{type:"startObject"},yield{type:"endObject"};return}if(he(r)){const f=M(r,O);if(f){yield*W(f.header,f.inlineValues,e,n,t);return}}const c=M(r,O);if(c&&c.header.key&&c.header.fields){const f=c.header;yield{type:"startObject"},yield{type:"key",key:f.key},yield*W(f,c.inlineValues,e,n+1,t);const s=n+1;for(;!e.atEndSync();){const o=e.peekSync();if(!o||o.depth<s)break;if(o.depth===s&&!o.content.startsWith(b))e.advanceSync(),yield*x(o.content,e,s,t);else break}yield{type:"endObject"};return}if(Pe(r)){yield{type:"startObject"},yield*x(r,e,n+1,t);const f=n+1;for(;!e.atEndSync();){const s=e.peekSync();if(!s||s.depth<f)break;if(s.depth===f&&!s.content.startsWith(b))e.advanceSync(),yield*x(s.content,e,f,t);else break}yield{type:"endObject"};return}yield{type:"primitive",value:Q(r)}}function Je(e){const n=e.content;if(n.startsWith('"')){const t=U(n,0);return t===-1?!1:n.slice(t+1).includes(g)}else return n.includes(g)}function*ze(e,n){yield{type:"startObject"};for(let t=0;t<e.length;t++)yield{type:"key",key:e[t]},yield{type:"primitive",value:n[t]};yield{type:"endObject"}}function S(e){if(e===null)return null;if(typeof e=="object"&&e!==null&&"toJSON"in e&&typeof e.toJSON=="function"){const n=e.toJSON();if(n!==e)return S(n)}if(typeof e=="string"||typeof e=="boolean")return e;if(typeof e=="number")return Object.is(e,-0)?0:Number.isFinite(e)?e:null;if(typeof e=="bigint")return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e.toString();if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(S);if(e instanceof Set)return Array.from(e).map(S);if(e instanceof Map)return Object.fromEntries(Array.from(e,([n,t])=>[String(n),S(t)]));if(Ge(e)){const n={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=S(e[t]));return n}return null}function A(e){return e===null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function j(e){return Array.isArray(e)}function y(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function R(e){return Object.keys(e).length===0}function Ge(e){if(e===null||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);return n===null||n===Object.prototype}function C(e){return e.length===0||e.every(n=>A(n))}function Xe(e){return e.length===0||e.every(n=>j(n))}function be(e){return e.length===0||e.every(n=>y(n))}function Ye(e){return/^[A-Z_][\w.]*$/i.test(e)}function ge(e){return/^[A-Z_]\w*$/i.test(e)}function Ze(e,n=O){return!(!e||e!==e.trim()||ye(e)||ve(e)||e.includes(":")||e.includes('"')||e.includes("\\")||/[[\]{}]/.test(e)||/[\n\r\t]/.test(e)||e.includes(n)||e.startsWith(D))}function ve(e){return/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/i.test(e)||/^0\d+$/.test(e)}const pe=Symbol("quotedKey");function B(e,n){if(Array.isArray(e))return e.map(t=>B(t,n));if(y(e)){const t={},i=e[pe];for(const[r,c]of Object.entries(e)){const f=i?.has(r);if(r.includes(K)&&!f){const o=r.split(K);if(o.every(l=>ge(l))){et(t,o,B(c,n),n);continue}}const s=B(c,n);if(r in t){const o=t[r];if(v(o,s))Z(o,s,n);else{if(n)throw new TypeError(`Path expansion conflict at key "${r}": cannot merge ${typeof o} with ${typeof s}`);t[r]=s}}else t[r]=s}return t}return e}function et(e,n,t,i){let r=e;for(let s=0;s<n.length-1;s++){const o=n[s],l=r[o];if(l===void 0){const d={};r[o]=d,r=d}else if(y(l))r=l;else{if(i)throw new TypeError(`Path expansion conflict at segment "${o}": expected object but found ${typeof l}`);const d={};r[o]=d,r=d}}const c=n[n.length-1],f=r[c];if(f===void 0)r[c]=t;else if(v(f,t))Z(f,t,i);else{if(i)throw new TypeError(`Path expansion conflict at key "${c}": cannot merge ${typeof f} with ${typeof t}`);r[c]=t}}function Z(e,n,t){for(const[i,r]of Object.entries(n)){const c=e[i];if(c===void 0)e[i]=r;else if(v(c,r))Z(c,r,t);else{if(t)throw new TypeError(`Path expansion conflict at key "${i}": cannot merge ${typeof c} with ${typeof r}`);e[i]=r}}}function v(e,n){return y(e)&&y(n)}function tt(e){const n={stack:[],root:void 0};for(const t of e)nt(n,t);return it(n)}function nt(e,n){const{stack:t}=e;switch(n.type){case"startObject":{const i={},r=new Set;if(t.length===0)t.push({type:"object",obj:i,quotedKeys:r});else{const c=t[t.length-1];if(c.type==="object"){if(c.currentKey===void 0)throw new Error("Object startObject event without preceding key");c.obj[c.currentKey]=i,c.currentKey=void 0}else c.type==="array"&&c.arr.push(i);t.push({type:"object",obj:i,quotedKeys:r})}break}case"endObject":{if(t.length===0)throw new Error("Unexpected endObject event");const i=t.pop();if(i.type!=="object")throw new Error("Mismatched endObject event");i.quotedKeys.size>0&&Object.defineProperty(i.obj,pe,{value:i.quotedKeys,enumerable:!1,writable:!1,configurable:!1}),t.length===0&&(e.root=i.obj);break}case"startArray":{const i=[];if(t.length===0)t.push({type:"array",arr:i});else{const r=t[t.length-1];if(r.type==="object"){if(r.currentKey===void 0)throw new Error("Array startArray event without preceding key");r.obj[r.currentKey]=i,r.currentKey=void 0}else r.type==="array"&&r.arr.push(i);t.push({type:"array",arr:i})}break}case"endArray":{if(t.length===0)throw new Error("Unexpected endArray event");const i=t.pop();if(i.type!=="array")throw new Error("Mismatched endArray event");t.length===0&&(e.root=i.arr);break}case"key":{if(t.length===0)throw new Error("Key event outside of object context");const i=t[t.length-1];if(i.type!=="object")throw new Error("Key event in non-object context");i.currentKey=n.key,n.wasQuoted&&i.quotedKeys.add(n.key);break}case"primitive":if(t.length===0)e.root=n.value;else{const i=t[t.length-1];if(i.type==="object"){if(i.currentKey===void 0)throw new Error("Primitive event without preceding key in object");i.obj[i.currentKey]=n.value,i.currentKey=void 0}else i.type==="array"&&i.arr.push(n.value)}break}}function it(e){if(e.stack.length!==0)throw new Error("Incomplete event stream: stack not empty at end");if(e.root===void 0)throw new Error("No root value built from events");return e.root}function rt(e,n,t,i,r,c,f){if(i.keyFolding!=="safe"||!y(n))return;const{segments:s,tail:o,leafValue:l}=ct(e,n,f??i.flattenDepth);if(s.length<2||!s.every(k=>ge(k)))return;const d=ft(s),$=c?`${c}${K}${d}`:d;if(!t.includes(d)&&!(r&&r.has($)))return{foldedKey:d,remainder:o,leafValue:l,segmentCount:s.length}}function ct(e,n,t){const i=[e];let r=n;for(;i.length<t&&y(r);){const c=Object.keys(r);if(c.length!==1)break;const f=c[0],s=r[f];i.push(f),r=s}return!y(r)||R(r)?{segments:i,tail:void 0,leafValue:r}:{segments:i,tail:r,leafValue:r}}function ft(e){return e.join(K)}function T(e,n){return e===null?X:typeof e=="boolean"||typeof e=="number"?String(e):st(e,n)}function st(e,n=O){return Ze(e,n)?e:`${u}${le(e)}${u}`}function F(e){return Ye(e)?e:`${u}${le(e)}${u}`}function we(e,n=O){return e.map(t=>T(t,n)).join(n)}function E(e,n){const t=n?.key,i=n?.fields,r=n?.delimiter??ce;let c="";if(t&&(c+=F(t)),c+=`[${e}${r!==O?r:""}]`,i){const f=i.map(s=>F(s));c+=`{${f.join(r)}}`}return c+=":",c}function*ot(e,n,t){if(A(e)){const i=T(e,n.delimiter);i!==""&&(yield i);return}j(e)?yield*G(void 0,e,t,n):y(e)&&(yield*N(e,t,n))}function*N(e,n,t,i,r,c){const f=Object.keys(e);n===0&&!i&&(i=new Set(f.filter(o=>o.includes("."))));const s=c??t.flattenDepth;for(const[o,l]of Object.entries(e))yield*lt(o,l,n,t,f,i,r,s)}function*lt(e,n,t,i,r,c,f,s){const o=f?`${f}${K}${e}`:e,l=s??i.flattenDepth;if(i.keyFolding==="safe"&&r){const $=rt(e,n,r,i,c,f,l);if($){const{foldedKey:k,remainder:I,leafValue:w,segmentCount:a}=$,L=F(k);if(I===void 0){if(A(w)){yield h(t,`${L}: ${T(w,i.delimiter)}`,i.indent);return}else if(j(w)){yield*G(k,w,t,i);return}else if(y(w)&&R(w)){yield h(t,`${L}:`,i.indent);return}}if(y(I)){yield h(t,`${L}:`,i.indent);const Oe=l-a,ke=f?`${f}${K}${k}`:k;yield*N(I,t+1,i,c,ke,Oe);return}}}const d=F(e);A(n)?yield h(t,`${d}: ${T(n,i.delimiter)}`,i.indent):j(n)?yield*G(e,n,t,i):y(n)&&(yield h(t,`${d}:`,i.indent),R(n)||(yield*N(n,t+1,i,c,o,l)))}function*G(e,n,t,i){if(n.length===0){yield h(t,E(0,{key:e,delimiter:i.delimiter}),i.indent);return}if(C(n)){yield h(t,H(n,i.delimiter,e),i.indent);return}if(Xe(n)&&n.every(r=>C(r))){yield*dt(e,n,t,i);return}if(be(n)){const r=Se(n);r?yield*at(e,n,r,t,i):yield*re(e,n,t,i);return}yield*re(e,n,t,i)}function*dt(e,n,t,i){yield h(t,E(n.length,{key:e,delimiter:i.delimiter}),i.indent);for(const r of n)if(C(r)){const c=H(r,i.delimiter);yield p(t+1,c,i.indent)}}function H(e,n,t){const i=E(e.length,{key:t,delimiter:n}),r=we(e,n);return e.length===0?i:`${i} ${r}`}function*at(e,n,t,i,r){yield h(i,E(n.length,{key:e,fields:t,delimiter:r.delimiter}),r.indent),yield*Ee(n,t,i+1,r)}function Se(e){if(e.length===0)return;const n=e[0],t=Object.keys(n);if(t.length!==0&&yt(e,t))return t}function yt(e,n){for(const t of e){if(Object.keys(t).length!==n.length)return!1;for(const i of n)if(!(i in t)||!A(t[i]))return!1}return!0}function*Ee(e,n,t,i){for(const r of e)yield h(t,we(n.map(c=>r[c]),i.delimiter),i.indent)}function*re(e,n,t,i){yield h(t,E(n.length,{key:e,delimiter:i.delimiter}),i.indent);for(const r of n)yield*ee(r,t+1,i)}function*ut(e,n,t){if(R(e)){yield h(n,D,t.indent);return}const i=Object.entries(e),[r,c]=i[0],f=i.slice(1);if(j(c)&&be(c)){const o=Se(c);if(o){yield p(n,E(c.length,{key:r,fields:o,delimiter:t.delimiter}),t.indent),yield*Ee(c,o,n+2,t),f.length>0&&(yield*N(Object.fromEntries(f),n+1,t));return}}const s=F(r);if(A(c))yield p(n,`${s}: ${T(c,t.delimiter)}`,t.indent);else if(j(c))if(c.length===0)yield p(n,`${s}${E(0,{delimiter:t.delimiter})}`,t.indent);else if(C(c))yield p(n,`${s}${H(c,t.delimiter)}`,t.indent);else{yield p(n,`${s}${E(c.length,{delimiter:t.delimiter})}`,t.indent);for(const o of c)yield*ee(o,n+2,t)}else y(c)&&(yield p(n,`${s}:`,t.indent),R(c)||(yield*N(c,n+2,t)));f.length>0&&(yield*N(Object.fromEntries(f),n+1,t))}function*ee(e,n,t){if(A(e))yield p(n,T(e,t.delimiter),t.indent);else if(j(e))if(C(e))yield p(n,H(e,t.delimiter),t.indent);else{yield p(n,E(e.length,{delimiter:t.delimiter}),t.indent);for(const i of e)yield*ee(i,n+1,t)}else y(e)&&(yield*ut(e,n,t))}function h(e,n,t){return" ".repeat(t*e)+n}function p(e,n,t){return h(e,b+n,t)}function ht(e,n){const t=n("",e,[]);return t===void 0?q(e,n,[]):q(S(t),n,[])}function q(e,n,t){return y(e)?mt(e,n,t):j(e)?bt(e,n,t):e}function mt(e,n,t){const i={};for(const[r,c]of Object.entries(e)){const f=[...t,r],s=n(r,c,f);s!==void 0&&(i[r]=q(S(s),n,f))}return i}function bt(e,n,t){const i=[];for(let r=0;r<e.length;r++){const c=e[r],f=[...t,r],s=n(String(r),c,f);if(s===void 0)continue;const o=S(s);i.push(q(o,n,f))}return i}function Et(e,n){return Array.from(gt(e,n)).join(`
`)}function Ot(e,n){return pt(e.split(`
`),n)}function gt(e,n){const t=S(e),i=wt(n);return ot(i.replacer?ht(t,i.replacer):t,i,0)}function pt(e,n){const t=St(n),i=tt(We(e,{indent:t.indent,strict:t.strict}));return t.expandPaths==="safe"?B(i,t.strict):i}function wt(e){return{indent:e?.indent??2,delimiter:e?.delimiter??O,keyFolding:e?.keyFolding??"off",flattenDepth:e?.flattenDepth??Number.POSITIVE_INFINITY,replacer:e?.replacer}}function St(e){return{indent:e?.indent??2,strict:e?.strict??!0,expandPaths:e?.expandPaths??"off"}}export{Ot as d,Et as e};
