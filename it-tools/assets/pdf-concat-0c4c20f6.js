import{d3 as C,d as S,a0 as O,r as d,o as g,c as W,a as _,k as t,l as e,j as x,w as i,m as G,ad as k,a6 as h,G as m,aW as R,x as T,b3 as H,aj as J,af as K,s as L,ag as Q,bq as X}from"./index-0c1fde36.js";import{_ as Y}from"./InputCopyable.vue_vue_type_script_setup_true_lang-294ac243.js";import{g as Z}from"./base64-ae7cf34b.js";import{q as ee}from"./qpdf-45a7a22a.js";import{u as te}from"./downloadBase64-508288e2.js";import{_ as oe}from"./DynamicInput-1857fb62.js";import{_ as ne}from"./a-07fc27a5.js";import{_ as ae}from"./p-77eb774b.js";import{_ as le}from"./Divider-5fc425b0.js";import{_ as se}from"./Spin-885f2a22.js";import"./index-a6f01dde.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./ArrowDown-6fbf6d78.js";/**
 * @license @tabler/icons-vue v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ce=C("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ie=C("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pe=C("outline","circle-minus","IconCircleMinus",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l6 0",key:"svg-1"}]]);const re={style:{flex:"0 0 100%"}},ue={"mx-auto":"","mb-2":"","max-w-600px":""},_e={"mt-2":"","text-center":""},de={"ml-1":"",flex:"","gap-1":""},fe={"w-full":"",flex:"","flex-wrap":"","items-center":"","gap-1":""},me={"mt-3":"",flex:"","justify-center":""},ve={"mt-3":"",flex:"","justify-center":""},ge=S({__name:"pdf-concat",setup(he){const{t:p}=O(),r=d([]);function U(s){r.value=[...r.value,...s.map(n=>({file:n,range:""}))]}const f=d("idle"),w=d(""),v=d([]),b=d("concat.pdf"),{download:q}=te({source:w,filename:b}),I=d("");async function F(){const s=r.value;if(!s.length)return;const n=[];for(const o of s)n.push(await o.file.arrayBuffer());f.value="processing";try{const o=["--empty","--pages"];for(let c=0;c<s.length;c++)o.push(`in${c}.pdf`),s[c].range?o.push(`${s[c].range}`):o.push("1-z");o.push("--"),o.push("out.pdf");const u=await j(n,o,0);w.value=`data:application/pdf;base64,${Z.fromUint8Array(u)}`,f.value="done",q()}catch{f.value="error"}}async function j(s,n,o){I.value=n.join(" "),v.value=[];const u=await ee({print(a){v.value.push(a)},printErr(a){v.value.push(a)}});for(let a=0;a<s.length;a++)u.FS.writeFile(`in${a}.pdf`,new Uint8Array(s[a]));const c=u.callMain(n);if(o!==c)throw new Error("Process run failed");return u.FS.readFile("out.pdf")}return(s,n)=>{const o=R,u=T,c=H,a=J,$=Y,N=oe,B=K,V=ne,z=ae,D=L,P=le,A=Q,E=se;return g(),W("div",null,[_("div",re,[_("div",ue,[t(o,{title:e(p)("tools.pdf-concat.texts.title-drag-and-drop-a-pdf-files-here-or-click-to-select-some-files"),multiple:"",accept:".pdf",onFilesUpload:U},null,8,["title"]),_("div",_e,[t(u,{value:e(b),label:e(p)("tools.pdf-concat.texts.label-output-file"),"label-position":"left"},null,8,["value","label"])])]),e(r)?(g(),x(B,{key:0,title:e(p)("tools.pdf-concat.texts.title-files-order")},{default:i(()=>[t(N,{value:e(r),"onUpdate:value":n[0]||(n[0]=l=>G(r)?r.value=l:null),"show-sort-button":"","w-full":"","insertion-disabled":!0,"create-button-props":{id:"pdf-concat-create"}},{action:i(({index:l,remove:y,move:M})=>[_("div",de,[t(a,{onClick:()=>y(l)},{default:i(()=>[t(c,{size:"25",component:e(pe)},null,8,["component"])]),_:2},1032,["onClick"]),t(a,{disabled:l===0,onClick:()=>M("up",l)},{default:i(()=>[t(c,{size:"25",component:e(ie)},null,8,["component"])]),_:2},1032,["disabled","onClick"]),t(a,{disabled:l===e(r).length-1,onClick:()=>M("down",l)},{default:i(()=>[t(c,{size:"25",component:e(ce)},null,8,["component"])]),_:2},1032,["disabled","onClick"])])]),default:i(({value:l})=>[_("div",fe,[t($,{readonly:"",value:l.file.name},null,8,["value"]),t(u,{value:l.range,"onUpdate:value":y=>l.range=y,label:e(p)("tools.pdf-concat.texts.label-range"),"label-position":"left",placeholder:e(p)("tools.pdf-concat.texts.placeholder-qpdf-range"),"mb-2":""},null,8,["value","onUpdate:value","label","placeholder"])])]),_:1},8,["value"])]),_:1},8,["title"])):k("",!0)]),t(z,null,{default:i(()=>[h(m(e(p)("tools.pdf-concat.texts.tag-for-details-about-range-options-see")),1),t(V,{target:"_blank",href:"https://qpdf.readthedocs.io/en/stable/cli.html#page-selection"},{default:i(()=>[h(m(e(p)("tools.pdf-concat.texts.tag-qpdf-documentation")),1)]),_:1})]),_:1}),_("div",me,[t(D,{disabled:!e(r),onClick:n[1]||(n[1]=l=>F())},{default:i(()=>[h(m(e(p)("tools.pdf-concat.texts.tag-concat-pdfs")),1)]),_:1},8,["disabled"])]),t(P),_("div",ve,[e(f)==="error"?(g(),x(A,{key:0,type:"error"},{default:i(()=>[h(" An error occured processing "+m(e(b)),1)]),_:1})):k("",!0),e(f)==="processing"?(g(),x(E,{key:1,size:"small"})):k("",!0)]),t(B,{title:e(p)("tools.pdf-concat.texts.title-logs")},{default:i(()=>[t($,{label:e(p)("tools.pdf-concat.texts.label-qpdf"),value:e(I),"mb-1":""},null,8,["label","value"]),_("pre",null,m(e(v).join(`
`)),1)]),_:1},8,["title"])])}}});const Ne=X(ge,[["__scopeId","data-v-10a6e7f2"]]);export{Ne as default};
