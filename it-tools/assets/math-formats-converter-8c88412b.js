import{d as C,a0 as L,b6 as V,am as B,ac as O,E as F,o as I,c as P,k as v,l as m,m as W,w as $,x as D,ae as R,af as N}from"./index-0c1fde36.js";import{_ as q}from"./TextareaCopyable-59231e95.js";import{B as E}from"./index-a6f01dde.js";import"./base64-ae7cf34b.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";const H="/it-tools/assets/mitex_wasm_bg-7907415f.wasm",Q=async(t={},e)=>{let o;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let a;if(typeof E=="function"&&typeof E.from=="function")a=E.from(r,"base64");else if(typeof atob=="function"){const c=atob(r);a=new Uint8Array(c.length);for(let n=0;n<c.length;n++)a[n]=c.charCodeAt(n)}else throw new Error("Cannot decode base64-encoded data URL");o=await WebAssembly.instantiate(a,t)}else{const r=await fetch(e),a=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&a.startsWith("application/wasm"))o=await WebAssembly.instantiateStreaming(r,t);else{const c=await r.arrayBuffer();o=await WebAssembly.instantiate(c,t)}}return o.instance.exports};let f;function z(t){f=t}const G=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let j=new G("utf-8",{ignoreBOM:!0,fatal:!0});j.decode();let k=null;function w(){return(k===null||k.byteLength===0)&&(k=new Uint8Array(f.memory.buffer)),k}function M(t,e){return t=t>>>0,j.decode(w().subarray(t,t+e))}const d=new Array(128).fill(void 0);d.push(void 0,null,!0,!1);let x=d.length;function J(t){x===d.length&&d.push(d.length+1);const e=x;return x=d[e],d[e]=t,e}let y=0;const K=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let U=new K("utf-8");const X=typeof U.encodeInto=="function"?function(t,e){return U.encodeInto(t,e)}:function(t,e){const o=U.encode(t);return e.set(o),{read:t.length,written:o.length}};function Y(t,e,o){if(o===void 0){const l=U.encode(t),_=e(l.length,1)>>>0;return w().subarray(_,_+l.length).set(l),y=l.length,_}let r=t.length,a=e(r,1)>>>0;const c=w();let n=0;for(;n<r;n++){const l=t.charCodeAt(n);if(l>127)break;c[a+n]=l}if(n!==r){n!==0&&(t=t.slice(n)),a=o(a,r,r=n+t.length*3,1)>>>0;const l=w().subarray(a+n,a+r),_=X(t,l);n+=_.written,a=o(a,r,n,1)>>>0}return y=n,a}function Z(t,e){const o=e(t.length*1,1)>>>0;return w().set(t,o/1),y=t.length,o}let A=null;function S(){return(A===null||A.byteLength===0)&&(A=new Int32Array(f.memory.buffer)),A}function tt(t){return d[t]}function et(t){t<132||(d[t]=x,x=t)}function nt(t){const e=tt(t);return et(t),e}function ot(t,e){let o,r;try{const s=f.__wbindgen_add_to_stack_pointer(-16),g=Y(t,f.__wbindgen_export_0,f.__wbindgen_export_1),b=y,T=Z(e,f.__wbindgen_export_0),u=y;f.convert_math(s,g,b,T,u);var a=S()[s/4+0],c=S()[s/4+1],n=S()[s/4+2],l=S()[s/4+3],_=a,p=c;if(l)throw _=0,p=0,nt(n);return o=_,r=p,M(_,p)}finally{f.__wbindgen_add_to_stack_pointer(16),f.__wbindgen_export_2(o,r,1)}}function at(t,e){const o=M(t,e);return J(o)}URL=globalThis.URL;const h=await Q({"./mitex_wasm_bg.js":{__wbindgen_string_new:at}},H),rt=h.memory,lt=h.convert_math,st=h.convert_text,ct=h.__wbindgen_add_to_stack_pointer,it=h.__wbindgen_export_0,mt=h.__wbindgen_export_1,ut=h.__wbindgen_export_2,_t=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:ct,__wbindgen_export_0:it,__wbindgen_export_1:mt,__wbindgen_export_2:ut,convert_math:lt,convert_text:st,memory:rt},Symbol.toStringTag,{value:"Module"}));z(_t);const yt=C({__name:"math-formats-converter",setup(t){const{t:e}=L(),o="/it-tools/",{load:r}=V(`${o}plurimath/index.js`,void 0,{type:"module",manual:!0}),a=[{value:"asciimath",label:e("tools.math-formats-converter.texts.label-asciimath")},{value:"latex",label:e("tools.math-formats-converter.texts.label-latex")},{value:"mathml",label:e("tools.math-formats-converter.texts.label-mathml")},{value:"html",label:e("tools.math-formats-converter.texts.label-html")},{value:"omml",label:e("tools.math-formats-converter.texts.label-ooml")}],c=B({tool:"math-fmts-conv",name:"input",defaultValue:""}),n=O({name:"src",storageName:"math-fmts-conv:src",defaultValue:"latex"}),l=O({name:"target",storageName:"math-fmts-conv:target",defaultValue:"mathml"}),_=F(async()=>{const p=c.value,s=n.value,g=l.value;return p?s===g?p:(await r(),new Promise((b,T)=>{try{const u=new Plurimath(p,s);let i;switch(g){case"asciimath":i=u.toAsciimath();break;case"latex":i=u.toLatex();break;case"mathml":i=u.toMathml();break;case"html":i=u.toHtml();break;case"omml":i=u.toOmml();break;case"typst":i=ot(u.toLatex(),new Uint8Array);break;default:i="# unknown format";break}b(i)}catch(u){b(`# error converting formula: ${u.toString()}`)}})):""});return(p,s)=>{const g=D,b=R,T=q,u=N;return I(),P("div",null,[v(g,{value:m(c),"onUpdate:value":s[0]||(s[0]=i=>W(c)?c.value=i:null),multiline:"",placeholder:m(e)("tools.math-formats-converter.texts.placeholder-put-your-math-expression-here"),rows:"5",label:m(e)("tools.math-formats-converter.texts.label-mathematical-expression-to-convert"),"raw-text":"","mb-5":""},null,8,["value","placeholder","label"]),v(b,{value:m(n),"onUpdate:value":s[1]||(s[1]=i=>W(n)?n.value=i:null),label:m(e)("tools.math-formats-converter.texts.label-source-format"),options:a,placeholder:m(e)("tools.math-formats-converter.texts.placeholder-source-format"),"mb-2":""},null,8,["value","label","placeholder"]),v(b,{value:m(l),"onUpdate:value":s[2]||(s[2]=i=>W(l)?l.value=i:null),label:m(e)("tools.math-formats-converter.texts.label-target-format"),options:[...a,{value:"typst",label:m(e)("tools.math-formats-converter.texts.label-typst")}],placeholder:m(e)("tools.math-formats-converter.texts.placeholder-target-format"),"mb-2":""},null,8,["value","label","options","placeholder"]),v(u,{title:m(e)("tools.math-formats-converter.texts.title-converted-expression")},{default:$(()=>[v(T,{value:m(_),language:m(l),"word-wrap":"","download-file-name":`math.${m(l)}`},null,8,["value","language","download-file-name"])]),_:1},8,["title"])])}}});export{yt as default};
