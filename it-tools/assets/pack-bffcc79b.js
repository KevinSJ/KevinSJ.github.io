import{B as G}from"./index-a6f01dde.js";var ye;try{ye=new TextDecoder}catch{}var g,F,n=0,B={},m,X,z=0,$=0,L,K,N=[],b,_e={useRecords:!1,mapsAsObjects:!0};class $e{}const qe=new $e;qe.name="MessagePack 0xC1";var Y=!1,Ke=2,Me;try{new Function("")}catch{Ke=1/0}class re{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.sequential&&e.trusted!==!1&&(e.trusted=!0,!e.structures&&e.useRecords!=!1&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,r){if(g)return Qe(()=>(pe(),this?this.unpack(e,r):re.prototype.unpack.call(_e,e,r)));!e.buffer&&e.constructor===ArrayBuffer&&(e=typeof G<"u"?G.from(e):new Uint8Array(e)),typeof r=="object"?(F=r.end||e.length,n=r.start||0):(n=0,F=r>-1?r:e.length),$=0,X=null,L=null,g=e;try{b=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(s){throw g=null,e instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof re){if(B=this,this.structures)return m=this.structures,fe(r);(!m||m.length>0)&&(m=[])}else B=_e,(!m||m.length>0)&&(m=[]);return fe(r)}unpackMultiple(e,r){let s,f=0;try{Y=!0;let c=e.length,h=this?this.unpack(e,c):ce.unpack(e,c);if(r){if(r(h,f,n)===!1)return;for(;n<c;)if(f=n,r(fe(),f,n)===!1)return}else{for(s=[h];n<c;)f=n,s.push(fe());return s}}catch(c){throw c.lastPosition=f,c.values=s,c}finally{Y=!1,pe()}}_mergeStructures(e,r){e=e||[],Object.isFrozen(e)&&(e=e.map(s=>s.slice(0)));for(let s=0,f=e.length;s<f;s++){let c=e[s];c&&(c.isShared=!0,s>=32&&(c.highByte=s-32>>5))}e.sharedLength=e.length;for(let s in r||[])if(s>=0){let f=e[s],c=r[s];c&&(f&&((e.restoreStructures||(e.restoreStructures=[]))[s]=f),e[s]=c)}return this.structures=e}decode(e,r){return this.unpack(e,r)}}function fe(t){try{if(!B.trusted&&!Y){let r=m.sharedLength||0;r<m.length&&(m.length=r)}let e;if(B.randomAccessStructure&&g[n]<64&&g[n]>=32&&Me?(e=Me(g,n,F,B),g=null,!(t&&t.lazy)&&e&&(e=e.toJSON()),n=F):e=_(),L&&(n=L.postBundlePosition,L=null),Y&&(m.restoreStructures=null),n==F)m&&m.restoreStructures&&Re(),m=null,g=null,K&&(K=null);else{if(n>F)throw new Error("Unexpected end of MessagePack data");if(!Y){let r;try{r=JSON.stringify(e,(s,f)=>typeof f=="bigint"?`${f}n`:f).slice(0,100)}catch(s){r="(JSON view not available "+s+")"}throw new Error("Data read, but end of buffer not reached "+r)}}return e}catch(e){throw m&&m.restoreStructures&&Re(),pe(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||n>F)&&(e.incomplete=!0),e}}function Re(){for(let t in m.restoreStructures)m[t]=m.restoreStructures[t];m.restoreStructures=null}function _(){let t=g[n++];if(t<160)if(t<128){if(t<64)return t;{let e=m[t&63]||B.getStructures&&Ze()[t&63];return e?(e.read||(e.read=me(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,B.mapsAsObjects){let e={};for(let r=0;r<t;r++){let s=Ye();s==="__proto__"&&(s="__proto_"),e[s]=_()}return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(_(),_());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=_();return B.freezeData?Object.freeze(e):e}else if(t<192){let e=t-160;if($>=n)return X.slice(n-z,(n+=e)-z);if($==0&&F<140){let r=e<16?Ue(e):Xe(e);if(r!=null)return r}return we(e)}else{let e;switch(t){case 192:return null;case 193:return L?(e=_(),e>0?L[1].slice(L.position1,L.position1+=e):L[0].slice(L.position0,L.position0-=e)):qe;case 194:return!1;case 195:return!0;case 196:if(e=g[n++],e===void 0)throw new Error("Unexpected end of buffer");return he(e);case 197:return e=b.getUint16(n),n+=2,he(e);case 198:return e=b.getUint32(n),n+=4,he(e);case 199:return Q(g[n++]);case 200:return e=b.getUint16(n),n+=2,Q(e);case 201:return e=b.getUint32(n),n+=4,Q(e);case 202:if(e=b.getFloat32(n),B.useFloat32>2){let r=ke[(g[n]&127)<<1|g[n+1]>>7];return n+=4,(r*e+(e>0?.5:-.5)>>0)/r}return n+=4,e;case 203:return e=b.getFloat64(n),n+=8,e;case 204:return g[n++];case 205:return e=b.getUint16(n),n+=2,e;case 206:return e=b.getUint32(n),n+=4,e;case 207:return B.int64AsType==="number"?(e=b.getUint32(n)*4294967296,e+=b.getUint32(n+4)):B.int64AsType==="string"?e=b.getBigUint64(n).toString():B.int64AsType==="auto"?(e=b.getBigUint64(n),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=b.getBigUint64(n),n+=8,e;case 208:return b.getInt8(n++);case 209:return e=b.getInt16(n),n+=2,e;case 210:return e=b.getInt32(n),n+=4,e;case 211:return B.int64AsType==="number"?(e=b.getInt32(n)*4294967296,e+=b.getUint32(n+4)):B.int64AsType==="string"?e=b.getBigInt64(n).toString():B.int64AsType==="auto"?(e=b.getBigInt64(n),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=b.getBigInt64(n),n+=8,e;case 212:if(e=g[n++],e==114)return je(g[n++]&63);{let r=N[e];if(r)return r.read?(n++,r.read(_())):r.noBuffer?(n++,r()):r(g.subarray(n,++n));throw new Error("Unknown extension "+e)}case 213:return e=g[n],e==114?(n++,je(g[n++]&63,g[n++])):Q(2);case 214:return Q(4);case 215:return Q(8);case 216:return Q(16);case 217:return e=g[n++],$>=n?X.slice(n-z,(n+=e)-z):tt(e);case 218:return e=b.getUint16(n),n+=2,$>=n?X.slice(n-z,(n+=e)-z):rt(e);case 219:return e=b.getUint32(n),n+=4,$>=n?X.slice(n-z,(n+=e)-z):nt(e);case 220:return e=b.getUint16(n),n+=2,Le(e);case 221:return e=b.getUint32(n),n+=4,Le(e);case 222:return e=b.getUint16(n),n+=2,Ve(e);case 223:return e=b.getUint32(n),n+=4,Ve(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}const et=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function me(t,e){function r(){if(r.count++>Ke){let f=t.read=new Function("r","return function(){return "+(B.freezeData?"Object.freeze":"")+"({"+t.map(c=>c==="__proto__"?"__proto_:r()":et.test(c)?c+":r()":"["+JSON.stringify(c)+"]:r()").join(",")+"})}")(_);return t.highByte===0&&(t.read=Pe(e,t.read)),f()}let s={};for(let f=0,c=t.length;f<c;f++){let h=t[f];h==="__proto__"&&(h="__proto_"),s[h]=_()}return B.freezeData?Object.freeze(s):s}return r.count=0,t.highByte===0?Pe(e,r):r}const Pe=(t,e)=>function(){let r=g[n++];if(r===0)return e();let s=t<32?-(t+(r<<5)):t+(r<<5),f=m[s]||Ze()[s];if(!f)throw new Error("Record id is not defined for "+s);return f.read||(f.read=me(f,t)),f.read()};function Ze(){let t=Qe(()=>(g=null,B.getStructures()));return m=B._mergeStructures(t,m)}var we=ne,tt=ne,rt=ne,nt=ne;function ne(t){let e;if(t<16&&(e=Ue(t)))return e;if(t>64&&ye)return ye.decode(g.subarray(n,n+=t));const r=n+t,s=[];for(e="";n<r;){const f=g[n++];if(!(f&128))s.push(f);else if((f&224)===192){const c=g[n++]&63;s.push((f&31)<<6|c)}else if((f&240)===224){const c=g[n++]&63,h=g[n++]&63;s.push((f&31)<<12|c<<6|h)}else if((f&248)===240){const c=g[n++]&63,h=g[n++]&63,w=g[n++]&63;let A=(f&7)<<18|c<<12|h<<6|w;A>65535&&(A-=65536,s.push(A>>>10&1023|55296),A=56320|A&1023),s.push(A)}else s.push(f);s.length>=4096&&(e+=P.apply(String,s),s.length=0)}return s.length>0&&(e+=P.apply(String,s)),e}function Le(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=_();return B.freezeData?Object.freeze(e):e}function Ve(t){if(B.mapsAsObjects){let e={};for(let r=0;r<t;r++){let s=Ye();s==="__proto__"&&(s="__proto_"),e[s]=_()}return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(_(),_());return e}}var P=String.fromCharCode;function Xe(t){let e=n,r=new Array(t);for(let s=0;s<t;s++){const f=g[n++];if((f&128)>0){n=e;return}r[s]=f}return P.apply(String,r)}function Ue(t){if(t<4)if(t<2){if(t===0)return"";{let e=g[n++];if((e&128)>1){n-=1;return}return P(e)}}else{let e=g[n++],r=g[n++];if((e&128)>0||(r&128)>0){n-=2;return}if(t<3)return P(e,r);let s=g[n++];if((s&128)>0){n-=3;return}return P(e,r,s)}else{let e=g[n++],r=g[n++],s=g[n++],f=g[n++];if((e&128)>0||(r&128)>0||(s&128)>0||(f&128)>0){n-=4;return}if(t<6){if(t===4)return P(e,r,s,f);{let c=g[n++];if((c&128)>0){n-=5;return}return P(e,r,s,f,c)}}else if(t<8){let c=g[n++],h=g[n++];if((c&128)>0||(h&128)>0){n-=6;return}if(t<7)return P(e,r,s,f,c,h);let w=g[n++];if((w&128)>0){n-=7;return}return P(e,r,s,f,c,h,w)}else{let c=g[n++],h=g[n++],w=g[n++],A=g[n++];if((c&128)>0||(h&128)>0||(w&128)>0||(A&128)>0){n-=8;return}if(t<10){if(t===8)return P(e,r,s,f,c,h,w,A);{let R=g[n++];if((R&128)>0){n-=9;return}return P(e,r,s,f,c,h,w,A,R)}}else if(t<12){let R=g[n++],T=g[n++];if((R&128)>0||(T&128)>0){n-=10;return}if(t<11)return P(e,r,s,f,c,h,w,A,R,T);let M=g[n++];if((M&128)>0){n-=11;return}return P(e,r,s,f,c,h,w,A,R,T,M)}else{let R=g[n++],T=g[n++],M=g[n++],D=g[n++];if((R&128)>0||(T&128)>0||(M&128)>0||(D&128)>0){n-=12;return}if(t<14){if(t===12)return P(e,r,s,f,c,h,w,A,R,T,M,D);{let j=g[n++];if((j&128)>0){n-=13;return}return P(e,r,s,f,c,h,w,A,R,T,M,D,j)}}else{let j=g[n++],H=g[n++];if((j&128)>0||(H&128)>0){n-=14;return}if(t<15)return P(e,r,s,f,c,h,w,A,R,T,M,D,j,H);let C=g[n++];if((C&128)>0){n-=15;return}return P(e,r,s,f,c,h,w,A,R,T,M,D,j,H,C)}}}}}function De(){let t=g[n++],e;if(t<192)e=t-160;else switch(t){case 217:e=g[n++];break;case 218:e=b.getUint16(n),n+=2;break;case 219:e=b.getUint32(n),n+=4;break;default:throw new Error("Expected string")}return ne(e)}function he(t){return B.copyBuffers?Uint8Array.prototype.slice.call(g,n,n+=t):g.subarray(n,n+=t)}function Q(t){let e=g[n++];if(N[e]){let r;return N[e](g.subarray(n,r=n+=t),s=>{n=s;try{return _()}finally{n=r}})}else throw new Error("Unknown extension type "+e)}var Ne=new Array(4096);function Ye(){let t=g[n++];if(t>=160&&t<192){if(t=t-160,$>=n)return X.slice(n-z,(n+=t)-z);if(!($==0&&F<180))return we(t)}else return n--,Ge(_());let e=(t<<5^(t>1?b.getUint16(n):t>0?g[n]:0))&4095,r=Ne[e],s=n,f=n+t-3,c,h=0;if(r&&r.bytes==t){for(;s<f;){if(c=b.getUint32(s),c!=r[h++]){s=1879048192;break}s+=4}for(f+=3;s<f;)if(c=g[s++],c!=r[h++]){s=1879048192;break}if(s===f)return n=s,r.string;f-=3,s=n}for(r=[],Ne[e]=r,r.bytes=t;s<f;)c=b.getUint32(s),r.push(c),s+=4;for(f+=3;s<f;)c=g[s++],r.push(c);let w=t<16?Ue(t):Xe(t);return w!=null?r.string=w:r.string=we(t)}function Ge(t){if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(t==null)return t+"";if(B.allowArraysInMapKeys&&Array.isArray(t)&&t.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return t.flat().toString();throw new Error(`Invalid property type for record: ${typeof t}`)}const je=(t,e)=>{let r=_().map(Ge),s=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let f=m[t];return f&&(f.isShared||Y)&&((m.restoreStructures||(m.restoreStructures=[]))[t]=f),m[t]=r,r.read=me(r,s),r.read()};N[0]=()=>{};N[0].noBuffer=!0;N[66]=t=>{let e=t.byteLength%8||8,r=BigInt(t[0]&128?t[0]-256:t[0]);for(let s=1;s<e;s++)r<<=BigInt(8),r+=BigInt(t[s]);if(t.byteLength!==e){let s=new DataView(t.buffer,t.byteOffset,t.byteLength),f=(c,h)=>{let w=h-c;if(w<=40){let M=s.getBigUint64(c);for(let D=c+8;D<h;D+=8)M<<=64n,M|=s.getBigUint64(D);return M}let A=c+(w>>4<<3),R=f(c,A),T=f(A,h);return R<<BigInt((h-A)*8)|T};r=r<<BigInt((s.byteLength-e)*8)|f(e,s.byteLength)}return r};let Ce={Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError:typeof AggregateError=="function"?AggregateError:null};N[101]=()=>{let t=_();if(!Ce[t[0]]){let e=Error(t[1],{cause:t[2]});return e.name=t[0],e}return Ce[t[0]](t[1],{cause:t[2]})};N[105]=t=>{if(B.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=b.getUint32(n-4);K||(K=new Map);let r=g[n],s;r>=144&&r<160||r==220||r==221?s=[]:r>=128&&r<144||r==222||r==223?s=new Map:(r>=199&&r<=201||r>=212&&r<=216)&&g[n+1]===115?s=new Set:s={};let f={target:s};K.set(e,f);let c=_();if(f.used)Object.assign(s,c);else return f.target=c;if(s instanceof Map)for(let[h,w]of c.entries())s.set(h,w);if(s instanceof Set)for(let h of Array.from(c))s.add(h);return s};N[112]=t=>{if(B.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=b.getUint32(n-4),r=K.get(e);return r.used=!0,r.target};N[115]=()=>new Set(_());const He=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");let it=typeof globalThis=="object"?globalThis:window;N[116]=t=>{let e=t[0],r=Uint8Array.prototype.slice.call(t,1).buffer,s=He[e];if(!s){if(e===16)return r;if(e===17)return new DataView(r);throw new Error("Could not find typed array for code "+e)}return new it[s](r)};N[120]=()=>{let t=_();return new RegExp(t[0],t[1])};const st=[];N[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=n;return n+=e-t.length,L=st,L=[De(),De()],L.position0=0,L.position1=0,L.postBundlePosition=n,n=r,_()};N[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Qe(t){let e=F,r=n,s=z,f=$,c=X,h=K,w=L,A=new Uint8Array(g.slice(0,F)),R=m,T=m.slice(0,m.length),M=B,D=Y,j=t();return F=e,n=r,z=s,$=f,X=c,K=h,L=w,g=A,Y=D,m=R,m.splice(0,m.length,...T),B=M,b=new DataView(g.buffer,g.byteOffset,g.byteLength),j}function pe(){g=null,K=null,m=null}const ke=new Array(147);for(let t=0;t<256;t++)ke[t]=+("1e"+Math.floor(45.15-t*.30103));var ce=new re({useRecords:!1});const wt=ce.unpack;ce.unpackMultiple;ce.unpack;let ft=new Float32Array(1);new Uint8Array(ft.buffer,0,4);let ue;try{ue=new TextEncoder}catch{}let Se,be;const v=typeof G<"u",le=v?function(t){return G.allocUnsafeSlow(t)}:Uint8Array,We=v?G:Uint8Array,ze=v?4294967296:2144337920;let l,te,E,i=0,V,O=null,lt;const ut=21760,ct=/[\u0080-\uFFFF]/,W=Symbol("record-id");class at extends re{constructor(e){super(e),this.offset=0;let r,s,f,c,h=We.prototype.utf8Write?function(u,d){return l.utf8Write(u,d,l.byteLength-d)}:ue&&ue.encodeInto?function(u,d){return ue.encodeInto(u,l.subarray(d)).written}:!1,w=this;e||(e={});let A=e&&e.sequential,R=e.structures||e.saveStructures,T=e.maxSharedStructures;if(T==null&&(T=R?32:0),T>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(this.moreTypes=!0);let M=e.maxOwnStructures;M==null&&(M=R?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let D=T>32||M+T>64,j=T+64,H=T+M+64;if(H>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let C=[],ae=0,ie=0;this.pack=this.encode=function(u,d){if(l||(l=new le(8192),E=l.dataView||(l.dataView=new DataView(l.buffer,0,8192)),i=0),V=l.length-10,V-i<2048?(l=new le(l.length),E=l.dataView||(l.dataView=new DataView(l.buffer,0,l.length)),V=l.length-10,i=0):i=i+7&2147483640,r=i,d&dt&&(i+=d&255),c=w.structuredClone?new Map:null,w.bundleStrings&&typeof u!="string"?(O=[],O.size=1/0):O=null,f=w.structures,f){f.uninitialized&&(f=w._mergeStructures(w.getStructures()));let a=f.sharedLength||0;if(a>T)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+f.sharedLength);if(!f.transitions){f.transitions=Object.create(null);for(let o=0;o<a;o++){let p=f[o];if(!p)continue;let S,y=f.transitions;for(let U=0,k=p.length;U<k;U++){let J=p[U];S=y[J],S||(S=y[J]=Object.create(null)),y=S}y[W]=o+64}this.lastNamedStructuresLength=a}A||(f.nextId=a+64)}s&&(s=!1);let x;try{w.randomAccessStructure&&u&&typeof u=="object"?u.constructor===Object?Te(u):u.constructor!==Map&&!Array.isArray(u)&&!be.some(o=>u instanceof o)?Te(u.toJSON?u.toJSON():u):I(u):I(u);let a=O;if(O&&Je(r,I,0),c&&c.idsToInsert){let o=c.idsToInsert.sort((U,k)=>U.offset>k.offset?1:-1),p=o.length,S=-1;for(;a&&p>0;){let U=o[--p].offset+r;U<a.stringsPosition+r&&S===-1&&(S=0),U>a.position+r?S>=0&&(S+=6):(S>=0&&(E.setUint32(a.position+r,E.getUint32(a.position+r)+S),S=-1),a=a.previous,p++)}S>=0&&a&&E.setUint32(a.position+r,E.getUint32(a.position+r)+S),i+=o.length*6,i>V&&q(i),w.offset=i;let y=ot(l.subarray(r,i),o);return c=null,y}return w.offset=i,d&ht?(l.start=r,l.end=i,l):l.subarray(r,i)}catch(a){throw x=a,a}finally{if(f&&(Ee(),s&&w.saveStructures)){let a=f.sharedLength||0,o=l.subarray(r,i),p=xt(f,w);if(!x)return w.saveStructures(p,p.isCompatible)===!1?w.pack(u,d):(w.lastNamedStructuresLength=a,l.length>1073741824&&(l=null),o)}l.length>1073741824&&(l=null),d&gt&&(i=r)}};const Ee=()=>{ie<10&&ie++;let u=f.sharedLength||0;if(f.length>u&&!A&&(f.length=u),ae>1e4)f.transitions=null,ie=0,ae=0,C.length>0&&(C=[]);else if(C.length>0&&!A){for(let d=0,x=C.length;d<x;d++)C[d][W]=0;C=[]}},oe=u=>{var d=u.length;d<16?l[i++]=144|d:d<65536?(l[i++]=220,l[i++]=d>>8,l[i++]=d&255):(l[i++]=221,E.setUint32(i,d),i+=4);for(let x=0;x<d;x++)I(u[x])},I=u=>{i>V&&(l=q(i));var d=typeof u,x;if(d==="string"){let a=u.length;if(O&&a>=4&&a<4096){if((O.size+=a)>ut){let y,U=(O[0]?O[0].length*3+O[1].length:0)+10;i+U>V&&(l=q(i+U));let k;O.position?(k=O,l[i]=200,i+=3,l[i++]=98,y=i-r,i+=4,Je(r,I,0),E.setUint16(y+r-3,i-r-y)):(l[i++]=214,l[i++]=98,y=i-r,i+=4),O=["",""],O.previous=k,O.size=0,O.position=y}let S=ct.test(u);O[S?0:1]+=u,l[i++]=193,I(S?-a:a);return}let o;a<32?o=1:a<256?o=2:a<65536?o=3:o=5;let p=a*3;if(i+p>V&&(l=q(i+p)),a<64||!h){let S,y,U,k=i+o;for(S=0;S<a;S++)y=u.charCodeAt(S),y<128?l[k++]=y:y<2048?(l[k++]=y>>6|192,l[k++]=y&63|128):(y&64512)===55296&&((U=u.charCodeAt(S+1))&64512)===56320?(y=65536+((y&1023)<<10)+(U&1023),S++,l[k++]=y>>18|240,l[k++]=y>>12&63|128,l[k++]=y>>6&63|128,l[k++]=y&63|128):(l[k++]=y>>12|224,l[k++]=y>>6&63|128,l[k++]=y&63|128);x=k-i-o}else x=h(u,i+o);x<32?l[i++]=160|x:x<256?(o<2&&l.copyWithin(i+2,i+1,i+1+x),l[i++]=217,l[i++]=x):x<65536?(o<3&&l.copyWithin(i+3,i+2,i+2+x),l[i++]=218,l[i++]=x>>8,l[i++]=x&255):(o<5&&l.copyWithin(i+5,i+3,i+3+x),l[i++]=219,E.setUint32(i,x),i+=4),i+=x}else if(d==="number")if(u>>>0===u)u<32||u<128&&this.useRecords===!1||u<64&&!this.randomAccessStructure?l[i++]=u:u<256?(l[i++]=204,l[i++]=u):u<65536?(l[i++]=205,l[i++]=u>>8,l[i++]=u&255):(l[i++]=206,E.setUint32(i,u),i+=4);else if(u>>0===u)u>=-32?l[i++]=256+u:u>=-128?(l[i++]=208,l[i++]=u+256):u>=-32768?(l[i++]=209,E.setInt16(i,u),i+=2):(l[i++]=210,E.setInt32(i,u),i+=4);else{let a;if((a=this.useFloat32)>0&&u<4294967296&&u>=-2147483648){l[i++]=202,E.setFloat32(i,u);let o;if(a<4||(o=u*ke[(l[i]&127)<<1|l[i+1]>>7])>>0===o){i+=4;return}else i--}l[i++]=203,E.setFloat64(i,u),i+=8}else if(d==="object"||d==="function")if(!u)l[i++]=192;else{if(c){let o=c.get(u);if(o){if(!o.id){let p=c.idsToInsert||(c.idsToInsert=[]);o.id=p.push(o)}l[i++]=214,l[i++]=112,E.setUint32(i,o.id),i+=4;return}else c.set(u,{offset:i-r})}let a=u.constructor;if(a===Object)se(u);else if(a===Array)oe(u);else if(a===Map)if(this.mapAsEmptyObject)l[i++]=128;else{x=u.size,x<16?l[i++]=128|x:x<65536?(l[i++]=222,l[i++]=x>>8,l[i++]=x&255):(l[i++]=223,E.setUint32(i,x),i+=4);for(let[o,p]of u)I(o),I(p)}else{for(let o=0,p=Se.length;o<p;o++){let S=be[o];if(u instanceof S){let y=Se[o];if(y.write){y.type&&(l[i++]=212,l[i++]=y.type,l[i++]=0);let ee=y.write.call(this,u);ee===u?Array.isArray(u)?oe(u):se(u):I(ee);return}let U=l,k=E,J=i;l=null;let Z;try{Z=y.pack.call(this,u,ee=>(l=U,U=null,i+=ee,i>V&&q(i),{target:l,targetView:E,position:i-ee}),I)}finally{U&&(l=U,E=k,i=J,V=l.length-10)}Z&&(Z.length+i>V&&q(Z.length+i),i=Fe(Z,l,i,y.type));return}}if(Array.isArray(u))oe(u);else{if(u.toJSON){const o=u.toJSON();if(o!==u)return I(o)}if(d==="function")return I(this.writeFunction&&this.writeFunction(u));se(u)}}}else if(d==="boolean")l[i++]=u?195:194;else if(d==="bigint"){if(u<9223372036854776e3&&u>=-9223372036854776e3)l[i++]=211,E.setBigInt64(i,u);else if(u<18446744073709552e3&&u>0)l[i++]=207,E.setBigUint64(i,u);else if(this.largeBigIntToFloat)l[i++]=203,E.setFloat64(i,Number(u));else{if(this.largeBigIntToString)return I(u.toString());if(this.useBigIntExtension||this.moreTypes){let a=u<0?BigInt(-1):BigInt(0),o;if(u>>BigInt(65536)===a){let p=BigInt(18446744073709552e3)-BigInt(1),S=[];for(;S.push(u&p),u>>BigInt(63)!==a;)u>>=BigInt(64);o=new Uint8Array(new BigUint64Array(S).buffer),o.reverse()}else{let p=u<0,S=(p?~u:u).toString(16);if(S.length%2?S="0"+S:parseInt(S.charAt(0),16)>=8&&(S="00"+S),v)o=G.from(S,"hex");else{o=new Uint8Array(S.length/2);for(let y=0;y<o.length;y++)o[y]=parseInt(S.slice(y*2,y*2+2),16)}if(p)for(let y=0;y<o.length;y++)o[y]=~o[y]}o.length+i>V&&q(o.length+i),i=Fe(o,l,i,66);return}else throw new RangeError(u+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string")}i+=8}else if(d==="undefined")this.encodeUndefinedAsNil?l[i++]=192:(l[i++]=212,l[i++]=0,l[i++]=0);else throw new Error("Unknown type: "+d)},Be=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?u=>{let d;if(this.skipValues){d=[];for(let o in u)(typeof u.hasOwnProperty!="function"||u.hasOwnProperty(o))&&!this.skipValues.includes(u[o])&&d.push(o)}else d=Object.keys(u);let x=d.length;x<16?l[i++]=128|x:x<65536?(l[i++]=222,l[i++]=x>>8,l[i++]=x&255):(l[i++]=223,E.setUint32(i,x),i+=4);let a;if(this.coercibleKeyAsNumber)for(let o=0;o<x;o++){a=d[o];let p=Number(a);I(isNaN(p)?a:p),I(u[a])}else for(let o=0;o<x;o++)I(a=d[o]),I(u[a])}:u=>{l[i++]=222;let d=i-r;i+=2;let x=0;for(let a in u)(typeof u.hasOwnProperty!="function"||u.hasOwnProperty(a))&&(I(a),I(u[a]),x++);if(x>65535)throw new Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');l[d+++r]=x>>8,l[d+r]=x&255},Ae=this.useRecords===!1?Be:e.progressiveRecords&&!D?u=>{let d,x=f.transitions||(f.transitions=Object.create(null)),a=i++-r,o;for(let p in u)if(typeof u.hasOwnProperty!="function"||u.hasOwnProperty(p)){if(d=x[p],d)x=d;else{let S=Object.keys(u),y=x;x=f.transitions;let U=0;for(let k=0,J=S.length;k<J;k++){let Z=S[k];d=x[Z],d||(d=x[Z]=Object.create(null),U++),x=d}a+r+1==i?(i--,xe(x,S,U)):Oe(x,S,a,U),o=!0,x=y[p]}I(u[p])}if(!o){let p=x[W];p?l[a+r]=p:Oe(x,Object.keys(u),a,0)}}:u=>{let d,x=f.transitions||(f.transitions=Object.create(null)),a=0;for(let p in u)(typeof u.hasOwnProperty!="function"||u.hasOwnProperty(p))&&(d=x[p],d||(d=x[p]=Object.create(null),a++),x=d);let o=x[W];o?o>=96&&D?(l[i++]=((o-=96)&31)+96,l[i++]=o>>5):l[i++]=o:xe(x,x.__keys__||Object.keys(u),a);for(let p in u)(typeof u.hasOwnProperty!="function"||u.hasOwnProperty(p))&&I(u[p])},Ie=typeof this.useRecords=="function"&&this.useRecords,se=Ie?u=>{Ie(u)?Ae(u):Be(u)}:Ae,q=u=>{let d;if(u>16777216){if(u-r>ze)throw new Error("Packed buffer would be larger than maximum buffer size");d=Math.min(ze,Math.round(Math.max((u-r)*(u>67108864?1.25:2),4194304)/4096)*4096)}else d=(Math.max(u-r<<2,l.length-1)>>12)+1<<12;let x=new le(d);return E=x.dataView||(x.dataView=new DataView(x.buffer,0,d)),u=Math.min(u,l.length),l.copy?l.copy(x,0,r,u):x.set(l.slice(r,u)),i-=r,r=0,V=x.length-10,l=x},xe=(u,d,x)=>{let a=f.nextId;a||(a=64),a<j&&this.shouldShareStructure&&!this.shouldShareStructure(d)?(a=f.nextOwnId,a<H||(a=j),f.nextOwnId=a+1):(a>=H&&(a=j),f.nextId=a+1);let o=d.highByte=a>=96&&D?a-96>>5:-1;u[W]=a,u.__keys__=d,f[a-64]=d,a<j?(d.isShared=!0,f.sharedLength=a-63,s=!0,o>=0?(l[i++]=(a&31)+96,l[i++]=o):l[i++]=a):(o>=0?(l[i++]=213,l[i++]=114,l[i++]=(a&31)+96,l[i++]=o):(l[i++]=212,l[i++]=114,l[i++]=a),x&&(ae+=ie*x),C.length>=M&&(C.shift()[W]=0),C.push(u),I(d))},Oe=(u,d,x,a)=>{let o=l,p=i,S=V,y=r;l=te,i=0,r=0,l||(te=l=new le(8192)),V=l.length-10,xe(u,d,a),te=l;let U=i;if(l=o,i=p,V=S,r=y,U>1){let k=i+U-1;k>V&&q(k);let J=x+r;l.copyWithin(J+U,J+1,i),l.set(te.slice(0,U),J),i=k}else l[x+r]=te[0]},Te=u=>{let d=lt(u,l,r,i,f,q,(x,a,o)=>{if(o)return s=!0;i=a;let p=l;return I(x),Ee(),p!==l?{position:i,targetView:E,target:l}:i},this);if(d===0)return se(u);i=d}}useBuffer(e){l=e,l.dataView||(l.dataView=new DataView(l.buffer,l.byteOffset,l.byteLength)),E=l.dataView,i=0}set position(e){i=e}get position(){return i}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}be=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,$e];Se=[{pack(t,e,r){let s=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&s>=0&&s<4294967296){let{target:f,targetView:c,position:h}=e(6);f[h++]=214,f[h++]=255,c.setUint32(h,s)}else if(s>0&&s<4294967296){let{target:f,targetView:c,position:h}=e(10);f[h++]=215,f[h++]=255,c.setUint32(h,t.getMilliseconds()*4e6+(s/1e3/4294967296>>0)),c.setUint32(h+4,s)}else if(isNaN(s)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:f,targetView:c,position:h}=e(3);f[h++]=212,f[h++]=255,f[h++]=255}else{let{target:f,targetView:c,position:h}=e(15);f[h++]=199,f[h++]=12,f[h++]=255,c.setUint32(h,t.getMilliseconds()*1e6),c.setBigInt64(h+4,BigInt(Math.floor(s)))}}},{pack(t,e,r){if(this.setAsEmptyObject)return e(0),r({});let s=Array.from(t),{target:f,position:c}=e(this.moreTypes?3:0);this.moreTypes&&(f[c++]=212,f[c++]=115,f[c++]=0),r(s)}},{pack(t,e,r){let{target:s,position:f}=e(this.moreTypes?3:0);this.moreTypes&&(s[f++]=212,s[f++]=101,s[f++]=0),r([t.name,t.message,t.cause])}},{pack(t,e,r){let{target:s,position:f}=e(this.moreTypes?3:0);this.moreTypes&&(s[f++]=212,s[f++]=120,s[f++]=0),r([t.source,t.flags])}},{pack(t,e){this.moreTypes?ge(t,16,e):de(v?G.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==We&&this.moreTypes?ge(t,He.indexOf(r.name),e):de(t,e)}},{pack(t,e){this.moreTypes?ge(t,17,e):de(v?G.from(t):new Uint8Array(t),e)}},{pack(t,e){let{target:r,position:s}=e(1);r[s]=193}}];function ge(t,e,r,s){let f=t.byteLength;if(f+1<256){var{target:c,position:h}=r(4+f);c[h++]=199,c[h++]=f+1}else if(f+1<65536){var{target:c,position:h}=r(5+f);c[h++]=200,c[h++]=f+1>>8,c[h++]=f+1&255}else{var{target:c,position:h,targetView:w}=r(7+f);c[h++]=201,w.setUint32(h,f+1),h+=4}c[h++]=116,c[h++]=e,t.buffer||(t=new Uint8Array(t)),c.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),h)}function de(t,e){let r=t.byteLength;var s,f;if(r<256){var{target:s,position:f}=e(r+2);s[f++]=196,s[f++]=r}else if(r<65536){var{target:s,position:f}=e(r+3);s[f++]=197,s[f++]=r>>8,s[f++]=r&255}else{var{target:s,position:f,targetView:c}=e(r+5);s[f++]=198,c.setUint32(f,r),f+=4}s.set(t,f)}function Fe(t,e,r,s){let f=t.length;switch(f){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:f<256?(e[r++]=199,e[r++]=f):f<65536?(e[r++]=200,e[r++]=f>>8,e[r++]=f&255):(e[r++]=201,e[r++]=f>>24,e[r++]=f>>16&255,e[r++]=f>>8&255,e[r++]=f&255)}return e[r++]=s,e.set(t,r),r+=f,r}function ot(t,e){let r,s=e.length*6,f=t.length-s;for(;r=e.pop();){let c=r.offset,h=r.id;t.copyWithin(c+s,c,f),s-=6;let w=c+s;t[w++]=214,t[w++]=105,t[w++]=h>>24,t[w++]=h>>16&255,t[w++]=h>>8&255,t[w++]=h&255,f=c}return t}function Je(t,e,r){if(O.length>0){E.setUint32(O.position+t,i+r-O.position-t),O.stringsPosition=i-t;let s=O;O=null,e(s[0]),e(s[1])}}function xt(t,e){return t.isCompatible=r=>{let s=!r||(e.lastNamedStructuresLength||0)===r.length;return s||e._mergeStructures(r),s},t}let ve=new at({useRecords:!1});const pt=ve.pack;ve.pack;const ht=512,gt=1024,dt=2048;export{pt as p,wt as u};
