import{d as Q,_ as X,t as d,bY as ee,F as te,bZ as ne,r as o,i as l,D as C,o as F,c as S,k as w,b_ as oe,l as e,w as R,m as ae,x as le,a as p,G as x,ad as ue,a7 as se,s as re,bc as E,a6 as ie,b$ as ce,bq as de}from"./index-0c1fde36.js";import{_ as pe}from"./TextareaCopyable-59231e95.js";import{g as me}from"./base64-ae7cf34b.js";import{u as fe}from"./downloadBase64-508288e2.js";const _e={"overflow-auto":""},ve={"mb-5px":""},be={key:0,"mt-5":"",flex:"","justify-center":""},ge=Q({__name:"FormatTransformer",props:{transformer:{type:Function,default:X.identity},inputValidationRules:{default:()=>[]},inputLabel:{default:d("formatTransformer.input")},inputPlaceholder:{default:d("formatTransformer.input-placeholder")},inputDefault:{default:""},outputLabel:{default:d("formatTransformer.output")},outputLanguage:{default:""},downloadFileName:{default:""},downloadButtonText:{default:d("formatTransformer.download")},rows:{default:15},inputLineNumbers:{type:Boolean,default:!1},inputMaxRows:{default:void 0},inputAutosize:{type:Boolean,default:!0}},setup(V){const j=V;ee(t=>({"6dd59f5c":e(T).default.color,"71c2a016":e(T).text.mutedColor}));const{transformer:D,inputValidationRules:H,inputLabel:$,outputLabel:A,outputLanguage:P,inputPlaceholder:M,inputDefault:O,downloadFileName:y,downloadButtonText:W,rows:G,inputLineNumbers:m,inputMaxRows:I,inputAutosize:Y}=te(j),T=ne(),s=o(),N=l(()=>{const t=s.value?.textareaRef;if(!t)return null;if(typeof t=="object"&&"addEventListener"in t&&"scrollTop"in t)return t;if(typeof t=="object"&&"value"in t){const n=t.value;if(n&&typeof n=="object"&&"addEventListener"in n&&"scrollTop"in n)return n}return null}),a=o(O.value),f=l(()=>D.value(a.value)),B=l(()=>a.value===""?1:a.value.split(/\r\n|\r|\n/).length),q=l(()=>m.value?Array.from({length:B.value},(t,n)=>n+1).join(`
`):""),U=l(()=>Math.max(1,`${B.value}`.length)),u=o(0),r=o(0),_=o(""),v=o(""),b=o(""),g=o("");C(()=>({textarea:N.value,enabled:m.value}),({textarea:t,enabled:n},L,h)=>{if(!n||!t){u.value=0,r.value=0,_.value="",v.value="",b.value="",g.value="";return}const i=()=>{r.value=t.clientHeight,u.value=t.scrollTop;const c=window.getComputedStyle(t);_.value=c.paddingTop,v.value=c.paddingBottom,b.value=c.lineHeight,g.value=c.fontSize},z=()=>{u.value=t.scrollTop};i();const k=new ResizeObserver(i);k.observe(t),t.addEventListener("scroll",z),h(()=>{t.removeEventListener("scroll",z),k.disconnect()})},{immediate:!0}),C(a,()=>ce(()=>{const t=N.value;t&&(u.value=t.scrollTop)}),{flush:"post"});function Z(){s.value?.focus?.()}const J=l(()=>me.encode(f.value)),{download:K}=fe({source:J,filename:y});return(t,n)=>{const L=pe,h=re;return F(),S(se,null,[w(le,{ref_key:"inputElement",ref:s,value:e(a),"onUpdate:value":n[0]||(n[0]=i=>ae(a)?a.value=i:null),placeholder:e(M),label:e($),rows:e(G),"max-rows":e(I),autosize:e(Y),"raw-text":"",multiline:"","test-id":"input","validation-rules":e(H),monospace:"","mb-1":""},oe({_:2},[e(m)?{name:"prefix",fn:R(()=>[p("div",{class:"line-numbers font-mono",style:E({minWidth:`${e(U)}ch`,height:e(r)?`${e(r)}px`:"",paddingTop:e(_),paddingBottom:e(v),lineHeight:e(b),fontSize:e(g)}),"aria-hidden":"true",onClick:Z},[p("pre",{class:"line-numbers__content",style:E({transform:`translateY(-${e(u)}px)`})},x(e(q)),5)],4)]),key:"0"}:void 0]),1032,["value","placeholder","label","rows","max-rows","autosize","validation-rules"]),p("div",_e,[p("div",ve,x(e(A)),1),w(L,{value:e(f),language:e(P),"follow-height-of":e(s)?.inputWrapperRef},null,8,["value","language","follow-height-of"]),e(y)!==""&&e(f)!==""?(F(),S("div",be,[w(h,{secondary:"",onClick:e(K)},{default:R(()=>[ie(x(e(W)),1)]),_:1},8,["onClick"])])):ue("",!0)])],64)}}});const Te=de(ge,[["__scopeId","data-v-dcbfa9c4"]]);export{Te as _};
