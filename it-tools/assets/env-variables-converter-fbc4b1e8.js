import{_ as M,d as K,a0 as h,r as b,ac as N,i as C,o as S,j as O,w as v,k as m,l as s,m as A,a6 as Z,G as k,ad as z,x as H,ag as J,af as j}from"./index-0c1fde36.js";import{_ as G}from"./TextareaCopyable-59231e95.js";import{Y as F}from"./index-84e3bf78.js";import{_ as R}from"./Select-9917c364.js";import{_ as L}from"./FormItem-1b9a5952.js";import{_ as Q}from"./Form-a433c14f.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./public-api-a830925a.js";import"./Tag-e75b8dae.js";import"./FocusDetector-089b8822.js";import"./VirtualList-8140ffff.js";import"./Empty-ca426d71.js";import"./index-cbfaa337.js";import"./context-00991937.js";function P(e,t){let n=[];return Object.keys(e).forEach(a=>{let o,u=a;q(a)&&(u=`[${u}]`),typeof e[a]=="object"?(Array.isArray(e[a])||(u=u.concat(".")),o=t?t.concat(u):u,n=n.concat(P(e[a],o))):(o=t?t.concat(u):u,n.push(o.concat("=").concat(e[a])))}),n}function q(e){return typeof e!="string"?!1:!Number.isNaN(Number(e))&&!Number.isNaN(Number.parseFloat(e))}var l=(e=>(e.YAML="Spring Boot YAML",e.PROPERTIES="Spring Boot Properties",e.SIMPLE="Simple Environment Variables",e.TERMINAL="Terminal Environment Variables",e.KUBERNETES="Kubernetes Environment Variables",e))(l||{});const V={YAML:"Spring Boot YAML",PROPERTIES:"Spring Boot Properties",SIMPLE:"Simple Environment Variables",TERMINAL:"Terminal Environment Variables",KUBERNETES:"Kubernetes Environment Variables"};var I=(e=>(e[e.ENV=0]="ENV",e[e.FLAT=1]="FLAT",e))(I||{});const _=new Map([["Spring Boot YAML",{modelType:1,outputType:"Simple Environment Variables",inputValue:`foo-bar:
  baz:
    - value1
    - value2
  enabled: true
abcDef: value3`}],["Spring Boot Properties",{modelType:1,outputType:"Simple Environment Variables",inputValue:`foo-bar.baz[0]=value1
foo-bar.baz[1]=value2
foo-bar.enabled=true
abcDef=value3`}],["Simple Environment Variables",{modelType:0,outputType:"Kubernetes Environment Variables",inputValue:`FOOBAR_BAZ_0_=value1
FOOBAR_BAZ_1_=value2
FOOBAR_ENABLED=true
ABCDEF=value3`}],["Terminal Environment Variables",{modelType:0,outputType:"Simple Environment Variables",inputValue:"FOOBAR_BAZ_0_=value1 FOOBAR_BAZ_1_=value2 FOOBAR_ENABLED=true ABCDEF=value3"}],["Kubernetes Environment Variables",{modelType:0,outputType:"Simple Environment Variables",inputValue:`- name: FOOBAR_BAZ_0_
  value: value1
- name: FOOBAR_BAZ_1_
  value: value2
- name: FOOBAR_ENABLED
  value: true
- name: ABCDEF
  value: value3`}]]);function f(e,...t){const[n,r]=t;M.set(e,n,r)}function W(e,t){let n;if(e===l.YAML){if(n=F.parse(t),typeof n!="object")throw new TypeError("I could be wrong, but YAML doesn't seem valid.")}else if(e===l.PROPERTIES)n=t.split(`
`).filter(Boolean).reduce((r,a)=>{if(a.includes("="))f(r,...a.split(/=(.+)/));else if(a.includes(": "))f(r,...a.split(/: (.+)/));else throw new Error("Doesn't look like a valid .properties file");return r},{});else if(e===l.SIMPLE)n=t.split(`
`).filter(Boolean).reduce((r,a)=>(f(r,...a.split("=")),r),{});else if(e===l.TERMINAL)n=t.split(" ").filter(Boolean).reduce((r,a)=>(f(r,...a.split("=")),r),{});else if(e===l.KUBERNETES)n=t.replace(/>-/gm,"").replace(/(\r\n|\n|\r)/gm,"").trim().split("- name: ").filter(Boolean).reduce((r,a)=>{const o=a.split("  value: ");return o[1]&&(o[1]=o[1].replace(/^['](.+(?=[']$))[']$/,"$1").replace(/"([^"]+(?="))"/g,"$1")),f(r,...o),r},{});else throw new Error("Unsupported input type");return n=JSON.parse(JSON.stringify(n).replace(/"\s+|\s+"/g,'"')),n}function X(e,t){if(e===l.SIMPLE)return ee(t);if(e===l.TERMINAL)return te(t);if(e===l.KUBERNETES)return ne(t);if(e===l.PROPERTIES)return ae(t);if(e===l.YAML)return re(t);throw new Error(`outputType ${e}not supported`)}function d(e){return e.split("=")[0].toUpperCase().replaceAll("-","").replaceAll("].","_").replaceAll(".","_").replaceAll("[","_").replaceAll("]","_")}function B(e){return e.split("=")[1].replace(/^["'](.+(?=["']$))["']$/,"$1")}function ee(e){let t="";return e.forEach(n=>{t=t.concat(d(n)).concat("=").concat(B(n)).concat(`
`)}),t}function te(e){let t="";return e.forEach(n=>{t=t.concat(d(n)).concat("=").concat(B(n)).concat(" ")}),t}function ne(e){let t="";return e.forEach(n=>{t=t.concat("- name: ").concat(d(n)).concat(`
  value: `).concat(`'${B(n)}'`).concat(`
`)}),t}function ae(e){let t="";return e.forEach(n=>{t=t.concat(n.split("=")[0]).concat("=").concat(n.split("=")[1]).concat(`
`)}),t}function re(e){const t=e.filter(Boolean).reduce((n,r)=>{const a=r.split("=");return a[1]&&(a[1]==="true"?a[1]=!0:a[1]==="false"&&(a[1]=!1)),M.set(n,...a),n},{});return F.stringify(t)}const Oe=K({__name:"env-variables-converter",setup(e){const{t}=h(),n=l.YAML,r=b(_.get(n).inputValue),a=N({name:"in",storageName:"env-var-conv:i",defaultValue:n}),o=N({name:"out",storageName:"env-var-conv:o",defaultValue:_.get(n).outputType}),u=b(""),y=Object.keys(l).map(p=>({label:V[p],value:V[p]})),T=b([]);function g(){const p=[l.SIMPLE,l.TERMINAL,l.KUBERNETES].filter(i=>i!==a.value);_.get(a.value)?.modelType===I.FLAT&&p.push(a.value===l.YAML?l.PROPERTIES:l.YAML),T.value=p.map(i=>({label:i,value:i}))}const E=C(()=>{u.value="";try{return X(o.value,P(W(a.value,r.value)))}catch(p){return u.value=p.toString(),""}});function w(p){o.value=_.get(p).outputType,g()}return g(),(p,i)=>{const Y=H,D=J,$=G,U=j,x=Q;return S(),O(x,null,{default:v(()=>[m(s(L),{label:s(t)("tools.env-variables-converter.texts.label-input-type")},{default:v(()=>[m(s(R),{value:s(a),"onUpdate:value":[i[0]||(i[0]=c=>A(a)?a.value=c:null),w],options:s(y)},null,8,["value","options"])]),_:1},8,["label"]),m(Y,{value:r.value,"onUpdate:value":i[1]||(i[1]=c=>r.value=c),label:s(t)("tools.env-variables-converter.texts.label-input"),rows:"10",multiline:""},null,8,["value","label"]),m(s(L),{label:s(t)("tools.env-variables-converter.texts.label-output-type")},{default:v(()=>[m(s(R),{value:s(o),"onUpdate:value":i[2]||(i[2]=c=>A(o)?o.value=c:null),options:T.value},null,8,["value","options"])]),_:1},8,["label"]),u.value?(S(),O(D,{key:0,type:"error"},{default:v(()=>[Z(k(u.value),1)]),_:1})):z("",!0),m(U,{title:s(t)("tools.env-variables-converter.texts.title-output")},{default:v(()=>[m($,{value:s(E),"onUpdate:value":i[3]||(i[3]=c=>A(E)?E.value=c:null)},null,8,["value"])]),_:1},8,["title"])]),_:1})}}});export{Oe as default};
