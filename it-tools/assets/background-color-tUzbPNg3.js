import{c as u,i as m}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{a as l,b as p,P as g,h as y,f as w,t as D,v as b,d as B}from"./main-CdZmBCMR.js";import"./mobileMenu-BoMunYmR.js";const o={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f();function f(){u({icons:m});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),n=document.getElementById("back-to-tools"),i=document.getElementById("process-btn");t&&(t.addEventListener("change",L),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",a=>{a.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",a=>{a.preventDefault(),e.classList.remove("border-indigo-500"),a.dataTransfer?.files.length&&h(a.dataTransfer.files)})),n&&n.addEventListener("click",()=>{window.location.href="/itools/"}),i&&i.addEventListener("click",x)}function L(t){const e=t.target;e.files?.length&&h(e.files)}async function h(t){const e=t[0];if(!e||e.type!=="application/pdf"){l("Invalid File","Please upload a valid PDF file.");return}p("Loading PDF...");try{const n=await e.arrayBuffer();o.pdfDoc=await g.load(n),o.file=e,P(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(n){console.error(n),l("Error","Failed to load PDF file.")}finally{y()}}function P(){const t=document.getElementById("file-display-area");if(!t||!o.file||!o.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const n=document.createElement("div");n.className="flex flex-col flex-1 min-w-0";const i=document.createElement("div");i.className="truncate font-medium text-gray-200 text-sm mb-1",i.textContent=o.file.name;const a=document.createElement("div");a.className="text-xs text-gray-400",a.textContent=`${w(o.file.size)} â€¢ ${o.pdfDoc.getPageCount()} pages`,n.append(i,a);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=v,e.append(n,d),t.appendChild(e),u({icons:m})}function v(){o.file=null,o.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function x(){if(!o.pdfDoc){l("Error","Please upload a PDF file first.");return}const t=document.getElementById("background-color").value,e=D(t);p("Changing background color...");try{const n=await g.create();for(let a=0;a<o.pdfDoc.getPageCount();a++){const[d]=await n.copyPages(o.pdfDoc,[a]),{width:c,height:r}=d.getSize(),s=n.addPage([c,r]);s.drawRectangle({x:0,y:0,width:c,height:r,color:b(e.r,e.g,e.b)});const E=await n.embedPage(d);s.drawPage(E,{x:0,y:0,width:c,height:r})}const i=await n.save();B(new Blob([new Uint8Array(i)],{type:"application/pdf"}),"background-changed.pdf"),l("Success","Background color changed successfully!","success",()=>{v()})}catch(n){console.error(n),l("Error","Could not change the background color.")}finally{y()}}
