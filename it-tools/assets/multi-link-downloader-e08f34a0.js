import{t as p,d as w,r as m,bq as _,o as b,j as k,w as d,af as h,a as v,k as u,a6 as f,s as y,x as L}from"./index-0c1fde36.js";import{J as C}from"./jszip.min-273c410a.js";import"./index-a6f01dde.js";import"./_commonjs-dynamic-modules-302442b1.js";async function U(n){const i=n.split(`
`).filter(l=>l.trim()!=="");function c(l,t){let s=t,o="";const e=t.lastIndexOf(".");e!==-1&&(s=t.substring(0,e),o=t.substring(e));let a=1,r=t;for(;l.has(r);)r=`${s} (${a})${o}`,a++;return l.add(r),r}if(i.length===1){const l=i[0];try{const t=await fetch(l);if(!t.ok)throw new Error(p("tools.multi-link-downloader.service.text.failed-to-fetch-linkurl",[l]));const s=await t.blob(),o=l.split("/").pop()||"downloaded_file",e=document.createElement("a"),a=window.URL.createObjectURL(s);e.href=a,e.download=o,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(a)}catch(t){console.error("Error downloading the file:",t)}}else if(i.length>1){const l=new C,t=new Set;await Promise.all(i.map(async s=>{try{const o=await fetch(s);if(!o.ok)throw new Error(p("tools.multi-link-downloader.service.text.failed-to-fetch-linkurl-0",[s]));const e=await o.blob();let a=s.split("/").pop()||"file";a=c(t,a),l.file(a,e)}catch(o){console.error(`Error downloading file from ${s}:${o}`)}})),l.generateAsync({type:"blob"}).then(s=>{const o=window.URL.createObjectURL(s),e=document.createElement("a");e.href=o,e.download="downloaded_files.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(o)})}}const $=w({setup(){const n=m("");return{links:n,downloadMultiLinks:()=>{n.value&&U(n.value)},clearInput:()=>{n.value=""}}}}),R={class:"mb-4 flex justify-between"};function x(n,i,c,l,t,s){const o=y,e=L,a=h;return b(),k(a,null,{default:d(()=>[v("div",R,[u(o,{class:"mr-2",disabled:!n.links,onClick:n.downloadMultiLinks},{default:d(()=>[f(" Start Download ")]),_:1},8,["disabled","onClick"]),u(o,{class:"ml-2",onClick:n.clearInput},{default:d(()=>[f(" Clear ")]),_:1},8,["onClick"])]),u(e,{value:n.links,"onUpdate:value":i[0]||(i[0]=r=>n.links=r),placeholder:"Add links separated by new lines...",multiline:"",rows:20},null,8,["value"])]),_:1})}const O=_($,[["render",x]]);export{O as default};
