import{b as bt}from"./browser-9d43139f.js";import{Q as Ct,b as At,r as yt,D as xt,g as Q,m as St}from"./index-0c1fde36.js";var Mt={exports:{}};(function(nt,ht){(function(at,Y){nt.exports=Y()})(Ct,()=>(()=>{var at={464:(L,E)=>{var T,tt,et=function(){var V=function(e,t){var a=e,o=J[t],n=null,s=0,l=null,d=[],f={},v=function(u,g){n=function(c){for(var p=new Array(c),w=0;w<c;w+=1){p[w]=new Array(c);for(var b=0;b<c;b+=1)p[w][b]=null}return p}(s=4*a+17),m(0,0),m(s-7,0),m(0,s-7),_(),C(),B(u,g),a>=7&&S(u),l==null&&(l=I(a,o,d)),z(l,g)},m=function(u,g){for(var c=-1;c<=7;c+=1)if(!(u+c<=-1||s<=u+c))for(var p=-1;p<=7;p+=1)g+p<=-1||s<=g+p||(n[u+c][g+p]=0<=c&&c<=6&&(p==0||p==6)||0<=p&&p<=6&&(c==0||c==6)||2<=c&&c<=4&&2<=p&&p<=4)},C=function(){for(var u=8;u<s-8;u+=1)n[u][6]==null&&(n[u][6]=u%2==0);for(var g=8;g<s-8;g+=1)n[6][g]==null&&(n[6][g]=g%2==0)},_=function(){for(var u=W.getPatternPosition(a),g=0;g<u.length;g+=1)for(var c=0;c<u.length;c+=1){var p=u[g],w=u[c];if(n[p][w]==null)for(var b=-2;b<=2;b+=1)for(var M=-2;M<=2;M+=1)n[p+b][w+M]=b==-2||b==2||M==-2||M==2||b==0&&M==0}},S=function(u){for(var g=W.getBCHTypeNumber(a),c=0;c<18;c+=1){var p=!u&&(g>>c&1)==1;n[Math.floor(c/3)][c%3+s-8-3]=p}for(c=0;c<18;c+=1)p=!u&&(g>>c&1)==1,n[c%3+s-8-3][Math.floor(c/3)]=p},B=function(u,g){for(var c=o<<3|g,p=W.getBCHTypeInfo(c),w=0;w<15;w+=1){var b=!u&&(p>>w&1)==1;w<6?n[w][8]=b:w<8?n[w+1][8]=b:n[s-15+w][8]=b}for(w=0;w<15;w+=1)b=!u&&(p>>w&1)==1,w<8?n[8][s-w-1]=b:w<9?n[8][15-w-1+1]=b:n[8][15-w-1]=b;n[s-8][8]=!u},z=function(u,g){for(var c=-1,p=s-1,w=7,b=0,M=W.getMaskFunction(g),x=s-1;x>0;x-=2)for(x==6&&(x-=1);;){for(var D=0;D<2;D+=1)if(n[p][x-D]==null){var O=!1;b<u.length&&(O=(u[b]>>>w&1)==1),M(p,x-D)&&(O=!O),n[p][x-D]=O,(w-=1)==-1&&(b+=1,w=7)}if((p+=c)<0||s<=p){p-=c,c=-c;break}}},I=function(u,g,c){for(var p=dt.getRSBlocks(u,g),w=gt(),b=0;b<c.length;b+=1){var M=c[b];w.put(M.getMode(),4),w.put(M.getLength(),W.getLengthInBits(M.getMode(),u)),M.write(w)}var x=0;for(b=0;b<p.length;b+=1)x+=p[b].dataCount;if(w.getLengthInBits()>8*x)throw"code length overflow. ("+w.getLengthInBits()+">"+8*x+")";for(w.getLengthInBits()+4<=8*x&&w.put(0,4);w.getLengthInBits()%8!=0;)w.putBit(!1);for(;!(w.getLengthInBits()>=8*x||(w.put(236,8),w.getLengthInBits()>=8*x));)w.put(17,8);return function(D,O){for(var A=0,R=0,j=0,F=new Array(O.length),N=new Array(O.length),y=0;y<O.length;y+=1){var lt=O[y].dataCount,wt=O[y].totalCount-lt;R=Math.max(R,lt),j=Math.max(j,wt),F[y]=new Array(lt);for(var P=0;P<F[y].length;P+=1)F[y][P]=255&D.getBuffer()[P+A];A+=lt;var st=W.getErrorCorrectPolynomial(wt),it=K(F[y],st.getLength()-1).mod(st);for(N[y]=new Array(st.getLength()-1),P=0;P<N[y].length;P+=1){var ct=P+it.getLength()-N[y].length;N[y][P]=ct>=0?it.getAt(ct):0}}var mt=0;for(P=0;P<O.length;P+=1)mt+=O[P].totalCount;var vt=new Array(mt),ot=0;for(P=0;P<R;P+=1)for(y=0;y<O.length;y+=1)P<F[y].length&&(vt[ot]=F[y][P],ot+=1);for(P=0;P<j;P+=1)for(y=0;y<O.length;y+=1)P<N[y].length&&(vt[ot]=N[y][P],ot+=1);return vt}(w,p)};f.addData=function(u,g){var c=null;switch(g=g||"Byte"){case"Numeric":c=ft(u);break;case"Alphanumeric":c=pt(u);break;case"Byte":c=_t(u);break;case"Kanji":c=k(u);break;default:throw"mode:"+g}d.push(c),l=null},f.isDark=function(u,g){if(u<0||s<=u||g<0||s<=g)throw u+","+g;return n[u][g]},f.getModuleCount=function(){return s},f.make=function(){if(a<1){for(var u=1;u<40;u++){for(var g=dt.getRSBlocks(u,o),c=gt(),p=0;p<d.length;p++){var w=d[p];c.put(w.getMode(),4),c.put(w.getLength(),W.getLengthInBits(w.getMode(),u)),w.write(c)}var b=0;for(p=0;p<g.length;p++)b+=g[p].dataCount;if(c.getLengthInBits()<=8*b)break}a=u}v(!1,function(){for(var M=0,x=0,D=0;D<8;D+=1){v(!0,D);var O=W.getLostPoint(f);(D==0||M>O)&&(M=O,x=D)}return x}())},f.createTableTag=function(u,g){u=u||2;var c="";c+='<table style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: "+(g=g===void 0?4*u:g)+"px;",c+='">',c+="<tbody>";for(var p=0;p<f.getModuleCount();p+=1){c+="<tr>";for(var w=0;w<f.getModuleCount();w+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+u+"px;",c+=" height: "+u+"px;",c+=" background-color: ",c+=f.isDark(p,w)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return(c+="</tbody>")+"</table>"},f.createSvgTag=function(u,g,c,p){var w={};typeof arguments[0]=="object"&&(u=(w=arguments[0]).cellSize,g=w.margin,c=w.alt,p=w.title),u=u||2,g=g===void 0?4*u:g,(c=typeof c=="string"?{text:c}:c||{}).text=c.text||null,c.id=c.text?c.id||"qrcode-description":null,(p=typeof p=="string"?{text:p}:p||{}).text=p.text||null,p.id=p.text?p.id||"qrcode-title":null;var b,M,x,D,O=f.getModuleCount()*u+2*g,A="";for(D="l"+u+",0 0,"+u+" -"+u+",0 0,-"+u+"z ",A+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',A+=w.scalable?"":' width="'+O+'px" height="'+O+'px"',A+=' viewBox="0 0 '+O+" "+O+'" ',A+=' preserveAspectRatio="xMinYMin meet"',A+=p.text||c.text?' role="img" aria-labelledby="'+q([p.id,c.id].join(" ").trim())+'"':"",A+=">",A+=p.text?'<title id="'+q(p.id)+'">'+q(p.text)+"</title>":"",A+=c.text?'<description id="'+q(c.id)+'">'+q(c.text)+"</description>":"",A+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',A+='<path d="',M=0;M<f.getModuleCount();M+=1)for(x=M*u+g,b=0;b<f.getModuleCount();b+=1)f.isDark(M,b)&&(A+="M"+(b*u+g)+","+x+D);return(A+='" stroke="transparent" fill="black"/>')+"</svg>"},f.createDataURL=function(u,g){u=u||2,g=g===void 0?4*u:g;var c=f.getModuleCount()*u+2*g,p=g,w=c-g;return h(c,c,function(b,M){if(p<=b&&b<w&&p<=M&&M<w){var x=Math.floor((b-p)/u),D=Math.floor((M-p)/u);return f.isDark(D,x)?0:1}return 1})},f.createImgTag=function(u,g,c){u=u||2,g=g===void 0?4*u:g;var p=f.getModuleCount()*u+2*g,w="";return w+="<img",w+=' src="',w+=f.createDataURL(u,g),w+='"',w+=' width="',w+=p,w+='"',w+=' height="',w+=p,w+='"',c&&(w+=' alt="',w+=q(c),w+='"'),w+"/>"};var q=function(u){for(var g="",c=0;c<u.length;c+=1){var p=u.charAt(c);switch(p){case"<":g+="&lt;";break;case">":g+="&gt;";break;case"&":g+="&amp;";break;case'"':g+="&quot;";break;default:g+=p}}return g};return f.createASCII=function(u,g){if((u=u||1)<2)return function(F){F=F===void 0?2:F;var N,y,lt,wt,P,st=1*f.getModuleCount()+2*F,it=F,ct=st-F,mt={"██":"█","█ ":"▀"," █":"▄","  ":" "},vt={"██":"▀","█ ":"▀"," █":" ","  ":" "},ot="";for(N=0;N<st;N+=2){for(lt=Math.floor((N-it)/1),wt=Math.floor((N+1-it)/1),y=0;y<st;y+=1)P="█",it<=y&&y<ct&&it<=N&&N<ct&&f.isDark(lt,Math.floor((y-it)/1))&&(P=" "),it<=y&&y<ct&&it<=N+1&&N+1<ct&&f.isDark(wt,Math.floor((y-it)/1))?P+=" ":P+="█",ot+=F<1&&N+1>=ct?vt[P]:mt[P];ot+=`
`}return st%2&&F>0?ot.substring(0,ot.length-st-1)+Array(st+1).join("▀"):ot.substring(0,ot.length-1)}(g);u-=1,g=g===void 0?2*u:g;var c,p,w,b,M=f.getModuleCount()*u+2*g,x=g,D=M-g,O=Array(u+1).join("██"),A=Array(u+1).join("  "),R="",j="";for(c=0;c<M;c+=1){for(w=Math.floor((c-x)/u),j="",p=0;p<M;p+=1)b=1,x<=p&&p<D&&x<=c&&c<D&&f.isDark(w,Math.floor((p-x)/u))&&(b=0),j+=b?O:A;for(w=0;w<u;w+=1)R+=j+`
`}return R.substring(0,R.length-1)},f.renderTo2dContext=function(u,g){g=g||2;for(var c=f.getModuleCount(),p=0;p<c;p++)for(var w=0;w<c;w++)u.fillStyle=f.isDark(p,w)?"black":"white",u.fillRect(p*g,w*g,g,g)},f};V.stringToBytes=(V.stringToBytesFuncs={default:function(e){for(var t=[],a=0;a<e.length;a+=1){var o=e.charCodeAt(a);t.push(255&o)}return t}}).default,V.createStringToBytes=function(e,t){var a=function(){for(var n=i(e),s=function(){var C=n.read();if(C==-1)throw"eof";return C},l=0,d={};;){var f=n.read();if(f==-1)break;var v=s(),m=s()<<8|s();d[String.fromCharCode(f<<8|v)]=m,l+=1}if(l!=t)throw l+" != "+t;return d}(),o="?".charCodeAt(0);return function(n){for(var s=[],l=0;l<n.length;l+=1){var d=n.charCodeAt(l);if(d<128)s.push(d);else{var f=a[n.charAt(l)];typeof f=="number"?(255&f)==f?s.push(f):(s.push(f>>>8),s.push(255&f)):s.push(o)}}return s}};var rt,U,H,$,Z,J={L:1,M:0,Q:3,H:2},W=(rt=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],U=1335,H=7973,Z=function(e){for(var t=0;e!=0;)t+=1,e>>>=1;return t},($={}).getBCHTypeInfo=function(e){for(var t=e<<10;Z(t)-Z(U)>=0;)t^=U<<Z(t)-Z(U);return 21522^(e<<10|t)},$.getBCHTypeNumber=function(e){for(var t=e<<12;Z(t)-Z(H)>=0;)t^=H<<Z(t)-Z(H);return e<<12|t},$.getPatternPosition=function(e){return rt[e-1]},$.getMaskFunction=function(e){switch(e){case 0:return function(t,a){return(t+a)%2==0};case 1:return function(t,a){return t%2==0};case 2:return function(t,a){return a%3==0};case 3:return function(t,a){return(t+a)%3==0};case 4:return function(t,a){return(Math.floor(t/2)+Math.floor(a/3))%2==0};case 5:return function(t,a){return t*a%2+t*a%3==0};case 6:return function(t,a){return(t*a%2+t*a%3)%2==0};case 7:return function(t,a){return(t*a%3+(t+a)%2)%2==0};default:throw"bad maskPattern:"+e}},$.getErrorCorrectPolynomial=function(e){for(var t=K([1],0),a=0;a<e;a+=1)t=t.multiply(K([1,G.gexp(a)],0));return t},$.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+e}}},$.getLostPoint=function(e){for(var t=e.getModuleCount(),a=0,o=0;o<t;o+=1)for(var n=0;n<t;n+=1){for(var s=0,l=e.isDark(o,n),d=-1;d<=1;d+=1)if(!(o+d<0||t<=o+d))for(var f=-1;f<=1;f+=1)n+f<0||t<=n+f||d==0&&f==0||l==e.isDark(o+d,n+f)&&(s+=1);s>5&&(a+=3+s-5)}for(o=0;o<t-1;o+=1)for(n=0;n<t-1;n+=1){var v=0;e.isDark(o,n)&&(v+=1),e.isDark(o+1,n)&&(v+=1),e.isDark(o,n+1)&&(v+=1),e.isDark(o+1,n+1)&&(v+=1),v!=0&&v!=4||(a+=3)}for(o=0;o<t;o+=1)for(n=0;n<t-6;n+=1)e.isDark(o,n)&&!e.isDark(o,n+1)&&e.isDark(o,n+2)&&e.isDark(o,n+3)&&e.isDark(o,n+4)&&!e.isDark(o,n+5)&&e.isDark(o,n+6)&&(a+=40);for(n=0;n<t;n+=1)for(o=0;o<t-6;o+=1)e.isDark(o,n)&&!e.isDark(o+1,n)&&e.isDark(o+2,n)&&e.isDark(o+3,n)&&e.isDark(o+4,n)&&!e.isDark(o+5,n)&&e.isDark(o+6,n)&&(a+=40);var m=0;for(n=0;n<t;n+=1)for(o=0;o<t;o+=1)e.isDark(o,n)&&(m+=1);return a+Math.abs(100*m/t/t-50)/5*10},$),G=function(){for(var e=new Array(256),t=new Array(256),a=0;a<8;a+=1)e[a]=1<<a;for(a=8;a<256;a+=1)e[a]=e[a-4]^e[a-5]^e[a-6]^e[a-8];for(a=0;a<255;a+=1)t[e[a]]=a;return{glog:function(o){if(o<1)throw"glog("+o+")";return t[o]},gexp:function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return e[o]}}}();function K(e,t){if(e.length===void 0)throw e.length+"/"+t;var a=function(){for(var n=0;n<e.length&&e[n]==0;)n+=1;for(var s=new Array(e.length-n+t),l=0;l<e.length-n;l+=1)s[l]=e[l+n];return s}(),o={getAt:function(n){return a[n]},getLength:function(){return a.length},multiply:function(n){for(var s=new Array(o.getLength()+n.getLength()-1),l=0;l<o.getLength();l+=1)for(var d=0;d<n.getLength();d+=1)s[l+d]^=G.gexp(G.glog(o.getAt(l))+G.glog(n.getAt(d)));return K(s,0)},mod:function(n){if(o.getLength()-n.getLength()<0)return o;for(var s=G.glog(o.getAt(0))-G.glog(n.getAt(0)),l=new Array(o.getLength()),d=0;d<o.getLength();d+=1)l[d]=o.getAt(d);for(d=0;d<n.getLength();d+=1)l[d]^=G.gexp(G.glog(n.getAt(d))+s);return K(l,0).mod(n)}};return o}var dt=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(o,n){var s={};return s.totalCount=o,s.dataCount=n,s},a={getRSBlocks:function(o,n){var s=function(S,B){switch(B){case J.L:return e[4*(S-1)+0];case J.M:return e[4*(S-1)+1];case J.Q:return e[4*(S-1)+2];case J.H:return e[4*(S-1)+3];default:return}}(o,n);if(s===void 0)throw"bad rs block @ typeNumber:"+o+"/errorCorrectionLevel:"+n;for(var l=s.length/3,d=[],f=0;f<l;f+=1)for(var v=s[3*f+0],m=s[3*f+1],C=s[3*f+2],_=0;_<v;_+=1)d.push(t(m,C));return d}};return a}(),gt=function(){var e=[],t=0,a={getBuffer:function(){return e},getAt:function(o){var n=Math.floor(o/8);return(e[n]>>>7-o%8&1)==1},put:function(o,n){for(var s=0;s<n;s+=1)a.putBit((o>>>n-s-1&1)==1)},getLengthInBits:function(){return t},putBit:function(o){var n=Math.floor(t/8);e.length<=n&&e.push(0),o&&(e[n]|=128>>>t%8),t+=1}};return a},ft=function(e){var t=e,a={getMode:function(){return 1},getLength:function(s){return t.length},write:function(s){for(var l=t,d=0;d+2<l.length;)s.put(o(l.substring(d,d+3)),10),d+=3;d<l.length&&(l.length-d==1?s.put(o(l.substring(d,d+1)),4):l.length-d==2&&s.put(o(l.substring(d,d+2)),7))}},o=function(s){for(var l=0,d=0;d<s.length;d+=1)l=10*l+n(s.charAt(d));return l},n=function(s){if("0"<=s&&s<="9")return s.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+s};return a},pt=function(e){var t=e,a={getMode:function(){return 2},getLength:function(n){return t.length},write:function(n){for(var s=t,l=0;l+1<s.length;)n.put(45*o(s.charAt(l))+o(s.charAt(l+1)),11),l+=2;l<s.length&&n.put(o(s.charAt(l)),6)}},o=function(n){if("0"<=n&&n<="9")return n.charCodeAt(0)-"0".charCodeAt(0);if("A"<=n&&n<="Z")return n.charCodeAt(0)-"A".charCodeAt(0)+10;switch(n){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+n}};return a},_t=function(e){var t=V.stringToBytes(e);return{getMode:function(){return 4},getLength:function(a){return t.length},write:function(a){for(var o=0;o<t.length;o+=1)a.put(t[o],8)}}},k=function(e){var t=V.stringToBytesFuncs.SJIS;if(!t)throw"sjis not supported.";(function(n,s){var l=t("友");if(l.length!=2||(l[0]<<8|l[1])!=38726)throw"sjis not supported."})();var a=t(e),o={getMode:function(){return 8},getLength:function(n){return~~(a.length/2)},write:function(n){for(var s=a,l=0;l+1<s.length;){var d=(255&s[l])<<8|255&s[l+1];if(33088<=d&&d<=40956)d-=33088;else{if(!(57408<=d&&d<=60351))throw"illegal char at "+(l+1)+"/"+d;d-=49472}d=192*(d>>>8&255)+(255&d),n.put(d,13),l+=2}if(l<s.length)throw"illegal char at "+(l+1)}};return o},r=function(){var e=[],t={writeByte:function(a){e.push(255&a)},writeShort:function(a){t.writeByte(a),t.writeByte(a>>>8)},writeBytes:function(a,o,n){o=o||0,n=n||a.length;for(var s=0;s<n;s+=1)t.writeByte(a[s+o])},writeString:function(a){for(var o=0;o<a.length;o+=1)t.writeByte(a.charCodeAt(o))},toByteArray:function(){return e},toString:function(){var a="";a+="[";for(var o=0;o<e.length;o+=1)o>0&&(a+=","),a+=e[o];return a+"]"}};return t},i=function(e){var t=e,a=0,o=0,n=0,s={read:function(){for(;n<8;){if(a>=t.length){if(n==0)return-1;throw"unexpected end of file./"+n}var d=t.charAt(a);if(a+=1,d=="=")return n=0,-1;d.match(/^\s$/)||(o=o<<6|l(d.charCodeAt(0)),n+=6)}var f=o>>>n-8&255;return n-=8,f}},l=function(d){if(65<=d&&d<=90)return d-65;if(97<=d&&d<=122)return d-97+26;if(48<=d&&d<=57)return d-48+52;if(d==43)return 62;if(d==47)return 63;throw"c:"+d};return s},h=function(e,t,a){for(var o=function(m,C){var _=m,S=C,B=new Array(m*C),z={setPixel:function(u,g,c){B[g*_+u]=c},write:function(u){u.writeString("GIF87a"),u.writeShort(_),u.writeShort(S),u.writeByte(128),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(255),u.writeByte(255),u.writeByte(255),u.writeString(","),u.writeShort(0),u.writeShort(0),u.writeShort(_),u.writeShort(S),u.writeByte(0);var g=I(2);u.writeByte(2);for(var c=0;g.length-c>255;)u.writeByte(255),u.writeBytes(g,c,255),c+=255;u.writeByte(g.length-c),u.writeBytes(g,c,g.length-c),u.writeByte(0),u.writeString(";")}},I=function(u){for(var g=1<<u,c=1+(1<<u),p=u+1,w=q(),b=0;b<g;b+=1)w.add(String.fromCharCode(b));w.add(String.fromCharCode(g)),w.add(String.fromCharCode(c));var M,x,D,O=r(),A=(M=O,x=0,D=0,{write:function(N,y){if(N>>>y)throw"length over";for(;x+y>=8;)M.writeByte(255&(N<<x|D)),y-=8-x,N>>>=8-x,D=0,x=0;D|=N<<x,x+=y},flush:function(){x>0&&M.writeByte(D)}});A.write(g,p);var R=0,j=String.fromCharCode(B[R]);for(R+=1;R<B.length;){var F=String.fromCharCode(B[R]);R+=1,w.contains(j+F)?j+=F:(A.write(w.indexOf(j),p),w.size()<4095&&(w.size()==1<<p&&(p+=1),w.add(j+F)),j=F)}return A.write(w.indexOf(j),p),A.write(c,p),A.flush(),O.toByteArray()},q=function(){var u={},g=0,c={add:function(p){if(c.contains(p))throw"dup key:"+p;u[p]=g,g+=1},size:function(){return g},indexOf:function(p){return u[p]},contains:function(p){return u[p]!==void 0}};return c};return z}(e,t),n=0;n<t;n+=1)for(var s=0;s<e;s+=1)o.setPixel(s,n,a(s,n));var l=r();o.write(l);for(var d=function(){var m=0,C=0,_=0,S="",B={},z=function(q){S+=String.fromCharCode(I(63&q))},I=function(q){if(!(q<0)){if(q<26)return 65+q;if(q<52)return q-26+97;if(q<62)return q-52+48;if(q==62)return 43;if(q==63)return 47}throw"n:"+q};return B.writeByte=function(q){for(m=m<<8|255&q,C+=8,_+=1;C>=6;)z(m>>>C-6),C-=6},B.flush=function(){if(C>0&&(z(m<<6-C),m=0,C=0),_%3!=0)for(var q=3-_%3,u=0;u<q;u+=1)S+="="},B.toString=function(){return S},B}(),f=l.toByteArray(),v=0;v<f.length;v+=1)d.writeByte(f[v]);return d.flush(),"data:image/gif;base64,"+d};return V}();et.stringToBytesFuncs["UTF-8"]=function(V){return function(rt){for(var U=[],H=0;H<rt.length;H++){var $=rt.charCodeAt(H);$<128?U.push($):$<2048?U.push(192|$>>6,128|63&$):$<55296||$>=57344?U.push(224|$>>12,128|$>>6&63,128|63&$):(H++,$=65536+((1023&$)<<10|1023&rt.charCodeAt(H)),U.push(240|$>>18,128|$>>12&63,128|$>>6&63,128|63&$))}return U}(V)},(tt=typeof(T=function(){return et})=="function"?T.apply(E,[]):T)===void 0||(L.exports=tt)}},Y={};function X(L){var E=Y[L];if(E!==void 0)return E.exports;var T=Y[L]={exports:{}};return at[L](T,T.exports,X),T.exports}X.n=L=>{var E=L&&L.__esModule?()=>L.default:()=>L;return X.d(E,{a:E}),E},X.d=(L,E)=>{for(var T in E)X.o(E,T)&&!X.o(L,T)&&Object.defineProperty(L,T,{enumerable:!0,get:E[T]})},X.o=(L,E)=>Object.prototype.hasOwnProperty.call(L,E);var ut={};return(()=>{X.d(ut,{default:()=>_t});const L=k=>!!k&&typeof k=="object"&&!Array.isArray(k);function E(k,...r){if(!r.length)return k;const i=r.shift();return i!==void 0&&L(k)&&L(i)?(k=Object.assign({},k),Object.keys(i).forEach(h=>{const e=k[h],t=i[h];Array.isArray(e)&&Array.isArray(t)?k[h]=t:L(e)&&L(t)?k[h]=E(Object.assign({},e),t):k[h]=t}),E(k,...r)):k}function T(k,r){const i=document.createElement("a");i.download=r,i.href=k,document.body.appendChild(i),i.click(),document.body.removeChild(i)}const tt={L:.07,M:.15,Q:.25,H:.3};class et{constructor({svg:r,type:i,data:h}){this._svg=r,this._type=i,this._data=h}draw(r,i,h,e){let t;switch(this._type){case"dots":t=this._drawDot;break;case"random-dots":t=this._drawRandomDot;break;case"classy":t=this._drawClassy;break;case"classy-rounded":t=this._drawClassyRounded;break;case"rounded":t=this._drawRounded;break;case"vertical-lines":t=this._drawVerticalLines;break;case"horizontal-lines":t=this._drawHorizontalLines;break;case"extra-rounded":t=this._drawExtraRounded;break;default:t=this._drawSquare}t.call(this,{x:r,y:i,size:h,getNeighbor:e})}_rotateFigure({x:r,y:i,size:h,rotation:e=0,draw:t}){var a;const o=r+h/2,n=i+h/2;t(),(a=this._element)===null||a===void 0||a.setAttribute("transform",`rotate(${180*e/Math.PI},${o},${n})`)}_basicDot(r){const{size:i,x:h,y:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(h+i/2)),this._element.setAttribute("cy",String(e+i/2)),this._element.setAttribute("r",String(i/2))}}))}_basicSquare(r){const{size:i,x:h,y:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(h)),this._element.setAttribute("y",String(e)),this._element.setAttribute("width",String(i)),this._element.setAttribute("height",String(i))}}))}_basicSideRounded(r){const{size:i,x:h,y:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${h} ${e}v ${i}h `+i/2+`a ${i/2} ${i/2}, 0, 0, 0, 0 ${-i}`)}}))}_basicCornerRounded(r){const{size:i,x:h,y:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${h} ${e}v ${i}h ${i}v `+-i/2+`a ${i/2} ${i/2}, 0, 0, 0, ${-i/2} ${-i/2}`)}}))}_basicCornerExtraRounded(r){const{size:i,x:h,y:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${h} ${e}v ${i}h ${i}a ${i} ${i}, 0, 0, 0, ${-i} ${-i}`)}}))}_basicCornersRounded(r){const{size:i,x:h,y:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${h} ${e}v `+i/2+`a ${i/2} ${i/2}, 0, 0, 0, ${i/2} ${i/2}h `+i/2+"v "+-i/2+`a ${i/2} ${i/2}, 0, 0, 0, ${-i/2} ${-i/2}`)}}))}_drawDot({x:r,y:i,size:h}){this._basicDot({x:r,y:i,size:h,rotation:0})}_drawRandomDot({x:r,y:i,size:h}){let e;this._data?e=.4*(a=>{const o=1e4*Math.sin(a++);return o-Math.floor(o)})(this._data.split("").reduce((a,o)=>a+o.charCodeAt(0),0)+r+i)+.6:e=.4*Math.random()+.6,this._basicDot({x:r,y:i,size:h*e,rotation:0})}_drawSquare({x:r,y:i,size:h}){this._basicSquare({x:r,y:i,size:h,rotation:0})}_drawRounded({x:r,y:i,size:h,getNeighbor:e}){const t=e?+e(0,-1):0,a=e?+e(0,1):0,o=e?+e(-1,0):0,n=e?+e(1,0):0,s=t+a+o+n;if(s!==0)if(s>2||t&&a||o&&n)this._basicSquare({x:r,y:i,size:h,rotation:0});else{if(s===2){let l=0;return t&&o?l=Math.PI/2:o&&a?l=Math.PI:a&&n&&(l=-Math.PI/2),void this._basicCornerRounded({x:r,y:i,size:h,rotation:l})}if(s===1){let l=0;return o?l=Math.PI/2:a?l=Math.PI:n&&(l=-Math.PI/2),void this._basicSideRounded({x:r,y:i,size:h,rotation:l})}}else this._basicDot({x:r,y:i,size:h,rotation:0})}_drawVerticalLines({x:r,y:i,size:h,getNeighbor:e}){const t=e?+e(0,-1):0,a=e?+e(0,1):0,o=e?+e(-1,0):0,n=e?+e(1,0):0;if(t+a+o+n===0||t&&!o&&!n||a&&!o&&!n)this._basicDot({x:r,y:i,size:h,rotation:0});else if(o&&n)this._basicSquare({x:r,y:i,size:h,rotation:0});else if(!o||n){if(!(!n||o)){const s=-Math.PI/2;this._basicSideRounded({x:r,y:i,size:h,rotation:s})}}else{const s=Math.PI/2;this._basicSideRounded({x:r,y:i,size:h,rotation:s})}}_drawHorizontalLines({x:r,y:i,size:h,getNeighbor:e}){const t=e?+e(0,-1):0,a=e?+e(0,1):0,o=e?+e(-1,0):0,n=e?+e(1,0):0;if(t+a+o+n===0||o&&!t&&!a||n&&!t&&!a)this._basicDot({x:r,y:i,size:h,rotation:0});else if(t&&a)this._basicSquare({x:r,y:i,size:h,rotation:0});else if(!t||a){if(!(!a||t)){const s=Math.PI;this._basicSideRounded({x:r,y:i,size:h,rotation:s})}}else this._basicSideRounded({x:r,y:i,size:h,rotation:0})}_drawExtraRounded({x:r,y:i,size:h,getNeighbor:e}){const t=e?+e(0,-1):0,a=e?+e(0,1):0,o=e?+e(-1,0):0,n=e?+e(1,0):0,s=t+a+o+n;if(s!==0)if(s>2||t&&a||o&&n)this._basicSquare({x:r,y:i,size:h,rotation:0});else{if(s===2){let l=0;return t&&o?l=Math.PI/2:o&&a?l=Math.PI:a&&n&&(l=-Math.PI/2),void this._basicCornerExtraRounded({x:r,y:i,size:h,rotation:l})}if(s===1){let l=0;return o?l=Math.PI/2:a?l=Math.PI:n&&(l=-Math.PI/2),void this._basicSideRounded({x:r,y:i,size:h,rotation:l})}}else this._basicDot({x:r,y:i,size:h,rotation:0})}_drawClassy({x:r,y:i,size:h,getNeighbor:e}){const t=e?+e(-1,0):0,a=e?+e(1,0):0,o=e?+e(0,-1):0,n=e?+e(0,1):0;t+a+o+n!==0?t||o?a||n?this._basicSquare({x:r,y:i,size:h,rotation:0}):this._basicCornerRounded({x:r,y:i,size:h,rotation:Math.PI/2}):this._basicCornerRounded({x:r,y:i,size:h,rotation:-Math.PI/2}):this._basicCornersRounded({x:r,y:i,size:h,rotation:Math.PI/2})}_drawClassyRounded({x:r,y:i,size:h,getNeighbor:e}){const t=e?+e(-1,0):0,a=e?+e(1,0):0,o=e?+e(0,-1):0,n=e?+e(0,1):0;t+a+o+n!==0?t||o?a||n?this._basicSquare({x:r,y:i,size:h,rotation:0}):this._basicCornerExtraRounded({x:r,y:i,size:h,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:r,y:i,size:h,rotation:-Math.PI/2}):this._basicCornersRounded({x:r,y:i,size:h,rotation:Math.PI/2})}}class V{constructor({svg:r,type:i}){this._svg=r,this._type=i}draw(r,i,h,e){let t;switch(this._type){case"square":t=this._drawSquare;break;case"extra-rounded":t=this._drawExtraRounded;break;default:t=this._drawDot}t.call(this,{x:r,y:i,size:h,rotation:e})}_rotateFigure({x:r,y:i,size:h,rotation:e=0,draw:t}){var a;const o=r+h/2,n=i+h/2;t(),(a=this._element)===null||a===void 0||a.setAttribute("transform",`rotate(${180*e/Math.PI},${o},${n})`)}_basicDot(r){const{size:i,x:h,y:e}=r,t=i/7;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${h+i/2} ${e}a ${i/2} ${i/2} 0 1 0 0.1 0zm 0 ${t}a ${i/2-t} ${i/2-t} 0 1 1 -0.1 0Z`)}}))}_basicSquare(r){const{size:i,x:h,y:e}=r,t=i/7;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${h} ${e}v ${i}h ${i}v `+-i+`zM ${h+t} ${e+t}h `+(i-2*t)+"v "+(i-2*t)+"h "+(2*t-i)+"z")}}))}_basicExtraRounded(r){const{size:i,x:h,y:e}=r,t=i/7;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${h} ${e+2.5*t}v `+2*t+`a ${2.5*t} ${2.5*t}, 0, 0, 0, ${2.5*t} ${2.5*t}h `+2*t+`a ${2.5*t} ${2.5*t}, 0, 0, 0, ${2.5*t} ${2.5*-t}v `+-2*t+`a ${2.5*t} ${2.5*t}, 0, 0, 0, ${2.5*-t} ${2.5*-t}h `+-2*t+`a ${2.5*t} ${2.5*t}, 0, 0, 0, ${2.5*-t} ${2.5*t}M ${h+2.5*t} ${e+t}h `+2*t+`a ${1.5*t} ${1.5*t}, 0, 0, 1, ${1.5*t} ${1.5*t}v `+2*t+`a ${1.5*t} ${1.5*t}, 0, 0, 1, ${1.5*-t} ${1.5*t}h `+-2*t+`a ${1.5*t} ${1.5*t}, 0, 0, 1, ${1.5*-t} ${1.5*-t}v `+-2*t+`a ${1.5*t} ${1.5*t}, 0, 0, 1, ${1.5*t} ${1.5*-t}`)}}))}_drawDot({x:r,y:i,size:h,rotation:e}){this._basicDot({x:r,y:i,size:h,rotation:e})}_drawSquare({x:r,y:i,size:h,rotation:e}){this._basicSquare({x:r,y:i,size:h,rotation:e})}_drawExtraRounded({x:r,y:i,size:h,rotation:e}){this._basicExtraRounded({x:r,y:i,size:h,rotation:e})}}class rt{constructor({svg:r,type:i,color:h}){this._svg=r,this._type=i,this._color=h}draw(r,i,h,e){let t;switch(this._type){case"square":t=this._drawSquare;break;case"heart":t=this._drawHeart;break;default:t=this._drawDot}t.call(this,{x:r,y:i,size:h,rotation:e})}_rotateFigure({x:r,y:i,size:h,rotation:e=0,draw:t}){var a;const o=r+h/2,n=i+h/2;t(),(a=this._element)===null||a===void 0||a.setAttribute("transform",`rotate(${180*e/Math.PI},${o},${n})`)}_basicDot(r){const{size:i,x:h,y:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(h+i/2)),this._element.setAttribute("cy",String(e+i/2)),this._element.setAttribute("r",String(i/2))}}))}_basicSquare(r){const{size:i,x:h,y:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(h)),this._element.setAttribute("y",String(e)),this._element.setAttribute("width",String(i)),this._element.setAttribute("height",String(i))}}))}_basicHeart(r){const{x:i,y:h,size:e}=r;this._rotateFigure(Object.assign(Object.assign({},r),{draw:()=>{var t;const a=function(o,n,s,l){const d="http://www.w3.org/2000/svg",f=document.createElementNS(d,"svg");f.setAttribute("width",o.toString()),f.setAttribute("height",o.toString()),f.setAttribute("viewBox","0 -960 960 960"),f.setAttribute("fill",l),f.setAttribute("x",n),f.setAttribute("y",s);const v=document.createElementNS(d,"path");return v.setAttribute("d","m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Z"),f.appendChild(v),f}(e,String(i),String(h),(t=this._color)!==null&&t!==void 0?t:"black");this._svg.appendChild(a)}}))}_drawDot({x:r,y:i,size:h,rotation:e}){this._basicDot({x:r,y:i,size:h,rotation:e})}_drawSquare({x:r,y:i,size:h,rotation:e}){this._basicSquare({x:r,y:i,size:h,rotation:e})}_drawHeart({x:r,y:i,size:h,rotation:e}){this._basicHeart({x:r-.2*h/2,y:i-.2*h/2,size:1.2*h,rotation:e})}}const U="circle",H=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],$=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class Z{constructor(r){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(r.width)),this._element.setAttribute("height",String(r.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=r}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(r){const i=r.getModuleCount(),h=Math.min(this._options.width,this._options.height)-2*this._options.margin,e=this._options.shape===U?h/Math.sqrt(2):h,t=Math.floor(e/i);let a={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=r,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:o,qrOptions:n}=this._options,s=o.imageSize*tt[n.errorCorrectionLevel],l=Math.floor(s*i*i);a=function({originalHeight:d,originalWidth:f,maxHiddenDots:v,maxHiddenAxisDots:m,dotSize:C}){const _={x:0,y:0},S={x:0,y:0};if(d<=0||f<=0||v<=0||C<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const B=d/f;return _.x=Math.floor(Math.sqrt(v/B)),_.x<=0&&(_.x=1),m&&m<_.x&&(_.x=m),_.x%2==0&&_.x--,S.x=_.x*C,_.y=1+2*Math.ceil((_.x*B-1)/2),S.y=Math.round(S.x*B),(_.y*_.x>v||m&&m<_.y)&&(m&&m<_.y?(_.y=m,_.y%2==0&&_.x--):_.y-=2,S.y=_.y*C,_.x=1+2*Math.ceil((_.y/B-1)/2),S.x=Math.round(S.y/B)),{height:S.y,width:S.x,hideYDots:_.x,hideXDots:_.y}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:l,maxHiddenAxisDots:i-14,dotSize:t})}this.drawBackground(),this.drawDots((o,n)=>{var s,l,d,f,v,m;return!(this._options.imageOptions.hideBackgroundDots&&o>=(i-a.hideXDots)/2&&o<(i+a.hideXDots)/2&&n>=(i-a.hideYDots)/2&&n<(i+a.hideYDots)/2||!((s=H[o])===null||s===void 0)&&s[n]||!((l=H[o-i+7])===null||l===void 0)&&l[n]||!((d=H[o])===null||d===void 0)&&d[n-i+7]||!((f=$[o])===null||f===void 0)&&f[n]||!((v=$[o-i+7])===null||v===void 0)&&v[n]||!((m=$[o])===null||m===void 0)&&m[n-i+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:a.width,height:a.height,count:i,dotSize:t})}drawBackground(){var r,i,h;const e=this._element,t=this._options,a=.4*Math.random()+.6;if(e){const o=(r=t.backgroundOptions)===null||r===void 0?void 0:r.gradient,n=(i=t.backgroundOptions)===null||i===void 0?void 0:i.color;if((o||n)&&this._createColor({options:o,color:n,additionalRotation:0,x:0,y:0,height:t.height,width:t.width,name:`background-color-${a}`}),(h=t.backgroundOptions)===null||h===void 0?void 0:h.round){const s=Math.min(t.width,t.height),l=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${a}`),this._defs.appendChild(this._backgroundClipPath),l.setAttribute("x",String((t.width-s)/2)),l.setAttribute("y",String((t.height-s)/2)),l.setAttribute("width",String(s)),l.setAttribute("height",String(s)),l.setAttribute("rx",String(s/2*t.backgroundOptions.round)),this._backgroundClipPath.appendChild(l)}}}drawDots(r){var i,h;if(!this._qr)throw"QR code is not defined";const e=.4*Math.random()+.6,t=this._options,a=this._qr.getModuleCount();if(a>t.width||a>t.height)throw"The canvas is too small.";const o=Math.min(t.width,t.height)-2*t.margin,n=t.shape===U?o/Math.sqrt(2):o,s=Math.floor(n/a),l=Math.floor((t.width-a*s)/2),d=Math.floor((t.height-a*s)/2),f=new et({svg:this._element,type:t.dotsOptions.type,data:t.data});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${e}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(i=t.dotsOptions)===null||i===void 0?void 0:i.gradient,color:t.dotsOptions.color,additionalRotation:0,x:0,y:0,height:t.height,width:t.width,name:`dot-color-${e}`});for(let v=0;v<a;v++)for(let m=0;m<a;m++)r&&!r(v,m)||!((h=this._qr)===null||h===void 0)&&h.isDark(v,m)&&(f.draw(d+m*s,l+v*s,s,(C,_)=>!(v+C<0||m+_<0||v+C>=a||m+_>=a)&&!(r&&!r(v+C,m+_))&&!!this._qr&&this._qr.isDark(v+C,m+_)),f._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(f._element));if(t.shape===U){const v=Math.floor((o/s-a)/2),m=a+2*v,C=l-v*s,_=d-v*s,S=[],B=Math.floor(m/2);for(let z=0;z<m;z++){S[z]=[];for(let I=0;I<m;I++)z>=v-1&&z<=m-v&&I>=v-1&&I<=m-v||Math.sqrt((z-B)*(z-B)+(I-B)*(I-B))>B?S[z][I]=0:S[z][I]=this._qr.isDark(I-2*v<0?I:I>=a?I-2*v:I-v,z-2*v<0?z:z>=a?z-2*v:z-v)?1:0}for(let z=0;z<m;z++)for(let I=0;I<m;I++)S[z][I]&&(f.draw(_+I*s,C+z*s,s,(q,u)=>{var g;return!!(!((g=S[z+q])===null||g===void 0)&&g[I+u])}),f._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(f._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const r=this._element,i=this._options;if(!r)throw"Element code is not defined";const h=.4*Math.random()+.6,e=this._qr.getModuleCount(),t=Math.min(i.width,i.height)-2*i.margin,a=i.shape===U?t/Math.sqrt(2):t,o=Math.floor(a/e),n=7*o,s=3*o,l=Math.floor((i.width-e*o)/2),d=Math.floor((i.height-e*o)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([f,v,m])=>{var C,_,S,B,z,I,q,u,g,c,p,w,b;const M=l+f*o*(e-7),x=d+v*o*(e-7);let D=this._dotsClipPath,O=this._dotsClipPath;if((!((C=i.cornersSquareOptions)===null||C===void 0)&&C.gradient||!((_=i.cornersSquareOptions)===null||_===void 0)&&_.color)&&(D=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),D.setAttribute("id",`clip-path-corners-square-color-${f}-${v}-${h}`),this._defs.appendChild(D),this._cornersSquareClipPath=this._cornersDotClipPath=O=D,this._createColor({options:(S=i.cornersSquareOptions)===null||S===void 0?void 0:S.gradient,color:(B=i.cornersSquareOptions)===null||B===void 0?void 0:B.color,additionalRotation:m,x:M,y:x,height:n,width:n,name:`corners-square-color-${f}-${v}-${h}`})),(z=i.cornersSquareOptions)===null||z===void 0?void 0:z.type){const A=new V({svg:this._element,type:i.cornersSquareOptions.type});A.draw(M,x,n,m),A._element&&D&&D.appendChild(A._element)}else{const A=new et({svg:this._element,type:i.dotsOptions.type});for(let R=0;R<H.length;R++)for(let j=0;j<H[R].length;j++)!((I=H[R])===null||I===void 0)&&I[j]&&(A.draw(M+R*o,x+j*o,o,(F,N)=>{var y;return!!(!((y=H[R+F])===null||y===void 0)&&y[j+N])}),A._element&&D&&D.appendChild(A._element))}if((!((q=i.cornersDotOptions)===null||q===void 0)&&q.gradient||!((u=i.cornersDotOptions)===null||u===void 0)&&u.color)&&(O=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),O.setAttribute("id",`clip-path-corners-dot-color-${f}-${v}-${h}`),this._defs.appendChild(O),this._cornersDotClipPath=O,this._createColor({options:(g=i.cornersDotOptions)===null||g===void 0?void 0:g.gradient,color:(c=i.cornersDotOptions)===null||c===void 0?void 0:c.color,additionalRotation:m,x:M+2*o,y:x+2*o,height:s,width:s,name:`corners-dot-color-${f}-${v}-${h}`})),(p=i.cornersDotOptions)===null||p===void 0?void 0:p.type){const A=new rt({svg:this._element,type:i.cornersDotOptions.type,color:(w=i.cornersDotOptions.color)!==null&&w!==void 0?w:i.dotsOptions.color});A.draw(M+2*o,x+2*o,s,m),A._element&&O&&O.appendChild(A._element)}else{const A=new et({svg:this._element,type:i.dotsOptions.type});for(let R=0;R<$.length;R++)for(let j=0;j<$[R].length;j++)!((b=$[R])===null||b===void 0)&&b[j]&&(A.draw(M+R*o,x+j*o,o,(F,N)=>{var y;return!!(!((y=$[R+F])===null||y===void 0)&&y[j+N])}),A._element&&O&&O.appendChild(A._element))}})}loadImage(){return new Promise((r,i)=>{const h=this._options,e=new Image;if(!h.image)return i("Image is not defined");typeof h.imageOptions.crossOrigin=="string"&&(e.crossOrigin=h.imageOptions.crossOrigin),this._image=e,e.onload=()=>{r()},e.src=h.image})}async drawImage({width:r,height:i,count:h,dotSize:e}){const t=this._options,a=Math.floor((t.width-h*e)/2),o=Math.floor((t.height-h*e)/2),n=a+t.imageOptions.margin+(h*e-r)/2,s=o+t.imageOptions.margin+(h*e-i)/2,l=r-2*t.imageOptions.margin,d=i-2*t.imageOptions.margin,f=document.createElementNS("http://www.w3.org/2000/svg","image");f.setAttribute("x",String(n)),f.setAttribute("y",String(s)),f.setAttribute("width",`${l}px`),f.setAttribute("height",`${d}px`);const v=await async function(m){return new Promise(C=>{const _=new XMLHttpRequest;_.onload=function(){const S=new FileReader;S.onloadend=function(){C(S.result)},S.readAsDataURL(_.response)},_.open("GET",m),_.responseType="blob",_.send()})}(t.image||"");f.setAttribute("href",v||""),this._element.appendChild(f)}_createColor({options:r,color:i,additionalRotation:h,x:e,y:t,height:a,width:o,name:n}){const s=o>a?o:a,l=document.createElementNS("http://www.w3.org/2000/svg","rect");if(l.setAttribute("x",String(e)),l.setAttribute("y",String(t)),l.setAttribute("height",String(a)),l.setAttribute("width",String(o)),l.setAttribute("clip-path",`url('#clip-path-${n}')`),r){let d;if(r.type==="radial")d=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),d.setAttribute("id",n),d.setAttribute("gradientUnits","userSpaceOnUse"),d.setAttribute("fx",String(e+o/2)),d.setAttribute("fy",String(t+a/2)),d.setAttribute("cx",String(e+o/2)),d.setAttribute("cy",String(t+a/2)),d.setAttribute("r",String(s/2));else{const f=((r.rotation||0)+h)%(2*Math.PI),v=(f+2*Math.PI)%(2*Math.PI);let m=e+o/2,C=t+a/2,_=e+o/2,S=t+a/2;v>=0&&v<=.25*Math.PI||v>1.75*Math.PI&&v<=2*Math.PI?(m-=o/2,C-=a/2*Math.tan(f),_+=o/2,S+=a/2*Math.tan(f)):v>.25*Math.PI&&v<=.75*Math.PI?(C-=a/2,m-=o/2/Math.tan(f),S+=a/2,_+=o/2/Math.tan(f)):v>.75*Math.PI&&v<=1.25*Math.PI?(m+=o/2,C+=a/2*Math.tan(f),_-=o/2,S-=a/2*Math.tan(f)):v>1.25*Math.PI&&v<=1.75*Math.PI&&(C+=a/2,m+=o/2/Math.tan(f),S-=a/2,_-=o/2/Math.tan(f)),d=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),d.setAttribute("id",n),d.setAttribute("gradientUnits","userSpaceOnUse"),d.setAttribute("x1",String(Math.round(m))),d.setAttribute("y1",String(Math.round(C))),d.setAttribute("x2",String(Math.round(_))),d.setAttribute("y2",String(Math.round(S)))}r.colorStops.forEach(({offset:f,color:v})=>{const m=document.createElementNS("http://www.w3.org/2000/svg","stop");m.setAttribute("offset",100*f+"%"),m.setAttribute("stop-color",v),d.appendChild(m)}),l.setAttribute("fill",`url('#${n}')`),this._defs.appendChild(d)}else i&&l.setAttribute("fill",i);this._element.appendChild(l)}}const J="canvas",W={};for(let k=0;k<=40;k++)W[k]=k;const G={type:J,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:W[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:"anonymous",margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};function K(k){const r=Object.assign({},k);if(!r.colorStops||!r.colorStops.length)throw"Field 'colorStops' is required in gradient";return r.rotation?r.rotation=Number(r.rotation):r.rotation=0,r.colorStops=r.colorStops.map(i=>Object.assign(Object.assign({},i),{offset:Number(i.offset)})),r}function dt(k){const r=Object.assign({},k);return r.width=Number(r.width),r.height=Number(r.height),r.margin=Number(r.margin),r.imageOptions=Object.assign(Object.assign({},r.imageOptions),{hideBackgroundDots:!!r.imageOptions.hideBackgroundDots,imageSize:Number(r.imageOptions.imageSize),margin:Number(r.imageOptions.margin)}),r.margin>Math.min(r.width,r.height)&&(r.margin=Math.min(r.width,r.height)),r.dotsOptions=Object.assign({},r.dotsOptions),r.dotsOptions.gradient&&(r.dotsOptions.gradient=K(r.dotsOptions.gradient)),r.cornersSquareOptions&&(r.cornersSquareOptions=Object.assign({},r.cornersSquareOptions),r.cornersSquareOptions.gradient&&(r.cornersSquareOptions.gradient=K(r.cornersSquareOptions.gradient))),r.cornersDotOptions&&(r.cornersDotOptions=Object.assign({},r.cornersDotOptions),r.cornersDotOptions.gradient&&(r.cornersDotOptions.gradient=K(r.cornersDotOptions.gradient))),r.backgroundOptions&&(r.backgroundOptions=Object.assign({},r.backgroundOptions),r.backgroundOptions.gradient&&(r.backgroundOptions.gradient=K(r.backgroundOptions.gradient))),r}var gt=X(464),ft=X.n(gt);class pt{constructor(r){this._options=r?dt(E(G,r)):G,this.update()}static _clearContainer(r){r&&(r.innerHTML="")}_setupSvg(){if(!this._qr)return;const r=new Z(this._options);this._svg=r.getElement(),this._svgDrawingPromise=r.drawQR(this._qr).then(()=>{var i;this._svg&&((i=this._extension)===null||i===void 0||i.call(this,r.getElement(),this._options))})}_setupCanvas(){var r;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=(r=this._svgDrawingPromise)===null||r===void 0?void 0:r.then(()=>{if(!this._svg)return;const i=this._svg,h=new XMLSerializer().serializeToString(i),e="data:image/svg+xml;base64,"+btoa(h),t=new Image;return new Promise(a=>{t.onload=()=>{var o,n;(n=(o=this._canvas)===null||o===void 0?void 0:o.getContext("2d"))===null||n===void 0||n.drawImage(t,0,0),a()},t.src=e})}))}async _getElement(r="png"){if(!this._qr)throw"QR code is empty";return r.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):(this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._canvas)}update(r){pt._clearContainer(this._container),this._options=r?dt(E(this._options,r)):this._options,this._options.data&&(this._qr=ft()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(i){switch(!0){case/^[0-9]*$/.test(i):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(i):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===J?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(r){if(r){if(typeof r.appendChild!="function")throw"Container should be a single DOM node";this._options.type===J?this._canvas&&r.appendChild(this._canvas):this._svg&&r.appendChild(this._svg),this._container=r}}applyExtension(r){if(!r)throw"Extension function should be defined.";this._extension=r,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(r="png"){if(!this._qr)throw"QR code is empty";const i=await this._getElement(r);if(!i)return null;if(r.toLowerCase()==="svg"){const h=new XMLSerializer().serializeToString(i);return new Blob([`<?xml version="1.0" standalone="no"?>\r
`+h],{type:"image/svg+xml"})}return new Promise(h=>i.toBlob(h,`image/${r}`,1))}async download(r){if(!this._qr)throw"QR code is empty";let i="png",h="qr";typeof r=="string"?(i=r,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof r=="object"&&r!==null&&(r.name&&(h=r.name),r.extension&&(i=r.extension));const e=await this._getElement(i);if(e)if(i.toLowerCase()==="svg"){let t=new XMLSerializer().serializeToString(e);t=`<?xml version="1.0" standalone="no"?>\r
`+t,T("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t),`${h}.svg`)}else T(e.toDataURL(`image/${i}`),`${h}.${i}`)}}const _t=pt})(),ut.default})())})(Mt);var Ot=Mt.exports;const $t=At(Ot);function Dt(nt){return nt===null?Promise.resolve(""):new Promise((ht,at)=>{const Y=new FileReader;Y.onloadend=()=>ht(Y.result),Y.readAsDataURL(nt)})}function qt({text:nt,color:{background:ht,foreground:at},errorCorrectionLevel:Y,imageBase64:X,imageOptions:{imageSize:ut,margin:L},dotOptions:{type:E,color:T},cornersSquareOptions:{type:tt,color:et},cornersDotOptions:{type:V,color:rt},outputType:U,width:H,margin:$}){const Z=yt("");return xt([nt,ht,at,Y,X,ut,L,E,T,tt,et,V,rt,U,H,$].filter(St),async()=>{const J=Q(nt)?.trim(),W=Q(U)||"png";if(J){const G=gt=>{const ft=Q(gt)||Q(at);return ft?.toLowerCase()==="#ffffffff"?Q(at):ft},K={width:Q(H)??1024,height:Q(H)??1024,type:"svg",data:J,image:Q(X),margin:Q($)||10,qrOptions:{typeNumber:0,mode:"Byte",errorCorrectionLevel:Q(Y)||"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:Q(ut)||.4,margin:Q(L)||20,crossOrigin:"anonymous"},dotsOptions:{color:G(T),type:Q(E)||"square"},backgroundOptions:{color:Q(ht)},cornersSquareOptions:{color:G(et),type:Q(tt)||"extra-rounded"},cornersDotOptions:{color:G(rt),type:Q(V)||"dot"}},dt=new $t(K);Z.value=await Dt(await dt.getRawData(W))}},{immediate:!0}),{qrcode:Z}}function Pt({text:nt,color:{background:ht,foreground:at},errorCorrectionLevel:Y,outputType:X,width:ut,options:L}){const E=yt("");return xt([nt,ht,at,Y,X,ut].filter(St),async()=>{const T=Q(nt)?.trim(),tt=Q(X)||"";if(T){const et={color:{dark:Q(at),light:Q(ht),...L?.color},errorCorrectionLevel:Q(Y)??"M",width:Q(ut)??1024,...L};["utf8","svg","terminal"].includes(tt)?E.value=await bt.toString(T,{type:tt}):E.value=await bt.toDataURL(T,{...et,type:tt})}},{immediate:!0}),{qrcode:E}}export{qt as a,Pt as u};
