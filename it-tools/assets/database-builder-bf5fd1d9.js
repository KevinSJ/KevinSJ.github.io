import{d as L,a0 as U,ac as T,r as A,o as N,c as h,k as t,w as l,l as e,m as c,a6 as o,G as u,j as D,ad as G,ah as k,aj as w,af as P}from"./index-0c1fde36.js";import{_ as B}from"./TextareaCopyable-59231e95.js";import{_ as V}from"./Select-9917c364.js";import{_ as F}from"./FormItem-1b9a5952.js";import{_ as j,a as Q}from"./Checkbox-ba7202eb.js";import{_ as X}from"./Space-7fc52151.js";import{_ as M}from"./Form-a433c14f.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./Tag-e75b8dae.js";import"./FocusDetector-089b8822.js";import"./VirtualList-8140ffff.js";import"./Empty-ca426d71.js";import"./index-cbfaa337.js";import"./context-00991937.js";import"./get-slot-1efb97e5.js";const _e=L({__name:"database-builder",setup(W){const{t:a}=U(),E=T({name:"type",storageName:"db-create:t",defaultValue:"mysql"}),i=T({name:"db",storageName:"db-create:d",defaultValue:"test"}),_=T({name:"server",storageName:"db-create:s",defaultValue:""}),r=T({name:"account",storageName:"db-create:a",defaultValue:"admin"}),f=A(""),v=A([]),x=A("");function R(p=12){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";return Array.from({length:p},()=>s[Math.floor(Math.random()*s.length)]).join("")}function S(){const p=f.value||R(),s=v.value.length>0?v.value.join(", "):"ALL PRIVILEGES";let b="";switch(E.value){case"mysql":b=`
CREATE DATABASE IF NOT EXISTS \`${i.value}\`;
CREATE USER IF NOT EXISTS '${r.value}'@'${_.value||"%"}' IDENTIFIED BY '${p}';
GRANT ${s} ON \`${i.value}\`.* TO '${r.value}'@'${_.value||"%"}';
FLUSH PRIVILEGES;
      `.trim();break;case"postgresql":b=`
CREATE DATABASE "${i.value}";
CREATE ROLE "${r.value}" LOGIN PASSWORD '${p}';
GRANT ${s} ON DATABASE "${i.value}" TO "${r.value}";
      `.trim();break;case"sqlserver":b=`
CREATE DATABASE [${i.value}];
CREATE LOGIN [${r.value}] WITH PASSWORD = '${p}';
USE [${i.value}];
CREATE USER [${r.value}] FOR LOGIN [${r.value}];
GRANT ${s} TO [${r.value}];
      `.trim();break;case"oracle":b=`
CREATE USER ${r.value} IDENTIFIED BY "${p}";
GRANT ${s} TO ${r.value};
-- Oracle typically uses schemas; adjust database creation as needed
-- for quota, you may want: ALTER USER ${r.value} QUOTA UNLIMITED ON USERS;
      `.trim();break;case"sqlite":b=`
-- SQLite does not support user management or GRANT statements.
-- Database is created as a file: ${i.value}.db
-- Permissions are handled at the OS/file system level.
      `.trim();break}x.value=b}return(p,s)=>{const b=V,m=F,g=k,n=j,I=Q,$=w,O=X,y=M,C=B,q=P;return N(),h("div",null,[t(y,{"label-placement":"left","label-width":"130px"},{default:l(()=>[t(m,{label:e(a)("tools.database-builder.texts.label-database-type")},{default:l(()=>[t(b,{value:e(E),"onUpdate:value":s[0]||(s[0]=d=>c(E)?E.value=d:null),options:[{label:e(a)("tools.database-builder.texts.label-mysql"),value:"mysql"},{label:e(a)("tools.database-builder.texts.label-postgresql"),value:"postgresql"},{label:e(a)("tools.database-builder.texts.label-sql-server"),value:"sqlserver"},{label:e(a)("tools.database-builder.texts.label-oracle"),value:"oracle"},{label:e(a)("tools.database-builder.texts.label-sqlite"),value:"sqlite"}]},null,8,["value","options"])]),_:1},8,["label"]),t(m,{label:e(a)("tools.database-builder.texts.label-database-name")},{default:l(()=>[t(g,{value:e(i),"onUpdate:value":s[1]||(s[1]=d=>c(i)?i.value=d:null),placeholder:e(a)("tools.database-builder.texts.placeholder-test")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(m,{label:e(a)("tools.database-builder.texts.label-server-address")},{default:l(()=>[t(g,{value:e(_),"onUpdate:value":s[2]||(s[2]=d=>c(_)?_.value=d:null),placeholder:e(a)("tools.database-builder.texts.placeholder-127-0-0-1")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(m,{label:e(a)("tools.database-builder.texts.label-account")},{default:l(()=>[t(g,{value:e(r),"onUpdate:value":s[3]||(s[3]=d=>c(r)?r.value=d:null),placeholder:e(a)("tools.database-builder.texts.placeholder-test")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(m,{label:e(a)("tools.database-builder.texts.label-password-leave-empty-to-generate"),"label-width":"auto"},{default:l(()=>[t(g,{value:e(f),"onUpdate:value":s[4]||(s[4]=d=>c(f)?f.value=d:null),type:"password",placeholder:e(a)("tools.database-builder.texts.placeholder-leave-empty-for-random")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(m,{label:e(a)("tools.database-builder.texts.label-permissions-all-privileges-if-none-selected"),"label-width":"auto"},{default:l(()=>[t(I,{value:e(v),"onUpdate:value":s[5]||(s[5]=d=>c(v)?v.value=d:null)},{default:l(()=>[t(n,{value:"SELECT"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-select")),1)]),_:1}),t(n,{value:"INSERT"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-insert")),1)]),_:1}),t(n,{value:"UPDATE"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-update")),1)]),_:1}),t(n,{value:"DELETE"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-delete")),1)]),_:1}),t(n,{value:"CREATE"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-create")),1)]),_:1}),t(n,{value:"DROP"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-drop")),1)]),_:1}),t(n,{value:"ALTER"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-alter")),1)]),_:1}),t(n,{value:"INDEX"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-index")),1)]),_:1}),t(n,{value:"EXECUTE"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-execute")),1)]),_:1}),t(n,{value:"REFERENCES"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-references")),1)]),_:1}),t(n,{value:"TRIGGER"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-trigger")),1)]),_:1}),t(n,{value:"USAGE"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-usage")),1)]),_:1}),t(n,{value:"REPLICATION CLIENT"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-replication-client")),1)]),_:1}),t(n,{value:"REPLICATION SLAVE"},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-replication-slave")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),t(O,{justify:"center","mt-2":""},{default:l(()=>[t($,{type:"primary",onClick:S},{default:l(()=>[o(u(e(a)("tools.database-builder.texts.tag-generate-sql-instructions")),1)]),_:1})]),_:1})]),_:1}),e(x)?(N(),D(q,{key:0,title:e(a)("tools.database-builder.texts.title-generated-sql-instructions"),"mt-2":""},{default:l(()=>[t(C,{value:e(x),language:"sql","download-file-name":"create-db.sql"},null,8,["value"])]),_:1},8,["title"])):G("",!0)])}}});export{_e as default};
