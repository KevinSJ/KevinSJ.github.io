import{_ as $}from"./TextareaCopyable-59231e95.js";import{_ as D}from"./InputCopyable.vue_vue_type_script_setup_true_lang-294ac243.js";import{b as T,d as C,a0 as P,r as A,i as L,o as s,c as w,k as f,w as b,l as t,m as j,j as u,a6 as y,G as k,ad as _,x as q,af as N,ag as O}from"./index-0c1fde36.js";import{_ as Z}from"./p-77eb774b.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";var x={},S=function(p,r,e="match",a=!0){for(var l,n=e==="split"?1:0,d=r.length,o=0;o<p.length;o++){var m=p[o];typeof p[o]=="string"&&(m=new RegExp(p[o]));var v="exec";e==="replace"&&(v=Symbol.replace),e==="split"&&(v=Symbol.split);var i=m[v](r||"",e==="replace"?"":void 0);if(e==="replace"){if(l=i,l.length<d)break}else if((e==="split"||e==="match")&&(i||[]).length>n)if(a===!0)if(!l)l=i;else{var g;e==="match"?g=l.index>i.index:e==="split"&&(g=l[0].length>i[0].length),g&&(l=i)}else{l=i;break}}return e==="replace"?l||"":l||[]},R=function(p){return(p||"").trim()||""};x.loopRegexes=S;x.trimString=R;x.default={loopRegexes:S,trimString:R};var{loopRegexes:c,trimString:h}=x,E={421:"service_not_available","421 4.3.0":"temporary_system_problem","421 4.4.5":"server_busy","421 4.7.28":"ip_blocked_spam","432 4.7.12":"password_needed",450:"action_not_taken_mailbox_unavailable","450 4.2.1":"action_not_taken_mailbox_rate_limited","451 4.4.2":"timeout",451:"action_aborted_local_error","451 4.5.0":"smtp_protocol_violation_rfc_2821",452:"action_not_taken_insufficient_system_storage","452 4.2.2":"mailbox_over_quota",454:"smtp_protocol_violation_rfc_3207","454 4.5.0":"smtp_protocol_violation_rfc_3207","454 4.7.0":"authentication_issue",455:"server_unable_to_accommodate_parameters",500:"syntax_error",501:"syntax_error_parameters","501 5.5.2":"response_decode_error","501 5.5.4":"invalid_helo_ehlo",502:"command_not_implemented",503:"bad_commands_sequence","503 5.7.0":"no_identity_changes_permitted",504:"parameter_not_implemented","504 5.7.4":"unrecognized_authentication_type","530 5.5.1":"authentication_required",550:"action_not_taken","550 5.1.1":"no_such_recipient","550 5.2.1":"recipient_disabled_or_recipient_rate_limited","550 5.7.1":"spam_content","550 5.7.26":"authentication_failure",551:"user_not_local",552:"action_aborted_exceeded_storage_allocation","552 5.2.2":"mailbox_over_quota","552 5.2.3":"message_size_limit",553:"action_not_taken_mailbox_name_not_allowed","553 5.1.2":"no_such_recipient",554:"transaction_failed","554 5.7.1":"spam_content",555:"parameters_not_recognized","555 5.5.2":"syntax_error"},z={line_break_double:/(\n\n)/gm,carriage_return:/\r\n/gm,byte_order_mark:/\uFEFF/gm,trailing_non_breaking_space:/\u00A0$/gm,non_breaking_space:/\u00A0/gm,line_break_double_indent_single:/(\n\n\ {2})/gm,line_break_single_indent_double:/(\n\ {4})/gm,indent_long:/(\ {14,})/gm,separator:[/(The mail system)/m,/(The following address\(es\) failed\:)/m],command:[/\(in reply to end of ([A-Z\s]+) command\)$/m,/\(in reply to ([A-Z\s]+) command\)$/m,/timed out while sending ([A-Z\s]+)$/m,/error after ([A-Z\s]+)/i,/while sending end of ([a-z\s]+)/i],email_server:[/host (\S+)\[([\d\.]+)\](?:\:(\d+)\:)? (?:said|refused to talk)/m,/^(\S+) rejected your message/m,/\: connect to (.+)\[(.+)\](?:\:(\d+)\:)?/m,/Name service error for name\=(\S+)\s/m,/RCPT TO\:\<(.+?)\>/m,/Message rejected by\:\s+([\S\.]+?)$/m,/from (\S+) \[([\d\.]+)\](?:\:(\d+)\:)?/m,/conversation with (\S+)\[([\d\.]+)\](?:\:(\d+)\:)? timed out/m,/lost connection with (\S+)\[([\d\.]+)\](?:\:(\d+)\:)?/m,/Generating server: (\S+)(?:\[([\d\.]+)\])?(?:\:(\d+)\:)?/m],error:[/said\: (\d{3}(?:[\s\#\'\-]{1,2}\d\.\d\.\d{1,3})?) (.+) \(in reply to/,/said\: (\d{3}(?:[\s\#\'\-]{1,2}\d\.\d\.\d{1,3})?)-(.+)/,/(\d{3}\-\'\d\.\d\.\d{1,3}) (.+)/,/LMTP error after .+?\:\<.+?\>\: (\d{3}(?:[\s\#\'\-]{1,2}\d\.\d\.\d{1,3})?) <.+?\>(.+)$/m,/remote server returned \'(\d{3}(?:[\s\#\'\-]{1,2}\d\.\d\.\d{1,3})?) (.+)\'/i,/The response from the remote server was:\s(\d{3}(?:[\s\#\'\-]{1,2}\d\.\d\.\d{1,3})?) (.+)/,/refused to talk to me\: (\d{3}(?:[\s\#\'\-]{1,2}\d\.\d\.\d{1,3})?) (.+)/,/(?:error|reason)\:\s*?(\d{3}(?:[\s\#\'\-]{1,2}\d\.\d\.\d{1,3})?) (.+)/i,/(\d{3}[\s\#\'\-]{1,2}\d\.\d\.\d{1,3})/,/(\d{3}\-\'\d\.\d\.\d{1,3})/],error_lax:[/^(?:\<.+?\> \(expanded from \<.+?\>\)\:)(.+)/m,/^(?:\<.+?\>\:)(.+)/m],error_label_cleanup_recipient:[/^\<.+?\> \(expanded from \<.+?\>\)\:/m,/^\<.+?\>\:/m],error_label_cleanup_command:[/\(in reply to (?:end of)?[A-Z\s]+ command\)$/m],recipient:[/the following addresses had permanent fatal errors (?:.*?)\s\<(.+?)\>/i,/there was a temporary problem (?:while )?delivering your message to (.+?). Gmail will retry/i,/the following message to \<(.+?)\> was undeliverable/i,/to the following addresses:\s*(.+)/i,/^your message wasn't delivered to (.+?)\s/mi,/^your message to (.+?) couldn\'t/mi,/^(.+?)\s?(?:\s\(.*?\))?\n?\s*[\[|<]mailto\:(.+?)[\]|>]/mi,/^\<(.+?)\>:/m,/\<(.+?)\> \(expanded from \<.+?\>\)\:/,/\<(.+?)\>:/],temporary_safe:/(temporary|temporarily)/i,blocked:/((?:is listed)|blocked|block list|banned|denied|dnsbl)/i,spam:/(spam|unsolicited)/i,enhanced_types:{no_such_recipient:[/(recipient address rejected: access denied)/i,/(no such (?:account|user|mailbox|recipient))/i,/((?:terminated|disabled|inactive|not found|unavailable|invalid) (?:account|user|mailbox|recipient))/i,/(do(e)?sn\'t exist)/i,/(user (?:.+?) does not exist)/i,/((?:account|user|mailbox|recipient) (?:.+@.+ )?(?:is )?(?:terminated|disabled|inactive|not found|unavailable|invalid|rejected))/i],server_unknown:[/(does not accept mail)/i,/(domain (?:name\s+)?(?:\S+\s)?(?:not found|does not exist))/i,/(no route to host)/i],server_timeout:[/(timeout|timed[\s\-]out)/i],mailbox_full:[/(out of storage|(?:mailbox (?:is )?full)|(?:user (?:is )?over quota))/i],reputation:[/(rate limited due to IP reputation)/i,/(new or untrusted IP)/i]},error_code:[/(\d{3})[\s\#\'\-]{1,2}(\d\.\d\.\d{1,3})/,/(\d{3})/]};let F=class{constructor(){this.__regexes=this.__initRegexes(z)}parseBody(r){var e=r.replace(this.__regexes.carriage_return,`
`);e=e.replace(this.__regexes.byte_order_mark,""),e=e.replace(this.__regexes.trailing_non_breaking_space,""),e=e.replace(this.__regexes.non_breaking_space," ");var a=c(this.__regexes.separator,e,"split");if(a&&a.length>2){var l=h(a[0]+a[1]),n=h(a[2]);return this.__lineLengthRestricted(l,75)&&(l=this.__flattenText(l)),this.__lineLengthRestricted(n,80)&&(n=this.__flattenText(n)),e=l+`

`+n,{body:e,intro:l,error:n}}return{body:h(e)}}parseBounceData(r,e=null){var a=e||r;return{error:this.__parseBounceDataError(a),recipient:this.__parseBounceDataRecipient(a),server:this.__parseBounceDataEmailServer(a),command:this.__parseBounceDataCommand(a)}}__initRegexes(r){var e={};for(var a in r){var l=r[a];if(Array.isArray(l)){e[a]=[];for(var n=0;n<l.length;n++)e[a].push(l[n])}else typeof l=="object"&&Object.keys(l).length>0?e[a]=this.__initRegexes(l):e[a]=l}return e}__parseBounceDataError(r){var e={basic:null,enhanced:null},a=null,l=null,n=!1,d=!1,o=c(this.__regexes.error,r,"match",!1);if(o&&o.length>1&&(e=this.__parseErrorCode(o[1]),a=this.__cleanErrorLabel(o[2]),e.basic[0]==="4"?n=!0:e.basic[0]==="5"&&(d=!0),e.basic&&(l=E[e.basic]||null)),d===!0||n===!1&&d===!1){var o=this.__regexes.temporary_safe.exec(r);o&&o.length>1&&(n=!0,d=!1)}if(!a){var o=c(this.__regexes.error_lax,r);o&&o.length>1&&(a=this.__cleanErrorLabel(o[1]))}var m=this.__parseErrorData(r,e,a);return{code:e,label:a,type:l,temporary:n,permanent:d,data:m}}__parseErrorCode(r){var e=null,a=null,l=c(this.__regexes.error_code,r);return l&&l.length>1&&(e=l[1],a=l[2]||null),e==="511"&&(e="550",a="5.1.1"),{basic:e,enhanced:a}}__parseErrorData(r,e,a){var l=null,n=!1,d=!1;for(var o in this.__regexes.enhanced_types){var m=c(this.__regexes.enhanced_types[o],r);!l&&m&&m.length>1&&(l=o)}!l&&e.enhanced&&(l=E[`${e.basic} ${e.enhanced}`]||null);var v=this.__regexes.blocked.exec(r);v&&v.length>1&&(n=!0);var i=this.__regexes.spam.exec(r);return i&&i.length>1&&(d=!0),{type:l,blocked:n,spam:d}}__parseBounceDataRecipient(r){var e=null,a=c(this.__regexes.recipient,r);return a&&a.length>1&&(e=h(a[1])),e}__parseBounceDataEmailServer(r){var e=null,a=null,l=null,n=c(this.__regexes.email_server,r);return n&&n.length>1&&(e=this.__parseHostname(n[1]),a=n[2]||null,l=n[3]||null),{hostname:e,ip:a,port:l||null}}__parseHostname(r){return r.includes("@")?r.split("@")[1]:r}__parseBounceDataCommand(r){var e=null,a=c(this.__regexes.command,r);return a&&a.length>1&&(e=h(a[1]).toUpperCase()),e}__lineLengthRestricted(r,e){for(var a=r.split(`
`),l=0;l<a.length;l++){var n=a[l];if(n.length>e&&!n.includes("http"))return!1}return!0}__flattenText(r){var e=r;return e=e.replace(this.__regexes.line_break_single_indent_double," "),e=e.replace(this.__regexes.line_break_double_indent_single,`

`),e=e.replace(/(?<!\n)\n(?!\n)/gm," "),e=e.replace(this.__regexes.indent_long,`

`),e}__cleanErrorLabel(r=""){var e=this.__unquoteText(r);return e=h(e),e=c(this.__regexes.error_label_cleanup_recipient,e,"replace"),e=c(this.__regexes.error_label_cleanup_command,e,"replace"),e=h(e),e}__unquoteText(r=""){var e=r;return e=h(e),e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}};var G=F,W=G;class I{constructor(){this.parser=new W}read(r){if(!r)return{bounce:!1};var e=this.parser.parseBody(r),a=this.parser.parseBounceData(e.body,e.error);return{bounce:!0,email:{body:e.body,intro:e.intro||null,error:e.error||null},data:{error:a.error,recipient:a.recipient,server:a.server,command:a.command}}}}var V=I;const H=T(V),U={key:4},oe=C({__name:"bounce-parser",setup(p){const{t:r}=P(),e=A(""),a=L(()=>{try{return{email:new H().read(e.value)}}catch(l){return{parsingError:l.toString()}}});return(l,n)=>{const d=q,o=N,m=Z,v=O,i=D,g=$;return s(),w("div",null,[f(o,{title:t(r)("tools.bounce-parser.texts.title-input"),"mb-2":""},{default:b(()=>[f(d,{value:t(e),"onUpdate:value":n[0]||(n[0]=B=>j(e)?e.value=B:null),label:t(r)("tools.bounce-parser.texts.label-bounce-email-textual-content"),multiline:"",placeholder:t(r)("tools.bounce-parser.texts.placeholder-put-your-email-text-content-here"),rows:"15","mb-2":""},null,8,["value","label","placeholder"])]),_:1},8,["title"]),t(a)&&t(e)?(s(),u(o,{key:0,title:t(r)("tools.bounce-parser.texts.title-output"),"mb-2":""},{default:b(()=>[t(a).email?.email?.error?(s(),u(m,{key:0,style:{color:"green"},"mb-2":""},{default:b(()=>[y(k(t(r)("tools.bounce-parser.texts.tag-this-mail-is-a-bounce-email")),1)]),_:1})):_("",!0),t(a).email?.email?.error?_("",!0):(s(),u(m,{key:1,style:{color:"red"},"mb-2":""},{default:b(()=>[y(k(t(r)("tools.bounce-parser.texts.tag-this-mail-is-not-a-bounce-email")),1)]),_:1})),t(a).parsingError?(s(),u(v,{key:2,"mb-2":""},{default:b(()=>[y(k(t(a).parsingError),1)]),_:1})):_("",!0),t(a).email?.data?.recipient?(s(),u(i,{key:3,label:t(r)("tools.bounce-parser.texts.label-recipient"),value:t(a).email?.data?.recipient,"mb-2":""},null,8,["label","value"])):_("",!0),t(a).email?.email?.error?(s(),w("div",U,[f(o,{title:t(r)("tools.bounce-parser.texts.title-error"),"mb-2":""},{default:b(()=>[t(a).email?.data?.command?(s(),u(i,{key:0,label:t(r)("tools.bounce-parser.texts.label-command"),value:t(a).email?.data?.command},null,8,["label","value"])):_("",!0),t(a).email?.data?.error?.code?.basic||t(a).email?.data?.error?.code?.enhanced?(s(),u(i,{key:1,label:t(r)("tools.bounce-parser.texts.label-code"),value:`${t(a).email?.data?.error?.code?.basic}/${t(a).email?.data?.error?.code?.enhanced}`},null,8,["label","value"])):_("",!0),t(a).email?.data?.error?.label?(s(),u(i,{key:2,label:t(r)("tools.bounce-parser.texts.label-label"),value:t(a).email?.data?.error?.label},null,8,["label","value"])):_("",!0),t(a).email?.data?.error?.type?(s(),u(i,{key:3,label:t(r)("tools.bounce-parser.texts.label-type"),value:t(a).email?.data?.error?.type},null,8,["label","value"])):_("",!0),t(a).email?.data?.error?.temporary?(s(),u(i,{key:4,label:t(r)("tools.bounce-parser.texts.label-temporary"),value:t(a).email?.data?.error?.temporary},null,8,["label","value"])):_("",!0),t(a).email?.data?.error?.permanent?(s(),u(i,{key:5,label:t(r)("tools.bounce-parser.texts.label-permanent"),value:t(a).email?.data?.error?.permanent},null,8,["label","value"])):_("",!0),t(a).email?.data?.error?.data?.type?(s(),u(i,{key:6,label:t(r)("tools.bounce-parser.texts.label-subtype"),value:t(a).email?.data?.error?.data?.type},null,8,["label","value"])):_("",!0),t(a).email?.data?.error?.data?.blocked?(s(),u(i,{key:7,label:t(r)("tools.bounce-parser.texts.label-blocked"),value:t(a).email?.data?.error?.data?.blocked},null,8,["label","value"])):_("",!0),t(a).email?.data?.error?.data?.spam?(s(),u(i,{key:8,label:t(r)("tools.bounce-parser.texts.label-spam"),value:t(a).email?.data?.error?.data?.spam},null,8,["label","value"])):_("",!0)]),_:1},8,["title"]),t(a).email?.data?.server?.hostname||t(a).email?.data?.server?.ip?(s(),u(o,{key:0,title:t(r)("tools.bounce-parser.texts.title-server"),"mb-2":""},{default:b(()=>[t(a).email?.data?.server?.hostname?(s(),u(i,{key:0,label:t(r)("tools.bounce-parser.texts.label-host"),value:t(a).email?.data?.server?.hostname},null,8,["label","value"])):_("",!0),t(a).email?.data?.server?.ip?(s(),u(i,{key:1,label:t(r)("tools.bounce-parser.texts.label-ip"),value:t(a).email?.data?.server?.ip},null,8,["label","value"])):_("",!0),t(a).email?.data?.server?.port?(s(),u(i,{key:2,label:t(r)("tools.bounce-parser.texts.label-port"),value:t(a).email?.data?.server?.port},null,8,["label","value"])):_("",!0)]),_:1},8,["title"])):_("",!0),f(o,{title:t(r)("tools.bounce-parser.texts.title-details"),"mb-2":""},{default:b(()=>[f(g,{value:JSON.stringify(t(a).email?.data,null,2)},null,8,["value"])]),_:1},8,["title"]),f(o,{title:t(r)("tools.bounce-parser.texts.title-raw-error"),"mb-2":""},{default:b(()=>[f(g,{value:t(a).email?.email?.error,"word-wrap":""},null,8,["value"])]),_:1},8,["title"])])):_("",!0)]),_:1},8,["title"])):_("",!0)])}}});export{oe as default};
