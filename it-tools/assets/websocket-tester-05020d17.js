import{p as x,Q as g,b as G,d as O,a0 as R,ac as j,r as h,o as k,c as _,k as d,w as b,l as o,m as y,a6 as B,G as S,ad as N,j as U,a as $,a7 as q,a8 as D,x as Q,s as z,af as A}from"./index-0c1fde36.js";var E={exports:{}},W,V;function I(){return V||(V=1,W=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),W}(function(C,l){(function(c,a){C.exports=a(I())})(g,function(c){function a(){return typeof window<"u"&&window.document!==void 0}function r(e){let t=Object.prototype.toString.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"}return function(e){let t=null;e.url||(e.url="ws://localhost:8080"),e.token||(e.token="*");let w,m=function(){let s=a(),f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;return s=s||f,{isBrowser:s,isWebWorker:f,isNode:typeof x<"u"&&x.versions!=null&&x.versions.node!=null}}().isBrowser;w=m?(typeof self<"u"?self:a()?window:typeof g<"u"?g:null).WebSocket:c;try{t=new w(e.url+"/?token="+e.token)}catch{t=null}if(t===null)return{error:"can not new MixWS"};function v(){r(e.open)&&e.open()}function i(){r(e.close)&&e.close()}function n(s){r(e.message)&&e.message(s)}function p(s){r(e.error)&&e.error(s),t.close()}return m?(t.onopen=v,t.onmessage=function(s){n(s.data)},t.onclose=i,t.onerror=p):(t.on("open",v),t.on("message",n),t.on("close",i),t.on("error",p)),t}})})(E);var J=E.exports;const L=G(J),M={key:0,"mt-5":"",flex:"","justify-center":""},P={"mt-5":"",flex:"","justify-center":""},H=O({__name:"websocket-tester",setup(C){const{t:l}=R(),c=j({name:"url",storageName:"ws-tester:url",defaultValue:"ws://host:port"}),a=j({name:"token",storageName:"ws-tester:token",defaultValue:"*"}),r=h([]),e=h(""),t=h(!1);let w;function m(){r.value.push(`Sent: ${e.value}`),w.send(e.value)}function v(){w=new L({url:c.value,token:a.value,open(){r.value.push("WebSocket Connection opened"),t.value=!0},close(){t.value=!1,r.value.push("WebSocket Connection closed")},message(i){r.value.push(`Received: ${JSON.stringify(i)}`)},error(i){r.value.push(`Error: ${i}`)}})}return(i,n)=>{const p=Q,s=z,f=A;return k(),_("div",null,[d(f,{title:o(l)("tools.websocket-tester.texts.title-connection")},{default:b(()=>[d(p,{value:o(c),"onUpdate:value":n[0]||(n[0]=u=>y(c)?c.value=u:null),placeholder:o(l)("tools.websocket-tester.texts.placeholder-enter-url-of-websocket-server-here"),label:o(l)("tools.websocket-tester.texts.label-url"),"raw-text":""},null,8,["value","placeholder","label"]),d(p,{value:o(a),"onUpdate:value":n[1]||(n[1]=u=>y(a)?a.value=u:null),placeholder:o(l)("tools.websocket-tester.texts.placeholder-enter-token-here"),label:o(l)("tools.websocket-tester.texts.label-token"),"raw-text":""},null,8,["value","placeholder","label"]),o(t)?N("",!0):(k(),_("div",M,[d(s,{onClick:n[2]||(n[2]=u=>v())},{default:b(()=>[B(S(o(l)("tools.websocket-tester.texts.tag-connect")),1)]),_:1})]))]),_:1},8,["title"]),o(t)?(k(),U(f,{key:0,title:o(l)("tools.websocket-tester.texts.title-send")},{default:b(()=>[d(p,{value:o(e),"onUpdate:value":n[3]||(n[3]=u=>y(e)?e.value=u:null),placeholder:o(l)("tools.websocket-tester.texts.placeholder-enter-message-to-send-here"),label:o(l)("tools.websocket-tester.texts.label-message"),rows:"5",autosize:"","raw-text":"",multiline:"",monospace:""},null,8,["value","placeholder","label"]),$("div",P,[d(s,{onClick:n[4]||(n[4]=u=>m())},{default:b(()=>[B(S(o(l)("tools.websocket-tester.texts.tag-send")),1)]),_:1})])]),_:1},8,["title"])):N("",!0),d(f,{title:o(l)("tools.websocket-tester.texts.title-logs")},{default:b(()=>[$("ul",null,[(k(!0),_(q,null,D(o(r),(u,F)=>(k(),_("li",{key:F},S(u),1))),128))])]),_:1},8,["title"])])}}});export{H as default};
