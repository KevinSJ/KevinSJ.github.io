import{b as U,d as N,a0 as X,am as y,i as E,o as F,c as q,k as f,w as g,l as d,m as C,a6 as S,G as A,x as R,a$ as W,af as Z}from"./index-0c1fde36.js";import{p as V}from"./parse-017b5de8.js";import{_ as k}from"./TextareaCopyable-59231e95.js";import{_ as L}from"./Divider-5fc425b0.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";const M=e=>typeof e<"u"&&e.replace(/[\s-_=]/g,"")!==""&&e.length===e.replace(/[-_\w:.]+\(\)\s*=|=\s*[-_\w:.]+\(\)|\sor\s|\sand\s|\[(?:[^\/\]]+[\/\[]\/?.+)+\]|starts-with\(|\[.*last\(\)\s*[-\+<>=].+\]|number\(\)|not\(|count\(|text\(|first\(|normalize-space|[^\/]following-sibling|concat\(|descendant::|parent::|self::|child::|/gi,"").length,B=()=>{let e=`(?P<node>(^id\\(["\\']?(?P<idvalue>%(value)s)["\\']?\\)|(?P<nav>//?(?:following-sibling::)?)(?P<tag>%(tag)s)(\\[((?P<matched>(?P<mattr>@?%(attribute)s=["\\'](?P<mvalue>%(value)s))["\\']|(?P<contained>contains\\((?P<cattr>@?%(attribute)s,\\s*["\\'](?P<cvalue>%(value)s)["\\']\\)))\\])?(\\[\\s*(?P<nth>\\d+|last\\(\\s*\\))\\s*\\])?))`;const t={tag:"([a-zA-Z][a-zA-Z0-9:-]*|\\*)",attribute:"[.a-zA-Z_:][-\\w:.]*(\\(\\))?)",value:"\\s*[\\w/:][-/\\w\\s,:;.]*"};return Object.keys(t).forEach(s=>{e=e.replace(new RegExp("%\\("+s+"\\)s","gi"),t[s])}),e=e.replace(/\?P<node>|\?P<idvalue>|\?P<nav>|\?P<tag>|\?P<matched>|\?P<mattr>|\?P<mvalue>|\?P<contained>|\?P<cattr>|\?P<cvalue>|\?P<nth>/gi,""),new RegExp(e,"gi")},D=e=>e.replace(/contains\s*\(\s*concat\(["']\s+["']\s*,\s*@class\s*,\s*["']\s+["']\)\s*,\s*["']\s+([a-zA-Z0-9-_]+)\s+["']\)/gi,'@class="$1"'),G=e=>{if(!e)throw new Error("Missing XPath expression");if(e=D(e),!M(e))throw new Error("Invalid or unsupported XPath: "+e);const t=e.split("|"),s=B(),r=[];let i=0;for(;t[i];){const n=[];let l=0,o;for(;o=s.exec(t[i]);){let c;if(!o&&l===0)throw new Error("Invalid or unsupported XPath: "+e);const a={node:o[5],idvalue:o[12]||o[3],nav:o[4],tag:o[5],matched:o[7],mattr:o[10]||o[14],mvalue:o[12]||o[16],contained:o[13],cattr:o[14],cvalue:o[16],nth:o[18]};let p="";l!=0&&a.nav&&(~a.nav.indexOf("following-sibling::")?p=" + ":p=a.nav=="//"?" ":" > ");const h=a.tag==="*"?"":a.tag||"";if(a.contained)if(a.cattr.indexOf("@")===0)c="["+a.cattr.replace(/^@/,"")+'*="'+a.cvalue+'"]';else throw new Error("Invalid or unsupported XPath attribute: "+a.cattr);else if(a.matched)switch(a.mattr){case"@id":c="#"+a.mvalue.replace(/^\s+|\s+$/,"").replace(/\s/g,"#");break;case"@class":c="."+a.mvalue.replace(/^\s+|\s+$/,"").replace(/\s/g,".");break;case"text()":case".":throw new Error("Invalid or unsupported XPath attribute: "+a.mattr);default:if(a.mattr.indexOf("@")!==0)throw new Error("Invalid or unsupported XPath attribute: "+a.mattr);a.mvalue.indexOf(" ")!==-1&&(a.mvalue='"'+a.mvalue.replace(/^\s+|\s+$/,"")+'"'),c="["+a.mattr.replace("@","")+'="'+a.mvalue+'"]';break}else a.idvalue?c="#"+a.idvalue.replace(/\s/,"#"):c="";let m="";if(a.nth)if(a.nth.indexOf("last")===-1){if(isNaN(parseInt(a.nth,10)))throw new Error("Invalid or unsupported XPath attribute: "+a.nth);m=parseInt(a.nth,10)!==1?":nth-of-type("+a.nth+")":":first-of-type"}else m=":last-of-type";n.push(p+h+c+m),l++}const u=n.join("");if(u==="")throw new Error("Invalid or unsupported XPath");r.push(u),i++}return r.join(", ")};var Q=G;const H=U(Q);function z(e,t){const s=V(T(e,t)),r={first:"first-child",last:"last-child",child:"nth-child",contains:"text-contains"};for(const i of s)for(const n of i)n.type==="pseudo"&&r[n.name]&&(n.name=r[n.name]);return s}function b(e){const{type:t,name:s}=e;return e[`is${v(t)}`]=!0,s&&(e[`is${v(t)}${s.split(/-/g).map(v).join("")}`]=!0),e.isSiblingAxis=/^(sibling|adjacent)$/.test(t),e.isNonSiblingAxis=/^(descendant|child)$/.test(t),e.isAxis=e.isSiblingAxis||e.isNonSiblingAxis,e.isTagOrUniversal=/^(tag|universal)$/.test(t),e}function O(e){const t=e.toLowerCase().replace(/[^a-z\u0161\u017E\u0153\u00E0-\u00FF\u03AC-\u03CE]/g,"").split("").filter(j).join("");return{az:t,AZ:t.toUpperCase()}}function j(e,t,s){return s.indexOf(e)===t}function T(e,t){const s=t?Object.keys(t):[];if(!s.length)return e;let{string:r,restore:i}=K(e);const n=s.filter(u=>!u.startsWith("/")),l=String.raw`(?:\((?<data>[^)]+)\)|(?![\w-]))`;if(n.length){const u=new RegExp(`:(${n.join("|")})${l}`,"g");r=r.replace(u,(c,a,p)=>{const h=t[a],m=typeof h=="function";p=typeof p=="string"?p.trim():void 0;let P=[];return p&&(P=(m&&h.length>1?p.split(/\s*,\s*/):[p]).map(i)),m?h(...P):h})}const o=s.filter(u=>u.startsWith("/")).map(u=>{const c=u.slice(1,u.lastIndexOf("/"));if(!/^[a-z]/.test(c))throw new SyntaxError("Custom pesudo regexes must begin with [a-z] and not use anchors (^$)");const a=t[u];if(typeof a!="function")throw new SyntaxError("Custom pesudo regexes must have a function handler");return{pattern:new RegExp(`:(${c})${l}`,"g"),handler:a}});for(const u of o)r=r.replace(u.pattern,(...c)=>{const a={},p=c.pop(),{data:h}=p;return delete p.data,Object.assign(a,p),c.shift(),c.pop(),c.pop(),c.pop(),Object.assign(a,c),u.handler(h,a)});return i(r)}function J(e){const t="'",s='"',r=/^["']|["']$/g;return(e.startsWith(t)&&e.endsWith(t)||e.startsWith(s)&&e.endsWith(s))&&(e=e.replace(r,"")),`"${e.replaceAll('"',"&quot;")}"`}function K(e){const t=[];return{literals:t,string:e.replace(/(["'])(?:\\\1|.)*?\1/g,s=>`__S${t.push(s)-1}__`),restore:s=>s.replace(/__S(\d+)__/g,(...r)=>t[r[1]])}}function v(e){return e.replace(/^\w/,t=>t.toUpperCase())}function $(e,{pseudos:t}={}){const s=z(e,t),r=[];for(const i of s){for(const l of i)b(l);i[0].isPseudoRoot?(i.shift(),i.unshift({type:"root"})):i.unshift({type:"descendant"}),b(i[0]);let n;for(const l of i)if(l.isTag?n=l.name:l.isAxis?n=null:n&&(l.tagContext=n),l.isPseudo&&l.name.endsWith("-of-type")&&!l.tagContext)throw new SyntaxError("*-of-type pseudos require a tag context");r.push(Y(i))}return r.length>1?`(${r.join("|")})`:r[0]}$.subExpression=I;$.applyCustomPsuedos=T;$.quotedString=J;function I(e,{pseudos:t}={}){const s=z(e,t).map(r=>r.map(i=>b(i)).filter(i=>i.isPseudo||i.isAttribute||i.isTag));return _(s,{operator:"or"})}function Y(e){let t=[],s=[];const r=()=>{const i=w(s);i&&t.push(`[${i}]`),s=[]};for(let i=0;i<e.length;i++){const n=e[i],l=i>0?e[i-1]:{};if(l.isNonSiblingAxis&&!n.isTagOrUniversal&&!n.isPseudoComment&&t.push("*"),n.isSiblingAxis){r();continue}if(l.isAdjacent){if(t.push("/following-sibling::*"),n.isTag&&s.push(...x(n)),s.push("position() = 1"),n.isTagOrUniversal)continue}else if(l.isSibling){const o=n.isTag?n.name:"*";if(t.push(`/following-sibling::${o}`),n.isTagOrUniversal)continue}switch(n.type){case"root":t=["/*"];break;case"descendant":r(),t.push("//");break;case"child":r(),t.push("/");break;case"universal":r(),t.push("*");break;case"tag":r(),t.push(n.name);break;default:{const{data:o}=n;if(n.isPseudoNot)s.push(`not(${_(o,{operator:"or"})})`);else if(n.isPseudoAny)s.push(I(o));else if(n.isPseudoComment)l.isAxis||(r(),t.push("/")),t.push("comment()"+(o?`[${o}]`:""));else if(n.isPseudoNthChild||n.isPseudoFirstChild||n.isPseudoLastChild||n.isPseudoOnlyChild){const u=x(n);n.tagContext&&(t.splice(-1,1,"*"),u.unshift(`name() = '${n.tagContext}'`)),s.push(...u)}else s.push(...x(n));break}}}return r(),t.join("")}function _(e,t={}){const s=[];return e.forEach(r=>{const i=[];r.forEach(n=>{i.push(...x(b(n)))}),s.push(w(i))}),w(s,t)}function x(e){const t=[];let{name:s,value:r,action:i,data:n}=e;if(e.isTag){const{az:l,AZ:o}=O(s);t.push(`translate(name(), '${l}', '${o}') = '${s.toUpperCase()}'`)}else if(e.isAttribute)switch(i){case"exists":t.push(`@${s}`);break;case"element":t.push(`@${s}`),t.push(`contains(concat(' ', normalize-space(@${s}), ' '), ' ${r} ')`);break;case"any":t.push(`@${s}`),t.push(`contains(@${s}, '${r}')`);break;case"start":t.push(`@${s}`),t.push(`starts-with(@${s}, '${r}')`);break;case"end":t.push(`@${s}`),t.push(`substring(@${s}, string-length(@${s})-${r.length-1}) = '${r}'`);break;case"hyphen":t.push(`@${s}`),t.push(`(@${s} = '${r}' or starts-with(@${s}, '${r}-')`);break;case"not":t.push(`not(@${s}) or @${s} != '${r}'`);break;case"equals":t.push(`@${s} = '${r}'`);break;default:throw new SyntaxError(`Unsupported attribute selector @${s} (action: ${i}).`)}else if(e.isPseudo)switch(s){case"empty":t.push("not(*) and not(string-length())");break;case"childless":t.push("not(*) and not(string-length(normalize-space()))");break;case"first-child":case"first-of-type":t.push("position() = 1");break;case"last-child":case"last-of-type":t.push("position() = last()");break;case"not":t.push(`not(${_(n,{operator:"or"})})`);break;case"nth-child":case"nth-of-type":{const l={odd:"2n+1",even:"2n"};if(l[n]&&(n=l[n]),/^\d+$/.test(n)){t.push(`position() = ${n}`);break}const o=/^([-+])?(\d+)?n(?:\+(\d+))?$/.exec(n);if(o){let[,u,c=0,a=0]=o;typeof c=="string"&&(c=parseInt(c,10));const p=u==="-";p&&(c*=-1);const h=[],m="position()"+(a?` - ${a}`:"");h.push(m),h.push(p?"<=":">="),h.push(0),(c<0||c>1)&&h.push(`and (${m}) mod ${c} = 0`),t.push(h.join(" "));break}throw new SyntaxError(`Unrecognized nth-expression '${n}'.`)}case"only-child":t.push("last() = 1");break;case"text":case"text-case":case"text-contains":case"text-contains-case":case"text-start":case"text-start-case":case"text-end":case"text-end-case":{let l="normalize-space()",o=n.trim();if(!/case/.test(s)){const{az:p,AZ:h}=O(o);l=p?`translate(normalize-space(), '${h}', '${p}')`:"normalize-space()",o=o.toLowerCase()}const u=/^(['"])([\s\S]*)\1$/.exec(o),c=u?u[1]:'"';u&&(o=u[2].trim()),o=`${c}${o.replace(/\s+/g," ")}${c}`;let a=`${l} = ${o}`;/contains/.test(s)?a=`contains(${l}, ${o})`:/^text-start/.test(s)?a=`starts-with(${l}, ${o})`:/^text-end/.test(s)&&(a=`substring(${l}, string-length(${l})-${o.length-3}) = ${o}`),t.push(a);break}default:throw new SyntaxError(`Unsupported pseudo selector '${e.name}'.`)}else throw new SyntaxError(`Unsupported token type '${e.type}'.`);return t}function w(e,{operator:t="and"}={}){return e.map(s=>e.length>1&&/[=<>]|\b(and|or)\b/i.test(s)?`(${s})`:s).filter(j).join(` ${t} `)}const tt={"max-w-600":""},ht=N({__name:"css-xpath-converter",setup(e){const{t}=X(),s=y({tool:"css-xpath-conv",name:"css",defaultValue:""}),r=E(()=>{try{return $(s.value)}catch(l){return l.toString()}}),i=y({tool:"css-xpath-conv",name:"xpath",defaultValue:""}),n=E(()=>{try{return H(i.value)}catch(l){return l.toString()}});return(l,o)=>{const u=R,c=W,a=L,p=Z;return F(),q("div",tt,[f(p,{title:d(t)("tools.css-xpath-converter.texts.title-css-to-xpath")},{default:g(()=>[f(u,{value:d(s),"onUpdate:value":o[0]||(o[0]=h=>C(s)?s.value=h:null),placeholder:d(t)("tools.css-xpath-converter.texts.placeholder-put-your-css-selector-here"),label:d(t)("tools.css-xpath-converter.texts.label-css-selector-to-convert"),"raw-text":"","mb-5":""},null,8,["value","placeholder","label"]),f(c,{target:"_blank",to:"/css-selectors-memo","mb-1":"","mt-1":""},{default:g(()=>[S(A(d(t)("tools.css-xpath-converter.texts.tag-see-css-selectors-cheatsheet")),1)]),_:1}),f(a),f(k,{label:d(t)("tools.css-xpath-converter.texts.label-xpath-expression"),value:d(r),readonly:"","mb-5":""},null,8,["label","value"])]),_:1},8,["title"]),f(p,{title:d(t)("tools.css-xpath-converter.texts.title-xpath-to-css"),"mt-5":""},{default:g(()=>[f(u,{value:d(i),"onUpdate:value":o[1]||(o[1]=h=>C(i)?i.value=h:null),placeholder:d(t)("tools.css-xpath-converter.texts.placeholder-put-your-xpath-expression-here"),label:d(t)("tools.css-xpath-converter.texts.label-xpath-expression-to-convert"),"raw-text":"","mb-5":""},null,8,["value","placeholder","label"]),f(c,{target:"_blank",to:"/xpath-memo","mb-1":"","mt-1":""},{default:g(()=>[S(A(d(t)("tools.css-xpath-converter.texts.tag-see-xpath-cheatsheet")),1)]),_:1}),f(a),f(k,{label:d(t)("tools.css-xpath-converter.texts.label-css-selector"),value:d(n),readonly:"","mb-5":""},null,8,["label","value"])]),_:1},8,["title"])])}}});export{ht as default};
