import{c as h,i as v}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{G as I,a as f,b as u,P as D,h as E,f as b,e as F,d as C}from"./main-CdZmBCMR.js";import"./mobileMenu-BoMunYmR.js";I.workerSrc=new URL("/itools/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();const o={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();function y(){h({icons:v});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),n=document.getElementById("back-to-tools"),s=document.getElementById("process-btn");t&&(t.addEventListener("change",k),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",a=>{a.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",a=>{a.preventDefault(),e.classList.remove("border-indigo-500"),a.dataTransfer?.files.length&&P(a.dataTransfer.files)})),n&&n.addEventListener("click",()=>{window.location.href="/itools/"}),s&&s.addEventListener("click",A)}function k(t){const e=t.target;e.files?.length&&P(e.files)}async function P(t){const e=t[0];if(!e||e.type!=="application/pdf"){f("Invalid File","Please upload a valid PDF file.");return}u("Loading PDF...");try{const n=await e.arrayBuffer();o.pdfDoc=await D.load(n),o.file=e,S(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(n){console.error(n),f("Error","Failed to load PDF file.")}finally{E()}}function S(){const t=document.getElementById("file-display-area");if(!t||!o.file||!o.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const n=document.createElement("div");n.className="flex flex-col flex-1 min-w-0";const s=document.createElement("div");s.className="truncate font-medium text-gray-200 text-sm mb-1",s.textContent=o.file.name;const a=document.createElement("div");a.className="text-xs text-gray-400",a.textContent=`${b(o.file.size)} â€¢ ${o.pdfDoc.getPageCount()} pages`,n.append(s,a);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=L,e.append(n,r),t.appendChild(e),h({icons:v})}function L(){o.file=null,o.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function A(){if(!o.pdfDoc||!o.file){f("Error","Please upload a PDF file first.");return}u("Inverting PDF colors...");try{const t=await D.create(),e=await o.pdfDoc.save(),n=await F({data:e}).promise;for(let a=1;a<=n.numPages;a++){u(`Processing page ${a} of ${n.numPages}...`);const r=await n.getPage(a),m=r.getViewport({scale:1.5}),d=document.createElement("canvas");d.width=m.width,d.height=m.height;const p=d.getContext("2d");await r.render({canvasContext:p,viewport:m,canvas:d}).promise;const w=p.getImageData(0,0,d.width,d.height),l=w.data;for(let i=0;i<l.length;i+=4)l[i]=255-l[i],l[i+1]=255-l[i+1],l[i+2]=255-l[i+2];p.putImageData(w,0,0);const B=await new Promise(i=>d.toBlob(x=>{const g=new FileReader;g.onload=()=>i(new Uint8Array(g.result)),g.readAsArrayBuffer(x)},"image/png")),c=await t.embedPng(B);t.addPage([c.width,c.height]).drawImage(c,{x:0,y:0,width:c.width,height:c.height})}const s=await t.save();C(new Blob([new Uint8Array(s)],{type:"application/pdf"}),"inverted.pdf"),f("Success","Colors inverted successfully!","success",()=>{L()})}catch(t){console.error(t),f("Error","Could not invert PDF colors.")}finally{E()}}
