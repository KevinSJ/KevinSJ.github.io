import{d as L,a0 as j,r as b,ac as N,i as _,o as v,c as x,k as t,w as l,a as k,l as e,m as p,a7 as G,a8 as M,ad as Q,a6 as V,G as f,a_ as q,ae as H,ak as J,s as K}from"./index-0c1fde36.js";import{_ as W}from"./c-monaco-editor.vue_vue_type_script_setup_true_lang-735b1924.js";import{C as c}from"./composeverter-a96e10c8.js";import{u as X}from"./downloadBase64-508288e2.js";import{t as Y}from"./base64-23b41491.js";import{_ as Z}from"./TextareaCopyable-59231e95.js";import{N as ee}from"./Alert-a9fb131b.js";import{_ as oe}from"./Divider-5fc425b0.js";import{_ as te,a as ne}from"./Grid-1acaa06e.js";import{_ as ae}from"./FormItem-1b9a5952.js";import{_ as re}from"./Checkbox-ba7202eb.js";import"./editor.main-9e6d3164.js";import"./index-a6f01dde.js";import"./index-2709bfd9.js";import"./index-84e3bf78.js";import"./public-api-a830925a.js";import"./ajv-53acda87.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./base64-ae7cf34b.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./get-slot-1efb97e5.js";import"./context-00991937.js";const se={relative:"","w-full":""},le={key:0},ce={class:"mb-6 flex flex-row items-center gap-2"},me={"mt-5":"",flex:"","justify-center":""},Pe=L({__name:"docker-compose-converter",setup(pe){const{t:n}=j(),r=b(`nginx:
    ports:
        - '80:80'
    volumes:
        - '/var/run/docker.sock:/tmp/docker.sock:ro'
    image: nginx`),i=N({name:"indent",storageName:"docker-compose-converter:indent-size",defaultValue:4}),u=b(!1),d=b(!1),m=N({name:"conv",storageName:"docker-compose-converter:conversion",defaultValue:"latest"}),O=[{value:"v1ToV2x",label:n("tools.docker-compose-converter.texts.label-v1-to-v2-2-x")},{value:"v1ToV3x",label:n("tools.docker-compose-converter.texts.label-v1-to-v2-3-x")},{value:"v2xToV3x",label:n("tools.docker-compose-converter.texts.label-v2-2-x-to-3-x")},{value:"v3xToV2x",label:n("tools.docker-compose-converter.texts.label-v2-3-x-to-2-x")},{value:"latest",label:n("tools.docker-compose-converter.texts.label-to-commonspec")}],y=_(()=>{try{let s="";const o={expandPorts:d.value,expandVolumes:u.value,indent:i.value};switch(m.value){case"latest":s=c.migrateToCommonSpec(r.value,o);break;case"v1ToV2x":s=c.migrateFromV1ToV2x(r.value,o);break;case"v1ToV3x":s=c.migrateFromV2xToV3x(c.migrateFromV1ToV2x(r.value),o);break;case"v2xToV3x":s=c.migrateFromV2xToV3x(r.value,o);break;case"v3xToV2x":s=c.migrateFromV3xToV2x(r.value,o);break;default:throw new Error(`Unknown conversion '${m}'`)}return{yaml:s,errors:[]}}catch(s){return{yaml:"#see error messages",errors:s.toString().split(`
`)}}}),T=_(()=>y.value.yaml),h=_(()=>y.value.errors),F=_(()=>`data:application/yaml;base64,${Y(T.value)}`),{download:$}=X({source:F,filename:"docker-compose.yml"}),B={automaticLayout:!0,formatOnType:!0,formatOnPaste:!0};return(s,o)=>{const D=W,S=q,U=ee,g=oe,P=H,w=te,z=J,E=ae,I=ne,C=re,R=K;return v(),x("div",null,[t(S,{label:e(n)("tools.docker-compose-converter.texts.label-paste-your-existing-docker-compose")},{default:l(()=>[k("div",se,[t(D,{value:e(r),"onUpdate:value":o[0]||(o[0]=a=>p(r)?r.value=a:null),theme:"vs-dark",language:"yaml",height:"200px",options:B},null,8,["value"])])]),_:1},8,["label"]),e(h).length>0?(v(),x("div",le,[t(U,{title:e(n)("tools.docker-compose-converter.texts.title-the-following-errors-occured"),type:"error","mt-5":""},{default:l(()=>[k("ul",null,[(v(!0),x(G,null,M(e(h),(a,A)=>(v(),x("li",{key:A},f(a),1))),128))])]),_:1},8,["title"])])):Q("",!0),t(g),t(I,{cols:"4","x-gap":"12","w-full":""},{default:l(()=>[t(w,{span:"2"},{default:l(()=>[t(P,{value:e(m),"onUpdate:value":o[1]||(o[1]=a=>p(m)?m.value=a:null),"label-position":"top",label:e(n)("tools.docker-compose-converter.texts.label-docker-compose-conversion"),options:O,placeholder:e(n)("tools.docker-compose-converter.texts.placeholder-select-docker-compose-conversion")},null,8,["value","label","placeholder"])]),_:1}),t(w,{span:"2"},{default:l(()=>[t(E,{label:e(n)("tools.docker-compose-converter.texts.label-indent-size"),"label-placement":"top","label-width":"100","show-feedback":!1},{default:l(()=>[t(z,{value:e(i),"onUpdate:value":o[2]||(o[2]=a=>p(i)?i.value=a:null),min:"0",max:"10","w-100px":""},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(g),k("div",ce,[t(C,{checked:e(d),"onUpdate:checked":o[3]||(o[3]=a=>p(d)?d.value=a:null)},{default:l(()=>[V(f(e(n)("tools.docker-compose-converter.texts.tag-expand-ports")),1)]),_:1},8,["checked"]),t(C,{checked:e(u),"onUpdate:checked":o[4]||(o[4]=a=>p(u)?u.value=a:null)},{default:l(()=>[V(f(e(n)("tools.docker-compose-converter.texts.tag-expand-volumes")),1)]),_:1},8,["checked"])]),t(g),t(Z,{value:e(T),language:"yaml"},null,8,["value"]),k("div",me,[t(R,{disabled:e(r)==="",secondary:"",onClick:e($)},{default:l(()=>[V(f(e(n)("tools.docker-compose-converter.texts.tag-download-converted-docker-compose-yml")),1)]),_:1},8,["disabled","onClick"])])])}}});export{Pe as default};
