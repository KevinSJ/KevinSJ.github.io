import{d as y,h as D,an as T,ao as b,aq as k,au as X,u as P,aU as Y,i as Z,ay as tt,a0 as et,r as w,b0 as nt,o as rt,j as at,w as f,k as p,a6 as v,G as x,l as c,m as st,x as ot,af as it}from"./index-0c1fde36.js";const lt=y({name:"Li",render(){return D("li",null,this.$slots)}}),S=T("li",{transition:"color .3s var(--n-bezier)",lineHeight:"var(--n-line-height)",margin:"var(--n-li-margin)",marginBottom:0,color:"var(--n-text-color)"}),$=[T("&:first-child",`
 margin-top: 0;
 `),T("&:last-child",`
 margin-bottom: 0;
 `)],ut=T([b("ol",{fontSize:"var(--n-font-size)",padding:"var(--n-ol-padding)"},[k("align-text",{paddingLeft:0}),S,$]),b("ul",{fontSize:"var(--n-font-size)",padding:"var(--n-ul-padding)"},[k("align-text",{paddingLeft:0}),S,$])]),ct=Object.assign(Object.assign({},P.props),{alignText:Boolean}),dt=y({name:"Ul",props:ct,setup(t){const{mergedClsPrefixRef:e,inlineThemeDisabled:n}=X(t),r=P("Typography","-xl",ut,Y,t,e),s=Z(()=>{const{common:{cubicBezierEaseInOut:l},self:{olPadding:a,ulPadding:i,liMargin:u,liTextColor:g,liLineHeight:h,liFontSize:Q}}=r.value;return{"--n-bezier":l,"--n-font-size":Q,"--n-line-height":h,"--n-text-color":g,"--n-li-margin":u,"--n-ol-padding":a,"--n-ul-padding":i}}),o=n?tt("ul",void 0,s,t):void 0;return{mergedClsPrefix:e,cssVars:n?void 0:s,themeClass:o?.themeClass,onRender:o?.onRender}},render(){var t;const{mergedClsPrefix:e}=this;return(t=this.onRender)===null||t===void 0||t.call(this),D("ul",{class:[`${e}-ul`,this.themeClass,this.alignText&&`${e}-ul--align-text`],style:this.cssVars},this.$slots)}});function d(t,e){var n,r,s;const o=t.value.slice(0,(n=t.selectionStart)!==null&&n!==void 0?n:void 0),l=t.value.slice((r=t.selectionEnd)!==null&&r!==void 0?r:void 0);let a=!0;t.contentEditable="true";try{a=document.execCommand("insertText",!1,e)}catch{a=!1}if(t.contentEditable="false",a&&!t.value.slice(0,(s=t.selectionStart)!==null&&s!==void 0?s:void 0).endsWith(e)&&(a=!1),!a){try{document.execCommand("ms-beginUndoUnit")}catch{}t.value=o+e+l;try{document.execCommand("ms-endUndoUnit")}catch{}t.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0}))}}const _=new WeakMap;function M(t){const{currentTarget:e}=t,n=t.code==="KeyV"&&(t.ctrlKey||t.metaKey)&&t.shiftKey;(n||n&&t.altKey)&&_.set(e,!0)}function F(t){const{currentTarget:e}=t;_.delete(e)}function m(t){var e;return(e=_.get(t))!==null&&e!==void 0?e:!1}function ft(t,e,n){t.addEventListener("keydown",M);for(const r of e)r(t,n);t.addEventListener("paste",F)}function pt(t){t.removeEventListener("keydown",M),t.removeEventListener("paste",F)}function mt(t){t.addEventListener("paste",O)}function gt(t){t.removeEventListener("paste",O)}function O(t){const e=t.clipboardData,{currentTarget:n}=t;if(m(n)||!e||!Tt(e))return;const r=t.currentTarget;if(!(r instanceof HTMLTextAreaElement)||vt(r))return;let s=e.getData("text/plain");const o=e.getData("text/html"),l=o.replace(/\u00A0/g," ").replace(/\uC2A0/g," ");if(!o||(s=s.trim(),!s))return;const i=new DOMParser().parseFromString(l,"text/html"),u=i.createTreeWalker(i.body,NodeFilter.SHOW_ALL,h=>h.parentNode&&L(h.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT),g=ht(s,u);g!==s&&(t.stopPropagation(),t.preventDefault(),d(r,g))}function ht(t,e){let n=e.firstChild(),r=t,s=0,o=0;const l=1e4;for(;n&&o<l;){o++;const a=L(n)?(n.textContent||"").replace(/[\t\n\r ]+/g," "):n?.wholeText||"";if(xt(a)){n=e.nextNode();continue}if(!L(n)){s+=a.replace(/[\t\n\r ]+/g," ").trimStart().length,n=e.nextNode();continue}const i=r.indexOf(a,s);if(i>=0){const u=Lt(n,a);r=r.slice(0,i)+u+r.slice(i+a.length),s=i+u.length}n=e.nextNode()}return o===l?t:r}function vt(t){const e=t.selectionStart||0;return e===0?!1:t.value.substring(e-1,e)==="@"}function xt(t){return!t||t?.trim().length===0}function L(t){var e;return((e=t.tagName)===null||e===void 0?void 0:e.toLowerCase())==="a"&&t.hasAttribute("href")}function Tt(t){return t.types.includes("text/html")}function Lt(t,e){const n=t.href||"";let r="";return Et(t)||bt(t)?r=e:yt(t)||_t(n,e)?r=n:r=`[${e}](${n})`,r}function yt(t){return t.className.indexOf("commit-link")>=0||!!t.getAttribute("data-hovercard-type")&&t.getAttribute("data-hovercard-type")!=="user"}function _t(t,e){return t=t.slice(-1)==="/"?t.slice(0,-1):t,e=e.slice(-1)==="/"?e.slice(0,-1):e,t.toLowerCase()===e.toLowerCase()}function Et(t){var e;return((e=t.textContent)===null||e===void 0?void 0:e.slice(0,1))==="@"&&t.getAttribute("data-hovercard-type")==="user"}function bt(t){var e;return((e=t.textContent)===null||e===void 0?void 0:e.slice(0,1))==="@"&&t.getAttribute("data-hovercard-type")==="team"}function kt(t){t.addEventListener("dragover",H),t.addEventListener("drop",R),t.addEventListener("paste",I)}function wt(t){t.removeEventListener("dragover",H),t.removeEventListener("drop",R),t.removeEventListener("paste",I)}function R(t){const e=t.dataTransfer;if(!e||St(e)||!U(e))return;const n=j(e);if(!n.some(E))return;t.stopPropagation(),t.preventDefault();const r=t.currentTarget;r instanceof HTMLTextAreaElement&&d(r,n.map(N).join(""))}function H(t){const e=t.dataTransfer;e&&(e.dropEffect="link")}function I(t){const{currentTarget:e}=t;if(m(e))return;const n=t.clipboardData;if(!n||!U(n))return;const r=j(n);if(!r.some(E))return;t.stopPropagation(),t.preventDefault();const s=t.currentTarget;s instanceof HTMLTextAreaElement&&d(s,r.map(N).join(""))}function N(t){return E(t)?`
![](${t})
`:t}function St(t){return Array.from(t.types).indexOf("Files")>=0}function U(t){return Array.from(t.types).indexOf("text/uri-list")>=0}function j(t){return(t.getData("text/uri-list")||"").split(`\r
`)}const $t=/\.(gif|png|jpe?g)$/i;function E(t){return $t.test(t)}const z=new WeakMap;function At(t,e){var n;z.set(t,((n=e?.defaultPlainTextPaste)===null||n===void 0?void 0:n.urlLinks)===!0),t.addEventListener("paste",B)}function Ct(t){t.removeEventListener("paste",B)}function B(t){var e;const{currentTarget:n}=t,r=n,s=(e=z.get(r))!==null&&e!==void 0?e:!1,o=m(r);if(!s&&o||s&&!o)return;const l=t.clipboardData;if(!l||!Dt(l))return;const a=t.currentTarget;if(!(a instanceof HTMLTextAreaElement))return;const i=l.getData("text/plain");if(!i||!A(i)||Pt(a))return;const u=a.value.substring(a.selectionStart,a.selectionEnd);u.length&&(A(u.trim())||(t.stopPropagation(),t.preventDefault(),d(a,Mt(u,i.trim()))))}function Dt(t){return Array.from(t.types).includes("text/plain")}function Pt(t){const e=t.selectionStart||0;return e>1?t.value.substring(e-2,e)==="](":!1}function Mt(t,e){return`[${t}](${e})`}function A(t){try{const e=new URL(t);return C(e.href).trim()===C(t).trim()}catch{return!1}}function C(t){return t.endsWith("/")?t.slice(0,t.length-1):t}function Ft(t){t.addEventListener("dragover",q),t.addEventListener("drop",W),t.addEventListener("paste",K)}function Ot(t){t.removeEventListener("dragover",q),t.removeEventListener("drop",W),t.removeEventListener("paste",K)}function W(t){const e=t.dataTransfer;if(!e||Rt(e))return;const n=G(e);if(!n)return;t.stopPropagation(),t.preventDefault();const r=t.currentTarget;r instanceof HTMLTextAreaElement&&d(r,n)}function q(t){const e=t.dataTransfer;e&&(e.dropEffect="copy")}function K(t){const{currentTarget:e}=t;if(m(e)||!t.clipboardData)return;const n=G(t.clipboardData);if(!n)return;t.stopPropagation(),t.preventDefault();const r=t.currentTarget;r instanceof HTMLTextAreaElement&&d(r,n)}function Rt(t){return Array.from(t.types).indexOf("Files")>=0}function V(t){const e="Â ";return(t.textContent||"").trim().replace(/\|/g,"\\|").replace(/\n/g," ")||e}function Ht(t){return Array.from(t.querySelectorAll("td, th")).map(V)}function It(t){const e=Array.from(t.querySelectorAll("tr")),n=e.shift();if(!n)return"";const r=Ht(n),s=r.map(()=>"--"),o=`${r.join(" | ")}
${s.join(" | ")}
`,l=e.map(a=>Array.from(a.querySelectorAll("td")).map(V).join(" | ")).join(`
`);return`
${o}${l}

`}function G(t){if(Array.from(t.types).indexOf("text/html")===-1)return;const e=t.getData("text/html");if(!/<table/i.test(e))return;const n=e.substring(0,e.indexOf("<table")),r=e.lastIndexOf("</table>");if(!n||!r)return;const s=e.substring(r+8);let a=new DOMParser().parseFromString(e,"text/html").querySelector("table");if(a=!a||a.closest("[data-paste-markdown-skip]")?null:a,!a)return;const i=It(a);if(i)return[n,i,s].join("").replace(/<meta.*?>/,"")}function Nt(t){t.addEventListener("paste",J)}function Ut(t){t.removeEventListener("paste",J)}function J(t){const{currentTarget:e}=t;if(m(e))return;const n=t.clipboardData;if(!n||!jt(n))return;const r=t.currentTarget;if(!(r instanceof HTMLTextAreaElement))return;const s=n.getData("text/x-gfm");s&&(t.stopPropagation(),t.preventDefault(),d(r,s))}function jt(t){return Array.from(t.types).indexOf("text/x-gfm")>=0}function zt(t,e){return ft(t,[Ft,kt,At,Nt,mt],e),{unsubscribe:()=>{pt(t),Ot(t),gt(t),wt(t),Ct(t),Ut(t)}}}const Wt=y({__name:"paste-as-markdown",setup(t){const{t:e}=et(),n=w(),r=w("");return nt(()=>{zt(n.value?.textareaRef)}),(s,o)=>{const l=lt,a=dt,i=it;return rt(),at(i,{title:c(e)("tools.paste-as-markdown.texts.title-paste-in-markdown"),class:"paste-zone"},{default:f(()=>[p(a,null,{default:f(()=>[p(l,null,{default:f(()=>[v(x(c(e)("tools.paste-as-markdown.texts.tag-paste-spreadsheet-cells-and-html-tables-as-a-markdown-tables")),1)]),_:1}),p(l,null,{default:f(()=>[v(x(c(e)("tools.paste-as-markdown.texts.tag-paste-urls-on-selected-text-as-markdown-links")),1)]),_:1}),p(l,null,{default:f(()=>[v(x(c(e)("tools.paste-as-markdown.texts.tag-paste-text-containing-links-as-text-containing-markdown-links")),1)]),_:1}),p(l,null,{default:f(()=>[v(x(c(e)("tools.paste-as-markdown.texts.tag-paste-image-urls-as-markdown-image-links")),1)]),_:1})]),_:1}),p(ot,{ref_key:"inputElement",ref:n,value:c(r),"onUpdate:value":o[0]||(o[0]=u=>st(r)?r.value=u:null),multiline:"",placeholder:c(e)("tools.paste-as-markdown.texts.placeholder-paste-your-content-here"),rows:"10","w-full":""},null,8,["value","placeholder"])]),_:1},8,["title"])}}});export{Wt as default};
