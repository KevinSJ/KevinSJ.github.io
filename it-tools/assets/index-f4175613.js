import{p as h,Q as $t,b as Ce}from"./index-0c1fde36.js";import{r as Qt}from"./empty-d0adf2b0.js";import{r as Le}from"./constants-8338daba.js";import{s as Te,u as Ie}from"./index-fdbe2ce9.js";import{r as je}from"./assert-53be9de1.js";import{p as M}from"./index-cfd4d427.js";import{B as We}from"./index-a6f01dde.js";function Re(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var R={},O={};O.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((n,i)=>{e.push((r,o)=>r!=null?i(r):n(o)),t.apply(this,e)})},"name",{value:t.name})};O.fromPromise=function(t){return Object.defineProperty(function(...e){const n=e[e.length-1];if(typeof n!="function")return t.apply(this,e);e.pop(),t.apply(this,e).then(i=>n(null,i),n)},"name",{value:t.name})};var Y=Le,Ae=h.cwd,lt=null,Me={}.GRACEFUL_FS_PLATFORM||h.platform;h.cwd=function(){return lt||(lt=Ae.call(h)),lt};try{h.cwd()}catch{}if(typeof h.chdir=="function"){var Lt=h.chdir;h.chdir=function(t){lt=null,Lt.call(h,t)},Object.setPrototypeOf&&Object.setPrototypeOf(h.chdir,Lt)}var Je=Be;function Be(t){Y.hasOwnProperty("O_SYMLINK")&&h.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||n(t),t.chown=o(t.chown),t.fchown=o(t.fchown),t.lchown=o(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=c(t.chownSync),t.fchownSync=c(t.fchownSync),t.lchownSync=c(t.lchownSync),t.chmodSync=r(t.chmodSync),t.fchmodSync=r(t.fchmodSync),t.lchmodSync=r(t.lchmodSync),t.stat=f(t.stat),t.fstat=f(t.fstat),t.lstat=f(t.lstat),t.statSync=p(t.statSync),t.fstatSync=p(t.fstatSync),t.lstatSync=p(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(a,u,l){l&&h.nextTick(l)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(a,u,l,s){s&&h.nextTick(s)},t.lchownSync=function(){}),Me==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(a){function u(l,s,y){var k=Date.now(),S=0;a(l,s,function F(A){if(A&&(A.code==="EACCES"||A.code==="EPERM"||A.code==="EBUSY")&&Date.now()-k<6e4){setTimeout(function(){t.stat(s,function(I,et){I&&I.code==="ENOENT"?a(l,s,F):y(A)})},S),S<100&&(S+=10);return}y&&y(A)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,a),u}(t.rename)),t.read=typeof t.read!="function"?t.read:function(a){function u(l,s,y,k,S,F){var A;if(F&&typeof F=="function"){var I=0;A=function(et,Nt,Ct){if(et&&et.code==="EAGAIN"&&I<10)return I++,a.call(t,l,s,y,k,S,A);F.apply(this,arguments)}}return a.call(t,l,s,y,k,S,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,a),u}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(a){return function(u,l,s,y,k){for(var S=0;;)try{return a.call(t,u,l,s,y,k)}catch(F){if(F.code==="EAGAIN"&&S<10){S++;continue}throw F}}}(t.readSync);function e(a){a.lchmod=function(u,l,s){a.open(u,Y.O_WRONLY|Y.O_SYMLINK,l,function(y,k){if(y){s&&s(y);return}a.fchmod(k,l,function(S){a.close(k,function(F){s&&s(S||F)})})})},a.lchmodSync=function(u,l){var s=a.openSync(u,Y.O_WRONLY|Y.O_SYMLINK,l),y=!0,k;try{k=a.fchmodSync(s,l),y=!1}finally{if(y)try{a.closeSync(s)}catch{}else a.closeSync(s)}return k}}function n(a){Y.hasOwnProperty("O_SYMLINK")&&a.futimes?(a.lutimes=function(u,l,s,y){a.open(u,Y.O_SYMLINK,function(k,S){if(k){y&&y(k);return}a.futimes(S,l,s,function(F){a.close(S,function(A){y&&y(F||A)})})})},a.lutimesSync=function(u,l,s){var y=a.openSync(u,Y.O_SYMLINK),k,S=!0;try{k=a.futimesSync(y,l,s),S=!1}finally{if(S)try{a.closeSync(y)}catch{}else a.closeSync(y)}return k}):a.futimes&&(a.lutimes=function(u,l,s,y){y&&h.nextTick(y)},a.lutimesSync=function(){})}function i(a){return a&&function(u,l,s){return a.call(t,u,l,function(y){v(y)&&(y=null),s&&s.apply(this,arguments)})}}function r(a){return a&&function(u,l){try{return a.call(t,u,l)}catch(s){if(!v(s))throw s}}}function o(a){return a&&function(u,l,s,y){return a.call(t,u,l,s,function(k){v(k)&&(k=null),y&&y.apply(this,arguments)})}}function c(a){return a&&function(u,l,s){try{return a.call(t,u,l,s)}catch(y){if(!v(y))throw y}}}function f(a){return a&&function(u,l,s){typeof l=="function"&&(s=l,l=null);function y(k,S){S&&(S.uid<0&&(S.uid+=4294967296),S.gid<0&&(S.gid+=4294967296)),s&&s.apply(this,arguments)}return l?a.call(t,u,l,y):a.call(t,u,y)}}function p(a){return a&&function(u,l){var s=l?a.call(t,u,l):a.call(t,u);return s&&(s.uid<0&&(s.uid+=4294967296),s.gid<0&&(s.gid+=4294967296)),s}}function v(a){if(!a||a.code==="ENOSYS")return!0;var u=!h.getuid||h.getuid()!==0;return!!(u&&(a.code==="EINVAL"||a.code==="EPERM"))}}var Tt=Te.Stream,Ue=Ye;function Ye(t){return{ReadStream:e,WriteStream:n};function e(i,r){if(!(this instanceof e))return new e(i,r);Tt.call(this);var o=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,r=r||{};for(var c=Object.keys(r),f=0,p=c.length;f<p;f++){var v=c[f];this[v]=r[v]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){h.nextTick(function(){o._read()});return}t.open(this.path,this.flags,this.mode,function(a,u){if(a){o.emit("error",a),o.readable=!1;return}o.fd=u,o.emit("open",u),o._read()})}function n(i,r){if(!(this instanceof n))return new n(i,r);Tt.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var o=Object.keys(r),c=0,f=o.length;c<f;c++){var p=o[c];this[p]=r[p]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Ge=Ke,qe=Object.getPrototypeOf||function(t){return t.__proto__};function Ke(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:qe(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var P=Qt,Ve=Je,Qe=Ue,ze=Ge,st=Ie,L,yt;typeof Symbol=="function"&&typeof Symbol.for=="function"?(L=Symbol.for("graceful-fs.queue"),yt=Symbol.for("graceful-fs.previous")):(L="___graceful-fs.queue",yt="___graceful-fs.previous");function He(){}function zt(t,e){Object.defineProperty(t,L,{get:function(){return e}})}var K=He;st.debuglog?K=st.debuglog("gfs4"):/\bgfs4\b/i.test({}.NODE_DEBUG||"")&&(K=function(){var t=st.format.apply(st,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});if(!P[L]){var Xe=$t[L]||[];zt(P,Xe),P.close=function(t){function e(n,i){return t.call(P,n,function(r){r||It(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,yt,{value:t}),e}(P.close),P.closeSync=function(t){function e(n){t.apply(P,arguments),It()}return Object.defineProperty(e,yt,{value:t}),e}(P.closeSync),/\bgfs4\b/i.test({}.NODE_DEBUG||"")&&h.on("exit",function(){K(P[L]),je().equal(P[L].length,0)})}$t[L]||zt($t,P[L]);var Z=Ft(ze(P));({}).TEST_GRACEFUL_FS_GLOBAL_PATCH&&!P.__patched&&(Z=Ft(P),P.__patched=!0);function Ft(t){Ve(t),t.gracefulify=Ft,t.createReadStream=Nt,t.createWriteStream=Ct;var e=t.readFile;t.readFile=n;function n(m,w,d){return typeof w=="function"&&(d=w,w=null),_(m,w,d);function _(N,D,g,b){return e(N,D,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Q([_,[N,D,g],$,b||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=r;function r(m,w,d,_){return typeof d=="function"&&(_=d,d=null),N(m,w,d,_);function N(D,g,b,$,C){return i(D,g,b,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Q([N,[D,g,b,$],E,C||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var o=t.appendFile;o&&(t.appendFile=c);function c(m,w,d,_){return typeof d=="function"&&(_=d,d=null),N(m,w,d,_);function N(D,g,b,$,C){return o(D,g,b,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Q([N,[D,g,b,$],E,C||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var f=t.copyFile;f&&(t.copyFile=p);function p(m,w,d,_){return typeof d=="function"&&(_=d,d=0),N(m,w,d,_);function N(D,g,b,$,C){return f(D,g,b,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Q([N,[D,g,b,$],E,C||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var v=t.readdir;t.readdir=u;var a=/^v[0-5]\./;function u(m,w,d){typeof w=="function"&&(d=w,w=null);var _=a.test(h.version)?function(g,b,$,C){return v(g,N(g,b,$,C))}:function(g,b,$,C){return v(g,b,N(g,b,$,C))};return _(m,w,d);function N(D,g,b,$){return function(C,E){C&&(C.code==="EMFILE"||C.code==="ENFILE")?Q([_,[D,g,b],C,$||Date.now(),Date.now()]):(E&&E.sort&&E.sort(),typeof b=="function"&&b.call(this,C,E))}}}if(h.version.substr(0,4)==="v0.8"){var l=Qe(t);F=l.ReadStream,I=l.WriteStream}var s=t.ReadStream;s&&(F.prototype=Object.create(s.prototype),F.prototype.open=A);var y=t.WriteStream;y&&(I.prototype=Object.create(y.prototype),I.prototype.open=et),Object.defineProperty(t,"ReadStream",{get:function(){return F},set:function(m){F=m},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return I},set:function(m){I=m},enumerable:!0,configurable:!0});var k=F;Object.defineProperty(t,"FileReadStream",{get:function(){return k},set:function(m){k=m},enumerable:!0,configurable:!0});var S=I;Object.defineProperty(t,"FileWriteStream",{get:function(){return S},set:function(m){S=m},enumerable:!0,configurable:!0});function F(m,w){return this instanceof F?(s.apply(this,arguments),this):F.apply(Object.create(F.prototype),arguments)}function A(){var m=this;wt(m.path,m.flags,m.mode,function(w,d){w?(m.autoClose&&m.destroy(),m.emit("error",w)):(m.fd=d,m.emit("open",d),m.read())})}function I(m,w){return this instanceof I?(y.apply(this,arguments),this):I.apply(Object.create(I.prototype),arguments)}function et(){var m=this;wt(m.path,m.flags,m.mode,function(w,d){w?(m.destroy(),m.emit("error",w)):(m.fd=d,m.emit("open",d))})}function Nt(m,w){return new t.ReadStream(m,w)}function Ct(m,w){return new t.WriteStream(m,w)}var Ne=t.open;t.open=wt;function wt(m,w,d,_){return typeof d=="function"&&(_=d,d=null),N(m,w,d,_);function N(D,g,b,$,C){return Ne(D,g,b,function(E,li){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Q([N,[D,g,b,$],E,C||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}return t}function Q(t){K("ENQUEUE",t[0].name,t[1]),P[L].push(t),gt()}var ut;function It(){for(var t=Date.now(),e=0;e<P[L].length;++e)P[L][e].length>2&&(P[L][e][3]=t,P[L][e][4]=t);gt()}function gt(){if(clearTimeout(ut),ut=void 0,P[L].length!==0){var t=P[L].shift(),e=t[0],n=t[1],i=t[2],r=t[3],o=t[4];if(r===void 0)K("RETRY",e.name,n),e.apply(null,n);else if(Date.now()-r>=6e4){K("TIMEOUT",e.name,n);var c=n.pop();typeof c=="function"&&c.call(null,i)}else{var f=Date.now()-o,p=Math.max(o-r,1),v=Math.min(p*1.2,100);f>=v?(K("RETRY",e.name,n),e.apply(null,n.concat([r]))):P[L].push(t)}ut===void 0&&(ut=setTimeout(gt,0))}}(function(t){const e=O.fromCallback,n=Z,i=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof n[r]=="function");Object.assign(t,n),i.forEach(r=>{t[r]=e(n[r])}),t.exists=function(r,o){return typeof o=="function"?n.exists(r,o):new Promise(c=>n.exists(r,c))},t.read=function(r,o,c,f,p,v){return typeof v=="function"?n.read(r,o,c,f,p,v):new Promise((a,u)=>{n.read(r,o,c,f,p,(l,s,y)=>{if(l)return u(l);a({bytesRead:s,buffer:y})})})},t.write=function(r,o,...c){return typeof c[c.length-1]=="function"?n.write(r,o,...c):new Promise((f,p)=>{n.write(r,o,...c,(v,a,u)=>{if(v)return p(v);f({bytesWritten:a,buffer:u})})})},t.readv=function(r,o,...c){return typeof c[c.length-1]=="function"?n.readv(r,o,...c):new Promise((f,p)=>{n.readv(r,o,...c,(v,a,u)=>{if(v)return p(v);f({bytesRead:a,buffers:u})})})},t.writev=function(r,o,...c){return typeof c[c.length-1]=="function"?n.writev(r,o,...c):new Promise((f,p)=>{n.writev(r,o,...c,(v,a,u)=>{if(v)return p(v);f({bytesWritten:a,buffers:u})})})},typeof n.realpath.native=="function"?t.realpath.native=e(n.realpath.native):h.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(R);var Pt={},Ht={};const Ze=M;Ht.checkPath=function(e){if(h.platform==="win32"&&/[<>:"|?*]/.test(e.replace(Ze.parse(e).root,""))){const i=new Error(`Path contains invalid characters: ${e}`);throw i.code="EINVAL",i}};const Xt=R,{checkPath:Zt}=Ht,te=t=>{const e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};Pt.makeDir=async(t,e)=>(Zt(t),Xt.mkdir(t,{mode:te(e),recursive:!0}));Pt.makeDirSync=(t,e)=>(Zt(t),Xt.mkdirSync(t,{mode:te(e),recursive:!0}));const tn=O.fromPromise,{makeDir:en,makeDirSync:St}=Pt,pt=tn(en);var B={mkdirs:pt,mkdirsSync:St,mkdirp:pt,mkdirpSync:St,ensureDir:pt,ensureDirSync:St};const nn=O.fromPromise,ee=R;function rn(t){return ee.access(t).then(()=>!0).catch(()=>!1)}var V={pathExists:nn(rn),pathExistsSync:ee.existsSync};const z=R,on=O.fromPromise;async function cn(t,e,n){const i=await z.open(t,"r+");let r=null;try{await z.futimes(i,e,n)}finally{try{await z.close(i)}catch(o){r=o}}if(r)throw r}function an(t,e,n){const i=z.openSync(t,"r+");return z.futimesSync(i,e,n),z.closeSync(i)}var ne={utimesMillis:on(cn),utimesMillisSync:an};const H=R,x=M,jt=O.fromPromise;function sn(t,e,n){const i=n.dereference?r=>H.stat(r,{bigint:!0}):r=>H.lstat(r,{bigint:!0});return Promise.all([i(t),i(e).catch(r=>{if(r.code==="ENOENT")return null;throw r})]).then(([r,o])=>({srcStat:r,destStat:o}))}function un(t,e,n){let i;const r=n.dereference?c=>H.statSync(c,{bigint:!0}):c=>H.lstatSync(c,{bigint:!0}),o=r(t);try{i=r(e)}catch(c){if(c.code==="ENOENT")return{srcStat:o,destStat:null};throw c}return{srcStat:o,destStat:i}}async function fn(t,e,n,i){const{srcStat:r,destStat:o}=await sn(t,e,i);if(o){if(at(r,o)){const c=x.basename(t),f=x.basename(e);if(n==="move"&&c!==f&&c.toLowerCase()===f.toLowerCase())return{srcStat:r,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!r.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(r.isDirectory()&&bt(t,e))throw new Error(mt(t,e,n));return{srcStat:r,destStat:o}}function ln(t,e,n,i){const{srcStat:r,destStat:o}=un(t,e,i);if(o){if(at(r,o)){const c=x.basename(t),f=x.basename(e);if(n==="move"&&c!==f&&c.toLowerCase()===f.toLowerCase())return{srcStat:r,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!r.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(r.isDirectory()&&bt(t,e))throw new Error(mt(t,e,n));return{srcStat:r,destStat:o}}async function re(t,e,n,i){const r=x.resolve(x.dirname(t)),o=x.resolve(x.dirname(n));if(o===r||o===x.parse(o).root)return;let c;try{c=await H.stat(o,{bigint:!0})}catch(f){if(f.code==="ENOENT")return;throw f}if(at(e,c))throw new Error(mt(t,n,i));return re(t,e,o,i)}function ie(t,e,n,i){const r=x.resolve(x.dirname(t)),o=x.resolve(x.dirname(n));if(o===r||o===x.parse(o).root)return;let c;try{c=H.statSync(o,{bigint:!0})}catch(f){if(f.code==="ENOENT")return;throw f}if(at(e,c))throw new Error(mt(t,n,i));return ie(t,e,o,i)}function at(t,e){return e.ino!==void 0&&e.dev!==void 0&&e.ino===t.ino&&e.dev===t.dev}function bt(t,e){const n=x.resolve(t).split(x.sep).filter(r=>r),i=x.resolve(e).split(x.sep).filter(r=>r);return n.every((r,o)=>i[o]===r)}function mt(t,e,n){return`Cannot ${n} '${t}' to a subdirectory of itself, '${e}'.`}var tt={checkPaths:jt(fn),checkPathsSync:ln,checkParentPaths:jt(re),checkParentPathsSync:ie,isSrcSubdir:bt,areIdentical:at};async function yn(t,e){const n=[];for await(const i of t)n.push(e(i).then(()=>null,r=>r??new Error("unknown error")));await Promise.all(n.map(i=>i.then(r=>{if(r!==null)throw r})))}var mn={asyncIteratorConcurrentProcess:yn};const T=R,rt=M,{mkdirs:dn}=B,{pathExists:hn}=V,{utimesMillis:wn}=ne,it=tt,{asyncIteratorConcurrentProcess:Sn}=mn;async function pn(t,e,n={}){typeof n=="function"&&(n={filter:n}),n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&h.arch==="ia32"&&h.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:i,destStat:r}=await it.checkPaths(t,e,"copy",n);if(await it.checkParentPaths(t,i,e,"copy"),!await oe(t,e,n))return;const c=rt.dirname(e);await hn(c)||await dn(c),await ce(r,t,e,n)}async function oe(t,e,n){return n.filter?n.filter(t,e):!0}async function ce(t,e,n,i){const o=await(i.dereference?T.stat:T.lstat)(e);if(o.isDirectory())return En(o,t,e,n,i);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return vn(o,t,e,n,i);if(o.isSymbolicLink())return Fn(t,e,n,i);throw o.isSocket()?new Error(`Cannot copy a socket file: ${e}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}async function vn(t,e,n,i,r){if(!e)return Wt(t,n,i,r);if(r.overwrite)return await T.unlink(i),Wt(t,n,i,r);if(r.errorOnExist)throw new Error(`'${i}' already exists`)}async function Wt(t,e,n,i){if(await T.copyFile(e,n),i.preserveTimestamps){$n(t.mode)&&await kn(n,t.mode);const r=await T.stat(e);await wn(n,r.atime,r.mtime)}return T.chmod(n,t.mode)}function $n(t){return(t&128)===0}function kn(t,e){return T.chmod(t,e|128)}async function En(t,e,n,i,r){e||await T.mkdir(i),await Sn(await T.opendir(n),async o=>{const c=rt.join(n,o.name),f=rt.join(i,o.name);if(await oe(c,f,r)){const{destStat:v}=await it.checkPaths(c,f,"copy",r);await ce(v,c,f,r)}}),e||await T.chmod(i,t.mode)}async function Fn(t,e,n,i){let r=await T.readlink(e);if(i.dereference&&(r=rt.resolve(h.cwd(),r)),!t)return T.symlink(r,n);let o=null;try{o=await T.readlink(n)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return T.symlink(r,n);throw c}if(i.dereference&&(o=rt.resolve(h.cwd(),o)),it.isSrcSubdir(r,o))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${o}'.`);if(it.isSrcSubdir(o,r))throw new Error(`Cannot overwrite '${o}' with '${r}'.`);return await T.unlink(n),T.symlink(r,n)}var gn=pn;const j=Z,ot=M,Pn=B.mkdirsSync,bn=ne.utimesMillisSync,ct=tt;function On(t,e,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&h.arch==="ia32"&&h.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:i,destStat:r}=ct.checkPathsSync(t,e,"copy",n);if(ct.checkParentPathsSync(t,i,e,"copy"),n.filter&&!n.filter(t,e))return;const o=ot.dirname(e);return j.existsSync(o)||Pn(o),ae(r,t,e,n)}function ae(t,e,n,i){const o=(i.dereference?j.statSync:j.lstatSync)(e);if(o.isDirectory())return Tn(o,t,e,n,i);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Dn(o,t,e,n,i);if(o.isSymbolicLink())return Wn(t,e,n,i);throw o.isSocket()?new Error(`Cannot copy a socket file: ${e}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function Dn(t,e,n,i,r){return e?xn(t,n,i,r):se(t,n,i,r)}function xn(t,e,n,i){if(i.overwrite)return j.unlinkSync(n),se(t,e,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}function se(t,e,n,i){return j.copyFileSync(e,n),i.preserveTimestamps&&_n(t.mode,e,n),Ot(n,t.mode)}function _n(t,e,n){return Nn(t)&&Cn(n,t),Ln(e,n)}function Nn(t){return(t&128)===0}function Cn(t,e){return Ot(t,e|128)}function Ot(t,e){return j.chmodSync(t,e)}function Ln(t,e){const n=j.statSync(t);return bn(e,n.atime,n.mtime)}function Tn(t,e,n,i,r){return e?ue(n,i,r):In(t.mode,n,i,r)}function In(t,e,n,i){return j.mkdirSync(n),ue(e,n,i),Ot(n,t)}function ue(t,e,n){const i=j.opendirSync(t);try{let r;for(;(r=i.readSync())!==null;)jn(r.name,t,e,n)}finally{i.closeSync()}}function jn(t,e,n,i){const r=ot.join(e,t),o=ot.join(n,t);if(i.filter&&!i.filter(r,o))return;const{destStat:c}=ct.checkPathsSync(r,o,"copy",i);return ae(c,r,o,i)}function Wn(t,e,n,i){let r=j.readlinkSync(e);if(i.dereference&&(r=ot.resolve(h.cwd(),r)),t){let o;try{o=j.readlinkSync(n)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return j.symlinkSync(r,n);throw c}if(i.dereference&&(o=ot.resolve(h.cwd(),o)),ct.isSrcSubdir(r,o))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${o}'.`);if(ct.isSrcSubdir(o,r))throw new Error(`Cannot overwrite '${o}' with '${r}'.`);return Rn(r,n)}else return j.symlinkSync(r,n)}function Rn(t,e){return j.unlinkSync(e),j.symlinkSync(t,e)}var An=On;const Mn=O.fromPromise;var Dt={copy:Mn(gn),copySync:An};const fe=Z,Jn=O.fromCallback;function Bn(t,e){fe.rm(t,{recursive:!0,force:!0},e)}function Un(t){fe.rmSync(t,{recursive:!0,force:!0})}var dt={remove:Jn(Bn),removeSync:Un};const Yn=O.fromPromise,le=R,ye=M,me=B,de=dt,Rt=Yn(async function(e){let n;try{n=await le.readdir(e)}catch{return me.mkdirs(e)}return Promise.all(n.map(i=>de.remove(ye.join(e,i))))});function At(t){let e;try{e=le.readdirSync(t)}catch{return me.mkdirsSync(t)}e.forEach(n=>{n=ye.join(t,n),de.removeSync(n)})}var Gn={emptyDirSync:At,emptydirSync:At,emptyDir:Rt,emptydir:Rt};const qn=O.fromPromise,he=M,U=R,we=B;async function Kn(t){let e;try{e=await U.stat(t)}catch{}if(e&&e.isFile())return;const n=he.dirname(t);let i=null;try{i=await U.stat(n)}catch(r){if(r.code==="ENOENT"){await we.mkdirs(n),await U.writeFile(t,"");return}else throw r}i.isDirectory()?await U.writeFile(t,""):await U.readdir(n)}function Vn(t){let e;try{e=U.statSync(t)}catch{}if(e&&e.isFile())return;const n=he.dirname(t);try{U.statSync(n).isDirectory()||U.readdirSync(n)}catch(i){if(i&&i.code==="ENOENT")we.mkdirsSync(n);else throw i}U.writeFileSync(t,"")}var Qn={createFile:qn(Kn),createFileSync:Vn};const zn=O.fromPromise,Se=M,G=R,pe=B,{pathExists:Hn}=V,{areIdentical:ve}=tt;async function Xn(t,e){let n;try{n=await G.lstat(e)}catch{}let i;try{i=await G.lstat(t)}catch(c){throw c.message=c.message.replace("lstat","ensureLink"),c}if(n&&ve(i,n))return;const r=Se.dirname(e);await Hn(r)||await pe.mkdirs(r),await G.link(t,e)}function Zn(t,e){let n;try{n=G.lstatSync(e)}catch{}try{const o=G.lstatSync(t);if(n&&ve(o,n))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}const i=Se.dirname(e);return G.existsSync(i)||pe.mkdirsSync(i),G.linkSync(t,e)}var tr={createLink:zn(Xn),createLinkSync:Zn};const q=M,nt=R,{pathExists:er}=V,nr=O.fromPromise;async function rr(t,e){if(q.isAbsolute(t)){try{await nt.lstat(t)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:t,toDst:t}}const n=q.dirname(e),i=q.join(n,t);if(await er(i))return{toCwd:i,toDst:t};try{await nt.lstat(t)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:t,toDst:q.relative(n,t)}}function ir(t,e){if(q.isAbsolute(t)){if(!nt.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}const n=q.dirname(e),i=q.join(n,t);if(nt.existsSync(i))return{toCwd:i,toDst:t};if(!nt.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:q.relative(n,t)}}var or={symlinkPaths:nr(rr),symlinkPathsSync:ir};const $e=R,cr=O.fromPromise;async function ar(t,e){if(e)return e;let n;try{n=await $e.lstat(t)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}function sr(t,e){if(e)return e;let n;try{n=$e.lstatSync(t)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}var ur={symlinkType:cr(ar),symlinkTypeSync:sr};const fr=O.fromPromise,ke=M,J=R,{mkdirs:lr,mkdirsSync:yr}=B,{symlinkPaths:mr,symlinkPathsSync:dr}=or,{symlinkType:hr,symlinkTypeSync:wr}=ur,{pathExists:Sr}=V,{areIdentical:Ee}=tt;async function pr(t,e,n){let i;try{i=await J.lstat(e)}catch{}if(i&&i.isSymbolicLink()){const[f,p]=await Promise.all([J.stat(t),J.stat(e)]);if(Ee(f,p))return}const r=await mr(t,e);t=r.toDst;const o=await hr(r.toCwd,n),c=ke.dirname(e);return await Sr(c)||await lr(c),J.symlink(t,e,o)}function vr(t,e,n){let i;try{i=J.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){const f=J.statSync(t),p=J.statSync(e);if(Ee(f,p))return}const r=dr(t,e);t=r.toDst,n=wr(r.toCwd,n);const o=ke.dirname(e);return J.existsSync(o)||yr(o),J.symlinkSync(t,e,n)}var $r={createSymlink:fr(pr),createSymlinkSync:vr};const{createFile:Mt,createFileSync:Jt}=Qn,{createLink:Bt,createLinkSync:Ut}=tr,{createSymlink:Yt,createSymlinkSync:Gt}=$r;var kr={createFile:Mt,createFileSync:Jt,ensureFile:Mt,ensureFileSync:Jt,createLink:Bt,createLinkSync:Ut,ensureLink:Bt,ensureLinkSync:Ut,createSymlink:Yt,createSymlinkSync:Gt,ensureSymlink:Yt,ensureSymlinkSync:Gt};function Er(t,{EOL:e=`
`,finalEOL:n=!0,replacer:i=null,spaces:r}={}){const o=n?e:"";return JSON.stringify(t,i,r).replace(/\n/g,e)+o}function Fr(t){return We.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}var xt={stringify:Er,stripBom:Fr};let X;try{X=Z}catch{X=Qt}const ht=O,{stringify:Fe,stripBom:ge}=xt;async function gr(t,e={}){typeof e=="string"&&(e={encoding:e});const n=e.fs||X,i="throws"in e?e.throws:!0;let r=await ht.fromCallback(n.readFile)(t,e);r=ge(r);let o;try{o=JSON.parse(r,e?e.reviver:null)}catch(c){if(i)throw c.message=`${t}: ${c.message}`,c;return null}return o}const Pr=ht.fromPromise(gr);function br(t,e={}){typeof e=="string"&&(e={encoding:e});const n=e.fs||X,i="throws"in e?e.throws:!0;try{let r=n.readFileSync(t,e);return r=ge(r),JSON.parse(r,e.reviver)}catch(r){if(i)throw r.message=`${t}: ${r.message}`,r;return null}}async function Or(t,e,n={}){const i=n.fs||X,r=Fe(e,n);await ht.fromCallback(i.writeFile)(t,r,n)}const Dr=ht.fromPromise(Or);function xr(t,e,n={}){const i=n.fs||X,r=Fe(e,n);return i.writeFileSync(t,r,n)}const _r={readFile:Pr,readFileSync:br,writeFile:Dr,writeFileSync:xr};var Nr=_r;const ft=Nr;var Cr={readJson:ft.readFile,readJsonSync:ft.readFileSync,writeJson:ft.writeFile,writeJsonSync:ft.writeFileSync};const Lr=O.fromPromise,kt=R,Pe=M,be=B,Tr=V.pathExists;async function Ir(t,e,n="utf-8"){const i=Pe.dirname(t);return await Tr(i)||await be.mkdirs(i),kt.writeFile(t,e,n)}function jr(t,...e){const n=Pe.dirname(t);kt.existsSync(n)||be.mkdirsSync(n),kt.writeFileSync(t,...e)}var _t={outputFile:Lr(Ir),outputFileSync:jr};const{stringify:Wr}=xt,{outputFile:Rr}=_t;async function Ar(t,e,n={}){const i=Wr(e,n);await Rr(t,i,n)}var Mr=Ar;const{stringify:Jr}=xt,{outputFileSync:Br}=_t;function Ur(t,e,n){const i=Jr(e,n);Br(t,i,n)}var Yr=Ur;const Gr=O.fromPromise,W=Cr;W.outputJson=Gr(Mr);W.outputJsonSync=Yr;W.outputJSON=W.outputJson;W.outputJSONSync=W.outputJsonSync;W.writeJSON=W.writeJson;W.writeJSONSync=W.writeJsonSync;W.readJSON=W.readJson;W.readJSONSync=W.readJsonSync;var qr=W;const Kr=R,qt=M,{copy:Vr}=Dt,{remove:Oe}=dt,{mkdirp:Qr}=B,{pathExists:zr}=V,Kt=tt;async function Hr(t,e,n={}){const i=n.overwrite||n.clobber||!1,{srcStat:r,isChangingCase:o=!1}=await Kt.checkPaths(t,e,"move",n);await Kt.checkParentPaths(t,r,e,"move");const c=qt.dirname(e);return qt.parse(c).root!==c&&await Qr(c),Xr(t,e,i,o)}async function Xr(t,e,n,i){if(!i){if(n)await Oe(e);else if(await zr(e))throw new Error("dest already exists.")}try{await Kr.rename(t,e)}catch(r){if(r.code!=="EXDEV")throw r;await Zr(t,e,n)}}async function Zr(t,e,n){return await Vr(t,e,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),Oe(t)}var ti=Hr;const De=Z,Et=M,ei=Dt.copySync,xe=dt.removeSync,ni=B.mkdirpSync,Vt=tt;function ri(t,e,n){n=n||{};const i=n.overwrite||n.clobber||!1,{srcStat:r,isChangingCase:o=!1}=Vt.checkPathsSync(t,e,"move",n);return Vt.checkParentPathsSync(t,r,e,"move"),ii(e)||ni(Et.dirname(e)),oi(t,e,i,o)}function ii(t){const e=Et.dirname(t);return Et.parse(e).root===e}function oi(t,e,n,i){if(i)return vt(t,e,n);if(n)return xe(e),vt(t,e,n);if(De.existsSync(e))throw new Error("dest already exists.");return vt(t,e,n)}function vt(t,e,n){try{De.renameSync(t,e)}catch(i){if(i.code!=="EXDEV")throw i;return ci(t,e,n)}}function ci(t,e,n){return ei(t,e,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),xe(t)}var ai=ri;const si=O.fromPromise;var ui={move:si(ti),moveSync:ai},_e={...R,...Dt,...Gn,...kr,...qr,...B,...ui,..._t,...V,...dt};const fi=Ce(_e),vi=Re({__proto__:null,default:fi},[_e]);export{vi as i};
