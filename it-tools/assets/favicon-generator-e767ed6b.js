import{_ as A}from"./TextareaCopyable-59231e95.js";import{J as D}from"./jszip.min-273c410a.js";import{e as E,f as S}from"./index-8d236247.js";import{N as T}from"./Upload-98f6b12b.js";import{T as V}from"./transform-13d1005e.js";import{d as F,a0 as J,r as u,o as c,j as _,w as r,k as m,a6 as b,G as g,l as o,a as v,c as N,a8 as G,a7 as O,ad as y,aj as Z}from"./index-0c1fde36.js";import{_ as q}from"./Space-7fc52151.js";import{_ as U}from"./Card-7ba5ce79.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./Progress-cb02197e.js";import"./Image-22bdebd3.js";import"./_arrayReduce-865b0d3f.js";import"./download-953ccaa2.js";import"./get-slot-1efb97e5.js";const P={style:{display:"flex",gap:"16px","flex-wrap":"wrap"}},H=["src","alt","width","height"],ge=F({__name:"favicon-generator",setup(K){const{t:p}=J(),x=[16,32,48,64,180,192,512],I=[180,192,512];async function B(n){const a=new Uint8Array(await n.arrayBuffer()),t=E({data:a});if(t==null)throw new Error("Invalid PNG file!");return S({images:[16,32,64,128,256].map(s=>V.copyResize({image:t,width:s,maintainAspect:!0}))})}const f=u([]),h=u(""),w=u(null),k=u(!1);function j({file:n}){const a=new FileReader;a.onload=()=>{const t=new Image;t.onload=()=>{C(t,n.file)},t.src=a.result},a.readAsDataURL(n.file)}async function C(n,a){const t=new D,s=[];f.value=[];for(const e of x){const l=document.createElement("canvas");l.width=e,l.height=e,l.getContext("2d").drawImage(n,0,0,e,e);const d=l.toDataURL("image/png"),i=await(await fetch(d)).blob(),$=`favicon-${e}x${e}.png`;t.file($,i),f.value.push({size:e,dataUrl:d}),s.push(`<link rel="icon" type="image/png" sizes="${e}x${e}" href="${$}">`)}for(const e of I)s.push(`<link rel="apple-touch-icon" sizes="${e}x${e}" href="favicon-${e}x${e}.png">`);s.push('<link rel="manifest" href="site.webmanifest">'),t.file("site.webmanifest",JSON.stringify({name:"",short_name:"",icons:x.map(e=>({src:`favicon-${e}x${e}.png`,sizes:`${e}x${e}`,type:"image/png"})),theme_color:"#ffffff",background_color:"#ffffff",display:"standalone"},null,2)),t.file("favicon.ico",await B(a)),t.file("head-tags.html",s.join(`
`)),h.value=s.join(`
`),t.generateAsync({type:"blob"}).then(e=>{w.value=e,k.value=!0})}function R(n,a){const t=document.createElement("a");t.href=n,t.download=a,document.body.appendChild(t),t.style.display="none",t.click(),t.remove()}function L(){w.value&&R(window.URL.createObjectURL(w.value),"favicons.zip")}return(n,a)=>{const t=Z,s=T,e=q,l=U,z=A,d=U;return c(),_(d,{title:o(p)("tools.favicon-generator.texts.title-favicon-pack-generator"),style:{"max-width":"700px",margin:"auto"}},{default:r(()=>[m(e,{justify:"center"},{default:r(()=>[m(s,{"show-file-list":!1,accept:"image/png","custom-request":j},{default:r(()=>[m(t,{type:"primary"},{default:r(()=>[b(g(o(p)("tools.favicon-generator.texts.tag-upload-png-image")),1)]),_:1})]),_:1})]),_:1}),o(f).length?(c(),_(l,{key:0,title:o(p)("tools.favicon-generator.texts.title-️-previews"),"mt-2":""},{default:r(()=>[v("div",P,[(c(!0),N(O,null,G(o(f),i=>(c(),N("div",{key:i.size,style:{"text-align":"center"}},[v("img",{src:i.dataUrl,alt:`Favicon ${i.size}`,width:i.size,height:i.size},null,8,H),v("p",null,g(i.size)+"×"+g(i.size),1)]))),128))])]),_:1},8,["title"])):y("",!0),o(h)?(c(),_(l,{key:1,title:o(p)("tools.favicon-generator.texts.title-html-head-tags"),"mt-2":""},{default:r(()=>[m(z,{value:o(h),language:"html"},null,8,["value"])]),_:1},8,["title"])):y("",!0),m(e,{justify:"center","mt-2":""},{default:r(()=>[o(k)?(c(),_(t,{key:0,type:"success",onClick:L},{default:r(()=>[b(g(o(p)("tools.favicon-generator.texts.tag-download-zip")),1)]),_:1})):y("",!0)]),_:1})]),_:1},8,["title"])}}});export{ge as default};
