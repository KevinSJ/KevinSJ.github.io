import{_ as F}from"./TextareaCopyable-59231e95.js";import{g as v,d as L,a0 as R,r as O,al as _,i as q,R as G,ac as P,o as g,c as x,k as a,w as r,l as t,m as c,j as Q,ad as E,a7 as z,a8 as T,ak as H,x as M,a as X,G as Y,bq as Z}from"./index-0c1fde36.js";import{j as ee,u as te}from"./useJsonSchemaValidation-dc2bfda0.js";import{w as le}from"./defaults-4d6daddf.js";import{_ as ae}from"./Switch-a0f825a4.js";import{_ as oe}from"./FormItem-1b9a5952.js";import{_ as ne}from"./Space-7fc52151.js";import{_ as se}from"./Select-9917c364.js";import{N as re}from"./Alert-a9fb131b.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./index-24bd6b84.js";import"./context-00991937.js";import"./get-slot-1efb97e5.js";import"./Tag-e75b8dae.js";import"./FocusDetector-089b8822.js";import"./VirtualList-8140ffff.js";import"./Empty-ca426d71.js";import"./index-cbfaa337.js";function J(o){return typeof o!="object"||o===null?o:Array.isArray(o)?o.map(J):Object.keys(o).sort((e,s)=>e.localeCompare(s)).reduce((e,s)=>(e[s]=J(o[s]),e),Object.create(o,{}))}function ie(o){return o.replace(/\\u([\dA-Fa-f]{4})/g,(e,s)=>String.fromCharCode(Number.parseInt(s,16)))}function ue(o){try{let e=o.trim();return(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))&&(e=e.slice(1,-1)),e=e.replace(/\\"/g,'"').replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\f/g,"\f").replace(/\\b/g,"\b").replace(/\\\//g,"/"),e}catch{return o}}function C({rawJson:o,sortKeys:e=!0,indentSize:s=3,unescapeUnicode:k=!1,unescapeJsonString:y=!1,repairJson:i=!1}){let u=v(o)?.trim();v(y)&&(u=ue(u));const m=v(i)?ee(u):u,f=JSON.parseBigNum(v(k)?ie(m):m);return JSON.stringify(v(e)?J(f):f,null,v(s))}const pe={key:1,"mb-2":"","mt-2":""},ce=L({__name:"json-viewer",setup(o){const{t:e}=R(),s=O(),k=O(),y=e("tools.json-viewer.text.repair-json"),i=_("json-prettify:raw-json",'{"hello": "world", "foo": "bar"}'),u=_("json-prettify:schema-data",""),m=_("json-prettify:indent-size",3),f=_("json-prettify:sort-keys",!0),b=_("json-prettify:unescape-unicode",!1),w=_("json-prettify:unescape-json",!1),d=_("json-prettify:repair-json",!0),I=q(()=>le(()=>C({rawJson:i,indentSize:m,sortKeys:f,unescapeUnicode:b,unescapeJsonString:w,repairJson:d}),"")),S=G({source:i,rules:[{validator:U=>U===""||C({rawJson:i,indentSize:0,sortKeys:!1,unescapeUnicode:b,unescapeJsonString:w,repairJson:d}),get message(){return e("tools.json-viewer.text.provided-json-is-not-valid")+(v(d)?"":e("tools.json-viewer.text.try-again-with-repairjsonlabel",[y]))}}],watch:[d,b,w]}),j=P({name:"schema",storageName:"json-prettify:schema",defaultValue:""}),{schemas:$,errors:N}=te({json:i,schemaUrl:j,schemaData:u});return(U,n)=>{const h=ae,p=oe,B=H,A=ne,W=se,V=M,D=re,K=F;return g(),x(z,null,[a(A,{justify:"center"},{default:r(()=>[a(p,{label:t(e)("tools.json-viewer.texts.label-sort-keys"),"label-placement":"left","label-width":"100"},{default:r(()=>[a(h,{value:t(f),"onUpdate:value":n[0]||(n[0]=l=>c(f)?f.value=l:null)},null,8,["value"])]),_:1},8,["label"]),a(p,{label:t(e)("tools.json-viewer.texts.label-unescape-unicode"),"label-placement":"left","label-width":"150"},{default:r(()=>[a(h,{value:t(b),"onUpdate:value":n[1]||(n[1]=l=>c(b)?b.value=l:null)},null,8,["value"])]),_:1},8,["label"]),a(p,{label:t(e)("tools.json-viewer.texts.label-unescape-json-string"),"label-placement":"left","label-width":"180"},{default:r(()=>[a(h,{value:t(w),"onUpdate:value":n[2]||(n[2]=l=>c(w)?w.value=l:null)},null,8,["value"])]),_:1},8,["label"]),a(p,{label:t(e)("tools.json-viewer.texts.label-indent-size"),"label-placement":"left","label-width":"100","show-feedback":!1},{default:r(()=>[a(B,{value:t(m),"onUpdate:value":n[3]||(n[3]=l=>c(m)?m.value=l:null),min:"0",max:"10",style:{width:"100px"}},null,8,["value"])]),_:1},8,["label"]),a(p,{label:`${t(y)} :`,"label-placement":"left","label-width":"110"},{default:r(()=>[a(h,{value:t(d),"onUpdate:value":n[4]||(n[4]=l=>c(d)?d.value=l:null)},null,8,["value"])]),_:1},8,["label"])]),_:1}),a(p,{label:t(e)("tools.json-viewer.texts.label-json-schema"),"label-placement":"left","label-width":"130px","label-align":"right"},{default:r(()=>[a(W,{value:t(j),"onUpdate:value":n[5]||(n[5]=l=>c(j)?j.value=l:null),options:[{label:t(e)("tools.json-viewer.texts.label-no-validation"),value:""},{label:t(e)("tools.json-viewer.texts.label-custom"),value:"custom"},...t($).map(l=>({label:`${l.name} / ${l.description}`,value:l.url}))],filterable:"","mb-4":""},null,8,["value","options"])]),_:1},8,["label"]),t(j)==="custom"?(g(),Q(V,{key:0,ref_key:"jsonSchemaInputElement",ref:k,value:t(u),"onUpdate:value":n[6]||(n[6]=l=>c(u)?u.value=l:null),placeholder:t(e)("tools.json-viewer.texts.placeholder-paste-your-json-schema-here"),rows:"20",multiline:"",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",monospace:""},null,8,["value","placeholder"])):E("",!0),a(p,{label:t(e)("tools.json-viewer.texts.label-your-raw-json"),feedback:t(S).message,"validation-status":t(S).status},{default:r(()=>[a(V,{ref_key:"inputElement",ref:s,value:t(i),"onUpdate:value":n[7]||(n[7]=l=>c(i)?i.value=l:null),placeholder:t(e)("tools.json-viewer.texts.placeholder-paste-your-raw-json-here"),rows:"20",multiline:"",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",monospace:""},null,8,["value","placeholder"])]),_:1},8,["label","feedback","validation-status"]),t(N).length>0?(g(),x("div",pe,[a(D,{title:t(e)("tools.json-viewer.texts.title-schema-validation-errors"),type:"error"},{default:r(()=>[(g(!0),x(z,null,T(t(N),l=>(g(),x("ul",{key:l},[X("li",null,Y(l),1)]))),128))]),_:1},8,["title"])])):E("",!0),a(p,{label:t(e)("tools.json-viewer.texts.label-prettified-version-of-your-json")},{default:r(()=>[a(K,{value:t(I),language:"json","follow-height-of":t(s),"download-file-name":"output.json"},null,8,["value","follow-height-of"])]),_:1},8,["label"])],64)}}});const Be=Z(ce,[["__scopeId","data-v-ef4ad004"]]);export{Be as default};
