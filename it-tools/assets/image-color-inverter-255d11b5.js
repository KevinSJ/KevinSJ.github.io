import{d as R,a0 as A,r as I,f as S,o as d,j as p,w as a,k as _,l as e,a6 as f,G as v,ad as w,a as x,c as V,aW as z,cA as L,s as O,af as P,bq as W}from"./index-0c1fde36.js";import{u as q}from"./downloadBase64-508288e2.js";import{w as G}from"./defaults-4d6daddf.js";import{N as H}from"./Alert-a9fb131b.js";import{_ as M}from"./Divider-5fc425b0.js";import{_ as T,a as J}from"./Grid-1acaa06e.js";import{_ as K}from"./Space-7fc52151.js";import{_ as Q}from"./Spin-885f2a22.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./get-slot-1efb97e5.js";function X(h){return new Promise((i,o)=>{if(!h.type.startsWith("image/")){o(new Error("File must be an image"));return}const r=10*1024*1024;if(h.size>r){o(new Error("Image file size must be less than 10MB"));return}const c=new FileReader;c.onload=()=>{const n=new Image;n.src=c.result,n.onload=()=>{try{const s=document.createElement("canvas"),u=s.getContext("2d");if(!u){o(new Error("Failed to get canvas context"));return}s.width=n.width,s.height=n.height,u.drawImage(n,0,0);const y=u.getImageData(0,0,s.width,s.height),l=y.data;for(let t=0;t<l.length;t+=4)l[t]=255-l[t],l[t+1]=255-l[t+1],l[t+2]=255-l[t+2];u.putImageData(y,0,0);const g=s.toDataURL("image/png");i(g)}catch(s){o(new Error(`Failed to process image: ${s}`))}},n.onerror=()=>{o(new Error("Failed to load image"))}},c.onerror=()=>{o(new Error("Failed to read file"))},c.readAsDataURL(h)})}const Y={class:"image-container"},Z=["src"],j={class:"image-container"},ee=["src"],te={key:3,style:{"margin-top":"16px","text-align":"center"}},oe=R({__name:"image-color-inverter",setup(h){const{t:i}=A(),o=I(""),r=I(""),c=I(!1),n=I(null),{copy:s}=S({source:r,text:i("tools.image-color-inverter.texts.text-inverted-image-base64-copied-to-clipboard")}),{download:u}=q({source:r,filename:"inverted-image",extension:"png"});function y(g){if(!g)return;n.value=null,c.value=!0;const t=new FileReader;t.onload=m=>{o.value=m.target?.result},t.readAsDataURL(g),X(g).then(m=>{r.value=m}).catch(m=>{n.value=G(m,"Failed to process image")}).finally(()=>{c.value=!1})}function l(){o.value="",r.value="",n.value=null}return(g,t)=>{const m=z,b=H,E=M,F=L,C=T,k=O,N=K,B=J,U=Q,$=P;return d(),p($,null,{default:a(()=>[_(m,{title:e(i)("tools.image-color-inverter.texts.title-drag-and-drop-an-image-here-or-click-to-select"),accept:"image/*",onFileUpload:y},null,8,["title"]),_(U,{show:e(c),style:{width:"100%"}},{default:a(()=>[e(n)?(d(),p(b,{key:0,style:{"margin-top":"16px"},type:"error","show-icon":!1},{default:a(()=>[f(v(e(n)),1)]),_:1})):w("",!0),e(o)||e(r)?(d(),p(E,{key:1})):w("",!0),e(o)||e(r)?(d(),p(B,{key:2,cols:2,"x-gap":16},{default:a(()=>[e(o)?(d(),p(C,{key:0},{default:a(()=>[x("div",null,[_(F,null,{default:a(()=>[f(v(e(i)("tools.image-color-inverter.texts.tag-original-image")),1)]),_:1}),x("div",Y,[x("img",{src:e(o),alt:"Original"},null,8,Z)])])]),_:1})):w("",!0),e(r)?(d(),p(C,{key:1},{default:a(()=>[x("div",null,[_(F,null,{default:a(()=>[f(v(e(i)("tools.image-color-inverter.texts.tag-inverted-image")),1)]),_:1}),x("div",j,[x("img",{src:e(r),alt:"Inverted"},null,8,ee)]),_(N,{style:{"margin-top":"12px"},justify:"start"},{default:a(()=>[_(k,{onClick:t[0]||(t[0]=D=>e(u)())},{default:a(()=>[f(v(e(i)("tools.image-color-inverter.texts.tag-download-png")),1)]),_:1}),_(k,{onClick:t[1]||(t[1]=D=>e(s)())},{default:a(()=>[f(v(e(i)("tools.image-color-inverter.texts.tag-copy-base64")),1)]),_:1})]),_:1})])]),_:1})):w("",!0)]),_:1})):w("",!0),e(o)||e(r)?(d(),V("div",te,[_(k,{secondary:"",onClick:t[2]||(t[2]=D=>l())},{default:a(()=>[f(v(e(i)("tools.image-color-inverter.texts.tag-clear-upload-new")),1)]),_:1})])):w("",!0)]),_:1},8,["show"])]),_:1})}}});const ge=W(oe,[["__scopeId","data-v-298a27b6"]]);export{ge as default};
