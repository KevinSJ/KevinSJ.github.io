import{o as a,c as l,P as s,d as n,bY as i,l as e,cf as c,k as y,bq as h}from"./index-0c1fde36.js";const f={class:"markdown-body"},p=s('<h1>Processing JSON using jq</h1><p>jq is useful to slice, filter, map and transform structured json data.</p><h2>Installing jq</h2><h3>On Mac OS</h3><p><code>brew install jq</code></p><h3>On AWS Linux</h3><p>Not available as yum install on our current AMI. It should be on the latest AMI though: <a href="https://aws.amazon.com/amazon-linux-ami/2015.09-release-notes/">https://aws.amazon.com/amazon-linux-ami/2015.09-release-notes/</a></p><p>Installing from the source proved to be tricky.</p><h2>Useful arguments</h2><p>When running jq, the following arguments may become handy:</p><table><thead><tr><th>Argument</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td><code>--version</code></td><td style="text-align:left;">Output the jq version and exit with zero.</td></tr><tr><td><code>--sort-keys</code></td><td style="text-align:left;">Output the fields of each object with the keys in sorted order.</td></tr></tbody></table><h2>Basic concepts</h2><p>The syntax for jq is pretty coherent:</p><table><thead><tr><th>Syntax</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td>,</td><td style="text-align:left;">Filters separated by a comma will produce multiple independent outputs</td></tr><tr><td>?</td><td style="text-align:left;">Will ignores error if the type is unexpected</td></tr><tr><td>[]</td><td style="text-align:left;">Array construction</td></tr><tr><td>{}</td><td style="text-align:left;">Object construction</td></tr><tr><td>+</td><td style="text-align:left;">Concatenate or Add</td></tr><tr><td>-</td><td style="text-align:left;">Difference of sets or Substract</td></tr><tr><td>length</td><td style="text-align:left;">Size of selected element</td></tr><tr><td>|</td><td style="text-align:left;">Pipes are used to chain commands in a similar fashion than bash</td></tr></tbody></table><h2>Dealing with json objects</h2><table><thead><tr><th>Description</th><th style="text-align:left;">Command</th></tr></thead><tbody><tr><td>Display all keys</td><td style="text-align:left;"><code>jq &#39;keys&#39;</code></td></tr><tr><td>Adds + 1 to all items</td><td style="text-align:left;"><code>jq &#39;map_values(.+1)&#39;</code></td></tr><tr><td>Delete a key</td><td style="text-align:left;"><code>jq &#39;del(.foo)&#39;</code></td></tr><tr><td>Convert an object to array</td><td style="text-align:left;"><code>to_entries &amp;#124; map([.key, .value])</code></td></tr></tbody></table><h2>Dealing with fields</h2><table><thead><tr><th>Description</th><th style="text-align:left;">Command</th></tr></thead><tbody><tr><td>Concatenate two fields</td><td style="text-align:left;"><code>fieldNew=.field1+&#39; &#39;+.field2</code></td></tr></tbody></table><h2>Dealing with json arrays</h2><h3>Slicing and Filtering</h3><table><thead><tr><th>Description</th><th style="text-align:left;">Command</th></tr></thead><tbody><tr><td>All</td><td style="text-align:left;"><code>jq .[]</code></td></tr><tr><td>First</td><td style="text-align:left;"><code>jq &#39;.[0]&#39;</code></td></tr><tr><td>Range</td><td style="text-align:left;"><code>jq &#39;.[2:4]&#39;</code></td></tr><tr><td>First 3</td><td style="text-align:left;"><code>jq &#39;.[:3]&#39;</code></td></tr><tr><td>Last 2</td><td style="text-align:left;"><code>jq &#39;.[-2:]&#39;</code></td></tr><tr><td>Before Last</td><td style="text-align:left;"><code>jq &#39;.[-2]&#39;</code></td></tr><tr><td>Select array of int by value</td><td style="text-align:left;"><code>jq &#39;map(select(. &gt;= 2))&#39;</code></td></tr><tr><td>Select array of objects by value</td><td style="text-align:left;"><code>jq &#39;.[] &amp;#124; select(.id == &quot;second&quot;)&#39;</code></td></tr><tr><td>Select by type</td><td style="text-align:left;"><code>jq &#39;.[] &amp;#124; numbers&#39;</code> with type been arrays, objects, iterables, booleans, numbers, normals, finites, strings, nulls, values, scalars</td></tr></tbody></table><h3>Mapping and Transforming</h3><table><thead><tr><th>Description</th><th style="text-align:left;">Command</th></tr></thead><tbody><tr><td>Add + 1 to all items</td><td style="text-align:left;"><code>jq &#39;map(.+1)&#39;</code></td></tr><tr><td>Delete 2 items</td><td style="text-align:left;"><code>jq &#39;del(.[1, 2])&#39;</code></td></tr><tr><td>Concatenate arrays</td><td style="text-align:left;"><code>jq &#39;add&#39;</code></td></tr><tr><td>Flatten an array</td><td style="text-align:left;"><code>jq &#39;flatten&#39;</code></td></tr><tr><td>Create a range of numbers</td><td style="text-align:left;"><code>jq &#39;[range(2;4)]&#39;</code></td></tr><tr><td>Display the type of each item</td><td style="text-align:left;"><code>jq &#39;map(type)&#39;</code></td></tr><tr><td>Sort an array of basic type</td><td style="text-align:left;"><code>jq &#39;sort&#39;</code></td></tr><tr><td>Sort an array of objects</td><td style="text-align:left;"><code>jq &#39;sort_by(.foo)&#39;</code></td></tr><tr><td>Group by a key - opposite to flatten</td><td style="text-align:left;"><code>jq &#39;group_by(.foo)&#39;</code></td></tr><tr><td>Minimun value of an array</td><td style="text-align:left;"><code>jq &#39;min&#39;</code> .See also min, max, min_by(path_exp), max_by(path_exp)</td></tr><tr><td>Remove duplicates</td><td style="text-align:left;"><code>jq &#39;unique&#39;</code> or <code>jq &#39;unique_by(.foo)&#39;</code> or <code>jq &#39;unique_by(length)&#39;</code></td></tr><tr><td>Reverse an array</td><td style="text-align:left;"><code>jq &#39;reverse&#39;</code></td></tr></tbody></table>',23),m=[p],g={__name:"jq",setup(o,{expose:t}){return t({frontmatter:{}}),(r,x)=>(a(),l("div",f,m))}},u=n({__name:"jq-memo",setup(o){i(d=>({"8c4748b0":e(t).cardColor,"6d67cc34":e(t).textColor1}));const t=c();return(d,r)=>(a(),l("div",null,[y(e(g),{style:{"overflow-x":"auto"}})]))}});const j=h(u,[["__scopeId","data-v-f4ec9a9a"]]);export{j as default};
