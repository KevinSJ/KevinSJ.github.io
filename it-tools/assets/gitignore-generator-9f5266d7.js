import{d as S,a0 as C,aY as f,r as s,b0 as k,o as v,c as N,k as c,l as e,m as $,w as m,a6 as B,G as j,j as V,ad as D,aj as T,af as E}from"./index-0c1fde36.js";import{_ as G}from"./TextareaCopyable-59231e95.js";import{_ as L}from"./Select-9917c364.js";import{_ as M}from"./Space-7fc52151.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./Tag-e75b8dae.js";import"./FocusDetector-089b8822.js";import"./VirtualList-8140ffff.js";import"./Empty-ca426d71.js";import"./index-cbfaa337.js";import"./get-slot-1efb97e5.js";const P=1e3*60*60*24,ot=S({__name:"gitignore-generator",setup(W){const{t:u}=C(),a=f("gitignore-gen:opts",[]),r=s([]),p=s(""),_=s(""),g=s(!1),d=f("gitignore-gen:ts",0);async function h(){const o=Date.now();if(!a.value.length||o-d.value>P)try{const l=await(await fetch("https://api.github.com/repos/github/gitignore/git/trees/main?recursive=true")).json();a.value=l.tree.filter(t=>t.path.endsWith(".gitignore")).map(t=>t.path.replace(".gitignore","")).filter(Boolean).map(t=>({label:t,value:t})),d.value=o}catch{a.value?.length||(a.value=["C++","CMake","Dotnet","Node","Java","Swift","Symfony","Python","VisualStudio","WordPress"].map(n=>({label:n,value:n})))}}async function y(){if(r.value.length){_.value="",g.value=!0;try{let o="";for(const i of r.value){const n=`https://raw.githubusercontent.com/github/gitignore/main/${i}.gitignore`,t=await(await fetch(n)).text();o+=`${o?`

`:""}# === .gitignore for ${i} (${n}) ===

${t}`}p.value=o}catch(o){_.value=o.toString()}finally{g.value=!1}}}return k(h),(o,i)=>{const n=L,l=T,t=M,b=G,w=E;return v(),N("div",null,[c(n,{value:e(r),"onUpdate:value":i[0]||(i[0]=x=>$(r)?r.value=x:null),options:e(a),multiple:"",filterable:"",placeholder:e(u)("tools.gitignore-generator.texts.placeholder-select-templates-e-g-node-python-vue"),style:{width:"100%"},disable:!e(a)},null,8,["value","options","placeholder","disable"]),c(t,{justify:"center"},{default:m(()=>[c(l,{type:"primary",style:{"margin-top":"12px"},loading:e(g),disable:!e(a),onClick:y},{default:m(()=>[B(j(e(u)("tools.gitignore-generator.texts.tag-generate")),1)]),_:1},8,["loading","disable"])]),_:1}),e(p)?(v(),V(w,{key:0,title:e(u)("tools.gitignore-generator.texts.title-gitignore"),"mt-2":""},{default:m(()=>[c(b,{value:e(p),language:"bash","download-file-name":".gitignore"},null,8,["value"])]),_:1},8,["title"])):D("",!0)])}}});export{ot as default};
