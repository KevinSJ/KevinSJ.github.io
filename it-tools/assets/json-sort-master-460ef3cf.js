import{g as u,d as h,a0 as N,r as g,al as V,ac as k,i as J,R as S,aX as B,o as x,c as A,a as b,k as c,l as s,m as _,j as E,ad as I,w as j,a7 as K,ae as U,x as z,bq as R}from"./index-0c1fde36.js";import{w as q}from"./defaults-4d6daddf.js";import{_ as D}from"./TextareaCopyable-59231e95.js";import{_ as F}from"./FormItem-1b9a5952.js";import"./base64-ae7cf34b.js";import"./index-a6f01dde.js";import"./downloadBase64-508288e2.js";import"./index-6fddb70d.js";import"./index-cfd4d427.js";import"./Copy-ef9ec73c.js";import"./Scrollbar-54724e22.js";import"./context-00991937.js";function f(t,e){return typeof t!="object"||t===null?t:Array.isArray(t)?t.map(o=>f(o,e)):Object.keys(t).sort((o,a)=>e==="key_name"?o.localeCompare(a):a.localeCompare(o)).reduce((o,a)=>(o[a]=f(t[a],e),o),Object.create(t,{}))}function w(t,e,o){return Array.isArray(t)?t.sort((a,l)=>{const n=a[o],r=l[o];return typeof n=="number"&&typeof r=="number"?e==="key_val"?n-r:r-n:typeof n=="string"&&typeof r=="string"?e==="key_val"?n.localeCompare(r):r.localeCompare(n):0}):typeof t=="object"&&t!==null?Object.keys(t).sort((l,n)=>e==="key_val"?l.localeCompare(n):n.localeCompare(l)).reduce((l,n)=>(l[n]=w(t[n],e,o),l),Object.create(t,{})):t}function P({rawJson:t,sortMethod:e="key_name",keyName:o="",indentSize:a=3}){const l=JSON.parseBigNum(u(t));return["key_name","key_name_desc"].includes(u(e))?JSON.stringify(f(l,u(e)),null,u(a)):JSON.stringify(w(l,u(e),u(o)),null,u(a))}const Q={style:{flex:"0 0 100%"}},T={style:{margin:"0 auto","max-width":"400px"},flex:"","justify-center":"","gap-3":""},X=h({__name:"json-sort-master",setup(t){const{t:e}=N(),o=g(),a=V("json-prettify:raw-json",'{"hello": "world", "foo": "bar"}'),l=k({name:"sort",storageName:"json-prettify:sort-method",defaultValue:"key_name"}),n=k({name:"indent",storageName:"json-prettify:indent-size",defaultValue:3}),r=g(""),O=J(()=>q(()=>P({rawJson:a,sortMethod:l,keyName:r,indentSize:n}),"")),d=S({source:a,rules:[{validator:p=>p===""||B.parse(p),message:e("tools.json-sort-master.texts.message-provided-json-is-not-valid")}]});return(p,i)=>{const C=U,y=z,v=F;return x(),A(K,null,[b("div",Q,[b("div",T,[c(C,{value:s(l),"onUpdate:value":i[0]||(i[0]=m=>_(l)?l.value=m:null),"mb-4":"",style:{width:"200px"},label:s(e)("tools.json-sort-master.texts.label-sort-method"),options:[{label:s(e)("tools.json-sort-master.texts.label-key-name"),value:"key_name"},{label:s(e)("tools.json-sort-master.texts.label-key-value"),value:"key_val"},{label:s(e)("tools.json-sort-master.texts.label-key-name-descending"),value:"key_name_desc"},{label:s(e)("tools.json-sort-master.texts.label-key-value-descending"),value:"key_val_desc"}]},null,8,["value","label","options"]),["key_name","key_name_desc"].includes(s(l))?I("",!0):(x(),E(y,{key:0,value:s(r),"onUpdate:value":i[1]||(i[1]=m=>_(r)?r.value=m:null),label:s(e)("tools.json-sort-master.texts.label-key-name"),style:{width:"200px"},clearable:"","raw-text":""},null,8,["value","label"]))])]),c(v,{label:s(e)("tools.json-sort-master.texts.label-your-raw-json"),feedback:s(d).message,"validation-status":s(d).status},{default:j(()=>[c(y,{ref_key:"inputElement",ref:o,value:s(a),"onUpdate:value":i[2]||(i[2]=m=>_(a)?a.value=m:null),placeholder:s(e)("tools.json-sort-master.texts.placeholder-paste-your-raw-json-here"),rows:"20",multiline:"",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",monospace:""},null,8,["value","placeholder"])]),_:1},8,["label","feedback","validation-status"]),c(v,{label:s(e)("tools.json-sort-master.texts.label-sorted-version-of-your-json")},{default:j(()=>[c(D,{value:s(O),language:"json","follow-height-of":s(o)},null,8,["value","follow-height-of"])]),_:1},8,["label"])],64)}}});const oe=R(X,[["__scopeId","data-v-f714119a"]]);export{oe as default};
