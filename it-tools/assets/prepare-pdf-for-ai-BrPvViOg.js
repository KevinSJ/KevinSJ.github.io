const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-eEAMQJTJ.js","assets/main-CdZmBCMR.js","assets/style-ynO7IsM1.js","assets/style-BjgAlZWF.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as $,i as P}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{n as A,o as k,s as a,a as p,b as y,d as _,h as x,_ as N,f as h,r as S,e as M}from"./main-CdZmBCMR.js";import"./mobileMenu-BoMunYmR.js";const w=new A(k("pymupdf"));document.addEventListener("DOMContentLoaded",()=>{const d=document.getElementById("file-input"),c=document.getElementById("drop-zone"),f=document.getElementById("process-btn"),u=document.getElementById("file-display-area"),E=document.getElementById("extract-options"),L=document.getElementById("file-controls"),I=document.getElementById("add-more-btn"),B=document.getElementById("clear-files-btn"),b=document.getElementById("back-to-tools");b&&b.addEventListener("click",()=>{window.location.href="/itools/"});const v=async()=>{if(!(!u||!E||!f||!L))if(a.files.length>0){u.innerHTML="";for(let e=0;e<a.files.length;e++){const t=a.files[e],s=document.createElement("div");s.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const i=document.createElement("div");i.className="flex flex-col overflow-hidden";const r=document.createElement("div");r.className="truncate font-medium text-gray-200 text-sm mb-1",r.textContent=t.name;const l=document.createElement("div");l.className="text-xs text-gray-400",l.textContent=`${h(t.size)} • Loading pages...`,i.append(r,l);const n=document.createElement("button");n.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",n.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',n.onclick=()=>{a.files=a.files.filter((o,m)=>m!==e),v()},s.append(i,n),u.appendChild(s);try{const o=await S(t),m=await M({data:o}).promise;l.textContent=`${h(t.size)} • ${m.numPages} pages`}catch(o){console.error("Error loading PDF:",o),l.textContent=`${h(t.size)} • Could not load page count`}}$({icons:P}),L.classList.remove("hidden"),E.classList.remove("hidden"),f.disabled=!1}else u.innerHTML="",L.classList.add("hidden"),E.classList.add("hidden"),f.disabled=!0},g=()=>{a.files=[],a.pdfDoc=null,v()},C=async()=>{try{if(a.files.length===0){p("No Files","Please select at least one PDF file.");return}y("Loading engine..."),await w.load();const e=a.files.length;let t=0,s=0;if(e===1){const i=a.files[0];y(`Extracting ${i.name} for AI...`);const r=await w.pdfToLlamaIndex(i),l=i.name.replace(/\.pdf$/i,"")+"_llm.json",n=JSON.stringify(r,null,2);_(new Blob([n],{type:"application/json"}),l),x(),p("Extraction Complete","Successfully extracted PDF for AI/LLM use.","success",()=>g())}else{const i=(await N(async()=>{const{default:n}=await import("./jszip.min-eEAMQJTJ.js").then(o=>o.j);return{default:n}},__vite__mapDeps([0,1,2,3,4]))).default,r=new i;for(const n of a.files)try{y(`Extracting ${n.name} for AI (${t+1}/${e})...`);const o=await w.pdfToLlamaIndex(n),m=n.name.replace(/\.pdf$/i,"")+"_llm.json",F=JSON.stringify(o,null,2);r.file(m,F),t++}catch(o){console.error(`Failed to extract ${n.name}:`,o),s++}y("Creating ZIP archive...");const l=await r.generateAsync({type:"blob"});_(l,"pdf-for-ai.zip"),x(),s===0?p("Extraction Complete",`Successfully extracted ${t} PDF(s) for AI/LLM use.`,"success",()=>g()):p("Extraction Partial",`Extracted ${t} PDF(s), failed ${s}.`,"warning",()=>g())}}catch(e){x(),p("Error",`An error occurred during extraction. Error: ${e.message}`)}},D=e=>{if(e&&e.length>0){const t=Array.from(e).filter(s=>s.type==="application/pdf"||s.name.toLowerCase().endsWith(".pdf"));t.length>0&&(a.files=[...a.files,...t],v())}};d&&c&&(d.addEventListener("change",e=>{D(e.target.files)}),c.addEventListener("dragover",e=>{e.preventDefault(),c.classList.add("bg-gray-700")}),c.addEventListener("dragleave",e=>{e.preventDefault(),c.classList.remove("bg-gray-700")}),c.addEventListener("drop",e=>{e.preventDefault(),c.classList.remove("bg-gray-700"),D(e.dataTransfer?.files??null)}),d.addEventListener("click",()=>{d.value=""})),I&&I.addEventListener("click",()=>{d.click()}),B&&B.addEventListener("click",g),f&&f.addEventListener("click",C)});
