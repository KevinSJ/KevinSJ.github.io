import{c as v,i as h}from"./style-ynO7IsM1.js";import"./version-BXrBJCm5.js";import"./full-width-DliZ98Ur.js";import"./simple-mode-footer-C6L5gDe0.js";import{G as y,a as m,b as E,e as g,r as f,d as w,h as b,f as p}from"./main-CdZmBCMR.js";import{J as L}from"./jszip.min-eEAMQJTJ.js";import"./mobileMenu-BoMunYmR.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";y.workerSrc=new URL("/itools/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();let l=[];const u=()=>{const t=document.getElementById("file-display-area"),n=document.getElementById("options-panel"),d=document.getElementById("drop-zone");!t||!n||!d||(t.innerHTML="",l.length>0?(n.classList.remove("hidden"),l.forEach(o=>{const s=document.createElement("div");s.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const e=document.createElement("div");e.className="flex flex-col overflow-hidden";const a=document.createElement("div");a.className="truncate font-medium text-gray-200 text-sm mb-1",a.textContent=o.name;const r=document.createElement("div");r.className="text-xs text-gray-400",r.textContent=`${p(o.size)} • Loading pages...`,e.append(a,r);const c=document.createElement("button");c.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",c.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',c.onclick=()=>{l=[],u()},s.append(e,c),t.appendChild(s),f(o).then(i=>g(i).promise).then(i=>{r.textContent=`${p(o.size)} • ${i.numPages} page${i.numPages!==1?"s":""}`}).catch(i=>{console.warn("Error loading PDF page count:",i),r.textContent=p(o.size)})}),v({icons:h})):n.classList.add("hidden"))},x=()=>{l=[];const t=document.getElementById("file-input");t&&(t.value=""),u()};async function B(){if(l.length===0){m("No File","Please upload a PDF file first.");return}E("Converting to BMP...");try{const t=await g(await f(l[0])).promise,n=new L;for(let o=1;o<=t.numPages;o++){const s=await t.getPage(o),e=s.getViewport({scale:2}),a=document.createElement("canvas"),r=a.getContext("2d");a.height=e.height,a.width=e.width,await s.render({canvasContext:r,viewport:e,canvas:a}).promise;const c=await new Promise(i=>a.toBlob(i,"image/bmp"));c&&n.file(`page_${o}.bmp`,c)}const d=await n.generateAsync({type:"blob"});w(d,"converted_images.zip"),m("Success","PDF converted to BMPs successfully!","success",()=>{x()})}catch(t){console.error(t),m("Error","Failed to convert PDF to BMP. The file might be corrupted.")}finally{b()}}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("file-input"),n=document.getElementById("drop-zone"),d=document.getElementById("process-btn"),o=document.getElementById("back-to-tools");o&&o.addEventListener("click",()=>{window.location.href="/itools/"});const s=e=>{if(!e||e.length===0)return;const a=Array.from(e).filter(r=>r.type==="application/pdf");if(a.length===0){m("Invalid File","Please upload a PDF file.");return}l=[a[0]],u()};t&&n&&(t.addEventListener("change",e=>{s(e.target.files)}),n.addEventListener("dragover",e=>{e.preventDefault(),n.classList.add("bg-gray-700")}),n.addEventListener("dragleave",e=>{e.preventDefault(),n.classList.remove("bg-gray-700")}),n.addEventListener("drop",e=>{e.preventDefault(),n.classList.remove("bg-gray-700"),s(e.dataTransfer?.files??null)}),t.addEventListener("click",()=>{t.value=""})),d&&d.addEventListener("click",B)});
